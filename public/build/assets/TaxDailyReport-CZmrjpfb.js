import{d as Z,aQ as G,p as D,r as h,am as X,c as b,g as v,w as t,b as l,e as m,u as e,a1 as aa,s as n,L as ea,aO as la,t as ta,Z as B,v as S,F as N,x as V,K as u,ao as x,j as sa}from"./vendor-FclwbLvj.js";import{_ as na}from"./AppLayout.vue_vue_type_script_setup_true_lang-ySs7Rre_.js";import{_ as ra}from"./Pagination.vue_vue_type_script_setup_true_lang-CQM_G0lK.js";import{_}from"./index-B4cH97KR.js";import{_ as ua}from"./Input.vue_vue_type_script_setup_true_lang-ZVESK4JK.js";import{_ as E,a as U,b as L,c as A,d as w}from"./SelectValue.vue_vue_type_script_setup_true_lang-BqISnkMA.js";import{_ as ia,a as oa,b as j,c as d,d as da,e as i}from"./TableHeader.vue_vue_type_script_setup_true_lang-BhZiDflO.js";import"./index-CSEUMRIG.js";import"./AvatarFallback.vue_vue_type_script_setup_true_lang-ByVucR83.js";import"./AvatarImage.vue_vue_type_script_setup_true_lang-9OZOAxj9.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-D90ORJgI.js";import"./index-BUE9bFsX.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-ZLo4HemS.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-DuXcz617.js";const ma={class:"rounded-xl p-4 space-y-6 py-6"},fa={class:"flex items-center justify-between"},pa={class:"mb-4 space-y-4"},va={class:"flex items-center gap-4"},_a={class:"relative flex-1 max-w-md"},ga={class:"flex flex-wrap items-center gap-4"},ca={class:"rounded-md border overflow-x-auto"},ya={class:"flex flex-col items-center justify-center gap-2"},Ta=Z({__name:"TaxDailyReport",props:{data:{},filters:{}},setup(P){const o=P,O=G(),F=D(()=>O.url.split("?")[0]),g=h(o.filters.q||""),f=h(o.filters.year?String(o.filters.year):"all"),p=h(o.filters.month?String(o.filters.month):"all"),k=h(o.filters.sort_by||"tanggal"),c=h(o.filters.sort_dir||"desc"),$=h(!1),q=D(()=>{const r=new Date().getFullYear(),a=Array.from({length:6},(z,Q)=>r-Q),s=o.filters.year;return s&&!a.includes(s)&&a.unshift(s),a}),R=[{value:"1",label:"Januari"},{value:"2",label:"Februari"},{value:"3",label:"Maret"},{value:"4",label:"April"},{value:"5",label:"Mei"},{value:"6",label:"Juni"},{value:"7",label:"Juli"},{value:"8",label:"Agustus"},{value:"9",label:"September"},{value:"10",label:"Oktober"},{value:"11",label:"November"},{value:"12",label:"Desember"}],C=X(()=>{sa.get(F.value,{q:g.value||void 0,year:f.value!=="all"?f.value:void 0,month:p.value!=="all"?p.value:void 0,per_page:o.data.per_page,sort_by:k.value,sort_dir:c.value},{preserveState:!0,preserveScroll:!0})},300),T=()=>{C()},J=()=>{g.value="",f.value="all",p.value="all",k.value="tanggal",c.value="desc",C()},K=D(()=>!!g.value||f.value!=="all"||p.value!=="all"),y=r=>{k.value===r?c.value=c.value==="asc"?"desc":"asc":(k.value=r,c.value="asc"),C()},I=r=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(r||0),Y=r=>{if(!r)return"-";const a=new Date(r);return Number.isNaN(a.getTime())?r:a.toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric"})},H=r=>{if(r==null)return"-";const a=r>1?r/100:r;return new Intl.NumberFormat("id-ID",{style:"percent",minimumFractionDigits:0,maximumFractionDigits:2}).format(a)},M=async()=>{$.value=!0;try{const r=new URLSearchParams;g.value&&r.append("q",g.value),f.value!=="all"&&r.append("year",f.value),p.value!=="all"&&r.append("month",p.value),r.append("sort_by",k.value),r.append("sort_dir",c.value);const a=`${F.value}/export?${r.toString()}`,s=document.createElement("a");s.href=a,s.download="",document.body.appendChild(s),s.click(),document.body.removeChild(s)}catch(r){console.error("Export error:",r),alert("Terjadi kesalahan saat export data")}finally{$.value=!1}},W=D(()=>({q:g.value||void 0,year:f.value!=="all"?f.value:void 0,month:p.value!=="all"?p.value:void 0,per_page:o.data.per_page,sort_by:k.value,sort_dir:c.value}));return(r,a)=>(v(),b(na,null,{default:t(()=>[l(e(aa),{title:"Laporan Pajak Harian"}),m("div",ma,[m("div",fa,[a[11]||(a[11]=m("div",null,[m("h1",{class:"text-3xl font-bold tracking-tight"},"Laporan Pajak Harian"),m("p",{class:"text-muted-foreground"}," Detail transaksi pajak per hari. ")],-1)),l(e(_),{onClick:M,disabled:$.value,variant:"default",class:"gap-2"},{default:t(()=>[$.value?(v(),b(e(ea),{key:0,class:"h-4 w-4 animate-spin"})):(v(),b(e(la),{key:1,class:"h-4 w-4"})),a[10]||(a[10]=n(" Export Excel ",-1))]),_:1},8,["disabled"])]),m("div",pa,[m("div",va,[m("div",_a,[l(e(B),{class:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),l(e(ua),{modelValue:g.value,"onUpdate:modelValue":a[0]||(a[0]=s=>g.value=s),placeholder:"Cari username, nama, email, NPWP, NIK...",class:"pl-10",onInput:e(C)},null,8,["modelValue","onInput"])]),K.value?(v(),b(e(_),{key:0,variant:"outline",size:"sm",onClick:J},{default:t(()=>[...a[12]||(a[12]=[n(" Reset Filter ",-1)])]),_:1})):ta("",!0)]),m("div",ga,[l(e(E),{modelValue:f.value,"onUpdate:modelValue":[a[1]||(a[1]=s=>f.value=s),T]},{default:t(()=>[l(e(U),{class:"w-[160px]"},{default:t(()=>[l(e(L),{placeholder:"Semua Tahun"})]),_:1}),l(e(A),null,{default:t(()=>[l(e(w),{value:"all"},{default:t(()=>[...a[13]||(a[13]=[n("Semua Tahun",-1)])]),_:1}),(v(!0),S(N,null,V(q.value,s=>(v(),b(e(w),{key:s,value:String(s)},{default:t(()=>[n(u(s),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),l(e(E),{modelValue:p.value,"onUpdate:modelValue":[a[2]||(a[2]=s=>p.value=s),T]},{default:t(()=>[l(e(U),{class:"w-[180px]"},{default:t(()=>[l(e(L),{placeholder:"Semua Bulan"})]),_:1}),l(e(A),null,{default:t(()=>[l(e(w),{value:"all"},{default:t(()=>[...a[14]||(a[14]=[n("Semua Bulan",-1)])]),_:1}),(v(),S(N,null,V(R,s=>l(e(w),{key:s.value,value:s.value},{default:t(()=>[n(u(s.label),1)]),_:2},1032,["value"])),64))]),_:1})]),_:1},8,["modelValue"])])]),m("div",ca,[l(e(ia),null,{default:t(()=>[l(e(oa),null,{default:t(()=>[l(e(j),null,{default:t(()=>[l(e(d),{class:"w-[60px]"},{default:t(()=>[...a[15]||(a[15]=[n("No",-1)])]),_:1}),l(e(d),null,{default:t(()=>[l(e(_),{variant:"ghost",size:"sm",class:"-ml-4 h-8",onClick:a[3]||(a[3]=s=>y("tanggal"))},{default:t(()=>[a[16]||(a[16]=n(" Tanggal ",-1)),l(e(x),{class:"ml-2 h-4 w-4"})]),_:1})]),_:1}),l(e(d),null,{default:t(()=>[l(e(_),{variant:"ghost",size:"sm",class:"-ml-4 h-8",onClick:a[4]||(a[4]=s=>y("tahun_pajak"))},{default:t(()=>[a[17]||(a[17]=n(" Tahun Pajak ",-1)),l(e(x),{class:"ml-2 h-4 w-4"})]),_:1})]),_:1}),l(e(d),null,{default:t(()=>[l(e(_),{variant:"ghost",size:"sm",class:"-ml-4 h-8",onClick:a[5]||(a[5]=s=>y("username"))},{default:t(()=>[a[18]||(a[18]=n(" Username ",-1)),l(e(x),{class:"ml-2 h-4 w-4"})]),_:1})]),_:1}),l(e(d),null,{default:t(()=>[l(e(_),{variant:"ghost",size:"sm",class:"-ml-4 h-8",onClick:a[6]||(a[6]=s=>y("name"))},{default:t(()=>[a[19]||(a[19]=n(" Nama ",-1)),l(e(x),{class:"ml-2 h-4 w-4"})]),_:1})]),_:1}),l(e(d),null,{default:t(()=>[...a[20]||(a[20]=[n("Fullname",-1)])]),_:1}),l(e(d),null,{default:t(()=>[...a[21]||(a[21]=[n("Email",-1)])]),_:1}),l(e(d),null,{default:t(()=>[...a[22]||(a[22]=[n("Telepon",-1)])]),_:1}),l(e(d),null,{default:t(()=>[...a[23]||(a[23]=[n("NPWP",-1)])]),_:1}),l(e(d),null,{default:t(()=>[...a[24]||(a[24]=[n("NIK",-1)])]),_:1}),l(e(d),null,{default:t(()=>[...a[25]||(a[25]=[n("Alamat",-1)])]),_:1}),l(e(d),{class:"text-right"},{default:t(()=>[l(e(_),{variant:"ghost",size:"sm",class:"-mr-4 h-8",onClick:a[7]||(a[7]=s=>y("jumlah_bruto"))},{default:t(()=>[a[26]||(a[26]=n(" Bruto ",-1)),l(e(x),{class:"ml-2 h-4 w-4"})]),_:1})]),_:1}),l(e(d),{class:"text-right"},{default:t(()=>[l(e(_),{variant:"ghost",size:"sm",class:"-mr-4 h-8",onClick:a[8]||(a[8]=s=>y("tarif"))},{default:t(()=>[a[27]||(a[27]=n(" Tarif ",-1)),l(e(x),{class:"ml-2 h-4 w-4"})]),_:1})]),_:1}),l(e(d),{class:"text-right"},{default:t(()=>[l(e(_),{variant:"ghost",size:"sm",class:"-mr-4 h-8",onClick:a[9]||(a[9]=s=>y("pph21"))},{default:t(()=>[a[28]||(a[28]=n(" PPh21 ",-1)),l(e(x),{class:"ml-2 h-4 w-4"})]),_:1})]),_:1})]),_:1})]),_:1}),l(e(da),null,{default:t(()=>[o.data.data.length?(v(!0),S(N,{key:0},V(o.data.data,(s,z)=>(v(),b(e(j),{key:s.id},{default:t(()=>[l(e(i),{class:"font-medium"},{default:t(()=>[n(u(z+1+(o.data.current_page-1)*o.data.per_page),1)]),_:2},1024),l(e(i),null,{default:t(()=>[n(u(Y(s.tanggal)),1)]),_:2},1024),l(e(i),null,{default:t(()=>[n(u(s.tahun_pajak),1)]),_:2},1024),l(e(i),null,{default:t(()=>[n(u(s.username||"-"),1)]),_:2},1024),l(e(i),null,{default:t(()=>[n(u(s.name||"-"),1)]),_:2},1024),l(e(i),null,{default:t(()=>[n(u(s.fullname||"-"),1)]),_:2},1024),l(e(i),null,{default:t(()=>[n(u(s.email||"-"),1)]),_:2},1024),l(e(i),null,{default:t(()=>[n(u(s.no_telepon||"-"),1)]),_:2},1024),l(e(i),null,{default:t(()=>[n(u(s.npwp||"-"),1)]),_:2},1024),l(e(i),null,{default:t(()=>[n(u(s.nik||"-"),1)]),_:2},1024),l(e(i),{class:"max-w-[220px] truncate",title:s.alamat||"-"},{default:t(()=>[n(u(s.alamat||"-"),1)]),_:2},1032,["title"]),l(e(i),{class:"text-right font-medium"},{default:t(()=>[n(u(I(s.jumlah_bruto)),1)]),_:2},1024),l(e(i),{class:"text-right"},{default:t(()=>[n(u(H(s.tarif)),1)]),_:2},1024),l(e(i),{class:"text-right font-medium"},{default:t(()=>[n(u(I(s.pph21)),1)]),_:2},1024)]),_:2},1024))),128)):(v(),b(e(j),{key:1},{default:t(()=>[l(e(i),{colspan:"14",class:"h-32 text-center text-muted-foreground"},{default:t(()=>[m("div",ya,[l(e(B),{class:"h-8 w-8 opacity-40"}),a[29]||(a[29]=m("p",null,"Tidak ada data yang ditemukan",-1))])]),_:1})]),_:1}))]),_:1})]),_:1})]),l(ra,{data:P.data,url:F.value,filters:W.value,perPageOptions:[15,25,50,100,200]},null,8,["data","url","filters"])])]),_:1}))}});export{Ta as default};
