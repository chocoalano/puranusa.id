import{_ as q}from"./ConfirmDialog.vue_vue_type_script_setup_true_lang-BQ9O-qWE.js";import{_ as E}from"./index-D12gyL4d.js";import{_ as f}from"./index-DJk7aHkf.js";import{_ as R,a as T}from"./CardContent.vue_vue_type_script_setup_true_lang-DUWiWpeg.js";import{_ as D}from"./CardHeader.vue_vue_type_script_setup_true_lang-Bo9DeG24.js";import{_ as V}from"./CardTitle.vue_vue_type_script_setup_true_lang-SuNAGsFF.js";import{_ as Q}from"./Input.vue_vue_type_script_setup_true_lang-nikPKNAJ.js";import{_ as X,a as Y,b as Z,c as G,d as A}from"./SelectValue.vue_vue_type_script_setup_true_lang-Dc4bXstG.js";import{_ as J,a as W,b as j,c as O,d as ee,e as M}from"./TableHeader.vue_vue_type_script_setup_true_lang-Bg-l8dVV.js";import{_ as te}from"./AppLayout.vue_vue_type_script_setup_true_lang-J4pIkQSF.js";import{d as ae,r as b,E as N,q as se,c as p,g as o,w as s,b as t,e as i,u as e,a0 as le,s as u,bi as z,a3 as re,Y as ie,K as g,cy as de,aL as ne,Z as oe,v as k,F as y,x as C,t as ue,y as B,n as d,a4 as ce,a5 as me,a6 as fe,a7 as ge,j as $,Q as ve,a8 as we,a9 as _e,aa as pe,cs as xe,z as he,A as be,B as ke}from"./vendor-0sCoMzHy.js";import"./AlertDialogTitle.vue_vue_type_script_setup_true_lang-DMm3rbrx.js";import"./index-DaR_mHDg.js";import"./AvatarFallback.vue_vue_type_script_setup_true_lang-BhL6n9ND.js";import"./AvatarImage.vue_vue_type_script_setup_true_lang-CAfd5pFE.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-KgsqrYLn.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DEiiatvc.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-CbD5L1KI.js";const ye={class:"flex h-full flex-1 flex-col gap-6 p-6"},Ce={class:"flex items-center justify-between"},$e={class:"text-3xl font-bold tracking-tight flex items-center gap-2"},Se={class:"grid gap-4 md:grid-cols-3"},Re={class:"text-2xl font-bold text-blue-600"},Te={class:"text-2xl font-bold text-green-600"},De={class:"text-2xl font-bold text-gray-600"},Ve={class:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between"},Ae={class:"flex flex-1 items-center gap-4"},je={class:"relative flex-1 md:max-w-sm"},Ie={class:"rounded-md border"},Fe={class:"flex items-center justify-between"},Le={class:"text-sm text-muted-foreground"},Me={class:"flex items-center gap-2"},Ne={class:"text-sm"},at=ae({__name:"Index",props:{rewards:{},statistics:{},filters:{}},setup(r){const v=r,K=[{title:"Pengaturan",href:"#"},{title:"Lifetime Cash Rewards",href:"/admin/settings/lifetime-cash-rewards"}],x=b(v.filters.search||""),w=b(v.filters.status||"all"),c=b([{id:v.filters.sort_by,desc:v.filters.sort_order==="desc"}]),_=b({open:!1,reward:null}),P=l=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(l),U=l=>{_.value={open:!0,reward:l}},H=()=>{_.value.reward&&$.delete(`/admin/settings/lifetime-cash-rewards/${_.value.reward.id}`,{preserveScroll:!0,onSuccess:()=>{_.value={open:!1,reward:null},ve.success("Lifetime Cash Reward berhasil dihapus")}})},I=()=>{$.get("/admin/settings/lifetime-cash-rewards",{search:x.value||void 0,status:w.value!=="all"?w.value:void 0,sort_by:c.value[0]?.id||"created_at",sort_order:c.value[0]?.desc?"desc":"asc"},{preserveState:!0,replace:!0})};N([w,c],I,{deep:!0});let F;N(x,()=>{clearTimeout(F),F=setTimeout(I,300)});const L=[{id:"index",header:()=>d("div",{class:"w-12"},"No"),cell:({row:l})=>{const a=l.index+1+(v.rewards.current_page-1)*v.rewards.per_page;return d("div",{class:"font-medium"},a)}},{accessorKey:"name",header:({column:l})=>d(f,{variant:"ghost",onClick:()=>l.toggleSorting(l.getIsSorted()==="asc"),class:"-ml-4"},()=>["Nama Reward",d(l.getIsSorted()==="asc"?we:l.getIsSorted()==="desc"?_e:pe,{class:"ml-2 h-4 w-4"})]),cell:({row:l})=>d("div",[d("div",{class:"font-medium"},l.original.name),l.original.code&&d("div",{class:"text-xs text-muted-foreground font-mono"},l.original.code)])},{accessorKey:"reward",header:()=>"Reward",cell:({row:l})=>d("div",{class:"text-sm"},l.original.reward||"-")},{accessorKey:"value",header:()=>"Value",cell:({row:l})=>d("div",{class:"font-medium"},P(l.original.value))},{accessorKey:"bv",header:()=>"BV",cell:({row:l})=>d("div",Number(l.original.bv).toFixed(2))},{id:"status",header:()=>"Status",cell:({row:l})=>d(E,{variant:l.original.status===1?"default":"secondary"},()=>l.original.status===1?"Aktif":"Tidak Aktif")},{id:"actions",header:()=>d("div",{class:"text-right"},"Aksi"),cell:({row:l})=>{const a=l.original;return d("div",{class:"flex justify-end gap-2"},[d(f,{variant:"outline",size:"sm",onClick:()=>$.visit(`/admin/settings/lifetime-cash-rewards/${a.id}/edit`)},()=>[d(xe,{class:"h-4 w-4"})]),d(f,{variant:"outline",size:"sm",class:"text-destructive hover:bg-destructive hover:text-destructive-foreground",onClick:()=>U(a)},()=>[d(he,{class:"h-4 w-4"})])])}}],S=se({data:v.rewards.data,columns:L,getCoreRowModel:ke(),getSortedRowModel:be(),manualSorting:!0,state:{get sorting(){return c.value}},onSortingChange:l=>{c.value=typeof l=="function"?l(c.value):l}}),h=l=>{$.get("/admin/settings/lifetime-cash-rewards",{page:l,search:x.value||void 0,status:w.value!=="all"?w.value:void 0,sort_by:c.value[0]?.id||"created_at",sort_order:c.value[0]?.desc?"desc":"asc"},{preserveState:!0,replace:!0})};return(l,a)=>(o(),p(te,{breadcrumbs:K},{default:s(()=>[t(e(le),{title:"Lifetime Cash Rewards"}),i("div",ye,[i("div",Ce,[i("div",null,[i("h1",$e,[t(e(z),{class:"h-8 w-8"}),a[7]||(a[7]=u(" Lifetime Cash Rewards ",-1))]),a[8]||(a[8]=i("p",{class:"text-muted-foreground mt-1"}," Kelola reward permanen (tanpa periode waktu) ",-1))]),t(e(re),{href:"/admin/settings/lifetime-cash-rewards/create"},{default:s(()=>[t(e(f),null,{default:s(()=>[t(e(ie),{class:"h-4 w-4 mr-2"}),a[9]||(a[9]=u(" Tambah Reward ",-1))]),_:1})]),_:1})]),i("div",Se,[t(e(R),null,{default:s(()=>[t(e(D),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[t(e(V),{class:"text-sm font-medium"},{default:s(()=>[...a[10]||(a[10]=[u("Total Rewards",-1)])]),_:1}),t(e(z),{class:"h-4 w-4 text-blue-500"})]),_:1}),t(e(T),null,{default:s(()=>[i("div",Re,g(r.statistics.total),1)]),_:1})]),_:1}),t(e(R),null,{default:s(()=>[t(e(D),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[t(e(V),{class:"text-sm font-medium"},{default:s(()=>[...a[11]||(a[11]=[u("Aktif",-1)])]),_:1}),t(e(de),{class:"h-4 w-4 text-green-500"})]),_:1}),t(e(T),null,{default:s(()=>[i("div",Te,g(r.statistics.total_active),1)]),_:1})]),_:1}),t(e(R),null,{default:s(()=>[t(e(D),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[t(e(V),{class:"text-sm font-medium"},{default:s(()=>[...a[12]||(a[12]=[u("Tidak Aktif",-1)])]),_:1}),t(e(ne),{class:"h-4 w-4 text-gray-500"})]),_:1}),t(e(T),null,{default:s(()=>[i("div",De,g(r.statistics.total_inactive),1)]),_:1})]),_:1})]),i("div",Ve,[i("div",Ae,[i("div",je,[t(e(oe),{class:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),t(e(Q),{modelValue:x.value,"onUpdate:modelValue":a[0]||(a[0]=n=>x.value=n),placeholder:"Cari nama atau kode...",class:"pl-9"},null,8,["modelValue"])]),t(e(X),{modelValue:w.value,"onUpdate:modelValue":a[1]||(a[1]=n=>w.value=n)},{default:s(()=>[t(e(Y),{class:"w-40"},{default:s(()=>[t(e(Z),{placeholder:"Semua Status"})]),_:1}),t(e(G),null,{default:s(()=>[t(e(A),{value:"all"},{default:s(()=>[...a[13]||(a[13]=[u("Semua Status",-1)])]),_:1}),t(e(A),{value:"1"},{default:s(()=>[...a[14]||(a[14]=[u("Aktif",-1)])]),_:1}),t(e(A),{value:"0"},{default:s(()=>[...a[15]||(a[15]=[u("Tidak Aktif",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),i("div",Ie,[t(e(J),null,{default:s(()=>[t(e(W),null,{default:s(()=>[(o(!0),k(y,null,C(e(S).getHeaderGroups(),n=>(o(),p(e(j),{key:n.id},{default:s(()=>[(o(!0),k(y,null,C(n.headers,m=>(o(),p(e(O),{key:m.id},{default:s(()=>[m.isPlaceholder?ue("",!0):(o(),p(e(B),{key:0,render:m.column.columnDef.header,props:m.getContext()},null,8,["render","props"]))]),_:2},1024))),128))]),_:2},1024))),128))]),_:1}),t(e(ee),null,{default:s(()=>[e(S).getRowModel().rows?.length?(o(!0),k(y,{key:0},C(e(S).getRowModel().rows,n=>(o(),p(e(j),{key:n.id},{default:s(()=>[(o(!0),k(y,null,C(n.getVisibleCells(),m=>(o(),p(e(M),{key:m.id},{default:s(()=>[t(e(B),{render:m.column.columnDef.cell,props:m.getContext()},null,8,["render","props"])]),_:2},1024))),128))]),_:2},1024))),128)):(o(),p(e(j),{key:1},{default:s(()=>[t(e(M),{colspan:L.length,class:"h-24 text-center"},{default:s(()=>[...a[16]||(a[16]=[u(" Tidak ada data. ",-1)])]),_:1},8,["colspan"])]),_:1}))]),_:1})]),_:1})]),i("div",Fe,[i("div",Le," Menampilkan "+g((r.rewards.current_page-1)*r.rewards.per_page+1)+" - "+g(Math.min(r.rewards.current_page*r.rewards.per_page,r.rewards.total))+" dari "+g(r.rewards.total)+" data ",1),i("div",Me,[t(e(f),{variant:"outline",size:"sm",disabled:r.rewards.current_page===1,onClick:a[2]||(a[2]=n=>h(1))},{default:s(()=>[t(e(ce),{class:"h-4 w-4"})]),_:1},8,["disabled"]),t(e(f),{variant:"outline",size:"sm",disabled:r.rewards.current_page===1,onClick:a[3]||(a[3]=n=>h(r.rewards.current_page-1))},{default:s(()=>[t(e(me),{class:"h-4 w-4"})]),_:1},8,["disabled"]),i("span",Ne," Halaman "+g(r.rewards.current_page)+" dari "+g(r.rewards.last_page),1),t(e(f),{variant:"outline",size:"sm",disabled:r.rewards.current_page===r.rewards.last_page,onClick:a[4]||(a[4]=n=>h(r.rewards.current_page+1))},{default:s(()=>[t(e(fe),{class:"h-4 w-4"})]),_:1},8,["disabled"]),t(e(f),{variant:"outline",size:"sm",disabled:r.rewards.current_page===r.rewards.last_page,onClick:a[5]||(a[5]=n=>h(r.rewards.last_page))},{default:s(()=>[t(e(ge),{class:"h-4 w-4"})]),_:1},8,["disabled"])])])]),t(q,{open:_.value.open,title:"Hapus Reward",description:`Apakah Anda yakin ingin menghapus reward '${_.value.reward?.name}'? Tindakan ini tidak dapat dibatalkan.`,"confirm-text":"Hapus","onUpdate:open":a[6]||(a[6]=n=>_.value.open=n),onConfirm:H},null,8,["open","description"])]),_:1}))}});export{at as default};
