import{d as R,ac as S,ad as W,r as V,E as X,p as Q,v as p,g as f,ae as Y,b as a,e as r,u as t,w as l,s as i,t as _,K as y,J as Z,X as h,cA as ee,ag as ae,ah as te,ai as le,W as se}from"./vendor-DUvsJjJb.js";import{_ as v}from"./Input.vue_vue_type_script_setup_true_lang-CEbduRS7.js";import{_ as u}from"./Label.vue_vue_type_script_setup_true_lang-DSiRGPcj.js";import{_ as B}from"./Textarea.vue_vue_type_script_setup_true_lang-5qNB9fVe.js";import{_ as G}from"./index-DOPQVStN.js";import{_ as P,a as c}from"./CardContent.vue_vue_type_script_setup_true_lang-BV46Qjf6.js";import{_ as w}from"./CardDescription.vue_vue_type_script_setup_true_lang-CKmj_gjz.js";import{_ as D}from"./CardHeader.vue_vue_type_script_setup_true_lang-DX_68Rs3.js";import{_ as I}from"./CardTitle.vue_vue_type_script_setup_true_lang-6MEUvz4F.js";import{_ as U,a as $,b as T,c as C,d as m}from"./SelectValue.vue_vue_type_script_setup_true_lang-DBmRzu0f.js";const oe={class:"grid gap-4 md:grid-cols-2"},ie={class:"space-y-2"},re={key:0,class:"text-sm text-destructive"},de={class:"space-y-2"},ue={key:0,class:"text-sm text-destructive"},ne={class:"grid gap-4 md:grid-cols-2"},me={class:"space-y-2"},pe={key:0,class:"text-sm text-destructive"},fe={class:"space-y-2"},ve={class:"space-y-2"},ge={class:"space-y-2"},_e={key:0,class:"relative w-full h-full p-4"},ye=["src"],xe={key:1,class:"text-center p-6"},be={class:"mx-auto w-12 h-12 rounded-full bg-muted flex items-center justify-center mb-4"},ke={key:0,class:"text-sm text-destructive"},Ve={class:"grid gap-4 md:grid-cols-2"},Pe={class:"space-y-2"},ce={key:0,class:"text-sm text-destructive"},we={class:"space-y-2"},De={key:0,class:"text-sm text-destructive"},Ie={class:"grid gap-4 md:grid-cols-3"},Ue={class:"space-y-2"},$e={class:"space-y-2"},Te={class:"space-y-2"},Ce={class:"flex items-center gap-2"},Fe={class:"grid gap-4 md:grid-cols-2"},Me={class:"space-y-2"},Ne={class:"space-y-2"},je={class:"space-y-2"},Se={class:"flex justify-end gap-4"},Ke=R({__name:"PromotionForm",props:S({errors:{},processing:{type:Boolean},existingImage:{}},{formData:{required:!0},formDataModifiers:{}}),emits:S(["submit"],["update:formData"]),setup(F,{emit:q}){const d=F,z=q,o=W(F,"formData"),g=V(null),x=V(null),b=V(!1),k=V(!1);X(()=>d.existingImage,()=>{k.value=!1,x.value=null,g.value&&(g.value.value=""),o.value&&(o.value.remove_image=!1)});const M=Q(()=>x.value?x.value:!k.value&&d.existingImage?d.existingImage:null),A=n=>{const s=n.target.files?.[0];s&&N(s)},N=n=>{if(!["image/jpeg","image/png","image/gif","image/webp"].includes(n.type)){alert("Hanya file gambar (JPEG, PNG, GIF, WebP) yang diizinkan");return}const s=2*1024*1024;if(n.size>s){alert("Ukuran file maksimal 2MB");return}k.value=!0,o.value.remove_image=!1,o.value.image=n;const j=new FileReader;j.onload=K=>{x.value=K.target?.result},j.readAsDataURL(n)},J=n=>{n.preventDefault(),b.value=!1;const e=n.dataTransfer?.files?.[0];e&&N(e)},O=n=>{n.preventDefault(),b.value=!0},E=()=>{b.value=!1},H=()=>{k.value=!0,x.value=null,o.value.image=null,o.value.remove_image=!0,g.value&&(g.value.value="")},L=()=>{g.value?.click()};return(n,e)=>(f(),p("form",{onSubmit:e[14]||(e[14]=Y(s=>z("submit"),["prevent"])),class:"space-y-6"},[a(t(P),null,{default:l(()=>[a(t(D),null,{default:l(()=>[a(t(I),null,{default:l(()=>[...e[15]||(e[15]=[i("Informasi Dasar",-1)])]),_:1}),a(t(w),null,{default:l(()=>[...e[16]||(e[16]=[i("Detail utama promosi atau diskon",-1)])]),_:1})]),_:1}),a(t(c),{class:"space-y-4"},{default:l(()=>[r("div",oe,[r("div",ie,[a(t(u),{for:"code"},{default:l(()=>[...e[17]||(e[17]=[i("Kode Promosi *",-1)])]),_:1}),a(t(v),{id:"code",modelValue:o.value.code,"onUpdate:modelValue":e[0]||(e[0]=s=>o.value.code=s),placeholder:"PROMO2024",class:"uppercase",required:""},null,8,["modelValue"]),d.errors?.code?(f(),p("p",re,y(d.errors.code),1)):_("",!0)]),r("div",de,[a(t(u),{for:"name"},{default:l(()=>[...e[18]||(e[18]=[i("Nama Promosi *",-1)])]),_:1}),a(t(v),{id:"name",modelValue:o.value.name,"onUpdate:modelValue":e[1]||(e[1]=s=>o.value.name=s),placeholder:"Flash Sale Akhir Tahun",required:""},null,8,["modelValue"]),d.errors?.name?(f(),p("p",ue,y(d.errors.name),1)):_("",!0)])]),r("div",ne,[r("div",me,[a(t(u),{for:"type"},{default:l(()=>[...e[19]||(e[19]=[i("Tipe Promosi *",-1)])]),_:1}),a(t(U),{modelValue:o.value.type,"onUpdate:modelValue":e[2]||(e[2]=s=>o.value.type=s),required:""},{default:l(()=>[a(t($),{id:"type"},{default:l(()=>[a(t(T),{placeholder:"Pilih tipe"})]),_:1}),a(t(C),null,{default:l(()=>[a(t(m),{value:"discount"},{default:l(()=>[...e[20]||(e[20]=[i("Diskon",-1)])]),_:1}),a(t(m),{value:"bundle"},{default:l(()=>[...e[21]||(e[21]=[i("Bundle",-1)])]),_:1}),a(t(m),{value:"flash_sale"},{default:l(()=>[...e[22]||(e[22]=[i("Flash Sale",-1)])]),_:1}),a(t(m),{value:"promo"},{default:l(()=>[...e[23]||(e[23]=[i("Promo",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"]),d.errors?.type?(f(),p("p",pe,y(d.errors.type),1)):_("",!0)]),r("div",fe,[a(t(u),{for:"landing_slug"},{default:l(()=>[...e[24]||(e[24]=[i("Landing Page Slug",-1)])]),_:1}),a(t(v),{id:"landing_slug",modelValue:o.value.landing_slug,"onUpdate:modelValue":e[3]||(e[3]=s=>o.value.landing_slug=s),placeholder:"flash-sale-2024"},null,8,["modelValue"])])]),r("div",ve,[a(t(u),{for:"description"},{default:l(()=>[...e[25]||(e[25]=[i("Deskripsi",-1)])]),_:1}),a(t(B),{id:"description",modelValue:o.value.description,"onUpdate:modelValue":e[4]||(e[4]=s=>o.value.description=s),placeholder:"Deskripsi promosi (opsional)",rows:"3"},null,8,["modelValue"])]),r("div",ge,[a(t(u),{for:"image"},{default:l(()=>[...e[26]||(e[26]=[i("Gambar Promosi",-1)])]),_:1}),r("div",{class:Z(["relative border-2 border-dashed rounded-lg transition-colors",b.value?"border-primary bg-primary/5":"border-muted-foreground/25 hover:border-primary/50","min-h-[200px] flex items-center justify-center"]),onDrop:J,onDragover:O,onDragleave:E},[M.value?(f(),p("div",_e,[r("img",{src:M.value,alt:"Preview",class:"max-h-[300px] w-auto mx-auto rounded-lg object-contain"},null,8,ye),a(t(G),{type:"button",variant:"destructive",size:"icon",class:"absolute top-2 right-2",onClick:H},{default:l(()=>[a(t(h),{class:"h-4 w-4"})]),_:1})])):(f(),p("div",xe,[r("div",be,[a(t(ee),{class:"h-6 w-6 text-muted-foreground"})]),e[28]||(e[28]=r("p",{class:"text-sm text-muted-foreground mb-2"},"Drag & drop gambar di sini, atau",-1)),a(t(G),{type:"button",variant:"outline",size:"sm",onClick:L},{default:l(()=>[a(t(ae),{class:"h-4 w-4 mr-2"}),e[27]||(e[27]=i(" Pilih File ",-1))]),_:1}),e[29]||(e[29]=r("p",{class:"text-xs text-muted-foreground mt-2"},"PNG, JPG, GIF, WebP (maks. 2MB)",-1))])),r("input",{ref_key:"fileInput",ref:g,type:"file",accept:"image/jpeg,image/png,image/gif,image/webp",class:"hidden",onChange:A},null,544)],34),d.errors?.image?(f(),p("p",ke,y(d.errors.image),1)):_("",!0)])]),_:1})]),_:1}),a(t(P),null,{default:l(()=>[a(t(D),null,{default:l(()=>[a(t(I),null,{default:l(()=>[...e[30]||(e[30]=[i("Periode & Pengaturan",-1)])]),_:1}),a(t(w),null,{default:l(()=>[...e[31]||(e[31]=[i("Atur waktu dan batasan promosi",-1)])]),_:1})]),_:1}),a(t(c),{class:"space-y-4"},{default:l(()=>[r("div",Ve,[r("div",Pe,[a(t(u),{for:"start_at"},{default:l(()=>[...e[32]||(e[32]=[i("Tanggal Mulai *",-1)])]),_:1}),a(t(v),{id:"start_at",modelValue:o.value.start_at,"onUpdate:modelValue":e[5]||(e[5]=s=>o.value.start_at=s),type:"datetime-local",required:""},null,8,["modelValue"]),d.errors?.start_at?(f(),p("p",ce,y(d.errors.start_at),1)):_("",!0)]),r("div",we,[a(t(u),{for:"end_at"},{default:l(()=>[...e[33]||(e[33]=[i("Tanggal Berakhir *",-1)])]),_:1}),a(t(v),{id:"end_at",modelValue:o.value.end_at,"onUpdate:modelValue":e[6]||(e[6]=s=>o.value.end_at=s),type:"datetime-local",required:""},null,8,["modelValue"]),d.errors?.end_at?(f(),p("p",De,y(d.errors.end_at),1)):_("",!0)])]),r("div",Ie,[r("div",Ue,[a(t(u),{for:"priority"},{default:l(()=>[...e[34]||(e[34]=[i("Prioritas",-1)])]),_:1}),a(t(v),{id:"priority",modelValue:o.value.priority,"onUpdate:modelValue":e[7]||(e[7]=s=>o.value.priority=s),modelModifiers:{number:!0},type:"number",min:"0",placeholder:"0"},null,8,["modelValue"]),e[35]||(e[35]=r("p",{class:"text-sm text-muted-foreground"},"Angka lebih tinggi = prioritas lebih tinggi",-1))]),r("div",$e,[a(t(u),{for:"max_redemption"},{default:l(()=>[...e[36]||(e[36]=[i("Maks. Penebusan",-1)])]),_:1}),a(t(v),{id:"max_redemption",value:o.value.max_redemption??"",onInput:e[8]||(e[8]=s=>o.value.max_redemption=s.target.value?Number(s.target.value):null),type:"number",min:"0",placeholder:"Tidak terbatas"},null,8,["value"])]),r("div",Te,[a(t(u),{for:"per_user_limit"},{default:l(()=>[...e[37]||(e[37]=[i("Limit Per User",-1)])]),_:1}),a(t(v),{id:"per_user_limit",value:o.value.per_user_limit??"",onInput:e[9]||(e[9]=s=>o.value.per_user_limit=s.target.value?Number(s.target.value):null),type:"number",min:"0",placeholder:"Tidak terbatas"},null,8,["value"])])]),r("div",Ce,[te(r("input",{id:"is_active","onUpdate:modelValue":e[10]||(e[10]=s=>o.value.is_active=s),type:"checkbox",class:"rounded"},null,512),[[le,o.value.is_active]]),a(t(u),{for:"is_active"},{default:l(()=>[...e[38]||(e[38]=[i("Promosi Aktif",-1)])]),_:1})])]),_:1})]),_:1}),a(t(P),null,{default:l(()=>[a(t(D),null,{default:l(()=>[a(t(I),null,{default:l(()=>[...e[39]||(e[39]=[i("Penempatan",-1)])]),_:1}),a(t(w),null,{default:l(()=>[...e[40]||(e[40]=[i("Tentukan dimana promosi ditampilkan",-1)])]),_:1})]),_:1}),a(t(c),{class:"space-y-4"},{default:l(()=>[r("div",Fe,[r("div",Me,[a(t(u),{for:"show_on"},{default:l(()=>[...e[41]||(e[41]=[i("Tampilkan Di",-1)])]),_:1}),a(t(U),{modelValue:o.value.show_on,"onUpdate:modelValue":e[11]||(e[11]=s=>o.value.show_on=s)},{default:l(()=>[a(t($),{id:"show_on"},{default:l(()=>[a(t(T),{placeholder:"Pilih lokasi"})]),_:1}),a(t(C),null,{default:l(()=>[a(t(m),{value:"homepage"},{default:l(()=>[...e[42]||(e[42]=[i("Homepage",-1)])]),_:1}),a(t(m),{value:"product_page"},{default:l(()=>[...e[43]||(e[43]=[i("Product Page",-1)])]),_:1}),a(t(m),{value:"checkout"},{default:l(()=>[...e[44]||(e[44]=[i("Checkout",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),r("div",Ne,[a(t(u),{for:"page"},{default:l(()=>[...e[45]||(e[45]=[i("Halaman",-1)])]),_:1}),a(t(U),{modelValue:o.value.page,"onUpdate:modelValue":e[12]||(e[12]=s=>o.value.page=s)},{default:l(()=>[a(t($),{id:"page"},{default:l(()=>[a(t(T),{placeholder:"Pilih halaman"})]),_:1}),a(t(C),null,{default:l(()=>[a(t(m),{value:"home"},{default:l(()=>[...e[46]||(e[46]=[i("Home",-1)])]),_:1}),a(t(m),{value:"product"},{default:l(()=>[...e[47]||(e[47]=[i("Product",-1)])]),_:1}),a(t(m),{value:"category"},{default:l(()=>[...e[48]||(e[48]=[i("Category",-1)])]),_:1}),a(t(m),{value:"cart"},{default:l(()=>[...e[49]||(e[49]=[i("Cart",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),r("div",je,[a(t(u),{for:"conditions_json"},{default:l(()=>[...e[50]||(e[50]=[i("Kondisi (JSON)",-1)])]),_:1}),a(t(B),{id:"conditions_json",modelValue:o.value.conditions_json,"onUpdate:modelValue":e[13]||(e[13]=s=>o.value.conditions_json=s),placeholder:'{"min_purchase": 100000, "categories": [1, 2]}',rows:"3",class:"font-mono text-sm"},null,8,["modelValue"]),e[51]||(e[51]=r("p",{class:"text-sm text-muted-foreground"},"Format JSON untuk kondisi spesifik promosi",-1))])]),_:1})]),_:1}),r("div",Se,[se(n.$slots,"actions",{processing:d.processing})])],32))}});export{Ke as _};
