import{A as M,_ as re,B as ie}from"./AppLayout.vue_vue_type_script_setup_true_lang-3Xwj2Srj.js";import{a as R,_ as T}from"./CardContent.vue_vue_type_script_setup_true_lang-NxxB_dAy.js";import{_ as E}from"./CardHeader.vue_vue_type_script_setup_true_lang-Kdg7L6IL.js";import{_ as F}from"./CardTitle.vue_vue_type_script_setup_true_lang-Cj4ck2dV.js";import{d as A,v as w,g as f,b as t,w as s,u as e,s as u,a3 as ue,e as d,K as D,ak as oe,au as de,ac as q,ad as z,c as _,ae as me,r as y,q as fe,E as H,j as I,a1 as pe,t as O,Z as ce,aa as ge,F as h,x as C,y as G,n as m,ap as ve,cz as _e,aO as xe,A as be,B as ye}from"./vendor-DfMbnFaR.js";import{_ as U,v as B}from"./index-BhPH699V.js";import{_ as ke,b as $e,c as we,a as Se}from"./DialogTitle.vue_vue_type_script_setup_true_lang-CVuHW23D.js";import{_ as Ve}from"./DialogFooter.vue_vue_type_script_setup_true_lang-AQltQT9I.js";import{_ as he}from"./DialogHeader.vue_vue_type_script_setup_true_lang-C1z-zvv6.js";import{_ as Q}from"./Input.vue_vue_type_script_setup_true_lang-Bi8Aupzl.js";import{_ as Z}from"./Label.vue_vue_type_script_setup_true_lang-C_XGMl1H.js";import{_ as W,a as X,b as Y,c as ee,d as x}from"./SelectValue.vue_vue_type_script_setup_true_lang-VBwlv4qP.js";import{_ as Ce}from"./Pagination.vue_vue_type_script_setup_true_lang-C64O0K5A.js";import{_ as De}from"./index-Qe8U7avD.js";import{_ as Ue,a as Ne,b as Me}from"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-NxThyEhC.js";import{_ as Pe}from"./DropdownMenuCheckboxItem.vue_vue_type_script_setup_true_lang-hxH_Oz-B.js";import{_ as Re,a as Te,b as K,c as Ee,d as Fe,e as J}from"./TableHeader.vue_vue_type_script_setup_true_lang-PuAkTm4y.js";import"./index-CSEUMRIG.js";import"./AvatarFallback.vue_vue_type_script_setup_true_lang-Bqij1zEj.js";import"./AvatarImage.vue_vue_type_script_setup_true_lang-BOYUcfDs.js";import"./index-DnSHhU6t.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DrG-1awo.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-CpOM3BUc.js";const Ie={class:"grid gap-4 md:grid-cols-3"},Be={class:"text-2xl font-bold"},Ke={class:"text-2xl font-bold"},Ae={class:"text-2xl font-bold"},je=A({__name:"ShipmentStatistics",props:{statistics:{}},setup(i){return(c,o)=>(f(),w("div",Ie,[t(e(T),null,{default:s(()=>[t(e(E),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[t(e(F),{class:"text-sm font-medium"},{default:s(()=>[...o[0]||(o[0]=[u("Pending",-1)])]),_:1}),t(e(ue),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(e(R),null,{default:s(()=>[d("div",Be,D(i.statistics.total_pending),1),o[1]||(o[1]=d("p",{class:"text-xs text-muted-foreground"},"Menunggu pengiriman",-1))]),_:1})]),_:1}),t(e(T),null,{default:s(()=>[t(e(E),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[t(e(F),{class:"text-sm font-medium"},{default:s(()=>[...o[2]||(o[2]=[u("Dikirim",-1)])]),_:1}),t(e(oe),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(e(R),null,{default:s(()=>[d("div",Ke,D(i.statistics.total_shipped),1),o[3]||(o[3]=d("p",{class:"text-xs text-muted-foreground"},"Dalam pengiriman",-1))]),_:1})]),_:1}),t(e(T),null,{default:s(()=>[t(e(E),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[t(e(F),{class:"text-sm font-medium"},{default:s(()=>[...o[4]||(o[4]=[u("Terkirim",-1)])]),_:1}),t(e(de),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(e(R),null,{default:s(()=>[d("div",Ae,D(i.statistics.total_delivered),1),o[5]||(o[5]=d("p",{class:"text-xs text-muted-foreground"},"Sudah sampai",-1))]),_:1})]),_:1})]))}}),Le={class:"space-y-2"},qe={class:"space-y-2"},ze=A({__name:"UpdateShipmentDialog",props:q({open:{type:Boolean},shipment:{},processing:{type:Boolean}},{trackingNumber:{required:!0},trackingNumberModifiers:{},status:{required:!0},statusModifiers:{}}),emits:q(["update:open","submit"],["update:trackingNumber","update:status"]),setup(i,{emit:c}){const o=c,b=z(i,"trackingNumber"),p=z(i,"status");return(k,n)=>(f(),_(e(ke),{open:i.open,"onUpdate:open":n[4]||(n[4]=g=>o("update:open",g))},{default:s(()=>[t(e(Se),null,{default:s(()=>[t(e(he),null,{default:s(()=>[t(e($e),null,{default:s(()=>[...n[5]||(n[5]=[u("Update Pengiriman",-1)])]),_:1}),t(e(we),null,{default:s(()=>[...n[6]||(n[6]=[u(" Update nomor resi dan status pengiriman ",-1)])]),_:1})]),_:1}),d("form",{onSubmit:n[3]||(n[3]=me(g=>o("submit"),["prevent"])),class:"space-y-4 py-4"},[d("div",Le,[t(e(Z),{for:"tracking_number"},{default:s(()=>[...n[7]||(n[7]=[u("Nomor Resi",-1)])]),_:1}),t(e(Q),{id:"tracking_number",modelValue:b.value,"onUpdate:modelValue":n[0]||(n[0]=g=>b.value=g),placeholder:"Masukkan nomor resi"},null,8,["modelValue"])]),d("div",qe,[t(e(Z),{for:"status"},{default:s(()=>[...n[8]||(n[8]=[u("Status",-1)])]),_:1}),t(e(W),{modelValue:p.value,"onUpdate:modelValue":n[1]||(n[1]=g=>p.value=g)},{default:s(()=>[t(e(X),{id:"status"},{default:s(()=>[t(e(Y),{placeholder:"Pilih status"})]),_:1}),t(e(ee),null,{default:s(()=>[t(e(x),{value:"pending"},{default:s(()=>[...n[9]||(n[9]=[u("Pending",-1)])]),_:1}),t(e(x),{value:"shipped"},{default:s(()=>[...n[10]||(n[10]=[u("Shipped",-1)])]),_:1}),t(e(x),{value:"in_transit"},{default:s(()=>[...n[11]||(n[11]=[u("In Transit",-1)])]),_:1}),t(e(x),{value:"delivered"},{default:s(()=>[...n[12]||(n[12]=[u("Delivered",-1)])]),_:1}),t(e(x),{value:"failed"},{default:s(()=>[...n[13]||(n[13]=[u("Failed",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),t(e(Ve),null,{default:s(()=>[t(e(U),{type:"button",variant:"outline",onClick:n[2]||(n[2]=g=>o("update:open",!1))},{default:s(()=>[...n[14]||(n[14]=[u(" Batal ",-1)])]),_:1}),t(e(U),{type:"submit",disabled:i.processing},{default:s(()=>[u(D(i.processing?"Menyimpan...":"Update"),1)]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]))}}),He={class:"rounded-xl p-4 space-y-6 py-6"},Oe={class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},Ge={class:"flex flex-1 gap-4"},Ze={class:"relative flex-1 max-w-sm"},Je={class:"rounded-md border"},bt=A({__name:"Index",props:{shipments:{},statistics:{},filters:{}},setup(i){const c=i,o=[{title:"Pengiriman",href:M.url()}],b=y(c.filters.search||""),p=y(c.filters.status||"all"),k=y([{id:c.filters.sort_by,desc:c.filters.sort_order==="desc"}]),n=y([]),g=y({}),$=y({open:!1,shipment:null}),S=y(""),V=y(""),P=y(!1),te=l=>l?new Date(l).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-",se=l=>{const a=l.toUpperCase();return{PENDING:"secondary",IN_TRANSIT:"default",SHIPPED:"default",DELIVERED:"outline",CANCELLED:"destructive",CANCELED:"destructive"}[a]||"secondary"},ae=l=>l.toLowerCase()==="canceled"?"cancelled":l,le=l=>{$.value={open:!0,shipment:l},S.value=l.tracking_no||"",V.value=l.status},ne=()=>{$.value.shipment&&(P.value=!0,I.put(ie.url($.value.shipment.id),{tracking_no:S.value,status:V.value},{preserveScroll:!0,onSuccess:()=>{$.value={open:!1,shipment:null},S.value="",V.value=""},onFinish:()=>{P.value=!1}}))},j=[{id:"index",header:()=>m("div",{class:"w-12"},{default:()=>"No"}),cell:({row:l})=>{const a=l.index+1+(c.shipments.current_page-1)*c.shipments.per_page;return m("div",{class:"font-medium"},{default:()=>a.toString()})}},{accessorKey:"order.order_no",header:({column:l})=>m(U,{variant:"ghost",onClick:()=>l.toggleSorting(l.getIsSorted()==="asc"),class:"-ml-4"},()=>["Order",m(ve,{class:"ml-2 h-4 w-4"})]),cell:({row:l})=>{const a=l.original.order;return a?m("div",[m("div",{class:"font-medium font-mono"},a.order_no),m("div",{class:"text-xs text-muted-foreground"},a.customer?.name||"Unknown")]):m("div",{class:"text-muted-foreground"},"N/A")}},{accessorKey:"courier",header:()=>"Kurir",cell:({row:l})=>{const a=l.original.courier;return m("div",{class:"font-medium uppercase"},{default:()=>a?.name||"-"})}},{accessorKey:"tracking_no",header:()=>"Resi",cell:({row:l})=>{const a=l.getValue("tracking_no");return m("div",{class:"font-mono text-sm"},{default:()=>a||"-"})}},{accessorKey:"status",header:()=>"Status",cell:({row:l})=>{const a=l.getValue("status"),r=ae(a);return m(De,{variant:se(a)},{default:()=>r})}},{accessorKey:"shipped_at",header:()=>"Tanggal Kirim",cell:({row:l})=>m("div",{},{default:()=>te(l.getValue("shipped_at"))})},{id:"actions",header:()=>m("div",{class:"text-right"},{default:()=>"Actions"}),cell:({row:l})=>{const a=l.original;return m("div",{class:"flex justify-end gap-2"},{default:()=>[m(U,{variant:"outline",size:"sm",onClick:()=>le(a)},{default:()=>m(_e,{class:"h-4 w-4"})})]})}}],N=fe({get data(){return c.shipments.data},columns:j,getCoreRowModel:ye(),getSortedRowModel:be(),getFilteredRowModel:xe(),onSortingChange:l=>B(l,k),onColumnFiltersChange:l=>B(l,n),onColumnVisibilityChange:l=>B(l,g),state:{get sorting(){return k.value},get columnFilters(){return n.value},get columnVisibility(){return g.value}},manualSorting:!0});H(k,l=>{l.length>0&&I.get(M.url(),{search:b.value||void 0,status:p.value!=="all"?p.value:void 0,sort_by:l[0].id,sort_order:l[0].desc?"desc":"asc"},{preserveState:!0,preserveScroll:!0})},{deep:!0});let L;return H([b,p],()=>{clearTimeout(L),L=setTimeout(()=>{I.get(M.url(),{search:b.value||void 0,status:p.value!=="all"?p.value:void 0,sort_by:k.value[0]?.id||"created_at",sort_order:k.value[0]?.desc?"desc":"asc"},{preserveState:!0,preserveScroll:!0})},300)}),(l,a)=>(f(),_(re,{breadcrumbs:o},{default:s(()=>[t(e(pe),{title:"Pengiriman"}),d("div",He,[a[12]||(a[12]=d("div",{class:"flex items-center justify-between"},[d("div",null,[d("h1",{class:"text-3xl font-bold tracking-tight"},"Pengiriman"),d("p",{class:"text-muted-foreground"},"Kelola pengiriman pesanan")])],-1)),t(je,{statistics:i.statistics},null,8,["statistics"]),d("div",Oe,[d("div",Ge,[d("div",Ze,[t(e(ce),{class:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),t(e(Q),{modelValue:b.value,"onUpdate:modelValue":a[0]||(a[0]=r=>b.value=r),placeholder:"Cari order atau customer...",class:"pl-9"},null,8,["modelValue"])]),t(e(W),{modelValue:p.value,"onUpdate:modelValue":a[1]||(a[1]=r=>p.value=r)},{default:s(()=>[t(e(X),{class:"w-[180px]"},{default:s(()=>[t(e(Y),{placeholder:"Semua Status"})]),_:1}),t(e(ee),null,{default:s(()=>[t(e(x),{value:"all"},{default:s(()=>[...a[5]||(a[5]=[u("Semua Status",-1)])]),_:1}),t(e(x),{value:"pending"},{default:s(()=>[...a[6]||(a[6]=[u("Pending",-1)])]),_:1}),t(e(x),{value:"shipped"},{default:s(()=>[...a[7]||(a[7]=[u("Shipped",-1)])]),_:1}),t(e(x),{value:"delivered"},{default:s(()=>[...a[8]||(a[8]=[u("Delivered",-1)])]),_:1}),t(e(x),{value:"cancelled"},{default:s(()=>[...a[9]||(a[9]=[u("Cancelled",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),t(e(Ue),null,{default:s(()=>[t(e(Ne),{"as-child":""},{default:s(()=>[t(e(U),{variant:"outline",class:"ml-auto"},{default:s(()=>[a[10]||(a[10]=u(" Kolom ",-1)),t(e(ge),{class:"ml-2 h-4 w-4"})]),_:1})]),_:1}),t(e(Me),{align:"end"},{default:s(()=>[(f(!0),w(h,null,C(e(N).getAllColumns().filter(r=>r.getCanHide()),r=>(f(),_(e(Pe),{key:r.id,class:"capitalize","model-value":r.getIsVisible(),"onUpdate:modelValue":v=>{r.toggleVisibility(!!v)}},{default:s(()=>[u(D(r.id),1)]),_:2},1032,["model-value","onUpdate:modelValue"]))),128))]),_:1})]),_:1})]),d("div",Je,[t(e(Re),null,{default:s(()=>[t(e(Te),null,{default:s(()=>[(f(!0),w(h,null,C(e(N).getHeaderGroups(),r=>(f(),_(e(K),{key:r.id},{default:s(()=>[(f(!0),w(h,null,C(r.headers,v=>(f(),_(e(Ee),{key:v.id},{default:s(()=>[v.isPlaceholder?O("",!0):(f(),_(e(G),{key:0,render:v.column.columnDef.header,props:v.getContext()},null,8,["render","props"]))]),_:2},1024))),128))]),_:2},1024))),128))]),_:1}),t(e(Fe),null,{default:s(()=>[e(N).getRowModel().rows?.length?(f(!0),w(h,{key:0},C(e(N).getRowModel().rows,r=>(f(),_(e(K),{key:r.id},{default:s(()=>[(f(!0),w(h,null,C(r.getVisibleCells(),v=>(f(),_(e(J),{key:v.id},{default:s(()=>[t(e(G),{render:v.column.columnDef.cell,props:v.getContext()},null,8,["render","props"])]),_:2},1024))),128))]),_:2},1024))),128)):(f(),_(e(K),{key:1},{default:s(()=>[t(e(J),{colspan:j.length,class:"h-24 text-center"},{default:s(()=>[...a[11]||(a[11]=[u(" Tidak ada data pengiriman. ",-1)])]),_:1},8,["colspan"])]),_:1}))]),_:1})]),_:1})]),i.shipments.last_page>1?(f(),_(Ce,{key:0,data:{current_page:i.shipments.current_page,last_page:i.shipments.last_page,per_page:i.shipments.per_page,from:(i.shipments.current_page-1)*i.shipments.per_page+1,to:Math.min(i.shipments.current_page*i.shipments.per_page,i.shipments.total),total:i.shipments.total},url:e(M).url(),filters:{search:b.value||void 0,status:p.value!=="all"?p.value:void 0,sort_by:k.value[0]?.id||"created_at",sort_order:k.value[0]?.desc?"desc":"asc"}},null,8,["data","url","filters"])):O("",!0)]),t(ze,{open:$.value.open,"onUpdate:open":a[2]||(a[2]=r=>$.value.open=r),"tracking-number":S.value,"onUpdate:trackingNumber":a[3]||(a[3]=r=>S.value=r),status:V.value,"onUpdate:status":a[4]||(a[4]=r=>V.value=r),shipment:$.value.shipment,processing:P.value,onSubmit:ne},null,8,["open","tracking-number","status","shipment","processing"])]),_:1}))}});export{bt as default};
