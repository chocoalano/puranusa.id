import{d as A,r as y,q,D as K,j,v as g,g as o,b as t,u as e,$ as H,w as s,e as n,c as i,t as B,s as _,aq as C,J as b,Y as P,a8 as z,F as p,x,y as E,n as m,an as U,aG as G,A as J,B as L}from"./vendor-DTOvI-mL.js";import{_ as Y}from"./AppLayout.vue_vue_type_script_setup_true_lang-YhCYOJnL.js";import{_ as O}from"./Pagination.vue_vue_type_script_setup_true_lang-nWoduDQM.js";import{_ as $,v as V}from"./index-D22QrCMB.js";import{_ as k,a as S}from"./CardContent.vue_vue_type_script_setup_true_lang-Bj2sOBs1.js";import{_ as F}from"./CardHeader.vue_vue_type_script_setup_true_lang-Dnz_aDai.js";import{_ as R}from"./CardTitle.vue_vue_type_script_setup_true_lang-DNuWsNXR.js";import{_ as Q,a as X,b as Z}from"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-DuRk8pxL.js";import{_ as ee}from"./DropdownMenuCheckboxItem.vue_vue_type_script_setup_true_lang-DRjT8lNZ.js";import{_ as te}from"./Input.vue_vue_type_script_setup_true_lang-sYWCYV49.js";import{_ as se,a as ae,b as D,c as le,d as re,e as W}from"./TableHeader.vue_vue_type_script_setup_true_lang-C4NscKfn.js";import"./index-DaR_mHDg.js";import"./AvatarFallback.vue_vue_type_script_setup_true_lang-BMNk4ekC.js";import"./AvatarImage.vue_vue_type_script_setup_true_lang-Dl-lb8Nw.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DLa7QEbp.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-DpA8K8_j.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-CBkKfeqw.js";const oe={class:"rounded-xl p-4 space-y-6 py-6"},ne={class:"grid gap-4 md:grid-cols-3"},ue={class:"text-2xl font-bold"},de={class:"text-2xl font-bold"},ie={class:"text-2xl font-bold"},me={class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},ce={class:"relative flex-1 max-w-sm"},fe={class:"rounded-md border"},Me=A({__name:"Index",props:{customers:{},statistics:{},search:{}},setup(u){const v=u,f=y(v.search||""),c=y([]),M=y([]),T=y({});let I;const h=a=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(a),N=[{id:"index",header:()=>m("div",{class:"w-12"},"No"),cell:({row:a})=>{const l=a.index+1+(v.customers.current_page-1)*v.customers.per_page;return m("div",{class:"font-medium"},l)}},{accessorKey:"name",header:({column:a})=>m($,{variant:"ghost",onClick:()=>a.toggleSorting(a.getIsSorted()==="asc"),class:"-ml-4"},()=>["Nama Customer",m(U,{class:"ml-2 h-4 w-4"})])},{accessorKey:"email",header:"Email",cell:({row:a})=>m("div",{class:"text-sm text-muted-foreground"},a.getValue("email"))},{accessorKey:"ewallet_saldo",header:({column:a})=>m($,{variant:"ghost",onClick:()=>a.toggleSorting(a.getIsSorted()==="asc"),class:"-ml-4"},()=>["Saldo E-Wallet",m(U,{class:"ml-2 h-4 w-4"})]),cell:({row:a})=>{const l=parseFloat(a.getValue("ewallet_saldo"));return m("div",{class:"font-bold text-green-600"},h(l))}}],w=q({get data(){return v.customers.data},columns:N,getCoreRowModel:L(),getSortedRowModel:J(),getFilteredRowModel:G(),onSortingChange:a=>V(a,c),onColumnFiltersChange:a=>V(a,M),onColumnVisibilityChange:a=>V(a,T),state:{get sorting(){return c.value},get columnFilters(){return M.value},get columnVisibility(){return T.value}},manualSorting:!0});return K(c,a=>{a.length>0&&j.get("/admin/wallets",{search:f.value||void 0,sort_by:a[0].id,sort_order:a[0].desc?"desc":"asc"},{preserveState:!0,preserveScroll:!0})},{deep:!0}),K(f,()=>{clearTimeout(I),I=setTimeout(()=>{j.get("/admin/wallets",{search:f.value||void 0,sort_by:c.value[0]?.id||"name",sort_order:c.value[0]?.desc?"desc":"asc"},{preserveState:!0,preserveScroll:!0})},300)}),(a,l)=>(o(),g(p,null,[t(e(H),{title:"Kelola E-Wallet"}),t(Y,null,{default:s(()=>[n("div",oe,[l[9]||(l[9]=n("div",null,[n("h2",{class:"text-3xl font-bold tracking-tight"},"Kelola E-Wallet"),n("p",{class:"text-muted-foreground"},"Monitoring saldo e-wallet seluruh customer")],-1)),n("div",ne,[t(e(k),null,{default:s(()=>[t(e(F),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[t(e(R),{class:"text-sm font-medium"},{default:s(()=>[...l[1]||(l[1]=[_("Total Customer",-1)])]),_:1}),t(e(C),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(e(S),null,{default:s(()=>[n("div",ue,b(u.statistics.total_customers),1),l[2]||(l[2]=n("p",{class:"text-xs text-muted-foreground"},"Customer terdaftar",-1))]),_:1})]),_:1}),t(e(k),null,{default:s(()=>[t(e(F),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[t(e(R),{class:"text-sm font-medium"},{default:s(()=>[...l[3]||(l[3]=[_("Total Saldo",-1)])]),_:1}),t(e(C),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(e(S),null,{default:s(()=>[n("div",de,b(h(u.statistics.total_balance)),1),l[4]||(l[4]=n("p",{class:"text-xs text-muted-foreground"},"Saldo keseluruhan",-1))]),_:1})]),_:1}),t(e(k),null,{default:s(()=>[t(e(F),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[t(e(R),{class:"text-sm font-medium"},{default:s(()=>[...l[5]||(l[5]=[_("Rata-rata Saldo",-1)])]),_:1}),t(e(C),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(e(S),null,{default:s(()=>[n("div",ie,b(h(u.statistics.avg_balance)),1),l[6]||(l[6]=n("p",{class:"text-xs text-muted-foreground"},"Per customer",-1))]),_:1})]),_:1})]),n("div",me,[n("div",ce,[t(e(P),{class:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),t(e(te),{modelValue:f.value,"onUpdate:modelValue":l[0]||(l[0]=r=>f.value=r),placeholder:"Cari customer...",class:"pl-9"},null,8,["modelValue"])]),t(e(Q),null,{default:s(()=>[t(e(X),{"as-child":""},{default:s(()=>[t(e($),{variant:"outline",class:"ml-auto"},{default:s(()=>[l[7]||(l[7]=_(" Kolom ",-1)),t(e(z),{class:"ml-2 h-4 w-4"})]),_:1})]),_:1}),t(e(Z),{align:"end"},{default:s(()=>[(o(!0),g(p,null,x(e(w).getAllColumns().filter(r=>r.getCanHide()),r=>(o(),i(e(ee),{key:r.id,class:"capitalize","model-value":r.getIsVisible(),"onUpdate:modelValue":d=>{r.toggleVisibility(!!d)}},{default:s(()=>[_(b(r.id),1)]),_:2},1032,["model-value","onUpdate:modelValue"]))),128))]),_:1})]),_:1})]),n("div",fe,[t(e(se),null,{default:s(()=>[t(e(ae),null,{default:s(()=>[(o(!0),g(p,null,x(e(w).getHeaderGroups(),r=>(o(),i(e(D),{key:r.id},{default:s(()=>[(o(!0),g(p,null,x(r.headers,d=>(o(),i(e(le),{key:d.id},{default:s(()=>[d.isPlaceholder?B("",!0):(o(),i(e(E),{key:0,render:d.column.columnDef.header,props:d.getContext()},null,8,["render","props"]))]),_:2},1024))),128))]),_:2},1024))),128))]),_:1}),t(e(re),null,{default:s(()=>[e(w).getRowModel().rows?.length?(o(!0),g(p,{key:0},x(e(w).getRowModel().rows,r=>(o(),i(e(D),{key:r.id},{default:s(()=>[(o(!0),g(p,null,x(r.getVisibleCells(),d=>(o(),i(e(W),{key:d.id},{default:s(()=>[t(e(E),{render:d.column.columnDef.cell,props:d.getContext()},null,8,["render","props"])]),_:2},1024))),128))]),_:2},1024))),128)):(o(),i(e(D),{key:1},{default:s(()=>[t(e(W),{colspan:N.length,class:"h-24 text-center"},{default:s(()=>[...l[8]||(l[8]=[_(" Tidak ada data customer. ",-1)])]),_:1},8,["colspan"])]),_:1}))]),_:1})]),_:1})]),u.customers.last_page>1?(o(),i(O,{key:0,data:{current_page:u.customers.current_page,last_page:u.customers.last_page,per_page:u.customers.per_page,from:u.customers.from,to:u.customers.to,total:u.customers.total},url:"/admin/wallets",filters:{search:f.value||void 0,sort_by:c.value[0]?.id||"name",sort_order:c.value[0]?.desc?"desc":"asc"}},null,8,["data","filters"])):B("",!0)])]),_:1})],64))}});export{Me as default};
