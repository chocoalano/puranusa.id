import{d as x,r as d,p as b,v as h,g as S,b as r,u as o,$ as w,w as s,e as n,a2 as g,E,s as f,J as F,F as $,j as k,P as _}from"./vendor-DTOvI-mL.js";import{_ as D}from"./AppLayout.vue_vue_type_script_setup_true_lang-YhCYOJnL.js";import{_ as u}from"./index-D22QrCMB.js";import{_ as B}from"./CategoryForm.vue_vue_type_script_setup_true_lang-KU3w8iuf.js";import"./index-DaR_mHDg.js";import"./AvatarFallback.vue_vue_type_script_setup_true_lang-BMNk4ekC.js";import"./AvatarImage.vue_vue_type_script_setup_true_lang-Dl-lb8Nw.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-DuRk8pxL.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DLa7QEbp.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-DpA8K8_j.js";import"./Input.vue_vue_type_script_setup_true_lang-sYWCYV49.js";import"./Label.vue_vue_type_script_setup_true_lang-Bkvht4jR.js";import"./Textarea.vue_vue_type_script_setup_true_lang-Dt0uRcWG.js";import"./CardContent.vue_vue_type_script_setup_true_lang-Bj2sOBs1.js";import"./CardDescription.vue_vue_type_script_setup_true_lang-Dh4Au0Nv.js";import"./CardHeader.vue_vue_type_script_setup_true_lang-Dnz_aDai.js";import"./CardTitle.vue_vue_type_script_setup_true_lang-DNuWsNXR.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-CBkKfeqw.js";const C={class:"rounded-xl p-4 space-y-6 py-6"},P={class:"flex items-center gap-4"},N={class:"max-w-4xl"},X=x({__name:"Edit",props:{category:{},parentCategories:{}},setup(p){const t=p,e=d({parent_id:t.category.parent_id,slug:t.category.slug,name:t.category.name,description:t.category.description||"",sort_order:t.category.sort_order,is_active:t.category.is_active,image:null}),v=b(()=>t.category.image),c=d({}),m=d(!1),y=()=>{m.value=!0;const a=new FormData;a.append("_method","PUT"),a.append("name",e.value.name),a.append("slug",e.value.slug),a.append("description",e.value.description||""),a.append("sort_order",String(e.value.sort_order)),a.append("is_active",e.value.is_active?"1":"0"),e.value.parent_id&&a.append("parent_id",String(e.value.parent_id)),e.value.image instanceof File?a.append("image",e.value.image):e.value.image===null&&t.category.image&&a.append("remove_image","1"),k.post(`/admin/categories/${t.category.id}`,a,{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{_.success("Kategori berhasil diperbarui")},onError:i=>{c.value=i,_.error("Gagal memperbarui kategori")},onFinish:()=>{m.value=!1}})};return(a,i)=>(S(),h($,null,[r(o(w),{title:`Edit ${p.category.name}`},null,8,["title"]),r(D,null,{default:s(()=>[n("div",C,[n("div",P,[r(o(g),{href:"/admin/categories"},{default:s(()=>[r(o(u),{variant:"outline",size:"icon"},{default:s(()=>[r(o(E),{class:"h-4 w-4"})]),_:1})]),_:1}),i[1]||(i[1]=n("div",null,[n("h1",{class:"text-3xl font-bold"},"Edit Kategori"),n("p",{class:"text-muted-foreground"},"Perbarui informasi kategori")],-1))]),n("div",N,[r(B,{"form-data":e.value,"onUpdate:formData":i[0]||(i[0]=l=>e.value=l),"parent-categories":p.parentCategories,errors:c.value,processing:m.value,"existing-image":v.value,onSubmit:y},{actions:s(({processing:l})=>[r(o(g),{href:"/admin/categories"},{default:s(()=>[r(o(u),{type:"button",variant:"outline"},{default:s(()=>[...i[2]||(i[2]=[f("Batal",-1)])]),_:1})]),_:1}),r(o(u),{type:"submit",disabled:l},{default:s(()=>[f(F(l?"Menyimpan...":"Simpan Perubahan"),1)]),_:2},1032,["disabled"])]),_:1},8,["form-data","parent-categories","errors","processing","existing-image"])])])]),_:1})],64))}});export{X as default};
