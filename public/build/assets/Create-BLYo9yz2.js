import{d as J,D as O,p as v,r as L,v as u,g as d,b as a,u as e,a1 as Q,w as l,e as r,a4 as h,s as n,G as W,ae as X,t as p,J as g,K as i,ah as Y,al as ee,Z as se,F as y,x as $,c as B,Q as w}from"./vendor-4-BZYpFr.js";import{i as A,_ as te,s as ae}from"./AppLayout.vue_vue_type_script_setup_true_lang-4ba7MJZZ.js";import{_ as V}from"./index-C_d1QX2L.js";import{_ as k}from"./Input.vue_vue_type_script_setup_true_lang-BCOvYMLd.js";import{_ as f}from"./Label.vue_vue_type_script_setup_true_lang-Cme2qRTp.js";import{_ as D,a as T}from"./CardContent.vue_vue_type_script_setup_true_lang-CqrB5hxD.js";import{_ as j}from"./CardDescription.vue_vue_type_script_setup_true_lang-DgP-o0Lu.js";import{_ as q}from"./CardHeader.vue_vue_type_script_setup_true_lang-CAU7O7lt.js";import{_ as K}from"./CardTitle.vue_vue_type_script_setup_true_lang-CXovuBmY.js";import{_ as M,a as N,b as U,c as C,d as c}from"./SelectValue.vue_vue_type_script_setup_true_lang-uung8Eko.js";import"./index-CSEUMRIG.js";import"./AvatarFallback.vue_vue_type_script_setup_true_lang-CQ0bN-pz.js";import"./AvatarImage.vue_vue_type_script_setup_true_lang-DAlPCySi.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-B92NEDT-.js";import"./index-BUE9bFsX.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DLcPllPw.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-CdMXDPSC.js";const re={class:"rounded-xl p-4 space-y-6 py-6"},le={class:"flex items-center justify-between"},oe={class:"grid gap-4 md:grid-cols-2"},ne={class:"space-y-2"},de={key:0,class:"text-sm text-destructive"},ie={class:"space-y-2"},ue={key:0,class:"text-sm text-destructive"},me={class:"space-y-2"},pe={key:0,class:"text-sm text-destructive"},fe={class:"space-y-2"},ge={key:0,class:"text-sm text-destructive"},ke={class:"space-y-2"},ve={key:0,class:"text-sm text-destructive"},xe={class:"space-y-2"},_e={key:0,class:"text-sm text-destructive"},ce={class:"space-y-2"},be={class:"space-y-2"},ye={class:"grid gap-4 md:grid-cols-2"},we={class:"space-y-2"},Ve={key:0,class:"flex items-center justify-between rounded-md border bg-muted p-3"},Pe={class:"text-sm font-medium"},Se={class:"text-xs text-muted-foreground"},$e={key:1,class:"relative"},Me={class:"relative"},Ne={key:0,class:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md border bg-popover p-1 shadow-md"},Ue=["onClick"],Ce={class:"font-medium"},Ee={class:"text-xs text-muted-foreground"},Le={key:2,class:"text-sm text-destructive"},he={class:"space-y-2"},Be={key:0,class:"text-sm text-destructive"},Ae={key:0,class:"grid gap-4 md:grid-cols-2 mt-4 p-4 border rounded-lg bg-green-50 dark:bg-green-900/20"},De={class:"space-y-2"},Te={key:0,class:"text-sm text-destructive"},je={class:"space-y-2"},qe={key:0,class:"text-sm text-destructive"},Ke={class:"flex justify-end gap-4"},ls=J({__name:"Create",props:{customers:{},levels:{},packages:{}},setup(P){const x=P,t=O({name:"",username:"",email:"",phone:"",password:"",password_confirmation:"",sponsor_id:null,status:"1",registration_amount:1e5,description:"",level:"",package_id:""}),R=v(()=>t.status==="3"),F=v(()=>t.level&&x.levels.find(s=>s.value===t.level)?.label||null),I=v(()=>t.package_id&&x.packages.find(s=>s.id.toString()===t.package_id)?.name||null),Z=v(()=>{switch(t.status){case"1":return"Prospek";case"2":return"Pasif";case"3":return"Aktif";default:return"Pilih status"}}),_=L(""),b=L(!1),S=v(()=>x.customers.find(m=>m.id===t.sponsor_id)),E=v(()=>{if(!_.value)return x.customers;const m=_.value.toLowerCase();return x.customers.filter(s=>(s.name?.toLowerCase().includes(m)??!1)||(s.ewallet_id?.toLowerCase().includes(m)??!1))}),z=m=>{t.sponsor_id=m.id,b.value=!1,_.value=""},G=()=>{typeof window<"u"&&window.setTimeout(()=>{b.value=!1},200)},H=()=>{t.transform(m=>({...m,status:parseInt(m.status,10),package_id:m.package_id?parseInt(m.package_id,10):null,level:m.level||null})).post(ae.url(),{preserveScroll:!0,onSuccess:()=>{w.success("Pelanggan berhasil didaftarkan")},onError:m=>{const s=Object.values(m);s.length>0?(w.error(s[0]),s.length>1&&w.warning(`Terdapat ${s.length} kesalahan pada form. Silakan periksa kembali.`)):w.error("Gagal mendaftarkan pelanggan. Silakan periksa data yang dimasukkan.")}})};return(m,s)=>(d(),u(y,null,[a(e(Q),{title:"Tambah Pelanggan"}),a(te,null,{default:l(()=>[r("div",re,[r("div",le,[s[15]||(s[15]=r("div",null,[r("h1",{class:"text-3xl font-bold"},"Tambah Pelanggan"),r("p",{class:"mt-2 text-muted-foreground"}," Daftarkan pelanggan baru ke dalam sistem MLM ")],-1)),a(e(h),{href:e(A).url()},{default:l(()=>[a(e(V),{variant:"outline"},{default:l(()=>[a(e(W),{class:"mr-2 h-4 w-4"}),s[14]||(s[14]=n(" Kembali ",-1))]),_:1})]),_:1},8,["href"])]),r("form",{onSubmit:X(H,["prevent"]),class:"space-y-6"},[a(e(D),null,{default:l(()=>[a(e(q),null,{default:l(()=>[a(e(K),null,{default:l(()=>[...s[16]||(s[16]=[n("Informasi Pribadi",-1)])]),_:1}),a(e(j),null,{default:l(()=>[...s[17]||(s[17]=[n(" Data pribadi pelanggan yang akan didaftarkan ",-1)])]),_:1})]),_:1}),a(e(T),{class:"space-y-4"},{default:l(()=>[r("div",oe,[r("div",ne,[a(e(f),{for:"name"},{default:l(()=>[...s[18]||(s[18]=[n("Nama Lengkap *",-1)])]),_:1}),a(e(k),{id:"name",modelValue:e(t).name,"onUpdate:modelValue":s[0]||(s[0]=o=>e(t).name=o),placeholder:"Masukkan nama lengkap",class:g({"border-destructive":e(t).errors.name}),required:""},null,8,["modelValue","class"]),s[19]||(s[19]=r("p",{class:"text-xs text-muted-foreground"}," Nama lengkap sesuai identitas, maksimal 255 karakter ",-1)),e(t).errors.name?(d(),u("p",de,i(e(t).errors.name),1)):p("",!0)]),r("div",ie,[a(e(f),{for:"username"},{default:l(()=>[...s[20]||(s[20]=[n("Username *",-1)])]),_:1}),a(e(k),{id:"username",modelValue:e(t).username,"onUpdate:modelValue":s[1]||(s[1]=o=>e(t).username=o),placeholder:"contoh: johndoe123",class:g({"border-destructive":e(t).errors.username}),required:""},null,8,["modelValue","class"]),s[21]||(s[21]=r("p",{class:"text-xs text-muted-foreground"}," Username untuk login. Hanya boleh huruf, angka, dash (-) dan underscore (_) ",-1)),e(t).errors.username?(d(),u("p",ue,i(e(t).errors.username),1)):p("",!0)]),r("div",me,[a(e(f),{for:"email"},{default:l(()=>[...s[22]||(s[22]=[n("Email *",-1)])]),_:1}),a(e(k),{id:"email",modelValue:e(t).email,"onUpdate:modelValue":s[2]||(s[2]=o=>e(t).email=o),type:"email",placeholder:"nama@email.com",class:g({"border-destructive":e(t).errors.email}),required:""},null,8,["modelValue","class"]),s[23]||(s[23]=r("p",{class:"text-xs text-muted-foreground"}," Email aktif untuk notifikasi dan verifikasi. Satu email dapat digunakan maksimal 7 akun. ",-1)),e(t).errors.email?(d(),u("p",pe,i(e(t).errors.email),1)):p("",!0)]),r("div",fe,[a(e(f),{for:"phone"},{default:l(()=>[...s[24]||(s[24]=[n("No. Telepon",-1)])]),_:1}),a(e(k),{id:"phone",modelValue:e(t).phone,"onUpdate:modelValue":s[3]||(s[3]=o=>e(t).phone=o),placeholder:"08xxxxxxxxxx",class:g({"border-destructive":e(t).errors.phone})},null,8,["modelValue","class"]),s[25]||(s[25]=r("p",{class:"text-xs text-muted-foreground"}," Nomor telepon aktif (opsional), maksimal 20 karakter ",-1)),e(t).errors.phone?(d(),u("p",ge,i(e(t).errors.phone),1)):p("",!0)]),r("div",ke,[a(e(f),{for:"registration_amount"},{default:l(()=>[...s[26]||(s[26]=[n("Biaya Registrasi *",-1)])]),_:1}),a(e(k),{id:"registration_amount",modelValue:e(t).registration_amount,"onUpdate:modelValue":s[4]||(s[4]=o=>e(t).registration_amount=o),modelModifiers:{number:!0},type:"number",min:"0",step:"1000",class:g({"border-destructive":e(t).errors.registration_amount}),required:""},null,8,["modelValue","class"]),s[27]||(s[27]=r("p",{class:"text-xs text-muted-foreground"}," Biaya pendaftaran dalam Rupiah (Rp), minimal 0 ",-1)),e(t).errors.registration_amount?(d(),u("p",ve,i(e(t).errors.registration_amount),1)):p("",!0)]),r("div",xe,[a(e(f),{for:"password"},{default:l(()=>[...s[28]||(s[28]=[n("Password *",-1)])]),_:1}),a(e(k),{id:"password",modelValue:e(t).password,"onUpdate:modelValue":s[5]||(s[5]=o=>e(t).password=o),type:"password",placeholder:"Minimal 8 karakter",class:g({"border-destructive":e(t).errors.password}),required:""},null,8,["modelValue","class"]),s[29]||(s[29]=r("p",{class:"text-xs text-muted-foreground"}," Password minimal 8 karakter, gunakan kombinasi huruf dan angka ",-1)),e(t).errors.password?(d(),u("p",_e,i(e(t).errors.password),1)):p("",!0)]),r("div",ce,[a(e(f),{for:"password_confirmation"},{default:l(()=>[...s[30]||(s[30]=[n("Konfirmasi Password *",-1)])]),_:1}),a(e(k),{id:"password_confirmation",modelValue:e(t).password_confirmation,"onUpdate:modelValue":s[6]||(s[6]=o=>e(t).password_confirmation=o),type:"password",placeholder:"Ulangi password",required:""},null,8,["modelValue"]),s[31]||(s[31]=r("p",{class:"text-xs text-muted-foreground"}," Ketik ulang password yang sama untuk konfirmasi ",-1))])]),r("div",be,[a(e(f),{for:"description"},{default:l(()=>[...s[32]||(s[32]=[n("Keterangan",-1)])]),_:1}),Y(r("textarea",{id:"description","onUpdate:modelValue":s[7]||(s[7]=o=>e(t).description=o),placeholder:"Keterangan tambahan (opsional)",rows:"3",class:"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm"},null,512),[[ee,e(t).description]]),s[33]||(s[33]=r("p",{class:"text-xs text-muted-foreground"}," Catatan tambahan tentang pelanggan, seperti sumber referral atau informasi penting lainnya ",-1))])]),_:1})]),_:1}),a(e(D),null,{default:l(()=>[a(e(q),null,{default:l(()=>[a(e(K),null,{default:l(()=>[...s[34]||(s[34]=[n("Struktur Jaringan MLM",-1)])]),_:1}),a(e(j),null,{default:l(()=>[...s[35]||(s[35]=[n(" Pilih sponsor dan status pelanggan ",-1)])]),_:1})]),_:1}),a(e(T),{class:"space-y-4"},{default:l(()=>[r("div",ye,[r("div",we,[a(e(f),{for:"sponsor"},{default:l(()=>[...s[36]||(s[36]=[n("Sponsor",-1)])]),_:1}),S.value?(d(),u("div",Ve,[r("div",null,[r("p",Pe,i(S.value.name),1),r("p",Se,i(S.value.ewallet_id),1)]),a(e(V),{type:"button",variant:"ghost",size:"sm",onClick:s[8]||(s[8]=o=>e(t).sponsor_id=null)},{default:l(()=>[...s[37]||(s[37]=[n(" Hapus ",-1)])]),_:1})])):(d(),u("div",$e,[r("div",Me,[a(e(k),{modelValue:_.value,"onUpdate:modelValue":s[9]||(s[9]=o=>_.value=o),onFocus:s[10]||(s[10]=o=>b.value=!0),onBlur:G,placeholder:"Cari sponsor berdasarkan nama atau ID...",class:g({"border-destructive":e(t).errors.sponsor_id})},null,8,["modelValue","class"]),a(e(se),{class:"absolute right-3 top-3 h-4 w-4 text-muted-foreground"})]),b.value&&E.value.length>0?(d(),u("div",Ne,[(d(!0),u(y,null,$(E.value,o=>(d(),u("button",{key:o.id,type:"button",onClick:Re=>z(o),class:"w-full rounded px-3 py-2 text-left text-sm hover:bg-accent"},[r("div",Ce,i(o.name),1),r("div",Ee,i(o.ewallet_id),1)],8,Ue))),128))])):p("",!0)])),s[38]||(s[38]=r("p",{class:"text-xs text-muted-foreground"}," Member yang merekomendasikan pelanggan ini (opsional). Kosongkan jika tidak ada sponsor ",-1)),e(t).errors.sponsor_id?(d(),u("p",Le,i(e(t).errors.sponsor_id),1)):p("",!0)]),r("div",he,[a(e(f),{for:"status"},{default:l(()=>[...s[39]||(s[39]=[n("Status *",-1)])]),_:1}),a(e(M),{modelValue:e(t).status,"onUpdate:modelValue":s[11]||(s[11]=o=>e(t).status=o)},{default:l(()=>[a(e(N),{class:g({"border-destructive":e(t).errors.status})},{default:l(()=>[a(e(U),{placeholder:"Pilih status"},{default:l(()=>[n(i(Z.value),1)]),_:1})]),_:1},8,["class"]),a(e(C),null,{default:l(()=>[a(e(c),{value:"1"},{default:l(()=>[...s[40]||(s[40]=[n("Prospek",-1)])]),_:1}),a(e(c),{value:"2"},{default:l(()=>[...s[41]||(s[41]=[n("Pasif",-1)])]),_:1}),a(e(c),{value:"3"},{default:l(()=>[...s[42]||(s[42]=[n("Aktif",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"]),s[43]||(s[43]=r("p",{class:"text-xs text-muted-foreground"},[r("strong",null,"Prospek:"),n(" Calon member, belum masuk jaringan MLM"),r("br"),r("strong",null,"Pasif:"),n(" Sudah terdaftar tapi belum aktif bertransaksi"),r("br"),r("strong",null,"Aktif:"),n(" Member aktif dengan paket dan peringkat ")],-1)),e(t).errors.status?(d(),u("p",Be,i(e(t).errors.status),1)):p("",!0)])]),R.value?(d(),u("div",Ae,[s[48]||(s[48]=r("div",{class:"md:col-span-2"},[r("p",{class:"text-sm font-medium text-green-800 dark:text-green-200 mb-3"},"Member Aktif - Pilih Paket dan Peringkat")],-1)),r("div",De,[a(e(f),{for:"package_id"},{default:l(()=>[...s[44]||(s[44]=[n("Paket *",-1)])]),_:1}),a(e(M),{modelValue:e(t).package_id,"onUpdate:modelValue":s[12]||(s[12]=o=>e(t).package_id=o)},{default:l(()=>[a(e(N),{class:g({"border-destructive":e(t).errors.package_id})},{default:l(()=>[a(e(U),{placeholder:"Pilih paket"},{default:l(()=>[n(i(I.value||"Pilih paket"),1)]),_:1})]),_:1},8,["class"]),a(e(C),null,{default:l(()=>[(d(!0),u(y,null,$(P.packages,o=>(d(),B(e(c),{key:o.id,value:o.id.toString()},{default:l(()=>[n(i(o.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),s[45]||(s[45]=r("p",{class:"text-xs text-muted-foreground"}," Pilih paket: ZENNER Plus, ZENNER Prime, atau ZENNER Ultra ",-1)),e(t).errors.package_id?(d(),u("p",Te,i(e(t).errors.package_id),1)):p("",!0)]),r("div",je,[a(e(f),{for:"level"},{default:l(()=>[...s[46]||(s[46]=[n("Peringkat",-1)])]),_:1}),a(e(M),{modelValue:e(t).level,"onUpdate:modelValue":s[13]||(s[13]=o=>e(t).level=o)},{default:l(()=>[a(e(N),{class:g({"border-destructive":e(t).errors.level})},{default:l(()=>[a(e(U),{placeholder:"Pilih peringkat"},{default:l(()=>[n(i(F.value||"Pilih peringkat"),1)]),_:1})]),_:1},8,["class"]),a(e(C),null,{default:l(()=>[(d(!0),u(y,null,$(P.levels,o=>(d(),B(e(c),{key:o.value,value:o.value},{default:l(()=>[n(i(o.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),s[47]||(s[47]=r("p",{class:"text-xs text-muted-foreground"}," Pilih peringkat: Associate, Senior Associate, Executive, atau Director ",-1)),e(t).errors.level?(d(),u("p",qe,i(e(t).errors.level),1)):p("",!0)])])):p("",!0)]),_:1})]),_:1}),r("div",Ke,[a(e(h),{href:e(A).url()},{default:l(()=>[a(e(V),{type:"button",variant:"outline"},{default:l(()=>[...s[49]||(s[49]=[n(" Batal ",-1)])]),_:1})]),_:1},8,["href"]),a(e(V),{type:"submit",disabled:e(t).processing},{default:l(()=>[n(i(e(t).processing?"Menyimpan...":"Simpan Pelanggan"),1)]),_:1},8,["disabled"])])],32)])]),_:1})],64))}});export{ls as default};
