import{d as R,ab as j,ac as W,r as k,p as E,v as f,g as p,ad as X,b as t,e as r,u as a,w as l,s as o,t as v,K as _,J as Q,X as Y,aO as Z,af as h,ag as ee,ah as te,W as ae}from"./vendor-BgSYH69o.js";import{_ as g}from"./Input.vue_vue_type_script_setup_true_lang-CucwjuSa.js";import{_ as u}from"./Label.vue_vue_type_script_setup_true_lang-rNa1VbjU.js";import{_ as S}from"./Textarea.vue_vue_type_script_setup_true_lang-8GCGPdxB.js";import{_ as B}from"./index-C6h2rSEx.js";import{_ as V,a as P}from"./CardContent.vue_vue_type_script_setup_true_lang-DMT_NDq0.js";import{_ as w}from"./CardDescription.vue_vue_type_script_setup_true_lang-BxkDfeDR.js";import{_ as D}from"./CardHeader.vue_vue_type_script_setup_true_lang-CGqIWGeD.js";import{_ as c}from"./CardTitle.vue_vue_type_script_setup_true_lang-DLaLEZPb.js";import{_ as U,a as I,b as $,c as T,d as m}from"./SelectValue.vue_vue_type_script_setup_true_lang-CM9Iafca.js";const le={class:"grid gap-4 md:grid-cols-2"},se={class:"space-y-2"},oe={key:0,class:"text-sm text-destructive"},ie={class:"space-y-2"},re={key:0,class:"text-sm text-destructive"},de={class:"grid gap-4 md:grid-cols-2"},ue={class:"space-y-2"},ne={key:0,class:"text-sm text-destructive"},me={class:"space-y-2"},fe={class:"space-y-2"},pe={class:"space-y-2"},ge={key:0,class:"relative w-full h-full p-4"},ve=["src"],_e={key:1,class:"text-center p-6"},ye={class:"mx-auto w-12 h-12 rounded-full bg-muted flex items-center justify-center mb-4"},xe={key:0,class:"text-sm text-destructive"},be={class:"grid gap-4 md:grid-cols-2"},ke={class:"space-y-2"},Ve={key:0,class:"text-sm text-destructive"},Pe={class:"space-y-2"},we={key:0,class:"text-sm text-destructive"},De={class:"grid gap-4 md:grid-cols-3"},ce={class:"space-y-2"},Ue={class:"space-y-2"},Ie={class:"space-y-2"},$e={class:"flex items-center gap-2"},Te={class:"grid gap-4 md:grid-cols-2"},Ce={class:"space-y-2"},Fe={class:"space-y-2"},Me={class:"space-y-2"},Ne={class:"flex justify-end gap-4"},Le=R({__name:"PromotionForm",props:j({errors:{},processing:{type:Boolean},existingImage:{}},{formData:{required:!0},formDataModifiers:{}}),emits:j(["submit"],["update:formData"]),setup(d,{emit:G}){const C=d,q=G,i=W(d,"formData"),y=k(null),x=k(null),b=k(!1),F=E(()=>x.value?x.value:C.existingImage?C.existingImage:null),z=n=>{const s=n.target.files?.[0];s&&M(s)},M=n=>{if(!["image/jpeg","image/png","image/gif","image/webp"].includes(n.type)){alert("Hanya file gambar (JPEG, PNG, GIF, WebP) yang diizinkan");return}const s=2*1024*1024;if(n.size>s){alert("Ukuran file maksimal 2MB");return}i.value.image=n;const N=new FileReader;N.onload=K=>{x.value=K.target?.result},N.readAsDataURL(n)},O=n=>{n.preventDefault(),b.value=!1;const e=n.dataTransfer?.files?.[0];e&&M(e)},A=n=>{n.preventDefault(),b.value=!0},J=()=>{b.value=!1},H=()=>{i.value.image=null,x.value=null,y.value&&(y.value.value="")},L=()=>{y.value?.click()};return(n,e)=>(p(),f("form",{onSubmit:e[14]||(e[14]=X(s=>q("submit"),["prevent"])),class:"space-y-6"},[t(a(V),null,{default:l(()=>[t(a(D),null,{default:l(()=>[t(a(c),null,{default:l(()=>[...e[15]||(e[15]=[o("Informasi Dasar",-1)])]),_:1}),t(a(w),null,{default:l(()=>[...e[16]||(e[16]=[o("Detail utama promosi atau diskon",-1)])]),_:1})]),_:1}),t(a(P),{class:"space-y-4"},{default:l(()=>[r("div",le,[r("div",se,[t(a(u),{for:"code"},{default:l(()=>[...e[17]||(e[17]=[o("Kode Promosi *",-1)])]),_:1}),t(a(g),{id:"code",modelValue:i.value.code,"onUpdate:modelValue":e[0]||(e[0]=s=>i.value.code=s),placeholder:"PROMO2024",class:"uppercase",required:""},null,8,["modelValue"]),d.errors?.code?(p(),f("p",oe,_(d.errors.code),1)):v("",!0)]),r("div",ie,[t(a(u),{for:"name"},{default:l(()=>[...e[18]||(e[18]=[o("Nama Promosi *",-1)])]),_:1}),t(a(g),{id:"name",modelValue:i.value.name,"onUpdate:modelValue":e[1]||(e[1]=s=>i.value.name=s),placeholder:"Flash Sale Akhir Tahun",required:""},null,8,["modelValue"]),d.errors?.name?(p(),f("p",re,_(d.errors.name),1)):v("",!0)])]),r("div",de,[r("div",ue,[t(a(u),{for:"type"},{default:l(()=>[...e[19]||(e[19]=[o("Tipe Promosi *",-1)])]),_:1}),t(a(U),{modelValue:i.value.type,"onUpdate:modelValue":e[2]||(e[2]=s=>i.value.type=s),required:""},{default:l(()=>[t(a(I),{id:"type"},{default:l(()=>[t(a($),{placeholder:"Pilih tipe"})]),_:1}),t(a(T),null,{default:l(()=>[t(a(m),{value:"discount"},{default:l(()=>[...e[20]||(e[20]=[o("Diskon",-1)])]),_:1}),t(a(m),{value:"bundle"},{default:l(()=>[...e[21]||(e[21]=[o("Bundle",-1)])]),_:1}),t(a(m),{value:"flash_sale"},{default:l(()=>[...e[22]||(e[22]=[o("Flash Sale",-1)])]),_:1}),t(a(m),{value:"promo"},{default:l(()=>[...e[23]||(e[23]=[o("Promo",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"]),d.errors?.type?(p(),f("p",ne,_(d.errors.type),1)):v("",!0)]),r("div",me,[t(a(u),{for:"landing_slug"},{default:l(()=>[...e[24]||(e[24]=[o("Landing Page Slug",-1)])]),_:1}),t(a(g),{id:"landing_slug",modelValue:i.value.landing_slug,"onUpdate:modelValue":e[3]||(e[3]=s=>i.value.landing_slug=s),placeholder:"flash-sale-2024"},null,8,["modelValue"])])]),r("div",fe,[t(a(u),{for:"description"},{default:l(()=>[...e[25]||(e[25]=[o("Deskripsi",-1)])]),_:1}),t(a(S),{id:"description",modelValue:i.value.description,"onUpdate:modelValue":e[4]||(e[4]=s=>i.value.description=s),placeholder:"Deskripsi promosi (opsional)",rows:"3"},null,8,["modelValue"])]),r("div",pe,[t(a(u),{for:"image"},{default:l(()=>[...e[26]||(e[26]=[o("Gambar Promosi",-1)])]),_:1}),r("div",{class:Q(["relative border-2 border-dashed rounded-lg transition-colors",b.value?"border-primary bg-primary/5":"border-muted-foreground/25 hover:border-primary/50","min-h-[200px] flex items-center justify-center"]),onDrop:O,onDragover:A,onDragleave:J},[F.value?(p(),f("div",ge,[r("img",{src:F.value,alt:"Preview",class:"max-h-[300px] w-auto mx-auto rounded-lg object-contain"},null,8,ve),t(a(B),{type:"button",variant:"destructive",size:"icon",class:"absolute top-2 right-2",onClick:H},{default:l(()=>[t(a(Y),{class:"h-4 w-4"})]),_:1})])):(p(),f("div",_e,[r("div",ye,[t(a(Z),{class:"h-6 w-6 text-muted-foreground"})]),e[28]||(e[28]=r("p",{class:"text-sm text-muted-foreground mb-2"}," Drag & drop gambar di sini, atau ",-1)),t(a(B),{type:"button",variant:"outline",size:"sm",onClick:L},{default:l(()=>[t(a(h),{class:"h-4 w-4 mr-2"}),e[27]||(e[27]=o(" Pilih File ",-1))]),_:1}),e[29]||(e[29]=r("p",{class:"text-xs text-muted-foreground mt-2"}," PNG, JPG, GIF, WebP (maks. 2MB) ",-1))])),r("input",{ref_key:"fileInput",ref:y,type:"file",accept:"image/jpeg,image/png,image/gif,image/webp",class:"hidden",onChange:z},null,544)],34),d.errors?.image?(p(),f("p",xe,_(d.errors.image),1)):v("",!0)])]),_:1})]),_:1}),t(a(V),null,{default:l(()=>[t(a(D),null,{default:l(()=>[t(a(c),null,{default:l(()=>[...e[30]||(e[30]=[o("Periode & Pengaturan",-1)])]),_:1}),t(a(w),null,{default:l(()=>[...e[31]||(e[31]=[o("Atur waktu dan batasan promosi",-1)])]),_:1})]),_:1}),t(a(P),{class:"space-y-4"},{default:l(()=>[r("div",be,[r("div",ke,[t(a(u),{for:"start_at"},{default:l(()=>[...e[32]||(e[32]=[o("Tanggal Mulai *",-1)])]),_:1}),t(a(g),{id:"start_at",modelValue:i.value.start_at,"onUpdate:modelValue":e[5]||(e[5]=s=>i.value.start_at=s),type:"datetime-local",required:""},null,8,["modelValue"]),d.errors?.start_at?(p(),f("p",Ve,_(d.errors.start_at),1)):v("",!0)]),r("div",Pe,[t(a(u),{for:"end_at"},{default:l(()=>[...e[33]||(e[33]=[o("Tanggal Berakhir *",-1)])]),_:1}),t(a(g),{id:"end_at",modelValue:i.value.end_at,"onUpdate:modelValue":e[6]||(e[6]=s=>i.value.end_at=s),type:"datetime-local",required:""},null,8,["modelValue"]),d.errors?.end_at?(p(),f("p",we,_(d.errors.end_at),1)):v("",!0)])]),r("div",De,[r("div",ce,[t(a(u),{for:"priority"},{default:l(()=>[...e[34]||(e[34]=[o("Prioritas",-1)])]),_:1}),t(a(g),{id:"priority",modelValue:i.value.priority,"onUpdate:modelValue":e[7]||(e[7]=s=>i.value.priority=s),modelModifiers:{number:!0},type:"number",min:"0",placeholder:"0"},null,8,["modelValue"]),e[35]||(e[35]=r("p",{class:"text-sm text-muted-foreground"}," Angka lebih tinggi = prioritas lebih tinggi ",-1))]),r("div",Ue,[t(a(u),{for:"max_redemption"},{default:l(()=>[...e[36]||(e[36]=[o("Maks. Penebusan",-1)])]),_:1}),t(a(g),{id:"max_redemption",value:i.value.max_redemption??"",onInput:e[8]||(e[8]=s=>i.value.max_redemption=s.target.value?Number(s.target.value):null),type:"number",min:"0",placeholder:"Tidak terbatas"},null,8,["value"])]),r("div",Ie,[t(a(u),{for:"per_user_limit"},{default:l(()=>[...e[37]||(e[37]=[o("Limit Per User",-1)])]),_:1}),t(a(g),{id:"per_user_limit",value:i.value.per_user_limit??"",onInput:e[9]||(e[9]=s=>i.value.per_user_limit=s.target.value?Number(s.target.value):null),type:"number",min:"0",placeholder:"Tidak terbatas"},null,8,["value"])])]),r("div",$e,[ee(r("input",{id:"is_active","onUpdate:modelValue":e[10]||(e[10]=s=>i.value.is_active=s),type:"checkbox",class:"rounded"},null,512),[[te,i.value.is_active]]),t(a(u),{for:"is_active"},{default:l(()=>[...e[38]||(e[38]=[o("Promosi Aktif",-1)])]),_:1})])]),_:1})]),_:1}),t(a(V),null,{default:l(()=>[t(a(D),null,{default:l(()=>[t(a(c),null,{default:l(()=>[...e[39]||(e[39]=[o("Penempatan",-1)])]),_:1}),t(a(w),null,{default:l(()=>[...e[40]||(e[40]=[o("Tentukan dimana promosi ditampilkan",-1)])]),_:1})]),_:1}),t(a(P),{class:"space-y-4"},{default:l(()=>[r("div",Te,[r("div",Ce,[t(a(u),{for:"show_on"},{default:l(()=>[...e[41]||(e[41]=[o("Tampilkan Di",-1)])]),_:1}),t(a(U),{modelValue:i.value.show_on,"onUpdate:modelValue":e[11]||(e[11]=s=>i.value.show_on=s)},{default:l(()=>[t(a(I),{id:"show_on"},{default:l(()=>[t(a($),{placeholder:"Pilih lokasi"})]),_:1}),t(a(T),null,{default:l(()=>[t(a(m),{value:"homepage"},{default:l(()=>[...e[42]||(e[42]=[o("Homepage",-1)])]),_:1}),t(a(m),{value:"product_page"},{default:l(()=>[...e[43]||(e[43]=[o("Product Page",-1)])]),_:1}),t(a(m),{value:"checkout"},{default:l(()=>[...e[44]||(e[44]=[o("Checkout",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),r("div",Fe,[t(a(u),{for:"page"},{default:l(()=>[...e[45]||(e[45]=[o("Halaman",-1)])]),_:1}),t(a(U),{modelValue:i.value.page,"onUpdate:modelValue":e[12]||(e[12]=s=>i.value.page=s)},{default:l(()=>[t(a(I),{id:"page"},{default:l(()=>[t(a($),{placeholder:"Pilih halaman"})]),_:1}),t(a(T),null,{default:l(()=>[t(a(m),{value:"home"},{default:l(()=>[...e[46]||(e[46]=[o("Home",-1)])]),_:1}),t(a(m),{value:"product"},{default:l(()=>[...e[47]||(e[47]=[o("Product",-1)])]),_:1}),t(a(m),{value:"category"},{default:l(()=>[...e[48]||(e[48]=[o("Category",-1)])]),_:1}),t(a(m),{value:"cart"},{default:l(()=>[...e[49]||(e[49]=[o("Cart",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),r("div",Me,[t(a(u),{for:"conditions_json"},{default:l(()=>[...e[50]||(e[50]=[o("Kondisi (JSON)",-1)])]),_:1}),t(a(S),{id:"conditions_json",modelValue:i.value.conditions_json,"onUpdate:modelValue":e[13]||(e[13]=s=>i.value.conditions_json=s),placeholder:'{"min_purchase": 100000, "categories": [1, 2]}',rows:"3",class:"font-mono text-sm"},null,8,["modelValue"]),e[51]||(e[51]=r("p",{class:"text-sm text-muted-foreground"}," Format JSON untuk kondisi spesifik promosi ",-1))])]),_:1})]),_:1}),r("div",Ne,[ae(n.$slots,"actions",{processing:d.processing})])],32))}});export{Le as _};
