import{_ as dt,a as ut,b as Y,c as ee}from"./TabsTrigger.vue_vue_type_script_setup_true_lang-BBXLv6Zh.js";import{b as It,c as gt,_ as Et}from"./Ecommerce.vue_vue_type_script_setup_true_lang-xmxPRX0c.js";import{d as Z,r as D,p as U,c as T,g as r,u as e,w as a,b as s,e as t,s as o,K as n,cy as he,aM as $e,bv as Ut,d1 as Ft,dx as Kt,Q as R,E as et,v as f,M as je,Y as Nt,F as G,x as te,J as W,t as w,aX as zt,$ as Ot,z as tt,h as ne,j as de,D as we,dm as qt,dK as Gt,dL as wt,cv as Qt,dv as Wt,aH as st,aE as ke,aD as Ht,dI as Jt,ad as qe,aG as mt,dk as Zt,cQ as ct,L as De,a2 as Ve,aj as Xt,am as Ae,C as Yt,aN as pt,dM as $t,dN as es,a3 as ts,dO as Pt,dP as Ct,o as Ge,dr as at,ap as We,dG as He,cz as vt,cx as Je,dd as ze,dQ as Le,dR as ss,dS as as,dT as Ce,dU as ls,dV as ns,dW as rs,dX as os,dY as yt,dZ as Re,d_ as le,d$ as Me,e0 as Se,e1 as bt,e2 as _t,e3 as Te,e4 as is,e5 as ds,e6 as us,aq as lt,as as ht,G as kt,e7 as ms,dA as cs,e8 as ps,e9 as fs,at as xs,ea as gs,a1 as vs,ar as St,eb as Tt,a0 as ys}from"./vendor-0sCoMzHy.js";import{_ as bs,a as _s}from"./AvatarFallback.vue_vue_type_script_setup_true_lang-BhL6n9ND.js";import{_ as hs}from"./AvatarImage.vue_vue_type_script_setup_true_lang-CAfd5pFE.js";import{_ as V}from"./index-D12gyL4d.js";import{_ as N,a as z}from"./CardContent.vue_vue_type_script_setup_true_lang-DUWiWpeg.js";import{_ as I}from"./index-DJk7aHkf.js";import{_ as H}from"./CardHeader.vue_vue_type_script_setup_true_lang-Bo9DeG24.js";import{_ as J}from"./CardTitle.vue_vue_type_script_setup_true_lang-SuNAGsFF.js";import{a as Ie,b as Ee,c as Ue,d as Fe,_ as Ke}from"./DialogTitle.vue_vue_type_script_setup_true_lang-C6bUxMpH.js";import{_ as Ne}from"./DialogFooter.vue_vue_type_script_setup_true_lang-BB1UFE69.js";import{_ as X}from"./Input.vue_vue_type_script_setup_true_lang-nikPKNAJ.js";import{_ as K}from"./Label.vue_vue_type_script_setup_true_lang-f9xrDwSP.js";import{_ as Be}from"./Textarea.vue_vue_type_script_setup_true_lang-Dm2fw_pR.js";import{_ as ks}from"./Switch.vue_vue_type_script_setup_true_lang-TzFTMwvu.js";import{_ as oe}from"./Separator.vue_vue_type_script_setup_true_lang-Bszm7esH.js";import{_ as nt,a as rt,b as ot,c as it,d as Oe}from"./SelectValue.vue_vue_type_script_setup_true_lang-Dc4bXstG.js";import{_ as ce}from"./CardDescription.vue_vue_type_script_setup_true_lang-CcT-2mF2.js";import{f as ws,g as $s,h as Ps,i as Cs,j as Ss}from"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-KgsqrYLn.js";import{_ as Ze,a as Xe,b as Ye}from"./index-y5IglBua.js";import{q as pe,a as Qe}from"./index-CMWG4mbA.js";import"./Checkbox.vue_vue_type_script_setup_true_lang-Gc81cOnN.js";import"./app-BgHL2_1p.js";function Pe(){return{formatCurrency:u=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(u),formatDate:u=>new Intl.DateTimeFormat("id-ID",{year:"numeric",month:"long",day:"numeric"}).format(new Date(u)),getStatusLabel:u=>({pending:"Menunggu",processing:"Diproses",shipped:"Dikirim",delivered:"Selesai",cancelled:"Dibatalkan"})[u]||u,getTransactionTypeLabel:u=>({topup:"Top Up",withdrawal:"Penarikan",bonus:"Bonus",purchase:"Pembelian",refund:"Refund"})[u]||u,getTransactionStatusLabel:u=>({pending:"Menunggu",completed:"Selesai",failed:"Gagal",cancelled:"Dibatalkan"})[u]||u}}const Ts={class:"flex flex-col items-center text-center"},js={class:"text-xl font-bold text-gray-900 dark:text-gray-100"},Rs={class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},Ms={class:"mt-4 w-full space-y-2 text-sm"},Ds={class:"space-y-1.5"},As={class:"flex items-center justify-between"},Ls={class:"flex gap-1"},Vs={class:"p-2 bg-gray-50 dark:bg-gray-800 rounded-lg"},Bs={class:"flex items-center justify-between"},Is={class:"font-mono font-semibold"},Es={class:"text-[10px] text-gray-500 dark:text-gray-400 mt-1 break-all"},Us={class:"flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-800 rounded-lg"},Fs={class:"font-mono font-semibold"},Ks={class:"flex items-center justify-between p-2 bg-emerald-50 dark:bg-emerald-900/20 rounded-lg"},Ns={class:"font-semibold text-emerald-700 dark:text-emerald-400"},zs=Z({__name:"ProfileCard",props:{customer:{}},setup(l){const i=l,{formatCurrency:d}=Pe(),m=D(!1),y=U(()=>i.customer.name.split(" ").map(M=>M[0]).join("").toUpperCase().slice(0,2)),u=U(()=>typeof window>"u"?"":`${window.location.origin}/client/register?ref=${i.customer.ref_code}`),p=async()=>{if(typeof window>"u"||!navigator.clipboard){R.error("Tidak dapat menyalin link ke clipboard");return}try{await navigator.clipboard.writeText(u.value),m.value=!0,R.success("Link referral telah disalin ke clipboard"),setTimeout(()=>{m.value=!1},2e3)}catch{R.error("Tidak dapat menyalin link ke clipboard")}},k=async()=>{if(typeof window>"u")return;const M={title:"Bergabung dengan Referral Saya",text:`Gunakan kode referral saya: ${i.customer.ref_code}`,url:u.value};if(navigator.share)try{await navigator.share(M),R.success("Link referral berhasil dibagikan")}catch(v){v.name!=="AbortError"&&console.error("Error sharing:",v)}else await p()};return(M,v)=>(r(),T(e(N),null,{default:a(()=>[s(e(z),{class:"pt-6"},{default:a(()=>[t("div",Ts,[s(e(bs),{class:"h-24 w-24 mb-4"},{default:a(()=>[s(e(hs),{src:`https://api.dicebear.com/7.x/initials/svg?seed=${l.customer.name}`},null,8,["src"]),s(e(_s),null,{default:a(()=>[o(n(y.value),1)]),_:1})]),_:1}),t("h2",js,n(l.customer.name),1),t("p",Rs,n(l.customer.email),1),l.customer.email_verified_at?(r(),T(e(V),{key:0,class:"mt-3 bg-emerald-100 text-emerald-700 hover:bg-emerald-200 dark:bg-emerald-900 dark:text-emerald-100"},{default:a(()=>[s(e(he),{class:"w-3 h-3 mr-1"}),v[0]||(v[0]=o(" Email Terverifikasi ",-1))]),_:1})):(r(),T(e(V),{key:1,variant:"secondary",class:"mt-3"},{default:a(()=>[s(e($e),{class:"w-3 h-3 mr-1"}),v[1]||(v[1]=o(" Email Belum Terverifikasi ",-1))]),_:1})),t("div",Ms,[t("div",Ds,[t("div",As,[v[3]||(v[3]=t("span",{class:"text-xs text-gray-600 dark:text-gray-400"},"Referral Link",-1)),t("div",Ls,[s(e(I),{size:"sm",variant:"outline",class:"h-6 px-2 text-[10px]",onClick:p},{default:a(()=>[m.value?(r(),T(e(Ut),{key:0,class:"w-3 h-3 mr-1"})):(r(),T(e(Ft),{key:1,class:"w-3 h-3 mr-1"})),o(" "+n(m.value?"Tersalin":"Salin"),1)]),_:1}),s(e(I),{size:"sm",variant:"outline",class:"h-6 px-2 text-[10px]",onClick:k},{default:a(()=>[s(e(Kt),{class:"w-3 h-3 mr-1"}),v[2]||(v[2]=o(" Bagikan ",-1))]),_:1})])]),t("div",Vs,[t("div",Bs,[v[4]||(v[4]=t("span",{class:"text-gray-600 dark:text-gray-400"},"Kode Referral",-1)),t("span",Is,n(l.customer.ref_code),1)]),t("p",Es,n(u.value),1)])]),t("div",Us,[v[5]||(v[5]=t("span",{class:"text-gray-600 dark:text-gray-400"},"E-Wallet ID",-1)),t("span",Fs,n(l.customer.ewallet_id),1)]),t("div",Ks,[v[6]||(v[6]=t("span",{class:"text-emerald-700 dark:text-emerald-400"},"Saldo",-1)),t("span",Ns,n(e(d)(l.customer.ewallet_saldo)),1)])])])]),_:1})]),_:1}))}}),Os={class:"flex items-center justify-between"},qs={key:0,class:"text-center py-12 text-muted-foreground"},Gs={key:1,class:"space-y-4"},Qs={class:"flex items-start gap-3 mb-3"},Ws={class:"flex-1 min-w-0"},Hs={class:"flex items-center gap-2 mb-1"},Js={class:"font-semibold text-sm"},Zs={class:"text-sm font-medium"},Xs={class:"text-xs text-muted-foreground"},Ys={class:"space-y-1 mb-3"},ea={class:"text-sm"},ta={key:0,class:"text-sm text-muted-foreground"},sa={class:"text-sm text-muted-foreground"},aa={key:0},la={class:"text-xs text-muted-foreground"},na={key:1,class:"text-xs text-muted-foreground italic mt-2"},ra={class:"flex items-center gap-2"},oa={class:"space-y-4 py-4"},ia={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},da={class:"space-y-2"},ua={class:"flex items-center space-x-2 pt-8"},ma={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},ca={class:"space-y-2"},pa={class:"space-y-2"},fa={class:"space-y-2"},xa={class:"space-y-2"},ga={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},va={class:"space-y-2"},ya={class:"space-y-2"},ba={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},_a={class:"space-y-2"},ha={class:"space-y-2"},ka={class:"space-y-2"},wa=Z({__name:"AddressManagement",props:{addresses:{}},setup(l){const i=D(!1),d=D(!1),m=D(!1),y=D(!1),u=D([]),p=D([]),k=D(!1),M=D(!1),v=D(""),$=D(""),x=D({label:"",is_default:!1,recipient_name:"",recipient_phone:"",address_line1:"",address_line2:"",province_label:"",province_id:0,city_label:"",city_id:0,postal_code:"",country:"Indonesia",description:""}),c=D(null),g=async()=>{k.value=!0;try{const A=await ne.get("/api/shipping/provinces");u.value=A.data.data}catch(A){R.error("Gagal memuat data provinsi"),console.error("Error loading provinces:",A)}finally{k.value=!1}},E=async A=>{if(A){M.value=!0,p.value=[],$.value="";try{const h=await ne.get("/api/shipping/cities",{params:{province_id:A}});p.value=h.data.data}catch(h){R.error("Gagal memuat data kota"),console.error("Error loading cities:",h)}finally{M.value=!1}}};et(v,A=>{if(!A)return;const h=u.value.find(_=>_.id.toString()===A);h&&(x.value.province_id=parseInt(A),x.value.province_label=h.name,E(A))}),et($,A=>{if(!A)return;const h=p.value.find(_=>_.id.toString()===A);h&&(x.value.city_id=parseInt(A),x.value.city_label=h.name)});const F=()=>{d.value=!1,x.value={label:"",is_default:!1,recipient_name:"",recipient_phone:"",address_line1:"",address_line2:"",province_label:"",province_id:0,city_label:"",city_id:0,postal_code:"",country:"Indonesia",description:""},v.value="",$.value="",p.value=[],g(),i.value=!0},j=A=>{d.value=!0,c.value=A.id,x.value={...A},g().then(()=>{A.province_id&&(v.value=A.province_id.toString(),E(A.province_id.toString()).then(()=>{A.city_id&&($.value=A.city_id.toString())}))}),i.value=!0},Q=()=>{i.value=!1,c.value=null},se=()=>{if(!x.value.recipient_name||!x.value.recipient_phone||!x.value.address_line1){R.error("Mohon lengkapi nama penerima, telepon, dan alamat");return}if(!x.value.province_id||!x.value.city_id){R.error("Mohon pilih provinsi dan kota/kabupaten");return}y.value=!0;const A=d.value&&c.value?`/client/profile/addresses/${c.value}`:"/client/profile/addresses",h=d.value?"put":"post";de[h](A,x.value,{preserveScroll:!0,onSuccess:()=>{R.success(`Alamat berhasil ${d.value?"diperbarui":"ditambahkan"}`),Q()},onError:_=>{if(console.error("Address save error:",_),typeof _=="object"&&_!==null){const P=Object.values(_)[0],b=Array.isArray(P)?P[0]:P;R.error(b||"Gagal menyimpan alamat")}else R.error("Gagal menyimpan alamat. Silakan coba lagi.")},onFinish:()=>{y.value=!1}})},q=A=>{confirm("Apakah Anda yakin ingin menghapus alamat ini?")&&(m.value=!0,de.delete(`/client/profile/addresses/${A}`,{preserveScroll:!0,onSuccess:()=>{R.success("Alamat berhasil dihapus")},onError:h=>{if(console.error("Address delete error:",h),typeof h=="object"&&h!==null){const _=Object.values(h)[0],P=Array.isArray(_)?_[0]:_;R.error(P||"Gagal menghapus alamat")}else R.error("Gagal menghapus alamat. Silakan coba lagi.")},onFinish:()=>{m.value=!1}}))},B=A=>{we({}).post(`/client/profile/addresses/${A}/set-default`,{preserveScroll:!0,onSuccess:()=>{R.success("Alamat utama berhasil diubah")},onError:_=>{if(console.error("Set default address error:",_),typeof _=="object"&&_!==null){const P=Object.values(_)[0],b=Array.isArray(P)?P[0]:P;R.error(b||"Gagal mengubah alamat utama")}else R.error("Gagal mengubah alamat utama. Silakan coba lagi.")}})},O=A=>A?A.toLowerCase().includes("rumah")||A.toLowerCase().includes("home")?qt:A.toLowerCase().includes("kantor")||A.toLowerCase().includes("office")?Gt:je:je;return(A,h)=>(r(),f(G,null,[s(e(N),null,{default:a(()=>[s(e(H),null,{default:a(()=>[t("div",Os,[s(e(J),{class:"flex items-center gap-2"},{default:a(()=>[s(e(je),{class:"w-5 h-5"}),h[11]||(h[11]=o(" Kelola Alamat ",-1))]),_:1}),s(e(I),{size:"sm",onClick:F},{default:a(()=>[s(e(Nt),{class:"w-4 h-4 mr-2"}),h[12]||(h[12]=o(" Tambah Alamat ",-1))]),_:1})])]),_:1}),s(e(z),null,{default:a(()=>[l.addresses.length===0?(r(),f("div",qs,[s(e(je),{class:"w-12 h-12 mx-auto mb-4 opacity-20"}),h[13]||(h[13]=t("p",{class:"mb-2"},"Belum ada alamat tersimpan",-1)),h[14]||(h[14]=t("p",{class:"text-sm"},"Tambahkan alamat untuk mempermudah proses pengiriman",-1))])):(r(),f("div",Gs,[(r(!0),f(G,null,te(l.addresses,_=>(r(),f("div",{key:_.id,class:W(["relative p-4 rounded-lg border transition-all",_.is_default?"border-primary bg-primary/5":"border-gray-200 dark:border-gray-700"])},[_.is_default?(r(),T(e(V),{key:0,variant:"default",class:"absolute top-2 right-2 text-xs"},{default:a(()=>[...h[15]||(h[15]=[o(" Utama ",-1)])]),_:1})):w("",!0),t("div",Qs,[(r(),T(zt(O(_.label)),{class:W(["w-5 h-5 mt-1 flex-shrink-0",_.is_default?"text-primary":"text-muted-foreground"])},null,8,["class"])),t("div",Ws,[t("div",Hs,[t("h4",Js,n(_.label||"Alamat"),1)]),t("p",Zs,n(_.recipient_name),1),t("p",Xs,n(_.recipient_phone),1)])]),t("div",Ys,[t("p",ea,n(_.address_line1),1),_.address_line2?(r(),f("p",ta,n(_.address_line2),1)):w("",!0),t("p",sa,[o(n(_.city_label)+", "+n(_.province_label)+" ",1),_.postal_code?(r(),f("span",aa,n(_.postal_code),1)):w("",!0)]),t("p",la,n(_.country),1),_.description?(r(),f("p",na,n(_.description),1)):w("",!0)]),s(e(oe),{class:"my-3"}),t("div",ra,[_.is_default?w("",!0):(r(),T(e(I),{key:0,variant:"outline",size:"sm",onClick:P=>B(_.id)},{default:a(()=>[...h[16]||(h[16]=[o(" Jadikan Utama ",-1)])]),_:1},8,["onClick"])),s(e(I),{variant:"outline",size:"sm",onClick:P=>j(_)},{default:a(()=>[s(e(Ot),{class:"w-3 h-3 mr-1"}),h[17]||(h[17]=o(" Edit ",-1))]),_:1},8,["onClick"]),s(e(I),{variant:"destructive",size:"sm",disabled:m.value,onClick:P=>q(_.id)},{default:a(()=>[s(e(tt),{class:"w-3 h-3 mr-1"}),h[18]||(h[18]=o(" Hapus ",-1))]),_:1},8,["disabled","onClick"])])],2))),128))]))]),_:1})]),_:1}),s(e(Ke),{open:i.value,"onUpdate:open":Q},{default:a(()=>[s(e(Ie),{class:"sm:max-w-2xl max-h-[90vh] overflow-y-auto"},{default:a(()=>[s(e(Ee),null,{default:a(()=>[s(e(Ue),null,{default:a(()=>[o(n(d.value?"Edit Alamat":"Tambah Alamat Baru"),1)]),_:1}),s(e(Fe),null,{default:a(()=>[o(n(d.value?"Perbarui informasi alamat Anda":"Tambahkan alamat pengiriman baru"),1)]),_:1})]),_:1}),t("div",oa,[t("div",ia,[t("div",da,[s(e(K),{for:"label"},{default:a(()=>[...h[19]||(h[19]=[o("Label Alamat",-1)])]),_:1}),s(e(X),{id:"label",modelValue:x.value.label,"onUpdate:modelValue":h[0]||(h[0]=_=>x.value.label=_),placeholder:"Rumah, Kantor, dll"},null,8,["modelValue"])]),t("div",ua,[s(e(ks),{id:"is_default",checked:x.value.is_default,"onUpdate:checked":h[1]||(h[1]=_=>x.value.is_default=_)},null,8,["checked"]),s(e(K),{for:"is_default",class:"cursor-pointer"},{default:a(()=>[...h[20]||(h[20]=[o("Jadikan alamat utama",-1)])]),_:1})])]),t("div",ma,[t("div",ca,[s(e(K),{for:"recipient_name"},{default:a(()=>[...h[21]||(h[21]=[o("Nama Penerima ",-1),t("span",{class:"text-red-500"},"*",-1)])]),_:1}),s(e(X),{id:"recipient_name",modelValue:x.value.recipient_name,"onUpdate:modelValue":h[2]||(h[2]=_=>x.value.recipient_name=_),placeholder:"Nama lengkap penerima",required:""},null,8,["modelValue"])]),t("div",pa,[s(e(K),{for:"recipient_phone"},{default:a(()=>[...h[22]||(h[22]=[o("No. Telepon Penerima ",-1),t("span",{class:"text-red-500"},"*",-1)])]),_:1}),s(e(X),{id:"recipient_phone",modelValue:x.value.recipient_phone,"onUpdate:modelValue":h[3]||(h[3]=_=>x.value.recipient_phone=_),placeholder:"08xxxxxxxxxx",required:""},null,8,["modelValue"])])]),t("div",fa,[s(e(K),{for:"address_line1"},{default:a(()=>[...h[23]||(h[23]=[o("Alamat Lengkap ",-1),t("span",{class:"text-red-500"},"*",-1)])]),_:1}),s(e(Be),{id:"address_line1",modelValue:x.value.address_line1,"onUpdate:modelValue":h[4]||(h[4]=_=>x.value.address_line1=_),placeholder:"Jalan, nomor rumah, RT/RW, blok",rows:"3",required:""},null,8,["modelValue"])]),t("div",xa,[s(e(K),{for:"address_line2"},{default:a(()=>[...h[24]||(h[24]=[o("Detail Tambahan (Opsional)",-1)])]),_:1}),s(e(X),{id:"address_line2",modelValue:x.value.address_line2,"onUpdate:modelValue":h[5]||(h[5]=_=>x.value.address_line2=_),placeholder:"Patokan, gedung, unit, warna rumah, dll"},null,8,["modelValue"])]),t("div",ga,[t("div",va,[s(e(K),{for:"province"},{default:a(()=>[...h[25]||(h[25]=[o("Provinsi ",-1),t("span",{class:"text-red-500"},"*",-1)])]),_:1}),s(e(nt),{modelValue:v.value,"onUpdate:modelValue":h[6]||(h[6]=_=>v.value=_),disabled:k.value},{default:a(()=>[s(e(rt),{id:"province"},{default:a(()=>[s(e(ot),{placeholder:k.value?"Memuat provinsi...":"Pilih provinsi"},null,8,["placeholder"])]),_:1}),s(e(it),null,{default:a(()=>[(r(!0),f(G,null,te(u.value,_=>(r(),T(e(Oe),{key:_.id,value:_.id.toString()},{default:a(()=>[o(n(_.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue","disabled"])]),t("div",ya,[s(e(K),{for:"city"},{default:a(()=>[...h[26]||(h[26]=[o("Kota/Kabupaten ",-1),t("span",{class:"text-red-500"},"*",-1)])]),_:1}),s(e(nt),{modelValue:$.value,"onUpdate:modelValue":h[7]||(h[7]=_=>$.value=_),disabled:!v.value||M.value},{default:a(()=>[s(e(rt),{id:"city"},{default:a(()=>[s(e(ot),{placeholder:M.value?"Memuat kota...":v.value?"Pilih kota/kabupaten":"Pilih provinsi terlebih dahulu"},null,8,["placeholder"])]),_:1}),s(e(it),null,{default:a(()=>[(r(!0),f(G,null,te(p.value,_=>(r(),T(e(Oe),{key:_.id,value:_.id.toString()},{default:a(()=>[o(n(_.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue","disabled"])])]),t("div",ba,[t("div",_a,[s(e(K),{for:"postal_code"},{default:a(()=>[...h[27]||(h[27]=[o("Kode Pos",-1)])]),_:1}),s(e(X),{id:"postal_code",modelValue:x.value.postal_code,"onUpdate:modelValue":h[8]||(h[8]=_=>x.value.postal_code=_),placeholder:"12345"},null,8,["modelValue"])]),t("div",ha,[s(e(K),{for:"country"},{default:a(()=>[...h[28]||(h[28]=[o("Negara",-1)])]),_:1}),s(e(X),{id:"country",modelValue:x.value.country,"onUpdate:modelValue":h[9]||(h[9]=_=>x.value.country=_),placeholder:"Indonesia"},null,8,["modelValue"])])]),t("div",ka,[s(e(K),{for:"description"},{default:a(()=>[...h[29]||(h[29]=[o("Catatan (Opsional)",-1)])]),_:1}),s(e(Be),{id:"description",modelValue:x.value.description,"onUpdate:modelValue":h[10]||(h[10]=_=>x.value.description=_),placeholder:"Catatan khusus untuk alamat ini",rows:"2"},null,8,["modelValue"])])]),s(e(Ne),null,{default:a(()=>[s(e(I),{variant:"outline",onClick:Q,disabled:y.value},{default:a(()=>[...h[30]||(h[30]=[o(" Batal ",-1)])]),_:1},8,["disabled"]),s(e(I),{onClick:se,disabled:y.value},{default:a(()=>[o(n(y.value?"Menyimpan...":d.value?"Perbarui":"Simpan"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])],64))}}),$a={class:"p-3 bg-emerald-50 dark:bg-emerald-900/20 rounded-lg"},Pa={class:"text-xl font-bold text-emerald-700 dark:text-emerald-400"},Ca={class:"p-3 bg-amber-50 dark:bg-amber-900/20 rounded-lg"},Sa={class:"text-xl font-bold text-amber-700 dark:text-amber-400"},Ta=Z({__name:"BonusStatsCard",props:{customer:{}},setup(l){const{formatCurrency:i}=Pe();return(d,m)=>(r(),T(e(N),null,{default:a(()=>[s(e(H),null,{default:a(()=>[s(e(J),{class:"flex items-center gap-2"},{default:a(()=>[s(e(wt),{class:"w-5 h-5"}),m[0]||(m[0]=o(" Statistik Bonus ",-1))]),_:1})]),_:1}),s(e(z),{class:"space-y-3"},{default:a(()=>[t("div",$a,[m[1]||(m[1]=t("p",{class:"text-xs text-emerald-700 dark:text-emerald-400 mb-1"},"Total Dirilis",-1)),t("p",Pa,n(e(i)(l.customer.bonus_stats.total_released)),1)]),t("div",Ca,[m[2]||(m[2]=t("p",{class:"text-xs text-amber-700 dark:text-amber-400 mb-1"},"Total Pending",-1)),t("p",Sa,n(e(i)(l.customer.bonus_stats.total_pending)),1)])]),_:1})]),_:1}))}}),ja={class:"flex items-center gap-3"},Ra={class:"p-2 bg-blue-100 dark:bg-blue-900/20 rounded-lg"},Ma={class:"font-semibold"},Da=Z({__name:"MemberSinceCard",props:{createdAt:{}},setup(l){const{formatDate:i}=Pe();return(d,m)=>(r(),T(e(N),null,{default:a(()=>[s(e(z),{class:"pt-6"},{default:a(()=>[t("div",ja,[t("div",Ra,[s(e(Qt),{class:"w-5 h-5 text-blue-600 dark:text-blue-400"})]),t("div",null,[m[0]||(m[0]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Member Sejak",-1)),t("p",Ma,n(e(i)(l.createdAt)),1)])])]),_:1})]),_:1}))}}),Aa={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},La={class:"space-y-2"},Va={class:"relative"},Ba={key:0,class:"text-sm text-red-500"},Ia={class:"space-y-2"},Ea={class:"relative"},Ua={key:0,class:"text-sm text-red-500"},Fa={class:"space-y-2"},Ka={class:"relative"},Na={key:0,class:"text-sm text-red-500"},za={class:"space-y-2"},Oa={key:0,class:"text-sm text-red-500"},qa={class:"space-y-2"},Ga={class:"relative"},Qa={key:0,class:"text-sm text-red-500"},Wa={class:"space-y-2"},Ha={class:"relative"},Ja={key:0,class:"text-sm text-red-500"},Za={class:"space-y-2"},Xa={class:"relative"},Ya={key:0,class:"text-sm text-red-500"},el={class:"space-y-2"},tl={key:0,class:"text-sm text-red-500"},sl={class:"flex items-center justify-end gap-3"},al=Z({__name:"ProfileInformationTab",props:{customer:{}},setup(l){const i=l,d=we({name:i.customer.name,username:i.customer.username||"",nik:i.customer.nik||"",gender:i.customer.gender||"",alamat:i.customer.alamat||"",email:i.customer.email,phone:i.customer.phone,description:i.customer.description||""}),m=()=>{d.patch("/client/profile",{preserveScroll:!0,onSuccess:()=>{R.success("Informasi profil berhasil diperbarui")}})};return(y,u)=>(r(),T(e(N),null,{default:a(()=>[s(e(H),null,{default:a(()=>[s(e(J),null,{default:a(()=>[...u[9]||(u[9]=[o("Informasi Profile",-1)])]),_:1}),s(e(ce),null,{default:a(()=>[...u[10]||(u[10]=[o(" Update informasi profil Anda di sini ",-1)])]),_:1})]),_:1}),s(e(z),null,{default:a(()=>[t("form",{onSubmit:qe(m,["prevent"]),class:"space-y-6"},[t("div",Aa,[t("div",La,[s(e(K),{for:"username"},{default:a(()=>[...u[11]||(u[11]=[o(" Username ",-1),t("span",{class:"text-red-500"},"*",-1)])]),_:1}),t("div",Va,[s(e(Wt),{class:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s(e(X),{id:"username",modelValue:e(d).username,"onUpdate:modelValue":u[0]||(u[0]=p=>e(d).username=p),type:"text",placeholder:"username",class:"pl-10",required:""},null,8,["modelValue"])]),e(d).errors.username?(r(),f("p",Ba,n(e(d).errors.username),1)):w("",!0)]),t("div",Ia,[s(e(K),{for:"name"},{default:a(()=>[...u[12]||(u[12]=[o(" Nama Lengkap ",-1),t("span",{class:"text-red-500"},"*",-1)])]),_:1}),t("div",Ea,[s(e(st),{class:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s(e(X),{id:"name",modelValue:e(d).name,"onUpdate:modelValue":u[1]||(u[1]=p=>e(d).name=p),type:"text",placeholder:"Masukkan nama lengkap",class:"pl-10",required:""},null,8,["modelValue"])]),e(d).errors.name?(r(),f("p",Ua,n(e(d).errors.name),1)):w("",!0)]),t("div",Fa,[s(e(K),{for:"nik"},{default:a(()=>[...u[13]||(u[13]=[o("NIK (Nomor Induk Kependudukan)",-1)])]),_:1}),t("div",Ka,[s(e(ke),{class:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s(e(X),{id:"nik",modelValue:e(d).nik,"onUpdate:modelValue":u[2]||(u[2]=p=>e(d).nik=p),type:"text",placeholder:"16 digit NIK",class:"pl-10",maxlength:"16"},null,8,["modelValue"])]),e(d).errors.nik?(r(),f("p",Na,n(e(d).errors.nik),1)):w("",!0)]),t("div",za,[s(e(K),{for:"gender"},{default:a(()=>[...u[14]||(u[14]=[o("Jenis Kelamin",-1)])]),_:1}),s(e(nt),{modelValue:e(d).gender,"onUpdate:modelValue":u[3]||(u[3]=p=>e(d).gender=p)},{default:a(()=>[s(e(rt),null,{default:a(()=>[s(e(ot),{placeholder:"Pilih jenis kelamin"})]),_:1}),s(e(it),null,{default:a(()=>[s(e(Oe),{value:"male"},{default:a(()=>[...u[15]||(u[15]=[o("Laki-laki",-1)])]),_:1}),s(e(Oe),{value:"female"},{default:a(()=>[...u[16]||(u[16]=[o("Perempuan",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(d).errors.gender?(r(),f("p",Oa,n(e(d).errors.gender),1)):w("",!0)]),t("div",qa,[s(e(K),{for:"email"},{default:a(()=>[...u[17]||(u[17]=[o(" Email ",-1),t("span",{class:"text-red-500"},"*",-1)])]),_:1}),t("div",Ga,[s(e(Ht),{class:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s(e(X),{id:"email",modelValue:e(d).email,"onUpdate:modelValue":u[4]||(u[4]=p=>e(d).email=p),type:"email",placeholder:"email@example.com",class:"pl-10",required:""},null,8,["modelValue"])]),e(d).errors.email?(r(),f("p",Qa,n(e(d).errors.email),1)):w("",!0)]),t("div",Wa,[s(e(K),{for:"phone"},{default:a(()=>[...u[18]||(u[18]=[o(" Nomor Telepon ",-1),t("span",{class:"text-red-500"},"*",-1)])]),_:1}),t("div",Ha,[s(e(Jt),{class:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s(e(X),{id:"phone",modelValue:e(d).phone,"onUpdate:modelValue":u[5]||(u[5]=p=>e(d).phone=p),type:"tel",placeholder:"08123456789",class:"pl-10",required:""},null,8,["modelValue"])]),e(d).errors.phone?(r(),f("p",Ja,n(e(d).errors.phone),1)):w("",!0)])]),t("div",Za,[s(e(K),{for:"alamat"},{default:a(()=>[...u[19]||(u[19]=[o("Alamat",-1)])]),_:1}),t("div",Xa,[s(e(je),{class:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s(e(Be),{id:"alamat",modelValue:e(d).alamat,"onUpdate:modelValue":u[6]||(u[6]=p=>e(d).alamat=p),placeholder:"Masukkan alamat lengkap...",rows:"3",class:"pl-10"},null,8,["modelValue"])]),e(d).errors.alamat?(r(),f("p",Ya,n(e(d).errors.alamat),1)):w("",!0)]),t("div",el,[s(e(K),{for:"description"},{default:a(()=>[...u[20]||(u[20]=[o("Deskripsi",-1)])]),_:1}),s(e(Be),{id:"description",modelValue:e(d).description,"onUpdate:modelValue":u[7]||(u[7]=p=>e(d).description=p),placeholder:"Ceritakan tentang diri Anda...",rows:"4"},null,8,["modelValue"]),u[21]||(u[21]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"}," Maksimal 1000 karakter ",-1)),e(d).errors.description?(r(),f("p",tl,n(e(d).errors.description),1)):w("",!0)]),t("div",sl,[s(e(I),{type:"button",variant:"outline",onClick:u[8]||(u[8]=p=>e(d).reset()),disabled:e(d).processing},{default:a(()=>[...u[22]||(u[22]=[o(" Reset ",-1)])]),_:1},8,["disabled"]),s(e(I),{type:"submit",disabled:e(d).processing},{default:a(()=>[e(d).processing?w("",!0):(r(),T(e(he),{key:0,class:"w-4 h-4 mr-2"})),o(" "+n(e(d).processing?"Menyimpan...":"Simpan Perubahan"),1)]),_:1},8,["disabled"])])],32)]),_:1})]),_:1}))}}),ll={key:0,class:"flex items-center justify-center py-12"},nl={key:1,class:"space-y-6 py-6"},rl={class:"space-y-3"},ol={class:"flex items-center gap-2 text-sm font-medium"},il={class:"space-y-2"},dl={class:"flex justify-between"},ul={class:"text-sm font-medium"},ml={class:"flex justify-between items-center"},cl={key:0,class:"flex justify-between"},pl={class:"text-sm font-medium"},fl={key:1,class:"flex justify-between items-center"},xl={class:"space-y-3"},gl={class:"flex items-center gap-2 text-sm font-medium"},vl={class:"space-y-3"},yl=["src","alt"],bl={class:"flex-1"},_l={class:"font-medium text-sm"},hl={class:"text-xs text-muted-foreground"},kl={class:"text-xs text-muted-foreground"},wl={class:"text-right"},$l={class:"font-semibold text-sm"},Pl={key:0,class:"space-y-3"},Cl={class:"flex items-center gap-2 text-sm font-medium"},Sl={class:"p-3 bg-muted/30 rounded-lg space-y-1"},Tl={class:"font-medium text-sm"},jl={class:"text-sm text-muted-foreground"},Rl={class:"text-sm text-muted-foreground"},Ml={class:"text-sm text-muted-foreground"},Dl={key:1,class:"space-y-3"},Al={class:"flex items-center gap-2 text-sm font-medium"},Ll={class:"p-3 bg-muted/30 rounded-lg space-y-2"},Vl={class:"flex justify-between"},Bl={class:"text-sm font-medium"},Il={class:"flex justify-between"},El={class:"text-sm font-medium"},Ul={class:"flex justify-between"},Fl={class:"text-sm font-medium"},Kl={class:"space-y-3"},Nl={class:"flex items-center gap-2 text-sm font-medium"},zl={class:"space-y-2 text-sm"},Ol={class:"flex justify-between"},ql={key:0,class:"flex justify-between"},Gl={class:"text-red-600"},Ql={class:"flex justify-between"},Wl={key:1,class:"flex justify-between"},Hl={class:"flex justify-between font-semibold text-base"},Jl={class:"text-primary"},Zl={key:2,class:"space-y-2"},Xl={class:"space-y-1"},Yl={class:"text-sm text-muted-foreground"},en={key:3,class:"space-y-4 pt-4"},tn={class:"space-y-3"},sn={class:"flex items-center gap-2 text-sm font-medium"},an={class:"flex items-start justify-between"},ln={class:"flex items-center gap-2 font-medium text-sm"},nn={class:"text-xs text-muted-foreground"},rn={key:0,class:"mt-1 text-xs text-destructive"},on={class:"flex items-start justify-between"},dn={class:"flex items-center gap-2 font-medium text-sm"},un={key:3},mn={key:4},cn={key:4,class:"pt-4"},pn={key:2,class:"flex items-center justify-center py-12 text-muted-foreground"},fn=Z({__name:"OrderDetailSheet",props:{open:{type:Boolean},orderId:{}},emits:["update:open"],setup(l,{emit:i}){const d=l,m=i,{formatCurrency:y,formatDate:u,getStatusLabel:p}=Pe(),k=mt(),M=U(()=>k.props.auth?.user?.ewallet_saldo??0),v=D(!1),$=D(!1),x=D(!1),c=D(!1),g=D(null),E=D("midtrans"),F=U(()=>g.value?.status?.toUpperCase()==="SHIPPED"),j=U(()=>g.value?.status?.toUpperCase()==="PENDING"&&!g.value?.paid_at),Q=U(()=>g.value?M.value>=g.value.grand_total:!1);Zt(()=>{typeof document<"u"&&(c.value?document.body.classList.add("midtrans-popup-active"):document.body.classList.remove("midtrans-popup-active"))}),ct(()=>{typeof document<"u"&&document.body.classList.remove("midtrans-popup-active")});const se=U(()=>{const _=g.value?.status?.toLowerCase();return{"bg-yellow-100 text-yellow-700 hover:bg-yellow-200 dark:bg-yellow-900 dark:text-yellow-100":_==="pending","bg-blue-100 text-blue-700 hover:bg-blue-200 dark:bg-blue-900 dark:text-blue-100":_==="processing"||_==="paid","bg-purple-100 text-purple-700 hover:bg-purple-200 dark:bg-purple-900 dark:text-purple-100":_==="shipped","bg-emerald-100 text-emerald-700 hover:bg-emerald-200 dark:bg-emerald-900 dark:text-emerald-100":_==="delivered"||_==="completed","bg-red-100 text-red-700 hover:bg-red-200 dark:bg-red-900 dark:text-red-100":_==="cancelled"}}),q=async()=>{if(d.orderId){v.value=!0;try{const _=await ne.get(`/api/client/orders/${d.orderId}`);g.value=_.data.data}catch(_){console.error("Failed to load order:",_),R.error("Gagal memuat detail pesanan")}finally{v.value=!1}}},B=async()=>{if(!(!g.value||!F.value||$.value)){$.value=!0;try{await ne.post(`/api/client/orders/${g.value.id}/complete`),await q(),de.reload({only:["orders"]}),R.success('Status pesanan berhasil diperbarui menjadi "Selesai".')}catch(_){console.error("Failed to update order status:",_),R.error(_.response?.data?.message||"Gagal memperbarui status pesanan")}finally{$.value=!1}}},O=async()=>{if(!g.value||!j.value||x.value)return;const _=window.snap;if(!_){R.error("Sistem pembayaran belum siap. Mohon refresh halaman.");return}x.value=!0;try{const b=(await ne.post(`/api/client/orders/${g.value.id}/pay`)).data;b.success&&b.snap_token?(c.value=!0,_.pay(b.snap_token,{onSuccess:function(){c.value=!1,x.value=!1,R.success("Pembayaran berhasil!"),q(),de.reload({only:["orders"]})},onPending:function(){c.value=!1,x.value=!1,R.info("Pembayaran tertunda. Silakan selesaikan pembayaran."),q(),de.reload({only:["orders"]})},onError:function(){c.value=!1,x.value=!1,R.error("Pembayaran gagal. Silakan coba lagi."),setTimeout(()=>{document.body.classList.remove("midtrans-popup-active")},100)},onClose:function(){c.value=!1,x.value=!1,R.info("Pembayaran dibatalkan."),setTimeout(()=>{document.body.classList.remove("midtrans-popup-active")},100)}})):R.error(b.message||"Gagal memproses pembayaran")}catch(P){console.error("Failed to initiate payment:",P),R.error(P.response?.data?.message||"Gagal memproses pembayaran")}finally{c.value||(x.value=!1)}},A=async()=>{if(!(!g.value||!j.value||x.value)){if(!Q.value){R.error("Saldo e-wallet Anda tidak mencukupi");return}x.value=!0;try{const P=(await ne.post(`/api/client/orders/${g.value.id}/pay-wallet`)).data;P.success?(R.success(P.message||"Pembayaran berhasil!"),await q(),de.reload({only:["orders","auth"]})):R.error(P.message||"Gagal memproses pembayaran")}catch(_){console.error("Failed to pay with wallet:",_),R.error(_.response?.data?.message||"Gagal memproses pembayaran")}finally{x.value=!1}}},h=()=>{E.value==="wallet"?A():O()};return et(()=>[d.open,d.orderId],([_,P])=>{_&&P&&q()}),(_,P)=>(r(),T(e(ws),{open:l.open,"onUpdate:open":P[3]||(P[3]=b=>m("update:open",b))},{default:a(()=>[s(e($s),{side:"right",class:"sm:max-w-2xl w-full overflow-y-auto"},{default:a(()=>[s(e(Ps),null,{default:a(()=>[s(e(Cs),null,{default:a(()=>[...P[4]||(P[4]=[o("Detail Pesanan",-1)])]),_:1}),s(e(Ss),null,{default:a(()=>[...P[5]||(P[5]=[o(" Informasi lengkap pesanan Anda ",-1)])]),_:1})]),_:1}),v.value?(r(),f("div",ll,[s(e(De),{class:"h-8 w-8 animate-spin text-muted-foreground"})])):g.value?(r(),f("div",nl,[t("div",rl,[t("div",ol,[s(e(Ve),{class:"h-4 w-4"}),P[6]||(P[6]=t("span",null,"Ringkasan Pesanan",-1))]),t("div",il,[t("div",dl,[P[7]||(P[7]=t("span",{class:"text-sm text-muted-foreground"},"Nomor Pesanan",-1)),t("span",ul,n(g.value.order_no),1)]),t("div",ml,[P[8]||(P[8]=t("span",{class:"text-sm text-muted-foreground"},"Status",-1)),s(e(V),{class:W(se.value)},{default:a(()=>[o(n(e(p)(g.value.status)),1)]),_:1},8,["class"])]),g.value.placed_at?(r(),f("div",cl,[P[9]||(P[9]=t("span",{class:"text-sm text-muted-foreground"},"Tanggal Pesan",-1)),t("span",pl,n(e(u)(g.value.placed_at)),1)])):w("",!0),g.value.paid_at?(r(),f("div",fl,[P[10]||(P[10]=t("span",{class:"text-sm text-muted-foreground"},"Status Pembayaran",-1)),s(e(V),{variant:"secondary"},{default:a(()=>[s(e(he),{class:"w-3 h-3 mr-1"}),o(" Dibayar "+n(e(u)(g.value.paid_at)),1)]),_:1})])):w("",!0)])]),s(e(oe)),t("div",xl,[t("div",gl,[s(e(Ve),{class:"h-4 w-4"}),P[11]||(P[11]=t("span",null,"Produk Pesanan",-1))]),t("div",vl,[(r(!0),f(G,null,te(g.value.items,b=>(r(),f("div",{key:b.id,class:"flex gap-4 p-3 bg-muted/30 rounded-lg"},[b.meta_json?.image?(r(),f("img",{key:0,src:b.meta_json.image,alt:b.name,class:"w-16 h-16 object-cover rounded-md"},null,8,yl)):w("",!0),t("div",bl,[t("h4",_l,n(b.name),1),t("p",hl,"SKU: "+n(b.sku),1),t("p",kl,n(b.qty)+"x "+n(e(y)(b.unit_price)),1)]),t("div",wl,[t("p",$l,n(e(y)(b.row_total)),1)])]))),128))])]),s(e(oe)),g.value.shipping_address?(r(),f("div",Pl,[t("div",Cl,[s(e(je),{class:"h-4 w-4"}),P[12]||(P[12]=t("span",null,"Alamat Pengiriman",-1))]),t("div",Sl,[t("p",Tl,n(g.value.shipping_address.recipient_name),1),t("p",jl,n(g.value.shipping_address.recipient_phone),1),t("p",Rl,n(g.value.shipping_address.address_line1),1),t("p",Ml,n(g.value.shipping_address.city_label)+", "+n(g.value.shipping_address.province_label)+" "+n(g.value.shipping_address.postal_code),1)])])):w("",!0),s(e(oe)),g.value.applied_promos?.shipping?(r(),f("div",Dl,[t("div",Al,[s(e(Xt),{class:"h-4 w-4"}),P[13]||(P[13]=t("span",null,"Informasi Pengiriman",-1))]),t("div",Ll,[t("div",Vl,[P[14]||(P[14]=t("span",{class:"text-sm text-muted-foreground"},"Kurir",-1)),t("span",Bl,n(g.value.applied_promos.shipping.courier),1)]),t("div",Il,[P[15]||(P[15]=t("span",{class:"text-sm text-muted-foreground"},"Layanan",-1)),t("span",El,n(g.value.applied_promos.shipping.service),1)]),t("div",Ul,[P[16]||(P[16]=t("span",{class:"text-sm text-muted-foreground"},"Estimasi",-1)),t("span",Fl,n(g.value.applied_promos.shipping.etd)+" hari",1)])])])):w("",!0),s(e(oe)),t("div",Kl,[t("div",Nl,[s(e(ke),{class:"h-4 w-4"}),P[17]||(P[17]=t("span",null,"Ringkasan Pembayaran",-1))]),t("div",zl,[t("div",Ol,[P[18]||(P[18]=t("span",{class:"text-muted-foreground"},"Subtotal",-1)),t("span",null,n(e(y)(g.value.subtotal_amount)),1)]),g.value.discount_amount>0?(r(),f("div",ql,[P[19]||(P[19]=t("span",{class:"text-muted-foreground"},"Diskon",-1)),t("span",Gl,"-"+n(e(y)(g.value.discount_amount)),1)])):w("",!0),t("div",Ql,[P[20]||(P[20]=t("span",{class:"text-muted-foreground"},"Ongkos Kirim",-1)),t("span",null,n(e(y)(g.value.shipping_amount)),1)]),g.value.tax_amount>0?(r(),f("div",Wl,[P[21]||(P[21]=t("span",{class:"text-muted-foreground"},"Pajak",-1)),t("span",null,n(e(y)(g.value.tax_amount)),1)])):w("",!0),s(e(oe)),t("div",Hl,[P[22]||(P[22]=t("span",null,"Total",-1)),t("span",Jl,n(e(y)(g.value.grand_total)),1)])])]),g.value.notes?(r(),f("div",Zl,[s(e(oe)),t("div",Xl,[P[23]||(P[23]=t("p",{class:"text-sm font-medium"},"Catatan",-1)),t("p",Yl,n(g.value.notes),1)])])):w("",!0),j.value?(r(),f("div",en,[s(e(oe)),t("div",tn,[t("div",sn,[s(e(Ae),{class:"h-4 w-4"}),P[24]||(P[24]=t("span",null,"Metode Pembayaran",-1))]),s(e(It),{modelValue:E.value,"onUpdate:modelValue":P[2]||(P[2]=b=>E.value=b),class:"space-y-3"},{default:a(()=>[t("div",{class:W(["flex cursor-pointer items-center space-x-3 rounded-lg border p-3 transition-colors",{"border-primary bg-primary/10":E.value==="wallet","hover:bg-muted":E.value!=="wallet","cursor-not-allowed opacity-50":!Q.value}]),onClick:P[0]||(P[0]=b=>Q.value&&(E.value="wallet"))},[s(e(gt),{value:"wallet",id:"payment-wallet-detail",disabled:!Q.value},null,8,["disabled"]),s(e(K),{for:"payment-wallet-detail",class:W(["flex-1 cursor-pointer",{"cursor-not-allowed":!Q.value}])},{default:a(()=>[t("div",an,[t("div",null,[t("div",ln,[s(e(Ae),{class:"h-4 w-4"}),P[25]||(P[25]=o(" E-Wallet ",-1))]),t("div",nn," Saldo: "+n(e(y)(M.value)),1),Q.value?w("",!0):(r(),f("div",rn," Saldo tidak mencukupi (kurang "+n(e(y)(g.value.grand_total-M.value))+") ",1))])])]),_:1},8,["class"])],2),t("div",{class:W(["flex cursor-pointer items-center space-x-3 rounded-lg border p-3 transition-colors",{"border-primary bg-primary/10":E.value==="midtrans","hover:bg-muted":E.value!=="midtrans"}]),onClick:P[1]||(P[1]=b=>E.value="midtrans")},[s(e(gt),{value:"midtrans",id:"payment-midtrans-detail"}),s(e(K),{for:"payment-midtrans-detail",class:"flex-1 cursor-pointer"},{default:a(()=>[t("div",on,[t("div",null,[t("div",dn,[s(e(ke),{class:"h-4 w-4"}),P[26]||(P[26]=o(" Payment Gateway ",-1))]),P[27]||(P[27]=t("div",{class:"text-xs text-muted-foreground"}," Transfer Bank, E-wallet, Kartu Kredit ",-1))])])]),_:1})],2)]),_:1},8,["modelValue"])]),s(e(I),{onClick:h,disabled:x.value||c.value||E.value==="wallet"&&!Q.value,class:"w-full",size:"lg"},{default:a(()=>[x.value?(r(),T(e(De),{key:0,class:"h-4 w-4 mr-2 animate-spin"})):E.value==="wallet"?(r(),T(e(Ae),{key:1,class:"h-4 w-4 mr-2"})):(r(),T(e(ke),{key:2,class:"h-4 w-4 mr-2"})),E.value==="wallet"?(r(),f("span",un," Bayar dengan E-Wallet "+n(e(y)(g.value.grand_total)),1)):(r(),f("span",mn," Bayar "+n(e(y)(g.value.grand_total)),1))]),_:1},8,["disabled"])])):w("",!0),F.value?(r(),f("div",cn,[s(e(I),{onClick:B,disabled:$.value,class:"w-full",size:"lg"},{default:a(()=>[$.value?(r(),T(e(De),{key:0,class:"h-4 w-4 mr-2 animate-spin"})):(r(),T(e(he),{key:1,class:"h-4 w-4 mr-2"})),P[28]||(P[28]=o(" Tandai Pesanan Selesai ",-1))]),_:1},8,["disabled"])])):w("",!0)])):(r(),f("div",pn," Tidak ada data pesanan "))]),_:1})]),_:1},8,["open"]))}}),xn={class:"space-y-6 py-4"},gn={key:2,class:"flex gap-4 rounded-lg bg-muted p-4"},vn=["src","alt"],yn={class:"flex-1"},bn={class:"font-medium"},_n={class:"space-y-2"},hn={class:"flex items-center gap-2"},kn=["onClick","onMouseenter"],wn={class:"ml-2 text-sm text-muted-foreground"},$n={class:"space-y-2"},Pn={key:0,class:"text-sm text-destructive"},Cn={class:"space-y-2"},Sn={class:"text-right text-xs text-muted-foreground"},Tn={key:0,class:"text-sm text-destructive"},jn=Z({__name:"ProductReviewDialog",props:{open:{type:Boolean},orderId:{},orderItems:{}},emits:["update:open","review-submitted"],setup(l,{emit:i}){const d=l,m=i,y=D(0),u=D(null),p=D(!1),k=D({}),M=U(()=>d.orderItems[y.value]),v=U(()=>y.value<d.orderItems.length-1),$=U(()=>y.value===d.orderItems.length-1),x=D({order_item_id:0,product_id:0,rating:5,title:"",comment:""}),c=D(0),g=q=>{x.value.rating=q},E=async()=>{if(M.value){x.value.order_item_id=M.value.id,x.value.product_id=M.value.product_id,u.value=null,k.value={},p.value=!0;try{const q=await ne.post(`/api/client/orders/${d.orderId}/reviews`,x.value);if(q.data.success){const B=q.data.message||"Review berhasil dikirim dan menunggu persetujuan!";u.value={type:"success",message:B},R.success(B),v.value?setTimeout(()=>{y.value++,j(),u.value=null},1500):setTimeout(()=>{m("update:open",!1),m("review-submitted"),Q()},2e3)}}catch(q){console.error("Submit review error:",q);let B="Gagal mengirim review. Silakan coba lagi.";if(q.response?.data){const O=q.response.data;if(O.message&&(B=O.message),O.errors){k.value=O.errors;const A=Object.values(O.errors)[0];Array.isArray(A)&&A.length>0?B=A[0]:typeof A=="string"&&(B=A)}}u.value={type:"error",message:B},R.error(B)}finally{p.value=!1}}},F=()=>{v.value?(y.value++,j(),u.value=null):(m("update:open",!1),m("review-submitted"),Q())},j=()=>{x.value={order_item_id:0,product_id:0,rating:5,title:"",comment:""},k.value={}},Q=()=>{y.value=0,j(),u.value=null},se=q=>{m("update:open",q),q||Q()};return(q,B)=>(r(),T(e(Ke),{open:l.open,"onUpdate:open":se},{default:a(()=>[s(e(Ie),{class:"sm:max-w-[500px]"},{default:a(()=>[s(e(Ee),null,{default:a(()=>[s(e(Ue),null,{default:a(()=>[...B[4]||(B[4]=[o("Beri Rating & Review",-1)])]),_:1}),s(e(Fe),null,{default:a(()=>[o(" Bagikan pengalaman Anda dengan produk ini ("+n(y.value+1)+" dari "+n(l.orderItems.length)+") ",1)]),_:1})]),_:1}),t("div",xn,[!M.value||l.orderItems.length===0?(r(),T(e(Ze),{key:0,variant:"default"},{default:a(()=>[s(e($e),{class:"h-4 w-4"}),s(e(Xe),null,{default:a(()=>[...B[5]||(B[5]=[o("Tidak Ada Item",-1)])]),_:1}),s(e(Ye),null,{default:a(()=>[...B[6]||(B[6]=[o(" Tidak ada produk yang dapat direview dari pesanan ini. ",-1)])]),_:1})]),_:1})):(r(),f(G,{key:1},[u.value?.type==="success"?(r(),T(e(Ze),{key:0,variant:"default"},{default:a(()=>[s(e(Yt),{class:"h-4 w-4"}),s(e(Xe),null,{default:a(()=>[...B[7]||(B[7]=[o("Berhasil!",-1)])]),_:1}),s(e(Ye),null,{default:a(()=>[o(n(u.value.message),1)]),_:1})]),_:1})):w("",!0),u.value?.type==="error"?(r(),T(e(Ze),{key:1,variant:"destructive"},{default:a(()=>[s(e($e),{class:"h-4 w-4"}),s(e(Xe),null,{default:a(()=>[...B[8]||(B[8]=[o("Terjadi Kesalahan",-1)])]),_:1}),s(e(Ye),null,{default:a(()=>[o(n(u.value.message),1)]),_:1})]),_:1})):w("",!0),M.value?(r(),f("div",gn,[M.value.product_image?(r(),f("img",{key:0,src:M.value.product_image,alt:M.value.product_name,class:"h-20 w-20 rounded-md object-cover"},null,8,vn)):w("",!0),t("div",yn,[t("h4",bn,n(M.value.product_name),1)])])):w("",!0),t("div",_n,[s(e(K),null,{default:a(()=>[...B[9]||(B[9]=[o("Rating Produk",-1)])]),_:1}),t("div",hn,[(r(),f(G,null,te(5,O=>t("button",{key:O,type:"button",onClick:A=>g(O),onMouseenter:A=>c.value=O,onMouseleave:B[0]||(B[0]=A=>c.value=0),class:"transition-transform hover:scale-110 focus:outline-none"},[s(e(pt),{class:W(["h-8 w-8 transition-colors",(c.value||x.value.rating)>=O?"fill-yellow-400 text-yellow-400":"text-gray-300"])},null,8,["class"])],40,kn)),64)),t("span",wn,n(x.value.rating)+" / 5 ",1)])]),t("div",$n,[s(e(K),{for:"title"},{default:a(()=>[...B[10]||(B[10]=[o("Judul Review (Opsional)",-1)])]),_:1}),s(e(X),{id:"title",modelValue:x.value.title,"onUpdate:modelValue":B[1]||(B[1]=O=>x.value.title=O),placeholder:"Ringkasan singkat pengalaman Anda",maxlength:"100"},null,8,["modelValue"]),k.value.title?(r(),f("p",Pn,n(k.value.title),1)):w("",!0)]),t("div",Cn,[s(e(K),{for:"comment"},{default:a(()=>[...B[11]||(B[11]=[o("Komentar (Opsional)",-1)])]),_:1}),s(e(Be),{id:"comment",modelValue:x.value.comment,"onUpdate:modelValue":B[2]||(B[2]=O=>x.value.comment=O),placeholder:"Ceritakan pengalaman Anda dengan produk ini...",rows:"4",maxlength:"500"},null,8,["modelValue"]),t("p",Sn,n(x.value.comment?.length||0)+" / 500 karakter ",1),k.value.comment?(r(),f("p",Tn,n(k.value.comment),1)):w("",!0)])],64))]),s(e(Ne),{class:"flex-col gap-2 sm:flex-row"},{default:a(()=>[M.value&&l.orderItems.length>0?(r(),f(G,{key:0},[v.value||$.value?(r(),T(e(I),{key:0,type:"button",variant:"outline",onClick:F,disabled:p.value},{default:a(()=>[o(n(v.value?"Lewati":"Tutup"),1)]),_:1},8,["disabled"])):w("",!0),s(e(I),{type:"button",onClick:E,disabled:p.value||x.value.rating===0,class:"w-full sm:w-auto"},{default:a(()=>[p.value?(r(),T(e(De),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):w("",!0),o(" "+n(v.value?"Kirim & Lanjut":"Kirim Review"),1)]),_:1},8,["disabled"])],64)):(r(),T(e(I),{key:1,type:"button",variant:"outline",onClick:B[3]||(B[3]=O=>se(!1))},{default:a(()=>[...B[12]||(B[12]=[o(" Tutup ",-1)])]),_:1}))]),_:1})]),_:1})]),_:1},8,["open"]))}}),Rn={class:"rounded-lg border p-4 transition-colors hover:border-primary"},Mn={class:"flex flex-col justify-between gap-4 md:flex-row md:items-center"},Dn={class:"flex-1"},An={class:"mb-2 flex items-center gap-3"},Ln={class:"text-sm font-semibold"},Vn={class:"text-xs text-muted-foreground"},Bn={class:"mt-2 flex items-center gap-2"},In={class:"flex flex-col gap-2 md:items-end"},En={class:"text-lg font-bold text-primary"},Un={class:"flex flex-wrap gap-2"},Fn=Z({__name:"OrderCard",props:{order:{}},setup(l){const i=l,{formatCurrency:d,formatDate:m,getStatusLabel:y}=Pe(),u=D(!1),p=D(!1),k=D(!1),M=D(!1),v=D(i.order.status),$=D(i.order.paid_at),x=async()=>{if(!k.value){k.value=!0;try{const F=await ne.post(`/api/client/orders/${i.order.id}/check-payment-status`);F.data.success?(v.value=F.data.status,F.data.paid_at&&($.value=F.data.paid_at),R.success(F.data.message),setTimeout(()=>{de.reload({only:["orders"]})},500)):R.error(F.data.message)}catch(F){console.error("Check payment status error:",F),R.error(F.response?.data?.message||"Gagal memeriksa status pembayaran")}finally{k.value=!1}}},c=async()=>{if(!M.value){M.value=!0;try{const F=await ne.post(`/api/client/orders/${i.order.id}/complete`);F.data.success&&(v.value="COMPLETED",R.success(F.data.message||"Pesanan berhasil diselesaikan"),F.data.items&&F.data.items.length>0?(i.order.items=F.data.items,p.value=!0):setTimeout(()=>{de.reload({only:["orders"]})},500))}catch(F){console.error("Complete order error:",F),R.error(F.response?.data?.message||"Gagal menandai pesanan sebagai diterima")}finally{M.value=!1}}},g=()=>{de.reload({only:["orders"]})},E=()=>{const F=(i.order.items||[]).filter(j=>!j.has_review);F.length>0?(i.order.items=F,p.value=!0):R.info("Semua produk sudah direview")};return(F,j)=>(r(),f("div",Rn,[t("div",Mn,[t("div",Dn,[t("div",An,[s(e(Ve),{class:"h-5 w-5 text-muted-foreground"}),t("div",null,[t("p",Ln,n(l.order.order_no),1),t("p",Vn,n(l.order.placed_at?e(m)(l.order.placed_at):"Belum ditempatkan"),1)])]),t("div",Bn,[s(e(V),{class:W({"bg-yellow-100 text-yellow-700 hover:bg-yellow-200 dark:bg-yellow-900 dark:text-yellow-100":v.value.toUpperCase()==="PENDING","bg-blue-100 text-blue-700 hover:bg-blue-200 dark:bg-blue-900 dark:text-blue-100":v.value.toUpperCase()==="PROCESSING"||v.value.toUpperCase()==="PAID","bg-purple-100 text-purple-700 hover:bg-purple-200 dark:bg-purple-900 dark:text-purple-100":v.value.toUpperCase()==="SHIPPED","bg-emerald-100 text-emerald-700 hover:bg-emerald-200 dark:bg-emerald-900 dark:text-emerald-100":v.value.toUpperCase()==="DELIVERED"||v.value.toUpperCase()==="COMPLETED","bg-red-100 text-red-700 hover:bg-red-200 dark:bg-red-900 dark:text-red-100":v.value.toUpperCase()==="CANCELLED"})},{default:a(()=>[o(n(e(y)(v.value)),1)]),_:1},8,["class"]),$.value?(r(),T(e(V),{key:0,variant:"secondary"},{default:a(()=>[s(e(he),{class:"mr-1 h-3 w-3"}),j[3]||(j[3]=o(" Dibayar ",-1))]),_:1})):w("",!0)])]),t("div",In,[t("p",En,n(e(d)(l.order.grand_total)),1),t("div",Un,[v.value.toUpperCase()==="PENDING"&&!$.value?(r(),T(e(I),{key:0,variant:"outline",size:"sm",disabled:k.value,onClick:x},{default:a(()=>[s(e($t),{class:W(["mr-1 h-3 w-3",{"animate-spin":k.value}])},null,8,["class"]),j[4]||(j[4]=o(" Cek Status ",-1))]),_:1},8,["disabled"])):w("",!0),v.value.toUpperCase()==="SHIPPED"?(r(),T(e(I),{key:1,variant:"default",size:"sm",disabled:M.value,onClick:c},{default:a(()=>[s(e(es),{class:"mr-1 h-3 w-3"}),j[5]||(j[5]=o(" Pesanan Diterima ",-1))]),_:1},8,["disabled"])):w("",!0),v.value.toUpperCase()==="COMPLETED"&&l.order.has_unreviewed_items?(r(),T(e(I),{key:2,variant:"outline",size:"sm",onClick:E},{default:a(()=>[s(e(pt),{class:"mr-1 h-3 w-3"}),j[6]||(j[6]=o(" Tambah Review ",-1))]),_:1})):w("",!0),s(e(I),{variant:"outline",size:"sm",onClick:j[0]||(j[0]=Q=>u.value=!0)},{default:a(()=>[...j[7]||(j[7]=[o(" Lihat Detail ",-1)])]),_:1})])])]),s(fn,{open:u.value,"onUpdate:open":j[1]||(j[1]=Q=>u.value=Q),"order-id":l.order.id},null,8,["open","order-id"]),s(jn,{open:p.value,"onUpdate:open":j[2]||(j[2]=Q=>p.value=Q),"order-id":l.order.id,"order-items":l.order.items||[],onReviewSubmitted:g},null,8,["open","order-id","order-items"])]))}}),Kn={key:0,class:"space-y-4"},Nn={key:1,class:"py-12 text-center"},zn=Z({__name:"OrdersTab",props:{orders:{}},setup(l){return(i,d)=>(r(),T(e(N),null,{default:a(()=>[s(e(H),null,{default:a(()=>[s(e(J),null,{default:a(()=>[...d[0]||(d[0]=[o("Pesanan Saya",-1)])]),_:1}),s(e(ce),null,{default:a(()=>[...d[1]||(d[1]=[o(" Riwayat pesanan dan status pengiriman ",-1)])]),_:1})]),_:1}),s(e(z),null,{default:a(()=>[l.orders.length>0?(r(),f("div",Kn,[(r(!0),f(G,null,te(l.orders,m=>(r(),T(Fn,{key:m.id,order:m},null,8,["order"]))),128))])):(r(),f("div",Nn,[s(e(Ve),{class:"h-16 w-16 mx-auto mb-4 text-muted-foreground opacity-20"}),d[3]||(d[3]=t("p",{class:"text-muted-foreground mb-4"},"Belum ada pesanan",-1)),s(e(ts),{href:"/beranda"},{default:a(()=>[s(e(I),null,{default:a(()=>[...d[2]||(d[2]=[o(" Mulai Belanja ",-1)])]),_:1})]),_:1})]))]),_:1})]),_:1}))}}),On={class:"text-center"},qn={class:"text-4xl font-bold text-primary mb-4"},Gn={class:"flex gap-3 justify-center"},Qn=Z({__name:"WalletBalance",props:{balance:{}},emits:["topup","withdrawal"],setup(l,{emit:i}){const d=i,{formatCurrency:m}=Pe();return(y,u)=>(r(),T(e(N),null,{default:a(()=>[s(e(z),{class:"pt-6"},{default:a(()=>[t("div",On,[u[4]||(u[4]=t("p",{class:"text-sm text-muted-foreground mb-2"},"Saldo E-Wallet",-1)),t("p",qn,n(e(m)(l.balance)),1),t("div",Gn,[s(e(I),{onClick:u[0]||(u[0]=p=>d("topup")),size:"sm"},{default:a(()=>[s(e(Pt),{class:"w-4 h-4 mr-2"}),u[2]||(u[2]=o(" Top Up ",-1))]),_:1}),s(e(I),{onClick:u[1]||(u[1]=p=>d("withdrawal")),variant:"outline",size:"sm"},{default:a(()=>[s(e(Ct),{class:"w-4 h-4 mr-2"}),u[3]||(u[3]=o(" Tarik Dana ",-1))]),_:1})])])]),_:1})]),_:1}))}}),Wn={class:"space-y-2"},Hn={class:"relative"},Jn={key:0,class:"text-sm text-red-500"},Zn={class:"p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-900 rounded-lg"},Xn={class:"flex items-start gap-3"},Yn={key:0,class:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-900 rounded-lg"},er={class:"flex items-start gap-3"},tr={class:"flex items-center justify-end gap-3"},sr={key:0},ar={key:1},lr={key:2},nr={key:3},rr=Z({__name:"WalletTopupForm",emits:["cancel"],setup(l,{emit:i}){const d=i,m=we({amount:"",payment_method:"midtrans"}),y=D(!1),u=D(!1);Ge(()=>{if(window.snap){y.value=!0;return}if(typeof window>"u")return;const v=()=>{window.snap&&(y.value=!0,u.value=!1,console.log("Midtrans Snap loaded (event)."))};window.addEventListener("midtrans:snap:loaded",v,{once:!0}),setTimeout(()=>{y.value||(window.snap?(y.value=!0,console.log("Midtrans Snap loaded (fallback).")):(u.value=!0,console.error("Failed to load Midtrans Snap (timeout).")))},5e3)});const p=v=>{if(!window.snap){console.error("Snap not available"),alert("Pembayaran tidak dapat diproses. Silakan refresh halaman dan coba lagi."),d("cancel");return}try{window.snap.pay(v,{onSuccess:function($){console.log("Payment success:",$),R.success("Pembayaran berhasil."),typeof window<"u"&&(window.location.href="/client/profile?tab=wallet")},onPending:function($){console.log("Payment pending:",$),R.info("Pembayaran sedang diproses."),typeof window<"u"&&(window.location.href="/client/profile?tab=wallet")},onError:function($){console.error("Payment error (Midtrans):",$),R.error("Pembayaran gagal.");try{console.log("Midtrans raw error JSON:",JSON.stringify($,null,2))}catch{}const x=$?.status_message||$?.status_code||"Terjadi kesalahan pembayaran.",c=$?.status_code==="505"?`
Catatan: Sandbox sering menolak VA dengan nominal rendah (coba >= 15000 atau metode lain).`:"";if($?.status_code==="505"){alert("Midtrans Error: "+x+c+`
Sandbox akan otomatis mencoba QRIS.`),M("qris");return}alert("Midtrans Error: "+x+`
Silakan coba metode lain atau refresh.`),d("cancel")},onClose:function(){console.log("Payment modal closed"),R("Pembayaran ditutup sebelum selesai."),d("cancel")}})}catch($){console.error("Error opening Snap modal:",$),alert("Terjadi kesalahan saat membuka pembayaran. Silakan coba lagi."),R.error("Terjadi kesalahan saat membuka pembayaran. Silakan coba lagi."),d("cancel")}},k=async()=>{if(!m.processing){if(!y.value||!window.snap){R.error("Sistem pembayaran belum siap. Silakan tunggu beberapa saat atau refresh halaman.");return}try{m.processing=!0;const $=(await ne.post("/client/wallet/topup",{amount:m.amount,payment_method:m.payment_method})).data,x=$.snap_token;if($.success===!1&&$.message){R.error($.message),m.processing=!1;return}x&&typeof x=="string"&&x.trim()!==""?(m.reset(),m.processing=!1,setTimeout(()=>{p(x)},100)):(m.processing=!1,console.error("Invalid snap token:",x),console.error("Full response:",$),R.error("Gagal mendapatkan token pembayaran. Silakan coba lagi."),m.reset(),d("cancel"))}catch(v){if(m.processing=!1,console.error("Form submission error:",v),R.error("Terjadi kesalahan saat mengirim formulir."),v.response?.status===422&&v.response?.data?.errors){const $=v.response.data.errors,x=Object.values($)[0],c=Array.isArray(x)?x[0]:x;R.error(c)}else{const $=v.response?.data?.message||v.message||"Terjadi kesalahan. Silakan coba lagi.";R.error($)}m.reset()}}},M=async v=>{if(!m.processing){if(!y.value||!window.snap){alert("Sistem pembayaran belum siap untuk retry.");return}try{m.processing=!0;const x=(await ne.post("/client/wallet/topup",{amount:m.amount||"20000",payment_method:m.payment_method,force_payment:v})).data,c=x.snap_token;if(!x.success||!c){R.error(x.message||"Retry gagal mendapatkan token."),m.processing=!1;return}m.processing=!1,R.success("Metode dialihkan ke "+v.toUpperCase()+". Silakan lanjutkan pembayaran."),p(c)}catch($){m.processing=!1,R.error($?.response?.data?.message||$.message||"Retry gagal.")}}};return(v,$)=>(r(),T(e(N),null,{default:a(()=>[s(e(H),null,{default:a(()=>[s(e(J),null,{default:a(()=>[...$[2]||($[2]=[o("Top Up E-Wallet",-1)])]),_:1}),s(e(ce),null,{default:a(()=>[...$[3]||($[3]=[o(" Isi saldo e-wallet Anda melalui Midtrans ",-1)])]),_:1})]),_:1}),s(e(z),null,{default:a(()=>[t("form",{onSubmit:qe(k,["prevent"]),class:"space-y-6"},[t("div",Wn,[s(e(K),{for:"topup_amount"},{default:a(()=>[...$[4]||($[4]=[o(" Jumlah Top Up ",-1),t("span",{class:"text-red-500"},"*",-1)])]),_:1}),t("div",Hn,[s(e(ke),{class:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s(e(X),{id:"topup_amount",modelValue:e(m).amount,"onUpdate:modelValue":$[0]||($[0]=x=>e(m).amount=x),type:"number",placeholder:"Minimal Rp 10.000",class:"pl-10",min:"10000",max:"10000000",required:""},null,8,["modelValue"])]),$[5]||($[5]=t("p",{class:"text-xs text-muted-foreground"}," Minimum Rp 10.000 - Maximum Rp 10.000.000. Disarankan >= Rp 15.000 untuk Virtual Account agar tidak ditolak (505). ",-1)),e(m).errors.amount?(r(),f("p",Jn,n(e(m).errors.amount),1)):w("",!0)]),t("div",Zn,[t("div",Xn,[s(e(ke),{class:"w-5 h-5 text-blue-600 dark:text-blue-400 mt-0.5"}),$[6]||($[6]=t("div",null,[t("p",{class:"text-sm font-semibold text-blue-900 dark:text-blue-100"}," Pembayaran via Midtrans "),t("p",{class:"text-xs text-blue-700 dark:text-blue-300 mt-1"}," Anda akan diarahkan ke halaman pembayaran Midtrans untuk menyelesaikan transaksi ")],-1))])]),u.value?(r(),f("div",Yn,[t("div",er,[s(e($e),{class:"w-5 h-5 text-red-600 dark:text-red-400 mt-0.5"}),$[7]||($[7]=t("div",null,[t("p",{class:"text-sm font-semibold text-red-900 dark:text-red-100"}," Sistem Pembayaran Belum Siap "),t("p",{class:"text-xs text-red-700 dark:text-red-300 mt-1"}," Silakan refresh halaman untuk memuat ulang sistem pembayaran. ")],-1))])])):w("",!0),t("div",tr,[s(e(I),{type:"button",variant:"outline",onClick:$[1]||($[1]=x=>{e(m).reset(),d("cancel")}),disabled:e(m).processing},{default:a(()=>[...$[8]||($[8]=[o(" Batal ",-1)])]),_:1},8,["disabled"]),s(e(I),{type:"submit",disabled:e(m).processing||u.value||!y.value},{default:a(()=>[e(m).processing?(r(),f("span",sr,"Memproses...")):!y.value&&!u.value?(r(),f("span",ar,"Memuat sistem pembayaran...")):u.value?(r(),f("span",lr,"Sistem pembayaran error")):(r(),f("span",nr,"Lanjut ke Pembayaran"))]),_:1},8,["disabled"])])],32)]),_:1})]),_:1}))}}),or={class:"space-y-2"},ir={class:"relative"},dr={class:"text-xs text-muted-foreground"},ur={key:0,class:"text-sm text-red-500"},mr={class:"space-y-4"},cr={class:"space-y-2"},pr={key:0,class:"text-sm text-red-500"},fr={class:"space-y-2"},xr={key:0,class:"text-sm text-red-500"},gr={class:"space-y-2"},vr={key:0,class:"text-sm text-red-500"},yr={class:"flex items-center justify-end gap-3"},br=Z({__name:"WalletWithdrawalForm",props:{maxAmount:{}},emits:["cancel"],setup(l,{emit:i}){const d=i,m=we({amount:"",bank_name:"",bank_account:"",bank_holder:""}),y=()=>{m.post("/client/wallet/withdrawal",{preserveScroll:!0,onSuccess:()=>{m.reset(),d("cancel"),R.success("Permintaan penarikan berhasil diajukan.")}})};return(u,p)=>(r(),T(e(N),null,{default:a(()=>[s(e(H),null,{default:a(()=>[s(e(J),null,{default:a(()=>[...p[5]||(p[5]=[o("Tarik Dana E-Wallet",-1)])]),_:1}),s(e(ce),null,{default:a(()=>[...p[6]||(p[6]=[o(" Tarik saldo ke rekening bank Anda ",-1)])]),_:1})]),_:1}),s(e(z),null,{default:a(()=>[t("form",{onSubmit:qe(y,["prevent"]),class:"space-y-6"},[t("div",or,[s(e(K),{for:"withdrawal_amount"},{default:a(()=>[...p[7]||(p[7]=[o(" Jumlah Penarikan ",-1),t("span",{class:"text-red-500"},"*",-1)])]),_:1}),t("div",ir,[s(e(ke),{class:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s(e(X),{id:"withdrawal_amount",modelValue:e(m).amount,"onUpdate:modelValue":p[0]||(p[0]=k=>e(m).amount=k),type:"number",placeholder:"Minimal Rp 50.000",class:"pl-10",min:"50000",max:l.maxAmount,required:""},null,8,["modelValue","max"])]),t("p",dr," Minimum Rp 50.000 - Maksimal Rp "+n(l.maxAmount.toLocaleString("id-ID")),1),e(m).errors.amount?(r(),f("p",ur,n(e(m).errors.amount),1)):w("",!0)]),s(e(oe)),t("div",mr,[p[11]||(p[11]=t("h4",{class:"font-semibold"},"Informasi Rekening",-1)),t("div",cr,[s(e(K),{for:"bank_name"},{default:a(()=>[...p[8]||(p[8]=[o(" Nama Bank ",-1),t("span",{class:"text-red-500"},"*",-1)])]),_:1}),s(e(X),{id:"bank_name",modelValue:e(m).bank_name,"onUpdate:modelValue":p[1]||(p[1]=k=>e(m).bank_name=k),type:"text",placeholder:"e.g., BCA, Mandiri, BNI",required:""},null,8,["modelValue"]),e(m).errors.bank_name?(r(),f("p",pr,n(e(m).errors.bank_name),1)):w("",!0)]),t("div",fr,[s(e(K),{for:"bank_account"},{default:a(()=>[...p[9]||(p[9]=[o(" Nomor Rekening ",-1),t("span",{class:"text-red-500"},"*",-1)])]),_:1}),s(e(X),{id:"bank_account",modelValue:e(m).bank_account,"onUpdate:modelValue":p[2]||(p[2]=k=>e(m).bank_account=k),type:"text",placeholder:"Nomor rekening bank",required:""},null,8,["modelValue"]),e(m).errors.bank_account?(r(),f("p",xr,n(e(m).errors.bank_account),1)):w("",!0)]),t("div",gr,[s(e(K),{for:"bank_holder"},{default:a(()=>[...p[10]||(p[10]=[o(" Nama Pemilik Rekening ",-1),t("span",{class:"text-red-500"},"*",-1)])]),_:1}),s(e(X),{id:"bank_holder",modelValue:e(m).bank_holder,"onUpdate:modelValue":p[3]||(p[3]=k=>e(m).bank_holder=k),type:"text",placeholder:"Nama sesuai rekening bank",required:""},null,8,["modelValue"]),e(m).errors.bank_holder?(r(),f("p",vr,n(e(m).errors.bank_holder),1)):w("",!0)])]),p[13]||(p[13]=t("div",{class:"p-4 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-900 rounded-lg"},[t("p",{class:"text-sm text-amber-700 dark:text-amber-300"},[t("strong",null,"Catatan:"),o(" Penarikan akan diproses dalam 1-3 hari kerja. Pastikan data rekening sudah benar. ")])],-1)),t("div",yr,[s(e(I),{type:"button",variant:"outline",onClick:p[4]||(p[4]=k=>{e(m).reset(),d("cancel")}),disabled:e(m).processing},{default:a(()=>[...p[12]||(p[12]=[o(" Batal ",-1)])]),_:1},8,["disabled"]),s(e(I),{type:"submit",disabled:e(m).processing},{default:a(()=>[o(n(e(m).processing?"Memproses...":"Ajukan Penarikan"),1)]),_:1},8,["disabled"])])],32)]),_:1})]),_:1}))}}),_r={class:"p-3 border rounded-lg"},hr={class:"flex items-center justify-between"},kr={class:"flex items-center gap-3"},wr={class:"font-semibold text-sm"},$r={class:"text-xs text-muted-foreground"},Pr={class:"text-xs text-muted-foreground"},Cr={class:"text-right"},Sr={key:0,class:"mt-3 pt-3 border-t"},Tr={class:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2"},jr={class:"flex gap-2"},Rr=Z({__name:"WalletTransactionCard",props:{transaction:{}},emits:["continue-payment","status-updated"],setup(l,{emit:i}){const d=l,m=i,{formatCurrency:y,formatDate:u,getTransactionTypeLabel:p,getTransactionStatusLabel:k}=Pe(),M=D(!1),v=D(d.transaction.status),$=async x=>{if(!M.value){M.value=!0;try{const c=await ne.post("/client/wallet/check-status",{transaction_ref:x});c.data.success?(v.value=c.data.status,m("status-updated",{transactionRef:x,status:c.data.status,newBalance:c.data.new_balance}),R.success(c.data.message),setTimeout(()=>{de.reload({only:["customer","transactions"]})},500)):R.error(c.data.message)}catch(c){console.error("Check status error:",c),R.error(c.response?.data?.message||"Gagal memeriksa status pembayaran")}finally{M.value=!1}}};return(x,c)=>(r(),f("div",_r,[t("div",hr,[t("div",kr,[t("div",{class:W(["p-2 rounded-full",{"bg-emerald-100 dark:bg-emerald-900/20":l.transaction.type==="topup"||l.transaction.type==="bonus","bg-red-100 dark:bg-red-900/20":l.transaction.type==="withdrawal"||l.transaction.type==="purchase","bg-blue-100 dark:bg-blue-900/20":l.transaction.type==="refund"}])},[l.transaction.type==="topup"||l.transaction.type==="bonus"||l.transaction.type==="refund"?(r(),T(e(Pt),{key:0,class:W(["w-4 h-4",{"text-emerald-600 dark:text-emerald-400":l.transaction.type==="topup"||l.transaction.type==="bonus","text-blue-600 dark:text-blue-400":l.transaction.type==="refund"}])},null,8,["class"])):(r(),T(e(Ct),{key:1,class:"w-4 h-4 text-red-600 dark:text-red-400"}))],2),t("div",null,[t("p",wr,n(e(p)(l.transaction.type)),1),t("p",$r,n(l.transaction.transaction_ref),1),t("p",Pr,n(e(u)(l.transaction.created_at)),1)])]),t("div",Cr,[t("p",{class:W(["font-bold",{"text-emerald-600 dark:text-emerald-400":l.transaction.type==="topup"||l.transaction.type==="bonus"||l.transaction.type==="refund","text-red-600 dark:text-red-400":l.transaction.type==="withdrawal"||l.transaction.type==="purchase"}])},n(l.transaction.type==="topup"||l.transaction.type==="bonus"||l.transaction.type==="refund"?"+":"-")+" "+n(e(y)(l.transaction.amount)),3),s(e(V),{variant:"secondary",class:W({"bg-yellow-100 text-yellow-700 dark:bg-yellow-900 dark:text-yellow-100":v.value==="pending","bg-emerald-100 text-emerald-700 dark:bg-emerald-900 dark:text-emerald-100":v.value==="completed","bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-100":v.value==="failed"||v.value==="cancelled"})},{default:a(()=>[o(n(e(k)(v.value)),1)]),_:1},8,["class"])])]),l.transaction.type==="topup"&&v.value==="pending"&&l.transaction.midtrans_transaction_id?(r(),f("div",Sr,[t("div",Tr,[c[4]||(c[4]=t("p",{class:"text-xs text-muted-foreground"}," Pembayaran menunggu konfirmasi ",-1)),t("div",jr,[s(e(I),{size:"sm",variant:"outline",disabled:M.value,onClick:c[0]||(c[0]=g=>$(l.transaction.transaction_ref)),class:"shrink-0"},{default:a(()=>[s(e($t),{class:W(["w-3 h-3 mr-1",{"animate-spin":M.value}])},null,8,["class"]),c[2]||(c[2]=o(" Cek Status ",-1))]),_:1},8,["disabled"]),s(e(I),{size:"sm",onClick:c[1]||(c[1]=g=>m("continue-payment",l.transaction.midtrans_transaction_id)),class:"shrink-0"},{default:a(()=>[s(e(ke),{class:"w-3 h-3 mr-1"}),c[3]||(c[3]=o(" Lanjutkan Pembayaran ",-1))]),_:1})])])])):w("",!0)]))}}),Mr={key:0,class:"space-y-3"},Dr={key:1,class:"py-12 text-center"},Ar=Z({__name:"WalletTransactionList",props:{transactions:{}},setup(l){const i=mt(),d=U(()=>i.props.customer),m=u=>{typeof window>"u"||(window.snap?window.snap.pay(u,{onSuccess:function(p){console.log("Payment success:",p),R.success("Pembayaran berhasil."),typeof window<"u"&&(window.location.href="/client/profile?tab=wallet")},onPending:function(p){console.log("Payment pending:",p),R.info("Pembayaran sedang diproses."),typeof window<"u"&&(window.location.href="/client/profile?tab=wallet")},onError:function(p){R.error("Pembayaran gagal."),console.error("Payment error:",p)},onClose:function(){R("Pembayaran ditutup sebelum selesai."),console.log("Payment modal closed")}}):alert("Midtrans Snap belum siap. Silakan refresh halaman."))},y=u=>{u.newBalance!==void 0&&d.value&&(d.value.ewallet_saldo=u.newBalance)};return(u,p)=>(r(),T(e(N),null,{default:a(()=>[s(e(H),null,{default:a(()=>[s(e(J),null,{default:a(()=>[...p[0]||(p[0]=[o("Riwayat Transaksi",-1)])]),_:1}),s(e(ce),null,{default:a(()=>[o(n(l.transactions.length)+" transaksi e-wallet terbaru ",1)]),_:1})]),_:1}),s(e(z),null,{default:a(()=>[l.transactions.length>0?(r(),f("div",Mr,[(r(!0),f(G,null,te(l.transactions,k=>(r(),T(Rr,{key:k.id,transaction:k,onContinuePayment:m,onStatusUpdated:y},null,8,["transaction"]))),128))])):(r(),f("div",Dr,[s(e(Ae),{class:"h-16 w-16 mx-auto mb-4 text-muted-foreground opacity-20"}),p[1]||(p[1]=t("p",{class:"text-muted-foreground"},"Belum ada transaksi",-1))]))]),_:1})]),_:1}))}}),Lr={class:"flex-1"},Vr={key:0,class:"text-xs mt-1 text-gray-700 dark:text-gray-300"},Br={class:"font-mono"},Ir={class:"uppercase"},Er=["disabled"],Ur={key:1,class:"border border-amber-200 dark:border-amber-900 bg-amber-50 dark:bg-amber-900/20 rounded-lg p-4 text-xs text-amber-800 dark:text-amber-200"},Fr=Z({__name:"WalletStatusBanner",props:{initialTransactions:{}},setup(l){const i=l,d=D(!1),m=D(null),y=D(null),u=U(()=>{const v=y.value?.status||"";return v==="completed"||v==="success"?{tone:"success",title:"Top up berhasil",bg:"bg-green-50 dark:bg-green-900/20",border:"border-green-200 dark:border-green-900",text:"text-green-800 dark:text-green-200"}:v==="pending"?{tone:"pending",title:"Menunggu pembayaran",bg:"bg-yellow-50 dark:bg-yellow-900/20",border:"border-yellow-200 dark:border-yellow-900",text:"text-yellow-800 dark:text-yellow-200"}:v==="cancelled"||v==="failed"||v==="expire"||v==="denied"||v==="deny"?{tone:"failed",title:"Pembayaran gagal / dibatalkan",bg:"bg-red-50 dark:bg-red-900/20",border:"border-red-200 dark:border-red-900",text:"text-red-800 dark:text-red-200"}:{tone:"info",title:"Status transaksi",bg:"bg-blue-50 dark:bg-blue-900/20",border:"border-blue-200 dark:border-blue-900",text:"text-blue-800 dark:text-blue-200"}});function p(v,$=2){const x=new Date(v).getTime();return(Date.now()-x)/36e5<=$}const k=U(()=>{if(!y.value)return!1;const v=y.value.status;return v==="pending"?!0:v==="completed"||v==="success"?p(y.value.created_at,2):p(y.value.created_at,6)});async function M(){try{d.value=!0,m.value=null;const{data:v}=await ne.get("/client/wallet/history",{params:{type:"topup"}}),$=Array.isArray(v?.data)?v.data:Array.isArray(v)?v:[];$.length>0&&(y.value=$[0])}catch(v){m.value=v?.response?.data?.message||v?.message||"Gagal memuat status transaksi."}finally{d.value=!1}}return Ge(()=>{i.initialTransactions&&i.initialTransactions.length>0&&(y.value=i.initialTransactions[0]),M()}),(v,$)=>k.value?(r(),f("div",{key:0,class:W(["border rounded-lg p-4 flex items-start gap-3",u.value.border,u.value.bg])},[t("div",Lr,[t("p",{class:W(["text-sm font-semibold",u.value.text])},n(u.value.title),3),y.value?(r(),f("p",Vr,[$[0]||($[0]=o(" Ref: ",-1)),t("span",Br,n(y.value.transaction_ref),1),o("  Jumlah: Rp "+n(new Intl.NumberFormat("id-ID").format(y.value.amount))+"  Status: ",1),t("span",Ir,n(y.value.status),1)])):w("",!0)]),t("button",{type:"button",class:"text-xs underline text-gray-700 dark:text-gray-300",onClick:M,disabled:d.value},n(d.value?"Menyegarkan...":"Segarkan"),9,Er)],2)):m.value?(r(),f("div",Ur,n(m.value),1)):w("",!0)}}),Kr={class:"space-y-6"},Nr=Z({__name:"WalletTab",props:{customer:{},transactions:{}},setup(l){const i=D("wallet");return(d,m)=>(r(),f("div",Kr,[s(Qn,{balance:Number(l.customer.ewallet_saldo)||0,onTopup:m[0]||(m[0]=y=>i.value="wallet-topup"),onWithdrawal:m[1]||(m[1]=y=>i.value="wallet-withdrawal")},null,8,["balance"]),i.value==="wallet"?(r(),T(Fr,{key:0,"initial-transactions":l.transactions},null,8,["initial-transactions"])):w("",!0),i.value==="wallet-topup"?(r(),T(rr,{key:1,onCancel:m[2]||(m[2]=y=>i.value="wallet")})):w("",!0),i.value==="wallet-withdrawal"?(r(),T(br,{key:2,"max-amount":Number(l.customer.ewallet_saldo)||0,onCancel:m[3]||(m[3]=y=>i.value="wallet")},null,8,["max-amount"])):w("",!0),i.value==="wallet"?(r(),T(Ar,{key:3,transactions:l.transactions},null,8,["transactions"])):w("",!0)]))}}),zr={class:"space-y-2"},Or={class:"relative"},qr={key:0,class:"text-sm text-red-500"},Gr={class:"space-y-2"},Qr={class:"relative"},Wr={key:0,class:"text-sm text-red-500"},Hr={class:"space-y-2"},Jr={class:"relative"},Zr={class:"flex items-center justify-end gap-3"},Xr=Z({__name:"SecurityTab",setup(l){const i=we({current_password:"",password:"",password_confirmation:""}),d=D(!1),m=D(!1),y=D(!1),u=()=>{i.patch("/client/profile/password",{preserveScroll:!0,onSuccess:()=>{i.reset(),d.value=!1,m.value=!1,y.value=!1,R.success("Password berhasil diubah")}})};return(p,k)=>(r(),T(e(N),null,{default:a(()=>[s(e(H),null,{default:a(()=>[s(e(J),null,{default:a(()=>[...k[7]||(k[7]=[o("Ubah Password",-1)])]),_:1}),s(e(ce),null,{default:a(()=>[...k[8]||(k[8]=[o(" Pastikan akun Anda menggunakan password yang kuat ",-1)])]),_:1})]),_:1}),s(e(z),null,{default:a(()=>[t("form",{onSubmit:qe(u,["prevent"]),class:"space-y-6"},[t("div",zr,[s(e(K),{for:"current_password"},{default:a(()=>[...k[9]||(k[9]=[o(" Password Saat Ini ",-1),t("span",{class:"text-red-500"},"*",-1)])]),_:1}),t("div",Or,[s(e(at),{class:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s(e(X),{id:"current_password",modelValue:e(i).current_password,"onUpdate:modelValue":k[0]||(k[0]=M=>e(i).current_password=M),type:d.value?"text":"password",placeholder:"Masukkan password saat ini",class:"pl-10 pr-10",required:""},null,8,["modelValue","type"]),t("button",{type:"button",onClick:k[1]||(k[1]=M=>d.value=!d.value),class:"absolute right-3 top-3 text-gray-400 hover:text-gray-600"},[d.value?(r(),T(e(He),{key:1,class:"h-4 w-4"})):(r(),T(e(We),{key:0,class:"h-4 w-4"}))])]),e(i).errors.current_password?(r(),f("p",qr,n(e(i).errors.current_password),1)):w("",!0)]),s(e(oe)),t("div",Gr,[s(e(K),{for:"password"},{default:a(()=>[...k[10]||(k[10]=[o(" Password Baru ",-1),t("span",{class:"text-red-500"},"*",-1)])]),_:1}),t("div",Qr,[s(e(vt),{class:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s(e(X),{id:"password",modelValue:e(i).password,"onUpdate:modelValue":k[2]||(k[2]=M=>e(i).password=M),type:m.value?"text":"password",placeholder:"Masukkan password baru",class:"pl-10 pr-10",required:""},null,8,["modelValue","type"]),t("button",{type:"button",onClick:k[3]||(k[3]=M=>m.value=!m.value),class:"absolute right-3 top-3 text-gray-400 hover:text-gray-600"},[m.value?(r(),T(e(He),{key:1,class:"h-4 w-4"})):(r(),T(e(We),{key:0,class:"h-4 w-4"}))])]),k[11]||(k[11]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"}," Minimal 8 karakter ",-1)),e(i).errors.password?(r(),f("p",Wr,n(e(i).errors.password),1)):w("",!0)]),t("div",Hr,[s(e(K),{for:"password_confirmation"},{default:a(()=>[...k[12]||(k[12]=[o(" Konfirmasi Password Baru ",-1),t("span",{class:"text-red-500"},"*",-1)])]),_:1}),t("div",Jr,[s(e(vt),{class:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s(e(X),{id:"password_confirmation",modelValue:e(i).password_confirmation,"onUpdate:modelValue":k[4]||(k[4]=M=>e(i).password_confirmation=M),type:y.value?"text":"password",placeholder:"Konfirmasi password baru",class:"pl-10 pr-10",required:""},null,8,["modelValue","type"]),t("button",{type:"button",onClick:k[5]||(k[5]=M=>y.value=!y.value),class:"absolute right-3 top-3 text-gray-400 hover:text-gray-600"},[y.value?(r(),T(e(He),{key:1,class:"h-4 w-4"})):(r(),T(e(We),{key:0,class:"h-4 w-4"}))])])]),t("div",Zr,[s(e(I),{type:"button",variant:"outline",onClick:k[6]||(k[6]=M=>e(i).reset()),disabled:e(i).processing},{default:a(()=>[...k[13]||(k[13]=[o(" Reset ",-1)])]),_:1},8,["disabled"]),s(e(I),{type:"submit",disabled:e(i).processing},{default:a(()=>[e(i).processing?w("",!0):(r(),T(e(at),{key:0,class:"w-4 h-4 mr-2"})),o(" "+n(e(i).processing?"Mengupdate...":"Update Password"),1)]),_:1},8,["disabled"])])],32)]),_:1})]),_:1}))}}),Yr={class:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-900 rounded-lg"},eo={class:"flex items-start gap-3"},to={class:"flex-1"},so=Z({__name:"DangerZoneTab",setup(l){const i=D(!1),d=we({}),m=()=>{d.delete("/client/profile",{onFinish:()=>{i.value=!1}})};return(y,u)=>(r(),f(G,null,[s(e(N),{class:"border-red-200 dark:border-red-900"},{default:a(()=>[s(e(H),null,{default:a(()=>[s(e(J),{class:"text-red-600 dark:text-red-400"},{default:a(()=>[...u[3]||(u[3]=[o("Zona Bahaya",-1)])]),_:1}),s(e(ce),null,{default:a(()=>[...u[4]||(u[4]=[o(" Tindakan di bawah ini bersifat permanen dan tidak dapat dibatalkan ",-1)])]),_:1})]),_:1}),s(e(z),{class:"space-y-6"},{default:a(()=>[t("div",Yr,[t("div",eo,[s(e($e),{class:"w-5 h-5 text-red-600 dark:text-red-400 mt-0.5"}),t("div",to,[u[6]||(u[6]=t("h3",{class:"font-semibold text-red-900 dark:text-red-100"}," Hapus Akun ",-1)),u[7]||(u[7]=t("p",{class:"text-sm text-red-700 dark:text-red-300 mt-1"}," Setelah akun Anda dihapus, semua data akan dihapus secara permanen. Tindakan ini tidak dapat dibatalkan. ",-1)),s(e(I),{type:"button",variant:"destructive",class:"mt-4",onClick:u[0]||(u[0]=p=>i.value=!0)},{default:a(()=>[s(e(tt),{class:"w-4 h-4 mr-2"}),u[5]||(u[5]=o(" Hapus Akun Saya ",-1))]),_:1})])])])]),_:1})]),_:1}),s(e(Ke),{open:i.value,"onUpdate:open":u[2]||(u[2]=p=>i.value=p)},{default:a(()=>[s(e(Ie),null,{default:a(()=>[s(e(Ee),null,{default:a(()=>[s(e(Ue),{class:"flex items-center gap-2 text-red-600"},{default:a(()=>[s(e($e),{class:"w-5 h-5"}),u[8]||(u[8]=o(" Konfirmasi Hapus Akun ",-1))]),_:1}),s(e(Fe),null,{default:a(()=>[...u[9]||(u[9]=[o(" Apakah Anda yakin ingin menghapus akun Anda? Tindakan ini tidak dapat dibatalkan dan semua data Anda akan dihapus secara permanen. ",-1)])]),_:1})]),_:1}),u[11]||(u[11]=t("div",{class:"py-4"},[t("div",{class:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-900 rounded-lg"},[t("p",{class:"text-sm text-red-700 dark:text-red-300"},[t("strong",null,"Data yang akan dihapus:")]),t("ul",{class:"mt-2 text-sm text-red-700 dark:text-red-300 list-disc list-inside space-y-1"},[t("li",null,"Informasi profil dan akun"),t("li",null,"Riwayat transaksi"),t("li",null,"E-wallet dan saldo"),t("li",null,"Jaringan dan bonus")])])],-1)),s(e(Ne),null,{default:a(()=>[s(e(I),{type:"button",variant:"outline",onClick:u[1]||(u[1]=p=>i.value=!1),disabled:e(d).processing},{default:a(()=>[...u[10]||(u[10]=[o(" Batal ",-1)])]),_:1},8,["disabled"]),s(e(I),{type:"button",variant:"destructive",onClick:m,disabled:e(d).processing},{default:a(()=>[s(e(tt),{class:"w-4 h-4 mr-2"}),o(" "+n(e(d).processing?"Menghapus...":"Ya, Hapus Akun"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])],64))}}),ao={key:0,class:"text-center py-12 text-muted-foreground"},lo={class:"flex items-start justify-between"},no={class:"flex-1"},ro={class:"flex items-center gap-2 mb-2"},oo={class:"font-semibold text-lg"},io={class:"space-y-1 text-sm text-muted-foreground"},uo={key:0},mo={key:1,class:"text-xs font-medium text-primary"},co={key:2,class:"text-xs"},po={class:"text-blue-600 dark:text-blue-400"},fo={class:"text-green-600 dark:text-green-400"},xo={class:"text-xs"},go={class:"text-xs font-medium text-green-600 dark:text-green-400"},vo={class:"flex flex-col items-end gap-2"},yo={key:0,class:"text-center py-12 text-muted-foreground"},bo={class:"flex items-start justify-between"},_o={class:"flex-1"},ho={class:"flex items-center gap-2 mb-2"},ko={class:"font-semibold text-lg"},wo={class:"space-y-1 text-sm text-muted-foreground"},$o={key:0},Po={key:1,class:"text-xs font-medium text-primary"},Co={key:2,class:"text-xs"},So={class:"text-blue-600 dark:text-blue-400"},To={class:"text-green-600 dark:text-green-400"},jo={class:"text-xs"},Ro={class:"text-xs font-medium text-orange-600 dark:text-orange-400"},Mo={class:"flex flex-col items-end gap-2"},Do={key:0,class:"text-center py-12 text-muted-foreground"},Ao={class:"flex items-start justify-between"},Lo={class:"flex-1"},Vo={class:"flex items-center gap-2 mb-2"},Bo={class:"font-semibold text-lg"},Io={class:"space-y-1 text-sm text-muted-foreground"},Eo={key:0},Uo={key:1,class:"text-xs font-medium text-primary"},Fo={key:2,class:"text-xs"},Ko={class:"text-blue-600 dark:text-blue-400"},No={class:"text-green-600 dark:text-green-400"},zo={class:"text-xs"},Oo={class:"text-xs font-medium text-gray-500 dark:text-gray-400"},qo={class:"flex flex-col items-end gap-2"},Go={class:"font-semibold"},Qo={class:"grid grid-cols-2 gap-4 py-4"},Wo=["disabled"],Ho={class:"text-xs text-muted-foreground mt-1"},Jo=["disabled"],Zo={class:"text-xs text-muted-foreground mt-1"},Xo=Z({__name:"NetworkMembersTab",props:{activeMembers:{},passiveMembers:{},prospectMembers:{},hasLeft:{type:Boolean},hasRight:{type:Boolean}},setup(l){const i=D(!1),d=D(null),m=D(null),y=we({member_id:0,position:""}),u=x=>{d.value=x,m.value=null,y.member_id=x.id,y.position="",i.value=!0},p=()=>{i.value=!1,d.value=null,m.value=null,y.reset()},k=()=>{if(!d.value||!m.value){R.error("Pilih posisi terlebih dahulu");return}y.position=m.value,y.post("/client/profile/place-member",{onSuccess:()=>{R.success(`${d.value?.name} berhasil ditempatkan di posisi ${m.value}`),p()},onError:x=>{const c=x.error||"Gagal menempatkan member ke binary tree";R.error(c)}})},M=x=>new Date(x).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"}),v=x=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(x),$=x=>x?{variant:x==="left"?"default":"secondary",text:x==="left"?"Kiri":"Kanan"}:{variant:"outline",text:"Belum Ditempatkan"};return(x,c)=>(r(),f(G,null,[s(e(N),null,{default:a(()=>[s(e(H),null,{default:a(()=>[s(e(J),null,{default:a(()=>[...c[2]||(c[2]=[o("Jaringan Member",-1)])]),_:1}),s(e(ce),null,{default:a(()=>[...c[3]||(c[3]=[o("Kelola dan lihat member dalam jaringan Anda",-1)])]),_:1})]),_:1}),s(e(z),null,{default:a(()=>[s(e(dt),{"default-value":"active",class:"w-full"},{default:a(()=>[s(e(ut),{class:"grid w-full grid-cols-3"},{default:a(()=>[s(e(Y),{value:"active"},{default:a(()=>[s(e(he),{class:"w-4 h-4 mr-2"}),o(" Aktif ("+n(l.activeMembers.length)+") ",1)]),_:1}),s(e(Y),{value:"passive"},{default:a(()=>[s(e(Je),{class:"w-4 h-4 mr-2"}),o(" Pasif ("+n(l.passiveMembers.length)+") ",1)]),_:1}),s(e(Y),{value:"prospect"},{default:a(()=>[s(e(ze),{class:"w-4 h-4 mr-2"}),o(" Prospek ("+n(l.prospectMembers.length)+") ",1)]),_:1})]),_:1}),s(e(ee),{value:"active",class:"space-y-4"},{default:a(()=>[l.activeMembers.length===0?(r(),f("div",ao,[s(e(he),{class:"w-12 h-12 mx-auto mb-4 opacity-20"}),c[4]||(c[4]=t("p",null,"Belum ada member aktif",-1)),c[5]||(c[5]=t("p",{class:"text-sm mt-2"},"Member aktif adalah member yang sudah ditempatkan di binary tree",-1))])):w("",!0),(r(!0),f(G,null,te(l.activeMembers,g=>(r(),T(e(N),{key:g.id,class:"hover:shadow-md transition-shadow"},{default:a(()=>[s(e(z),{class:"p-4"},{default:a(()=>[t("div",lo,[t("div",no,[t("div",ro,[t("h4",oo,n(g.name),1),s(e(V),{variant:$(g.position).variant},{default:a(()=>[o(n($(g.position).text),1)]),_:2},1032,["variant"]),g.level?(r(),T(e(V),{key:0,variant:"outline"},{default:a(()=>[o(" Level "+n(g.level),1)]),_:2},1024)):w("",!0)]),t("div",io,[t("p",null,n(g.email),1),g.phone?(r(),f("p",uo,n(g.phone),1)):w("",!0),g.package_name?(r(),f("p",mo," Paket: "+n(g.package_name),1)):w("",!0),(g.total_left??0)>0||(g.total_right??0)>0?(r(),f("p",co,[t("span",po,"Kiri: "+n(g.total_left??0),1),c[6]||(c[6]=t("span",{class:"mx-1"},"|",-1)),t("span",fo,"Kanan: "+n(g.total_right??0),1)])):w("",!0),t("p",xo,"Bergabung: "+n(M(g.joined_at)),1),t("p",go," Omzet: "+n(v(g.omzet)),1)])]),t("div",vo,[s(e(V),{variant:"default"},{default:a(()=>[s(e(he),{class:"w-3 h-3 mr-1"}),c[7]||(c[7]=o(" Aktif ",-1))]),_:1})])])]),_:2},1024)]),_:2},1024))),128))]),_:1}),s(e(ee),{value:"passive",class:"space-y-4"},{default:a(()=>[l.passiveMembers.length===0?(r(),f("div",yo,[s(e(Je),{class:"w-12 h-12 mx-auto mb-4 opacity-20"}),c[8]||(c[8]=t("p",null,"Belum ada member pasif",-1)),c[9]||(c[9]=t("p",{class:"text-sm mt-2"},"Member pasif adalah member yang belum ditempatkan di binary tree tapi sudah memiliki pembelian/order",-1))])):w("",!0),(r(!0),f(G,null,te(l.passiveMembers,g=>(r(),T(e(N),{key:g.id,class:"hover:shadow-md transition-shadow"},{default:a(()=>[s(e(z),{class:"p-4"},{default:a(()=>[t("div",bo,[t("div",_o,[t("div",ho,[t("h4",ko,n(g.name),1),s(e(V),{variant:"secondary"},{default:a(()=>[...c[10]||(c[10]=[o("Belum Ditempatkan",-1)])]),_:1})]),t("div",wo,[t("p",null,n(g.email),1),g.phone?(r(),f("p",$o,n(g.phone),1)):w("",!0),g.package_name?(r(),f("p",Po," Paket: "+n(g.package_name),1)):w("",!0),(g.total_left??0)>0||(g.total_right??0)>0?(r(),f("p",Co,[t("span",So,"Kiri: "+n(g.total_left??0),1),c[11]||(c[11]=t("span",{class:"mx-1"},"|",-1)),t("span",To,"Kanan: "+n(g.total_right??0),1)])):w("",!0),t("p",jo,"Bergabung: "+n(M(g.joined_at)),1),t("p",Ro," Omzet: "+n(v(g.omzet)),1)])]),t("div",Mo,[s(e(V),{variant:"outline"},{default:a(()=>[s(e(Je),{class:"w-3 h-3 mr-1"}),c[12]||(c[12]=o(" Pasif ",-1))]),_:1}),s(e(V),{variant:"default"},{default:a(()=>[...c[13]||(c[13]=[o(" Sudah Belanja ",-1)])]),_:1}),!l.hasLeft||!l.hasRight?(r(),T(e(I),{key:0,size:"sm",variant:"default",class:"mt-2",onClick:E=>u(g)},{default:a(()=>[s(e(Le),{class:"w-3 h-3 mr-1"}),c[14]||(c[14]=o(" Tempatkan ke Binary ",-1))]),_:1},8,["onClick"])):w("",!0)])])]),_:2},1024)]),_:2},1024))),128))]),_:1}),s(e(ee),{value:"prospect",class:"space-y-4"},{default:a(()=>[l.prospectMembers.length===0?(r(),f("div",Do,[s(e(ze),{class:"w-12 h-12 mx-auto mb-4 opacity-20"}),c[15]||(c[15]=t("p",null,"Belum ada member prospek",-1)),c[16]||(c[16]=t("p",{class:"text-sm mt-2"},"Member prospek adalah member yang baru mendaftar, belum ditempatkan di binary tree dan belum memiliki pembelian/order",-1))])):w("",!0),(r(!0),f(G,null,te(l.prospectMembers,g=>(r(),T(e(N),{key:g.id,class:"hover:shadow-md transition-shadow"},{default:a(()=>[s(e(z),{class:"p-4"},{default:a(()=>[t("div",Ao,[t("div",Lo,[t("div",Vo,[t("h4",Bo,n(g.name),1),s(e(V),{variant:"outline"},{default:a(()=>[...c[17]||(c[17]=[o("Baru Bergabung",-1)])]),_:1})]),t("div",Io,[t("p",null,n(g.email),1),g.phone?(r(),f("p",Eo,n(g.phone),1)):w("",!0),g.package_name?(r(),f("p",Uo," Paket: "+n(g.package_name),1)):w("",!0),(g.total_left??0)>0||(g.total_right??0)>0?(r(),f("p",Fo,[t("span",Ko,"Kiri: "+n(g.total_left??0),1),c[18]||(c[18]=t("span",{class:"mx-1"},"|",-1)),t("span",No,"Kanan: "+n(g.total_right??0),1)])):w("",!0),t("p",zo,"Bergabung: "+n(M(g.joined_at)),1),t("p",Oo," Omzet: "+n(v(g.omzet)),1)])]),t("div",qo,[s(e(V),{variant:"secondary"},{default:a(()=>[s(e(ze),{class:"w-3 h-3 mr-1"}),c[19]||(c[19]=o(" Prospek ",-1))]),_:1}),s(e(V),{variant:"secondary"},{default:a(()=>[...c[20]||(c[20]=[o(" Belum Belanja ",-1)])]),_:1})])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1}),s(e(Ke),{open:i.value,"onUpdate:open":p},{default:a(()=>[s(e(Ie),{class:"sm:max-w-md"},{default:a(()=>[s(e(Ee),null,{default:a(()=>[s(e(Ue),null,{default:a(()=>[...c[21]||(c[21]=[o("Tempatkan Member ke Binary Tree",-1)])]),_:1}),s(e(Fe),null,{default:a(()=>[c[22]||(c[22]=o(" Pilih posisi untuk menempatkan ",-1)),t("span",Go,n(d.value?.name),1),c[23]||(c[23]=o(" di jaringan binary tree Anda. ",-1))]),_:1})]),_:1}),t("div",Qo,[t("button",{type:"button",disabled:l.hasLeft,class:W(["flex flex-col items-center justify-center p-6 rounded-lg border-2 transition-all",l.hasLeft?"border-gray-200 bg-gray-100 opacity-50 cursor-not-allowed":m.value==="left"?"border-primary bg-primary/10":"border-gray-200 hover:border-gray-300"]),onClick:c[0]||(c[0]=g=>!l.hasLeft&&(m.value="left"))},[s(e(Le),{class:"w-8 h-8 mb-2 rotate-90"}),c[24]||(c[24]=t("span",{class:"font-semibold"},"Posisi Kiri",-1)),t("span",Ho,n(l.hasLeft?"Sudah Terisi":"Left Position"),1)],10,Wo),t("button",{type:"button",disabled:l.hasRight,class:W(["flex flex-col items-center justify-center p-6 rounded-lg border-2 transition-all",l.hasRight?"border-gray-200 bg-gray-100 opacity-50 cursor-not-allowed":m.value==="right"?"border-primary bg-primary/10":"border-gray-200 hover:border-gray-300"]),onClick:c[1]||(c[1]=g=>!l.hasRight&&(m.value="right"))},[s(e(Le),{class:"w-8 h-8 mb-2 -rotate-90"}),c[25]||(c[25]=t("span",{class:"font-semibold"},"Posisi Kanan",-1)),t("span",Zo,n(l.hasRight?"Sudah Terisi":"Right Position"),1)],10,Jo)]),s(e(Ne),null,{default:a(()=>[s(e(I),{variant:"outline",onClick:p,disabled:e(y).processing},{default:a(()=>[...c[26]||(c[26]=[o(" Batal ",-1)])]),_:1},8,["disabled"]),s(e(I),{onClick:k,disabled:!m.value||e(y).processing},{default:a(()=>[o(n(e(y).processing?"Memproses...":"Tempatkan"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])],64))}}),Yo=Z({__name:"GoJSBinaryTree",props:{binaryTree:{},isDialog:{type:Boolean,default:!1}},setup(l,{expose:i}){const d=l,m=D(null);let y=null;const u=(x,c=null)=>{if(!x)return{nodes:[],links:[]};const g=[],E=[],F=(j,Q,se)=>{const q=j.level<5,B={key:j.id,name:j.name,email:j.email,package:j.package_name||"Tidak ada paket",totalLeft:j.total_left||0,totalRight:j.total_right||0,position:se,isActive:j.status,hasLeft:!!j.left,hasRight:!!j.right,level:j.level,order:se==="left"?0:se==="right"?1:0};if(g.push(B),Q!==null&&E.push({from:Q,to:j.id,order:se==="left"?0:1}),!j.left&&j.status&&q){const O=-j.id*2;g.push({key:O,name:"+ Kiri",email:"",package:"",isPlaceholder:!0,parentId:j.id,placeholderPosition:"left",order:0}),E.push({from:j.id,to:O,order:0})}if(!j.right&&j.status&&q){const O=-j.id*2-1;g.push({key:O,name:"+ Kanan",email:"",package:"",isPlaceholder:!0,parentId:j.id,placeholderPosition:"right",order:1}),E.push({from:j.id,to:O,order:1})}j.left&&F(j.left,j.id,"left"),j.right&&F(j.right,j.id,"right")};return F(x,c,null),{nodes:g,links:E}},p=()=>{if(!m.value)return;const x=ss.make;y=x(as,m.value,{"undoManager.isEnabled":!1,"animationManager.isEnabled":!0,initialAutoScale:ls.Uniform,contentAlignment:Ce.Top,layout:x(ns,{angle:90,layerSpacing:50,nodeSpacing:20,arrangement:os.Horizontal,sorting:rs.Ascending,comparer:(c,g)=>{const E=c.node?.data?.order??0,F=g.node?.data?.order??0;return E-F}}),maxSelectionCount:1}),y.addDiagramListener("ObjectSingleClicked",c=>{const g=c.subject.part;if(g instanceof yt){const E=g.data;E?.isPlaceholder&&E?.parentId&&E?.placeholderPosition?window.dispatchEvent(new CustomEvent("gojs-open-placement",{detail:{uplineId:E.parentId,position:E.placeholderPosition}})):!E?.isPlaceholder&&E?.key&&window.dispatchEvent(new CustomEvent("gojs-member-click",{detail:{memberId:E.key}}))}}),y.nodeTemplate=x(yt,"Auto",{cursor:"pointer",selectionAdorned:!1},x(Re,"RoundedRectangle",{fill:"white",stroke:"#e2e8f0",strokeWidth:2,parameter1:8},new le("fill","",c=>c.isPlaceholder?"#f8fafc":c.isActive?"#ffffff":"#fef3c7"),new le("stroke","",c=>c.isPlaceholder?"#cbd5e1":c.position==="left"?"#3b82f6":c.position==="right"?"#22c55e":"#6366f1"),new le("strokeWidth","",c=>c.isPlaceholder?1:2),new le("strokeDashArray","isPlaceholder",c=>c?[4,4]:null)),x(Me,"Vertical",{margin:8,defaultAlignment:Ce.Left},x(Se,{font:"bold 13px Inter, sans-serif",stroke:"#1e293b",maxSize:new _t(140,NaN),wrap:bt.Fit,textAlign:"center",alignment:Ce.Center},new le("text","name"),new le("stroke","isPlaceholder",c=>c?"#64748b":"#1e293b"),new le("font","isPlaceholder",c=>c?"12px Inter, sans-serif":"bold 13px Inter, sans-serif")),x(Se,{font:"11px Inter, sans-serif",stroke:"#64748b",maxSize:new _t(140,NaN),wrap:bt.Fit,margin:new Te(2,0,0,0),alignment:Ce.Center},new le("text","email"),new le("visible","isPlaceholder",c=>!c)),x(Me,"Auto",{margin:new Te(4,0,0,0),alignment:Ce.Center},new le("visible","isPlaceholder",c=>!c),x(Re,"RoundedRectangle",{fill:"#eff6ff",stroke:"#bfdbfe",strokeWidth:1,parameter1:4}),x(Se,{font:"10px Inter, sans-serif",stroke:"#1d4ed8",margin:new Te(2,6,2,6)},new le("text","package"))),x(Me,"Horizontal",{margin:new Te(6,0,0,0),alignment:Ce.Center},new le("visible","isPlaceholder",c=>!c),x(Me,"Horizontal",x(Re,"Circle",{width:8,height:8,fill:"#3b82f6",stroke:null,margin:new Te(0,4,0,0)}),x(Se,{font:"10px Inter, sans-serif",stroke:"#64748b"},new le("text","totalLeft",c=>`L: ${c}`))),x(Se," | ",{font:"10px Inter, sans-serif",stroke:"#cbd5e1"}),x(Me,"Horizontal",x(Re,"Circle",{width:8,height:8,fill:"#22c55e",stroke:null,margin:new Te(0,4,0,0)}),x(Se,{font:"10px Inter, sans-serif",stroke:"#64748b"},new le("text","totalRight",c=>`R: ${c}`)))))),y.linkTemplate=x(is,{routing:ds.Orthogonal,corner:10,selectable:!1},x(Re,{strokeWidth:2,stroke:"#cbd5e1"})),k()},k=()=>{if(!y||!d.binaryTree)return;const{nodes:x,links:c}=u(d.binaryTree);y.startTransaction("update"),y.model=new us(x,c),y.commitTransaction("update"),requestAnimationFrame(()=>{y&&y.zoomToFit()})},M=()=>{y&&y.commandHandler.increaseZoom()},v=()=>{y&&y.commandHandler.decreaseZoom()},$=()=>{y&&y.zoomToFit()};return Ge(()=>{setTimeout(()=>{p()},0)}),ct(()=>{y&&(y.removeDiagramListener("ObjectSingleClicked",()=>{}),y.clear(),y.div=null,y=null)}),i({zoomIn:M,zoomOut:v,resetZoom:$}),(x,c)=>(r(),f("div",{ref_key:"diagramDiv",ref:m,class:W(["w-full border rounded-lg bg-slate-50",l.isDialog?"h-[350px] sm:h-[400px]":"h-[500px] sm:h-[600px]"])},null,2))}}),ie=l=>({url:ie.url(l),method:"get"});ie.definition={methods:["get","head"],url:"/client/profile"};ie.url=l=>ie.definition.url+pe(l);ie.get=l=>({url:ie.url(l),method:"get"});ie.head=l=>({url:ie.url(l),method:"head"});const ft=l=>({action:ie.url(l),method:"get"});ft.get=l=>({action:ie.url(l),method:"get"});ft.head=l=>({action:ie.url({[l?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...l?.query??l?.mergeQuery??{}}}),method:"get"});ie.form=ft;const fe=l=>({url:fe.url(l),method:"patch"});fe.definition={methods:["patch"],url:"/client/profile"};fe.url=l=>fe.definition.url+pe(l);fe.patch=l=>({url:fe.url(l),method:"patch"});const jt=l=>({action:fe.url({[l?.mergeQuery?"mergeQuery":"query"]:{_method:"PATCH",...l?.query??l?.mergeQuery??{}}}),method:"post"});jt.patch=l=>({action:fe.url({[l?.mergeQuery?"mergeQuery":"query"]:{_method:"PATCH",...l?.query??l?.mergeQuery??{}}}),method:"post"});fe.form=jt;const xe=l=>({url:xe.url(l),method:"patch"});xe.definition={methods:["patch"],url:"/client/profile/password"};xe.url=l=>xe.definition.url+pe(l);xe.patch=l=>({url:xe.url(l),method:"patch"});const Rt=l=>({action:xe.url({[l?.mergeQuery?"mergeQuery":"query"]:{_method:"PATCH",...l?.query??l?.mergeQuery??{}}}),method:"post"});Rt.patch=l=>({action:xe.url({[l?.mergeQuery?"mergeQuery":"query"]:{_method:"PATCH",...l?.query??l?.mergeQuery??{}}}),method:"post"});xe.form=Rt;const ge=l=>({url:ge.url(l),method:"delete"});ge.definition={methods:["delete"],url:"/client/profile"};ge.url=l=>ge.definition.url+pe(l);ge.delete=l=>({url:ge.url(l),method:"delete"});const Mt=l=>({action:ge.url({[l?.mergeQuery?"mergeQuery":"query"]:{_method:"DELETE",...l?.query??l?.mergeQuery??{}}}),method:"post"});Mt.delete=l=>({action:ge.url({[l?.mergeQuery?"mergeQuery":"query"]:{_method:"DELETE",...l?.query??l?.mergeQuery??{}}}),method:"post"});ge.form=Mt;const me=l=>({url:me.url(l),method:"post"});me.definition={methods:["post"],url:"/client/profile/place-member"};me.url=l=>me.definition.url+pe(l);me.post=l=>({url:me.url(l),method:"post"});const Dt=l=>({action:me.url(l),method:"post"});Dt.post=l=>({action:me.url(l),method:"post"});me.form=Dt;const re=(l,i)=>({url:re.url(l,i),method:"get"});re.definition={methods:["get","head"],url:"/client/profile/member-tree/{memberId}"};re.url=(l,i)=>{(typeof l=="string"||typeof l=="number")&&(l={memberId:l}),Array.isArray(l)&&(l={memberId:l[0]}),l=Qe(l);const d={memberId:l.memberId};return re.definition.url.replace("{memberId}",d.memberId.toString()).replace(/\/+$/,"")+pe(i)};re.get=(l,i)=>({url:re.url(l,i),method:"get"});re.head=(l,i)=>({url:re.url(l,i),method:"head"});const xt=(l,i)=>({action:re.url(l,i),method:"get"});xt.get=(l,i)=>({action:re.url(l,i),method:"get"});xt.head=(l,i)=>({action:re.url(l,{[i?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...i?.query??i?.mergeQuery??{}}}),method:"get"});re.form=xt;const ve=l=>({url:ve.url(l),method:"post"});ve.definition={methods:["post"],url:"/client/profile/addresses"};ve.url=l=>ve.definition.url+pe(l);ve.post=l=>({url:ve.url(l),method:"post"});const At=l=>({action:ve.url(l),method:"post"});At.post=l=>({action:ve.url(l),method:"post"});ve.form=At;const ye=(l,i)=>({url:ye.url(l,i),method:"put"});ye.definition={methods:["put"],url:"/client/profile/addresses/{address}"};ye.url=(l,i)=>{(typeof l=="string"||typeof l=="number")&&(l={address:l}),Array.isArray(l)&&(l={address:l[0]}),l=Qe(l);const d={address:l.address};return ye.definition.url.replace("{address}",d.address.toString()).replace(/\/+$/,"")+pe(i)};ye.put=(l,i)=>({url:ye.url(l,i),method:"put"});const Lt=(l,i)=>({action:ye.url(l,{[i?.mergeQuery?"mergeQuery":"query"]:{_method:"PUT",...i?.query??i?.mergeQuery??{}}}),method:"post"});Lt.put=(l,i)=>({action:ye.url(l,{[i?.mergeQuery?"mergeQuery":"query"]:{_method:"PUT",...i?.query??i?.mergeQuery??{}}}),method:"post"});ye.form=Lt;const be=(l,i)=>({url:be.url(l,i),method:"delete"});be.definition={methods:["delete"],url:"/client/profile/addresses/{address}"};be.url=(l,i)=>{(typeof l=="string"||typeof l=="number")&&(l={address:l}),Array.isArray(l)&&(l={address:l[0]}),l=Qe(l);const d={address:l.address};return be.definition.url.replace("{address}",d.address.toString()).replace(/\/+$/,"")+pe(i)};be.delete=(l,i)=>({url:be.url(l,i),method:"delete"});const Vt=(l,i)=>({action:be.url(l,{[i?.mergeQuery?"mergeQuery":"query"]:{_method:"DELETE",...i?.query??i?.mergeQuery??{}}}),method:"post"});Vt.delete=(l,i)=>({action:be.url(l,{[i?.mergeQuery?"mergeQuery":"query"]:{_method:"DELETE",...i?.query??i?.mergeQuery??{}}}),method:"post"});be.form=Vt;const _e=(l,i)=>({url:_e.url(l,i),method:"post"});_e.definition={methods:["post"],url:"/client/profile/addresses/{address}/set-default"};_e.url=(l,i)=>{(typeof l=="string"||typeof l=="number")&&(l={address:l}),Array.isArray(l)&&(l={address:l[0]}),l=Qe(l);const d={address:l.address};return _e.definition.url.replace("{address}",d.address.toString()).replace(/\/+$/,"")+pe(i)};_e.post=(l,i)=>({url:_e.url(l,i),method:"post"});const Bt=(l,i)=>({action:_e.url(l,i),method:"post"});Bt.post=(l,i)=>({action:_e.url(l,i),method:"post"});_e.form=Bt;const ei={class:"space-y-4 sm:space-y-6"},ti={class:"grid grid-cols-3 gap-2 sm:gap-4"},si={class:"text-lg sm:text-2xl font-bold"},ai={class:"text-lg sm:text-2xl font-bold text-blue-600"},li={class:"text-lg sm:text-2xl font-bold text-green-600"},ni={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2"},ri={class:"flex items-center gap-2"},oi={class:"flex items-center gap-1 sm:gap-2"},ii={class:"relative"},di={key:0,class:"absolute inset-0 z-10 flex items-center justify-center bg-background/80 backdrop-blur-sm rounded-lg"},ui={class:"text-center"},mi={key:2,class:"h-[400px] flex items-center justify-center text-muted-foreground"},ci={class:"text-center"},pi={class:"font-semibold"},fi={class:"flex-1 overflow-y-auto py-2 sm:py-4"},xi={key:0,class:"text-center py-8 sm:py-12 text-muted-foreground"},gi={key:1,class:"space-y-2"},vi=["onClick"],yi={class:"flex items-start justify-between gap-2"},bi={class:"flex-1 min-w-0"},_i={class:"flex flex-wrap items-center gap-1 sm:gap-2 mb-1"},hi={class:"font-semibold text-sm sm:text-base truncate"},ki={class:"space-y-0.5 text-xs sm:text-sm text-muted-foreground"},wi={class:"truncate"},$i={key:0,class:"truncate"},Pi={class:"text-[10px] sm:text-xs"},Ci={key:0,class:"flex-shrink-0"},Si=Z({__name:"BinaryTreeTab",props:{binaryTree:{},totalDownlines:{},totalLeft:{},totalRight:{},passiveMembers:{}},setup(l){const i=l,d=D(null),m=D(!1),y=D(null),u=D(null),p=D(null),k=D(!1),M=D(!1),v=D(null),$=D(null),x=D({totalDownlines:0,totalLeft:0,totalRight:0}),c=U(()=>k.value?$.value:i.binaryTree),g=U(()=>k.value?x.value:{totalDownlines:i.totalDownlines,totalLeft:i.totalLeft,totalRight:i.totalRight}),E=D(0),F=U(()=>`tree-${E.value}`),j=we({member_id:0,upline_id:null,position:""}),Q=(ae,L)=>{y.value=ae,u.value=L,p.value=null,m.value=!0},se=()=>{m.value=!1,y.value=null,u.value=null,p.value=null},q=ae=>{p.value=ae},B=()=>{if(!p.value||!u.value){R.error("Pilih member terlebih dahulu");return}j.member_id=p.value.id,j.upline_id=y.value,j.position=u.value,de.post(me().url,{member_id:j.member_id,upline_id:j.upline_id,position:j.position},{preserveScroll:!0,onStart:()=>{j.processing=!0},onFinish:()=>{j.processing=!1},onSuccess:()=>{R.success(`${p.value?.name} berhasil ditempatkan di posisi ${u.value}`),se()},onError:ae=>{const L=ae.error||"Gagal menempatkan member ke binary tree";R.error(L)}})},O=ae=>new Date(ae).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"}),A=async ae=>{M.value=!0,k.value=!0;try{const L=await ne.get(re(ae).url);L.data.success?(v.value=L.data.data.member,$.value=L.data.data.tree,x.value={totalDownlines:L.data.data.totalDownlines,totalLeft:L.data.data.totalLeft,totalRight:L.data.data.totalRight},E.value++):(R.error("Gagal memuat data jaringan member"),h())}catch(L){R.error(L.response?.data?.message||"Gagal memuat data jaringan member"),h()}finally{M.value=!1}},h=()=>{k.value=!1,v.value=null,$.value=null,x.value={totalDownlines:0,totalLeft:0,totalRight:0}},_=()=>{d.value?.zoomIn()},P=()=>{d.value?.zoomOut()},b=()=>{d.value?.resetZoom()},C=ae=>{A(ae.detail.memberId)},S=ae=>{Q(ae.detail.uplineId,ae.detail.position)};return Ge(()=>{window.addEventListener("gojs-member-click",C),window.addEventListener("gojs-open-placement",S)}),ct(()=>{window.removeEventListener("gojs-member-click",C),window.removeEventListener("gojs-open-placement",S)}),(ae,L)=>(r(),f(G,null,[t("div",ei,[t("div",ti,[s(e(N),{class:"p-0"},{default:a(()=>[s(e(H),{class:"flex flex-row items-center justify-between space-y-0 p-2 sm:p-4 pb-1 sm:pb-2"},{default:a(()=>[s(e(J),{class:"text-[10px] sm:text-sm font-medium truncate"},{default:a(()=>[...L[0]||(L[0]=[o("Total Jaringan",-1)])]),_:1}),s(e(lt),{class:"h-3 w-3 sm:h-4 sm:w-4 text-muted-foreground flex-shrink-0"})]),_:1}),s(e(z),{class:"p-2 sm:p-4 pt-0 sm:pt-0"},{default:a(()=>[t("div",si,n(g.value.totalDownlines),1),L[1]||(L[1]=t("p",{class:"text-[8px] sm:text-xs text-muted-foreground hidden sm:block"},"Member aktif di jaringan Anda",-1))]),_:1})]),_:1}),s(e(N),{class:"p-0"},{default:a(()=>[s(e(H),{class:"flex flex-row items-center justify-between space-y-0 p-2 sm:p-4 pb-1 sm:pb-2"},{default:a(()=>[s(e(J),{class:"text-[10px] sm:text-sm font-medium truncate"},{default:a(()=>[...L[2]||(L[2]=[o("Kaki Kiri",-1)])]),_:1}),s(e(ht),{class:"h-3 w-3 sm:h-4 sm:w-4 text-blue-600 flex-shrink-0"})]),_:1}),s(e(z),{class:"p-2 sm:p-4 pt-0 sm:pt-0"},{default:a(()=>[t("div",ai,n(g.value.totalLeft),1),L[3]||(L[3]=t("p",{class:"text-[8px] sm:text-xs text-muted-foreground hidden sm:block"},"Member di posisi kiri",-1))]),_:1})]),_:1}),s(e(N),{class:"p-0"},{default:a(()=>[s(e(H),{class:"flex flex-row items-center justify-between space-y-0 p-2 sm:p-4 pb-1 sm:pb-2"},{default:a(()=>[s(e(J),{class:"text-[10px] sm:text-sm font-medium truncate"},{default:a(()=>[...L[4]||(L[4]=[o("Kaki Kanan",-1)])]),_:1}),s(e(ht),{class:"h-3 w-3 sm:h-4 sm:w-4 text-green-600 flex-shrink-0"})]),_:1}),s(e(z),{class:"p-2 sm:p-4 pt-0 sm:pt-0"},{default:a(()=>[t("div",li,n(g.value.totalRight),1),L[5]||(L[5]=t("p",{class:"text-[8px] sm:text-xs text-muted-foreground hidden sm:block"},"Member di posisi kanan",-1))]),_:1})]),_:1})]),s(e(N),null,{default:a(()=>[s(e(H),{class:"p-3 sm:p-6"},{default:a(()=>[t("div",ni,[t("div",ri,[k.value?(r(),T(e(I),{key:0,variant:"ghost",size:"icon",class:"h-7 w-7 sm:h-8 sm:w-8",onClick:h},{default:a(()=>[s(e(kt),{class:"h-4 w-4"})]),_:1})):w("",!0),t("div",null,[s(e(J),{class:"text-sm sm:text-base flex items-center gap-2"},{default:a(()=>[k.value&&v.value?(r(),f(G,{key:0},[o(" Jaringan "+n(v.value.name),1)],64)):(r(),f(G,{key:1},[o(" Struktur Binary Tree ")],64))]),_:1}),s(e(ce),{class:"text-xs sm:text-sm"},{default:a(()=>[k.value&&v.value?(r(),f(G,{key:0},[o(n(v.value.email),1)],64)):(r(),f(G,{key:1},[o(" Visualisasi jaringan MLM binary tree Anda ")],64))]),_:1})])]),t("div",oi,[k.value?(r(),T(e(I),{key:0,variant:"outline",size:"sm",class:"h-7 sm:h-8 text-xs",onClick:h},{default:a(()=>[s(e(kt),{class:"h-3.5 w-3.5 mr-1"}),L[6]||(L[6]=t("span",{class:"hidden sm:inline"},"Kembali",-1))]),_:1})):w("",!0),s(e(I),{variant:"outline",size:"icon",class:"h-7 w-7 sm:h-8 sm:w-8",onClick:P},{default:a(()=>[s(e(ms),{class:"h-3.5 w-3.5 sm:h-4 sm:w-4"})]),_:1}),s(e(I),{variant:"outline",size:"icon",class:"h-7 w-7 sm:h-8 sm:w-8",onClick:_},{default:a(()=>[s(e(cs),{class:"h-3.5 w-3.5 sm:h-4 sm:w-4"})]),_:1}),s(e(I),{variant:"ghost",size:"icon",class:"h-7 w-7 sm:h-8 sm:w-8",onClick:b,title:"Fit to Screen"},{default:a(()=>[s(e(ps),{class:"h-3.5 w-3.5 sm:h-4 sm:w-4"})]),_:1})])])]),_:1}),s(e(z),{class:"p-2 sm:p-6 pt-0"},{default:a(()=>[t("div",ii,[M.value?(r(),f("div",di,[t("div",ui,[s(e(De),{class:"w-8 h-8 mx-auto mb-4 animate-spin text-primary"}),L[7]||(L[7]=t("p",{class:"text-sm text-muted-foreground"},"Memuat data jaringan...",-1))])])):w("",!0),c.value?(r(),T(Yo,{key:F.value,ref_key:"goJSTreeRef",ref:d,"binary-tree":c.value,"is-dialog":k.value},null,8,["binary-tree","is-dialog"])):(r(),f("div",mi,[t("div",ci,[s(e(lt),{class:"w-12 h-12 mx-auto mb-4 opacity-20"}),L[8]||(L[8]=t("p",null,"Belum ada jaringan binary tree",-1))])]))]),L[9]||(L[9]=t("div",{class:"mt-4 sm:mt-6 p-2 sm:p-4 rounded-lg bg-muted/50"},[t("div",{class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 text-center sm:text-left"},[t("p",{class:"text-[10px] sm:text-sm text-muted-foreground"},[o("  "),t("span",{class:"hidden sm:inline"},'Klik member untuk melihat jaringannya  Klik "+" untuk menambah member'),t("span",{class:"sm:hidden"},"Klik member untuk lihat jaringan")]),t("p",{class:"text-[10px] sm:text-sm text-muted-foreground"},[t("span",{class:"hidden sm:inline"},"Scroll/drag untuk navigasi  Mouse wheel untuk zoom"),t("span",{class:"sm:hidden"},"Drag & Pinch untuk navigasi")])])],-1))]),_:1})]),_:1})]),s(e(Ke),{open:m.value,"onUpdate:open":se},{default:a(()=>[s(e(Ie),{class:"w-[95vw] max-w-2xl max-h-[85vh] overflow-hidden flex flex-col p-4 sm:p-6"},{default:a(()=>[s(e(Ee),{class:"space-y-1 sm:space-y-2"},{default:a(()=>[s(e(Ue),{class:"text-base sm:text-lg"},{default:a(()=>[...L[10]||(L[10]=[o("Pilih Member untuk Ditempatkan",-1)])]),_:1}),s(e(Fe),{class:"text-xs sm:text-sm"},{default:a(()=>[L[11]||(L[11]=o(" Pilih member pasif untuk ditempatkan di posisi ",-1)),t("span",pi,n(u.value==="left"?"Kiri":"Kanan"),1)]),_:1})]),_:1}),t("div",fi,[l.passiveMembers.length===0?(r(),f("div",xi,[s(e(ze),{class:"w-8 h-8 sm:w-12 sm:h-12 mx-auto mb-3 sm:mb-4 opacity-20"}),L[12]||(L[12]=t("p",{class:"text-sm sm:text-base"},"Tidak ada member pasif",-1)),L[13]||(L[13]=t("p",{class:"text-xs sm:text-sm mt-1 sm:mt-2"},"Semua member sudah ditempatkan",-1))])):(r(),f("div",gi,[(r(!0),f(G,null,te(l.passiveMembers,ue=>(r(),f("button",{key:ue.id,type:"button",class:W(["w-full p-3 sm:p-4 rounded-lg border-2 text-left transition-all",p.value?.id===ue.id?"border-primary bg-primary/10":"border-gray-200 hover:border-gray-300 dark:border-gray-700 dark:hover:border-gray-600"]),onClick:Du=>q(ue)},[t("div",yi,[t("div",bi,[t("div",_i,[t("h4",hi,n(ue.name),1),ue.has_purchase?(r(),T(e(V),{key:0,variant:"default",class:"text-[10px] sm:text-xs"},{default:a(()=>[...L[14]||(L[14]=[t("span",{class:"hidden sm:inline"},"Ada Pembelian",-1),t("span",{class:"sm:hidden"},"Beli",-1)])]),_:1})):(r(),T(e(V),{key:1,variant:"secondary",class:"text-[10px] sm:text-xs"},{default:a(()=>[...L[15]||(L[15]=[t("span",{class:"hidden sm:inline"},"Belum Belanja",-1),t("span",{class:"sm:hidden"},"Belum",-1)])]),_:1}))]),t("div",ki,[t("p",wi,n(ue.email),1),ue.phone?(r(),f("p",$i,n(ue.phone),1)):w("",!0),t("p",Pi,"Bergabung: "+n(O(ue.joined_at)),1)])]),p.value?.id===ue.id?(r(),f("div",Ci,[...L[16]||(L[16]=[t("div",{class:"flex h-5 w-5 sm:h-6 sm:w-6 items-center justify-center rounded-full bg-primary text-primary-foreground"},[t("svg",{class:"w-3 h-3 sm:w-4 sm:h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1)])])):w("",!0)])],10,vi))),128))]))]),s(e(Ne),{class:"flex-col-reverse sm:flex-row gap-2 sm:gap-0"},{default:a(()=>[s(e(I),{variant:"outline",onClick:se,disabled:e(j).processing,class:"w-full sm:w-auto"},{default:a(()=>[...L[17]||(L[17]=[o(" Batal ",-1)])]),_:1},8,["disabled"]),s(e(I),{onClick:B,disabled:!p.value||e(j).processing,class:"w-full sm:w-auto"},{default:a(()=>[o(n(e(j).processing?"Memproses...":"Tempatkan"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])],64))}}),Ti={class:"space-y-4 sm:space-y-6"},ji={class:"grid gap-3 sm:gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3"},Ri={class:"text-xl sm:text-2xl font-bold truncate"},Mi={class:"text-[10px] sm:text-xs text-muted-foreground mt-1"},Di={class:"flex flex-col sm:flex-row gap-1 sm:gap-2 mt-2"},Ai={class:"text-xl sm:text-2xl font-bold truncate"},Li={class:"text-[10px] sm:text-xs text-muted-foreground mt-1"},Vi={class:"flex flex-col sm:flex-row gap-1 sm:gap-2 mt-2"},Bi={class:"text-xl sm:text-2xl font-bold truncate"},Ii={class:"text-[10px] sm:text-xs text-muted-foreground mt-1"},Ei={class:"flex flex-col sm:flex-row gap-1 sm:gap-2 mt-2"},Ui={class:"text-xl sm:text-2xl font-bold truncate"},Fi={class:"text-[10px] sm:text-xs text-muted-foreground mt-1"},Ki={class:"flex flex-col sm:flex-row gap-1 sm:gap-2 mt-2"},Ni={class:"text-xl sm:text-2xl font-bold truncate"},zi={class:"text-[10px] sm:text-xs text-muted-foreground mt-1"},Oi={class:"flex flex-col sm:flex-row gap-1 sm:gap-2 mt-2"},qi={class:"text-xl sm:text-2xl font-bold truncate"},Gi={class:"text-[10px] sm:text-xs text-muted-foreground mt-1"},Qi={class:"flex flex-col sm:flex-row gap-1 sm:gap-2 mt-2"},Wi={class:"text-xl sm:text-2xl font-bold truncate"},Hi={class:"text-[10px] sm:text-xs text-muted-foreground mt-1"},Ji={class:"flex flex-col sm:flex-row gap-1 sm:gap-2 mt-2"},Zi={class:"text-xl sm:text-2xl font-bold text-primary truncate"},Xi={class:"w-full text-center overflow-x-auto [&::-webkit-scrollbar]:hidden [-ms-overflow-style:none] [scrollbar-width:none] -mx-2 px-2 sm:mx-0 sm:px-0",style:{"-webkit-overflow-scrolling":"touch"}},Yi={key:0,class:"text-center py-4 sm:py-8 text-muted-foreground text-[10px] sm:text-sm"},ed={key:1,class:"space-y-1.5 sm:space-y-3"},td={class:"flex-1 min-w-0"},sd={class:"flex flex-wrap items-center gap-1 sm:gap-2"},ad={class:"text-[10px] sm:text-xs md:text-sm font-medium break-words line-clamp-1"},ld={class:"text-[8px] sm:text-[10px] md:text-xs text-muted-foreground mt-0.5"},nd={key:0,class:"block sm:inline"},rd={class:"block sm:inline sm:ml-1"},od={class:"text-left sm:text-right flex-shrink-0"},id={class:"text-xs sm:text-base md:text-lg font-bold text-green-600"},dd={key:0,class:"text-center py-4 sm:py-8 text-muted-foreground text-[10px] sm:text-sm"},ud={key:1,class:"space-y-1.5 sm:space-y-3"},md={class:"flex-1 min-w-0"},cd={class:"flex flex-wrap items-center gap-1 sm:gap-2"},pd={class:"text-[10px] sm:text-xs md:text-sm font-medium break-words line-clamp-1"},fd={class:"text-[8px] sm:text-[10px] md:text-xs text-muted-foreground mt-0.5"},xd={key:0,class:"block sm:inline"},gd={class:"block sm:inline sm:ml-2"},vd={class:"text-left sm:text-right flex-shrink-0"},yd={class:"text-xs sm:text-base md:text-lg font-bold text-green-600"},bd={key:0,class:"text-center py-4 sm:py-8 text-muted-foreground text-[10px] sm:text-sm"},_d={key:1,class:"space-y-3"},hd={class:"flex-1 min-w-0"},kd={class:"flex flex-wrap items-center gap-2"},wd={class:"text-xs sm:text-sm font-medium break-words"},$d={class:"text-[10px] sm:text-xs text-muted-foreground mt-1"},Pd={class:"text-left sm:text-right flex-shrink-0"},Cd={class:"text-base sm:text-lg font-bold text-green-600"},Sd={key:0,class:"text-center py-4 sm:py-8 text-muted-foreground text-[10px] sm:text-sm"},Td={key:1,class:"space-y-1.5 sm:space-y-3"},jd={class:"flex-1 min-w-0"},Rd={class:"flex flex-wrap items-center gap-1 sm:gap-2"},Md={class:"text-[10px] sm:text-xs md:text-sm font-medium break-words line-clamp-1"},Dd={class:"text-[8px] sm:text-[10px] md:text-xs text-muted-foreground mt-0.5"},Ad={key:0,class:"block sm:inline"},Ld={class:"block sm:inline sm:ml-1"},Vd={class:"text-left sm:text-right flex-shrink-0"},Bd={class:"text-xs sm:text-base md:text-lg font-bold text-green-600"},Id={key:0,class:"text-center py-4 sm:py-8 text-muted-foreground text-[10px] sm:text-sm"},Ed={key:1,class:"space-y-1.5 sm:space-y-3"},Ud={class:"flex-1 min-w-0"},Fd={class:"flex flex-wrap items-center gap-1 sm:gap-2"},Kd={class:"text-[10px] sm:text-xs md:text-sm font-medium break-words line-clamp-1"},Nd={class:"text-[8px] sm:text-[10px] md:text-xs text-muted-foreground mt-0.5"},zd={class:"text-left sm:text-right flex-shrink-0"},Od={class:"text-xs sm:text-base md:text-lg font-bold text-green-600"},qd={key:0,class:"text-center py-4 sm:py-8 text-muted-foreground text-[10px] sm:text-sm"},Gd={key:1,class:"space-y-1.5 sm:space-y-3"},Qd={class:"flex-1 min-w-0"},Wd={class:"flex flex-wrap items-center gap-1 sm:gap-2"},Hd={class:"text-[10px] sm:text-xs md:text-sm font-medium break-words line-clamp-1"},Jd={class:"text-[8px] sm:text-[10px] md:text-xs text-muted-foreground mt-0.5"},Zd={key:0,class:"block sm:inline"},Xd={class:"block sm:inline sm:ml-1"},Yd={class:"text-left sm:text-right flex-shrink-0"},eu={class:"text-xs sm:text-base md:text-lg font-bold text-green-600"},tu={key:0,class:"text-center py-4 sm:py-8 text-muted-foreground text-[10px] sm:text-sm"},su={key:1,class:"space-y-1.5 sm:space-y-3"},au={class:"flex-1 min-w-0"},lu={class:"flex flex-wrap items-center gap-1 sm:gap-2"},nu={class:"text-[10px] sm:text-xs md:text-sm font-medium break-words line-clamp-1"},ru={class:"text-[8px] sm:text-[10px] md:text-xs text-muted-foreground mt-0.5"},ou={class:"block sm:inline"},iu={class:"block sm:inline sm:ml-1"},du={class:"text-left sm:text-right flex-shrink-0"},uu={class:"text-xs sm:text-base md:text-lg font-bold text-green-600"},mu=Z({__name:"BonusTab",props:{bonusSponsors:{},bonusMatchings:{},bonusPairings:{},bonusCashbacks:{},bonusRewards:{},bonusRetails:{},bonusLifetimeCashRewards:{}},setup(l){const i=l,d=b=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(b),m=b=>new Date(b).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"}),y=U(()=>i.bonusSponsors.reduce((b,C)=>b+C.amount,0)),u=U(()=>i.bonusMatchings.reduce((b,C)=>b+C.amount,0)),p=U(()=>i.bonusPairings.reduce((b,C)=>b+C.amount,0)),k=U(()=>i.bonusCashbacks.reduce((b,C)=>b+C.amount,0)),M=U(()=>i.bonusRewards.reduce((b,C)=>b+C.amount,0)),v=U(()=>i.bonusSponsors.filter(b=>b.status===0).reduce((b,C)=>b+C.amount,0)),$=U(()=>i.bonusSponsors.filter(b=>b.status===1).reduce((b,C)=>b+C.amount,0)),x=U(()=>i.bonusMatchings.filter(b=>b.status===0).reduce((b,C)=>b+C.amount,0)),c=U(()=>i.bonusMatchings.filter(b=>b.status===1).reduce((b,C)=>b+C.amount,0)),g=U(()=>i.bonusPairings.filter(b=>b.status===0).reduce((b,C)=>b+C.amount,0)),E=U(()=>i.bonusPairings.filter(b=>b.status===1).reduce((b,C)=>b+C.amount,0)),F=U(()=>i.bonusCashbacks.filter(b=>b.status===0).reduce((b,C)=>b+C.amount,0)),j=U(()=>i.bonusCashbacks.filter(b=>b.status===1).reduce((b,C)=>b+C.amount,0)),Q=U(()=>i.bonusRewards.filter(b=>b.status===0).reduce((b,C)=>b+C.amount,0)),se=U(()=>i.bonusRewards.filter(b=>b.status===1).reduce((b,C)=>b+C.amount,0)),q=U(()=>i.bonusRetails.reduce((b,C)=>b+C.amount,0)),B=U(()=>i.bonusRetails.filter(b=>b.status===0).reduce((b,C)=>b+C.amount,0)),O=U(()=>i.bonusRetails.filter(b=>b.status===1).reduce((b,C)=>b+C.amount,0)),A=U(()=>i.bonusLifetimeCashRewards.reduce((b,C)=>b+C.amount,0)),h=U(()=>i.bonusLifetimeCashRewards.filter(b=>b.status===0).reduce((b,C)=>b+C.amount,0)),_=U(()=>i.bonusLifetimeCashRewards.filter(b=>b.status===1).reduce((b,C)=>b+C.amount,0)),P=U(()=>y.value+u.value+p.value+k.value+M.value+q.value+A.value);return(b,C)=>(r(),f("div",Ti,[t("div",ji,[s(e(N),null,{default:a(()=>[s(e(H),{class:"pb-2 sm:pb-3"},{default:a(()=>[s(e(J),{class:"text-xs sm:text-sm font-medium flex items-center gap-2"},{default:a(()=>[s(e(lt),{class:"h-3 w-3 sm:h-4 sm:w-4 text-blue-500 flex-shrink-0"}),C[0]||(C[0]=t("span",{class:"truncate"},"Referral Incentive",-1))]),_:1})]),_:1}),s(e(z),null,{default:a(()=>[t("div",Ri,n(d(y.value)),1),t("p",Mi,n(l.bonusSponsors.length)+" transaksi ",1),t("div",Di,[s(e(V),{variant:"outline",class:"text-[10px] sm:text-xs justify-center sm:justify-start"},{default:a(()=>[o(" Pending: "+n(d(v.value)),1)]),_:1}),s(e(V),{variant:"secondary",class:"text-[10px] sm:text-xs justify-center sm:justify-start"},{default:a(()=>[o(" Released: "+n(d($.value)),1)]),_:1})])]),_:1})]),_:1}),s(e(N),null,{default:a(()=>[s(e(H),{class:"pb-2 sm:pb-3"},{default:a(()=>[s(e(J),{class:"text-xs sm:text-sm font-medium flex items-center gap-2"},{default:a(()=>[s(e(fs),{class:"h-3 w-3 sm:h-4 sm:w-4 text-green-500 flex-shrink-0"}),C[1]||(C[1]=t("span",{class:"truncate"},"Team Affiliate Commission",-1))]),_:1})]),_:1}),s(e(z),null,{default:a(()=>[t("div",Ai,n(d(u.value)),1),t("p",Li,n(l.bonusMatchings.length)+" transaksi ",1),t("div",Vi,[s(e(V),{variant:"outline",class:"text-[10px] sm:text-xs justify-center sm:justify-start"},{default:a(()=>[o(" Pending: "+n(d(x.value)),1)]),_:1}),s(e(V),{variant:"secondary",class:"text-[10px] sm:text-xs justify-center sm:justify-start"},{default:a(()=>[o(" Released: "+n(d(c.value)),1)]),_:1})])]),_:1})]),_:1}),s(e(N),null,{default:a(()=>[s(e(H),{class:"pb-2 sm:pb-3"},{default:a(()=>[s(e(J),{class:"text-xs sm:text-sm font-medium flex items-center gap-2"},{default:a(()=>[s(e(xs),{class:"h-3 w-3 sm:h-4 sm:w-4 text-purple-500 flex-shrink-0"}),C[2]||(C[2]=t("span",{class:"truncate"},"Partner Team Commission",-1))]),_:1})]),_:1}),s(e(z),null,{default:a(()=>[t("div",Bi,n(d(p.value)),1),t("p",Ii,n(l.bonusPairings.length)+" transaksi ",1),t("div",Ei,[s(e(V),{variant:"outline",class:"text-[10px] sm:text-xs justify-center sm:justify-start"},{default:a(()=>[o(" Pending: "+n(d(g.value)),1)]),_:1}),s(e(V),{variant:"secondary",class:"text-[10px] sm:text-xs justify-center sm:justify-start"},{default:a(()=>[o(" Released: "+n(d(E.value)),1)]),_:1})])]),_:1})]),_:1}),s(e(N),null,{default:a(()=>[s(e(H),{class:"pb-2 sm:pb-3"},{default:a(()=>[s(e(J),{class:"text-xs sm:text-sm font-medium flex items-center gap-2"},{default:a(()=>[s(e(gs),{class:"h-3 w-3 sm:h-4 sm:w-4 text-orange-500 flex-shrink-0"}),C[3]||(C[3]=t("span",{class:"truncate"},"Cashback Commission",-1))]),_:1})]),_:1}),s(e(z),null,{default:a(()=>[t("div",Ui,n(d(k.value)),1),t("p",Fi,n(l.bonusCashbacks.length)+" transaksi ",1),t("div",Ki,[s(e(V),{variant:"outline",class:"text-[10px] sm:text-xs justify-center sm:justify-start"},{default:a(()=>[o(" Pending: "+n(d(F.value)),1)]),_:1}),s(e(V),{variant:"secondary",class:"text-[10px] sm:text-xs justify-center sm:justify-start"},{default:a(()=>[o(" Released: "+n(d(j.value)),1)]),_:1})])]),_:1})]),_:1}),s(e(N),null,{default:a(()=>[s(e(H),{class:"pb-2 sm:pb-3"},{default:a(()=>[s(e(J),{class:"text-xs sm:text-sm font-medium flex items-center gap-2"},{default:a(()=>[s(e(wt),{class:"h-3 w-3 sm:h-4 sm:w-4 text-yellow-500 flex-shrink-0"}),C[4]||(C[4]=t("span",{class:"truncate"},"Promotions Rewards",-1))]),_:1})]),_:1}),s(e(z),null,{default:a(()=>[t("div",Ni,n(d(M.value)),1),t("p",zi,n(l.bonusRewards.length)+" transaksi ",1),t("div",Oi,[s(e(V),{variant:"outline",class:"text-[10px] sm:text-xs justify-center sm:justify-start"},{default:a(()=>[o(" Pending: "+n(d(Q.value)),1)]),_:1}),s(e(V),{variant:"secondary",class:"text-[10px] sm:text-xs justify-center sm:justify-start"},{default:a(()=>[o(" Released: "+n(d(se.value)),1)]),_:1})])]),_:1})]),_:1}),s(e(N),null,{default:a(()=>[s(e(H),{class:"pb-2 sm:pb-3"},{default:a(()=>[s(e(J),{class:"text-xs sm:text-sm font-medium flex items-center gap-2"},{default:a(()=>[s(e(vs),{class:"h-3 w-3 sm:h-4 sm:w-4 text-cyan-500 flex-shrink-0"}),C[5]||(C[5]=t("span",{class:"truncate"},"Retail Commission",-1))]),_:1})]),_:1}),s(e(z),null,{default:a(()=>[t("div",qi,n(d(q.value)),1),t("p",Gi,n(l.bonusRetails.length)+" transaksi ",1),t("div",Qi,[s(e(V),{variant:"outline",class:"text-[10px] sm:text-xs justify-center sm:justify-start"},{default:a(()=>[o(" Pending: "+n(d(B.value)),1)]),_:1}),s(e(V),{variant:"secondary",class:"text-[10px] sm:text-xs justify-center sm:justify-start"},{default:a(()=>[o(" Released: "+n(d(O.value)),1)]),_:1})])]),_:1})]),_:1}),s(e(N),null,{default:a(()=>[s(e(H),{class:"pb-2 sm:pb-3"},{default:a(()=>[s(e(J),{class:"text-xs sm:text-sm font-medium flex items-center gap-2"},{default:a(()=>[s(e(pt),{class:"h-3 w-3 sm:h-4 sm:w-4 text-amber-500 flex-shrink-0"}),C[6]||(C[6]=t("span",{class:"truncate"},"Lifetime Cash Rewards",-1))]),_:1})]),_:1}),s(e(z),null,{default:a(()=>[t("div",Wi,n(d(A.value)),1),t("p",Hi,n(l.bonusLifetimeCashRewards.length)+" transaksi ",1),t("div",Ji,[s(e(V),{variant:"outline",class:"text-[10px] sm:text-xs justify-center sm:justify-start"},{default:a(()=>[o(" Pending: "+n(d(h.value)),1)]),_:1}),s(e(V),{variant:"secondary",class:"text-[10px] sm:text-xs justify-center sm:justify-start"},{default:a(()=>[o(" Released: "+n(d(_.value)),1)]),_:1})])]),_:1})]),_:1}),s(e(N),null,{default:a(()=>[s(e(H),{class:"pb-2 sm:pb-3"},{default:a(()=>[s(e(J),{class:"text-xs sm:text-sm font-medium flex items-center gap-2"},{default:a(()=>[s(e(St),{class:"h-3 w-3 sm:h-4 sm:w-4 text-primary flex-shrink-0"}),C[7]||(C[7]=t("span",{class:"truncate"},"Total Bonus",-1))]),_:1})]),_:1}),s(e(z),null,{default:a(()=>[t("div",Zi,n(d(P.value)),1),C[8]||(C[8]=t("p",{class:"text-[10px] sm:text-xs text-muted-foreground mt-1"}," Semua jenis bonus ",-1))]),_:1})]),_:1})]),s(e(N),null,{default:a(()=>[s(e(H),{class:"p-2 sm:p-4 md:p-6 pb-2"},{default:a(()=>[s(e(J),{class:"text-xs sm:text-base md:text-lg"},{default:a(()=>[...C[9]||(C[9]=[o("Riwayat Bonus",-1)])]),_:1}),s(e(ce),{class:"text-[9px] sm:text-xs md:text-sm"},{default:a(()=>[...C[10]||(C[10]=[o(" Detail transaksi bonus ",-1)])]),_:1})]),_:1}),s(e(z),{class:"p-2 sm:p-4 md:p-6 pt-0"},{default:a(()=>[s(e(dt),{"default-value":"sponsor",class:"w-full"},{default:a(()=>[t("div",Xi,[s(e(ut),{class:"flex w-max sm:grid sm:w-full sm:grid-cols-7 gap-0.5 sm:gap-1 h-7 sm:h-auto bg-muted/30"},{default:a(()=>[s(e(Y),{value:"sponsor",class:"text-[12px] sm:text-xs md:text-sm whitespace-nowrap px-1.5 sm:px-3 md:px-4 py-1 sm:py-2 h-6 sm:h-auto"},{default:a(()=>[...C[11]||(C[11]=[o(" Referral ",-1)])]),_:1}),s(e(Y),{value:"matching",class:"text-[12px] sm:text-xs md:text-sm whitespace-nowrap px-1.5 sm:px-3 md:px-4 py-1 sm:py-2 h-6 sm:h-auto"},{default:a(()=>[...C[12]||(C[12]=[o(" Team Aff. ",-1)])]),_:1}),s(e(Y),{value:"pairing",class:"text-[12px] sm:text-xs md:text-sm whitespace-nowrap px-1.5 sm:px-3 md:px-4 py-1 sm:py-2 h-6 sm:h-auto"},{default:a(()=>[...C[13]||(C[13]=[o(" Partner ",-1)])]),_:1}),s(e(Y),{value:"cashback",class:"text-[12px] sm:text-xs md:text-sm whitespace-nowrap px-1.5 sm:px-3 md:px-4 py-1 sm:py-2 h-6 sm:h-auto"},{default:a(()=>[...C[14]||(C[14]=[o(" Cashback ",-1)])]),_:1}),s(e(Y),{value:"reward",class:"text-[12px] sm:text-xs md:text-sm whitespace-nowrap px-1.5 sm:px-3 md:px-4 py-1 sm:py-2 h-6 sm:h-auto"},{default:a(()=>[...C[15]||(C[15]=[o(" Rewards ",-1)])]),_:1}),s(e(Y),{value:"retail",class:"text-[12px] sm:text-xs md:text-sm whitespace-nowrap px-1.5 sm:px-3 md:px-4 py-1 sm:py-2 h-6 sm:h-auto"},{default:a(()=>[...C[16]||(C[16]=[o(" Retail ",-1)])]),_:1}),s(e(Y),{value:"lifetime",class:"text-[12px] sm:text-xs md:text-sm whitespace-nowrap px-1.5 sm:px-3 md:px-4 py-1 sm:py-2 h-6 sm:h-auto"},{default:a(()=>[...C[17]||(C[17]=[o(" Lifetime ",-1)])]),_:1})]),_:1})]),s(e(ee),{value:"sponsor",class:"mt-2 sm:mt-4"},{default:a(()=>[l.bonusSponsors.length===0?(r(),f("div",Yi," Belum ada bonus referral incentive ")):(r(),f("div",ed,[(r(!0),f(G,null,te(l.bonusSponsors,S=>(r(),f("div",{key:S.id,class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-1.5 sm:gap-3 p-2 sm:p-3 md:p-4 border rounded-lg hover:bg-muted/50 transition-colors"},[t("div",td,[t("div",sd,[s(e(V),{variant:S.status===1?"secondary":"outline",class:"text-[8px] sm:text-xs px-1 sm:px-2 py-0"},{default:a(()=>[o(n(S.status===1?"R":"P"),1)]),_:2},1032,["variant"]),t("span",ad,n(S.description||"Bonus Sponsor"),1)]),t("p",ld,[S.from_member?(r(),f("span",nd," Dari: "+n(S.from_member.name),1)):w("",!0),t("span",rd,n(m(S.created_at)),1)])]),t("div",od,[t("div",id,n(d(S.amount)),1),t("div",{class:W(["text-[8px] sm:text-xs",S.status===1?"text-green-600":"text-yellow-600"])},n(S.status===1?"Processed":"Pending"),3)])]))),128))]))]),_:1}),s(e(ee),{value:"matching",class:"mt-2 sm:mt-4"},{default:a(()=>[l.bonusMatchings.length===0?(r(),f("div",dd," Belum ada bonus team affiliate commission ")):(r(),f("div",ud,[(r(!0),f(G,null,te(l.bonusMatchings,S=>(r(),f("div",{key:S.id,class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-1.5 sm:gap-3 p-2 sm:p-3 md:p-4 border rounded-lg hover:bg-muted/50 transition-colors"},[t("div",md,[t("div",cd,[s(e(V),{variant:S.status===1?"secondary":"outline",class:"text-[8px] sm:text-xs px-1 sm:px-2 py-0"},{default:a(()=>[o(n(S.status===1?"R":"P"),1)]),_:2},1032,["variant"]),s(e(V),{variant:"outline",class:"text-[8px] sm:text-xs px-1 sm:px-2 py-0"},{default:a(()=>[o(" L"+n(S.level),1)]),_:2},1024),t("span",pd,n(S.description||"Bonus Matching"),1)]),t("p",fd,[S.from_member?(r(),f("span",xd," Dari: "+n(S.from_member.name),1)):w("",!0),t("span",gd,n(m(S.created_at)),1)])]),t("div",vd,[t("div",yd,n(d(S.amount)),1),t("div",{class:W(["text-[8px] sm:text-xs",S.status===1?"text-green-600":"text-yellow-600"])},n(S.status===1?"Processed":"Pending"),3)])]))),128))]))]),_:1}),s(e(ee),{value:"pairing",class:"mt-2 sm:mt-4"},{default:a(()=>[l.bonusPairings.length===0?(r(),f("div",bd," Belum ada bonus partner team commission ")):(r(),f("div",_d,[(r(!0),f(G,null,te(l.bonusPairings,S=>(r(),f("div",{key:S.id,class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 p-3 sm:p-4 border rounded-lg hover:bg-muted/50 transition-colors"},[t("div",hd,[t("div",kd,[s(e(V),{variant:S.status===1?"secondary":"outline",class:"text-xs"},{default:a(()=>[o(n(S.status===1?"Released":"Pending"),1)]),_:2},1032,["variant"]),s(e(V),{variant:"outline",class:"text-xs"},{default:a(()=>[o(n(S.pair)+" Pairs ",1)]),_:2},1024),t("span",wd,n(S.description||"Bonus Pairing"),1)]),t("p",$d,n(m(S.created_at)),1)]),t("div",Pd,[t("div",Cd,n(d(S.amount)),1),t("div",{class:W(["text-[8px] sm:text-xs",S.status===1?"text-green-600":"text-yellow-600"])},n(S.status===1?"Processed":"Pending"),3)])]))),128))]))]),_:1}),s(e(ee),{value:"cashback",class:"mt-2 sm:mt-4"},{default:a(()=>[l.bonusCashbacks.length===0?(r(),f("div",Sd," Belum ada bonus cashback commission ")):(r(),f("div",Td,[(r(!0),f(G,null,te(l.bonusCashbacks,S=>(r(),f("div",{key:S.id,class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-1.5 sm:gap-3 p-2 sm:p-3 md:p-4 border rounded-lg hover:bg-muted/50 transition-colors"},[t("div",jd,[t("div",Rd,[s(e(V),{variant:S.status===1?"secondary":"outline",class:"text-[8px] sm:text-xs px-1 sm:px-2 py-0"},{default:a(()=>[o(n(S.status===1?"R":"P"),1)]),_:2},1032,["variant"]),t("span",Md,n(S.description||"Bonus Cashback"),1)]),t("p",Dd,[C[18]||(C[18]=o('eground mt-0.5"> ',-1)),S.order_id?(r(),f("span",Ad," #"+n(S.order_id),1)):w("",!0),t("span",Ld,n(m(S.created_at)),1)])]),t("div",Vd,[t("div",Bd,n(d(S.amount)),1),t("div",{class:W(["text-[8px] sm:text-xs",S.status===1?"text-green-600":"text-yellow-600"])},n(S.status===1?"Processed":"Pending"),3)])]))),128))]))]),_:1}),s(e(ee),{value:"reward",class:"mt-2 sm:mt-4"},{default:a(()=>[l.bonusRewards.length===0?(r(),f("div",Id," Belum ada promotions rewards ")):(r(),f("div",Ed,[(r(!0),f(G,null,te(l.bonusRewards,S=>(r(),f("div",{key:S.id,class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-1.5 sm:gap-3 p-2 sm:p-3 md:p-4 border rounded-lg hover:bg-muted/50 transition-colors"},[t("div",Ud,[t("div",Fd,[s(e(V),{variant:S.status===1?"secondary":"outline",class:"text-[8px] sm:text-xs px-1 sm:px-2 py-0"},{default:a(()=>[o(n(S.status===1?"R":"P"),1)]),_:2},1032,["variant"]),S.reward_type?(r(),T(e(V),{key:0,variant:"outline",class:"text-[8px] sm:text-xs px-1 sm:px-2 py-0"},{default:a(()=>[o(n(S.reward_type),1)]),_:2},1024)):w("",!0),t("span",Kd,n(S.description||"Promotions Reward"),1)]),t("p",Nd,n(m(S.created_at)),1)]),t("div",zd,[t("div",Od,n(d(S.amount)),1),t("div",{class:W(["text-[8px] sm:text-xs",S.status===1?"text-green-600":"text-yellow-600"])},n(S.status===1?"Processed":"Pending"),3)])]))),128))]))]),_:1}),s(e(ee),{value:"retail",class:"mt-2 sm:mt-4"},{default:a(()=>[l.bonusRetails.length===0?(r(),f("div",qd," Belum ada bonus retail commission ")):(r(),f("div",Gd,[(r(!0),f(G,null,te(l.bonusRetails,S=>(r(),f("div",{key:S.id,class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-1.5 sm:gap-3 p-2 sm:p-3 md:p-4 border rounded-lg hover:bg-muted/50 transition-colors"},[t("div",Qd,[t("div",Wd,[s(e(V),{variant:S.status===1?"secondary":"outline",class:"text-[8px] sm:text-xs px-1 sm:px-2 py-0"},{default:a(()=>[o(n(S.status===1?"R":"P"),1)]),_:2},1032,["variant"]),S.index_value?(r(),T(e(V),{key:0,variant:"outline",class:"text-[8px] sm:text-xs px-1 sm:px-2 py-0"},{default:a(()=>[o(" IDX: "+n(S.index_value),1)]),_:2},1024)):w("",!0),t("span",Hd,n(S.description||"Retail Commission"),1)]),t("p",Jd,[S.from_member?(r(),f("span",Zd," Dari: "+n(S.from_member.name),1)):w("",!0),t("span",Xd,n(m(S.created_at)),1)])]),t("div",Yd,[t("div",eu,n(d(S.amount)),1),t("div",{class:W(["text-[8px] sm:text-xs",S.status===1?"text-green-600":"text-yellow-600"])},n(S.status===1?"Processed":"Pending"),3)])]))),128))]))]),_:1}),s(e(ee),{value:"lifetime",class:"mt-2 sm:mt-4"},{default:a(()=>[l.bonusLifetimeCashRewards.length===0?(r(),f("div",tu," Belum ada lifetime cash rewards ")):(r(),f("div",su,[(r(!0),f(G,null,te(l.bonusLifetimeCashRewards,S=>(r(),f("div",{key:S.id,class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-1.5 sm:gap-3 p-2 sm:p-3 md:p-4 border rounded-lg hover:bg-muted/50 transition-colors"},[t("div",au,[t("div",lu,[s(e(V),{variant:S.status===1?"secondary":"outline",class:"text-[8px] sm:text-xs px-1 sm:px-2 py-0"},{default:a(()=>[o(n(S.status===1?"R":"P"),1)]),_:2},1032,["variant"]),s(e(V),{variant:"outline",class:"text-[8px] sm:text-xs px-1 sm:px-2 py-0"},{default:a(()=>[o(n(S.reward_name),1)]),_:2},1024),t("span",nu,n(S.description||"Lifetime Cash Reward"),1)]),t("p",ru,[t("span",ou," Reward: "+n(d(S.reward))+" | BV: "+n(S.bv),1),t("span",iu,n(m(S.created_at)),1)])]),t("div",du,[t("div",uu,n(d(S.amount)),1),t("div",{class:W(["text-[8px] sm:text-xs",S.status===1?"text-green-600":"text-yellow-600"])},n(S.status===1?"Processed":"Pending"),3)])]))),128))]))]),_:1})]),_:1})]),_:1})]),_:1})]))}}),cu={class:"flex items-center justify-between"},pu={class:"font-semibold"},fu={class:"flex items-center justify-between"},xu={class:"font-semibold"},gu={class:"flex items-center justify-between"},vu=Z({__name:"NetworkStatsCard",props:{customer:{}},setup(l){return(i,d)=>(r(),T(e(N),null,{default:a(()=>[s(e(H),null,{default:a(()=>[s(e(J),{class:"flex items-center gap-2"},{default:a(()=>[s(e(Tt),{class:"w-5 h-5"}),d[0]||(d[0]=o(" Statistik Jaringan ",-1))]),_:1})]),_:1}),s(e(z),{class:"space-y-3"},{default:a(()=>[t("div",cu,[d[1]||(d[1]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Jaringan Kiri",-1)),t("span",pu,n(l.customer.network_stats.left_count),1)]),s(e(oe)),t("div",fu,[d[2]||(d[2]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Jaringan Kanan",-1)),t("span",xu,n(l.customer.network_stats.right_count),1)]),s(e(oe)),t("div",gu,[d[3]||(d[3]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Total Downline",-1)),s(e(V),{variant:"secondary"},{default:a(()=>[o(n(l.customer.network_stats.total_downlines),1)]),_:1})])]),_:1})]),_:1}))}}),yu={class:"bg-gradient-to-br from-primary/10 via-primary/5 to-background border-b"},bu={class:"container mx-auto px-3 py-6 sm:px-4 sm:py-12 max-w-7xl"},_u={class:"flex items-center justify-between"},hu={class:"hidden md:flex items-center gap-2 px-4 py-2 rounded-lg bg-background/80 backdrop-blur-sm border shadow-sm"},ku={class:"font-semibold"},wu={class:"container mx-auto px-3 py-4 sm:px-4 sm:py-8 max-w-7xl"},$u={class:"grid gap-4 sm:gap-6 lg:grid-cols-3"},Pu={class:"lg:col-span-1 space-y-4 sm:space-y-6"},Cu={class:"lg:col-span-2"},Su={class:"rounded-xl border bg-card overflow-hidden"},Tu={class:"border-b bg-muted/30"},ju={class:"overflow-x-auto text-center overflow-y-hidden px-1.5 py-1.5 sm:px-2 sm:py-2 [&::-webkit-scrollbar]:hidden [-ms-overflow-style:none] [scrollbar-width:none]"},Ru={class:"p-3 sm:p-4 md:p-6"},Mu={key:1,class:"text-center py-12"},am=Z({__name:"Index",props:{customer:{},orders:{},walletTransactions:{},activeMembers:{},passiveMembers:{},prospectMembers:{},binaryTree:{},totalDownlines:{},totalLeft:{},totalRight:{},bonusSponsors:{},bonusMatchings:{},bonusPairings:{},bonusCashbacks:{},bonusRewards:{},bonusRetails:{},bonusLifetimeCashRewards:{},addresses:{}},setup(l){const i=l,d=mt(),m=U(()=>Number(i.customer.status)===3),y=U(()=>{if(typeof window>"u")return"profile";const u=d.url;try{return new URL(u,window.location.origin).searchParams.get("tab")||"profile"}catch{return"profile"}});return(u,p)=>(r(),T(Et,null,{default:a(()=>[s(e(ys),{title:"Profile Saya"}),t("div",yu,[t("div",bu,[t("div",_u,[p[0]||(p[0]=t("div",null,[t("h1",{class:"text-2xl sm:text-3xl md:text-4xl font-bold text-foreground mb-1 sm:mb-2"},"Profile Saya"),t("p",{class:"text-sm sm:text-base md:text-lg text-muted-foreground"}," Kelola informasi profil dan keamanan akun Anda ")],-1)),t("div",hu,[s(e(st),{class:"w-5 h-5 text-primary"}),t("span",ku,n(l.customer.name),1)])])])]),t("div",wu,[t("div",$u,[t("div",Pu,[s(zs,{customer:l.customer},null,8,["customer"]),m.value?(r(),T(vu,{key:0,customer:l.customer},null,8,["customer"])):w("",!0),s(wa,{addresses:l.addresses},null,8,["addresses"]),m.value?(r(),T(Ta,{key:1,customer:l.customer},null,8,["customer"])):w("",!0),s(Da,{"created-at":l.customer.created_at},null,8,["created-at"])]),t("div",Cu,[t("div",Su,[s(e(dt),{"default-value":y.value,class:"w-full"},{default:a(()=>[t("div",Tu,[t("div",ju,[s(e(ut),{class:"inline-flex h-auto w-max bg-transparent gap-1 sm:gap-1.5 p-0"},{default:a(()=>[s(e(Y),{value:"profile",class:"flex-shrink-0 flex flex-col items-center justify-center gap-0.5 py-1 px-1.5 sm:py-1.5 sm:px-2 w-[38px] sm:w-[55px] md:w-[70px] data-[state=active]:bg-background data-[state=active]:shadow-sm rounded-md transition-all"},{default:a(()=>[s(e(st),{class:"w-3 h-3 sm:w-3.5 sm:h-3.5 md:w-4 md:h-4"}),p[1]||(p[1]=t("span",{class:"text-[8px] sm:text-[9px] md:text-[10px] font-medium text-center leading-tight"},"Info",-1))]),_:1}),s(e(Y),{value:"orders",class:"flex-shrink-0 flex flex-col items-center justify-center gap-0.5 py-1 px-1.5 sm:py-1.5 sm:px-2 w-[38px] sm:w-[55px] md:w-[70px] data-[state=active]:bg-background data-[state=active]:shadow-sm rounded-md transition-all"},{default:a(()=>[s(e(Ve),{class:"w-3 h-3 sm:w-3.5 sm:h-3.5 md:w-4 md:h-4"}),p[2]||(p[2]=t("span",{class:"text-[8px] sm:text-[9px] md:text-[10px] font-medium text-center leading-tight"},"Order",-1))]),_:1}),m.value?(r(),T(e(Y),{key:0,value:"network",class:"flex-shrink-0 flex flex-col items-center justify-center gap-0.5 py-1 px-1.5 sm:py-1.5 sm:px-2 w-[38px] sm:w-[55px] md:w-[70px] data-[state=active]:bg-background data-[state=active]:shadow-sm rounded-md transition-all"},{default:a(()=>[s(e(Tt),{class:"w-3 h-3 sm:w-3.5 sm:h-3.5 md:w-4 md:h-4"}),p[3]||(p[3]=t("span",{class:"text-[8px] sm:text-[9px] md:text-[10px] font-medium text-center leading-tight"},"Mitra",-1))]),_:1})):w("",!0),m.value?(r(),T(e(Y),{key:1,value:"binary",class:"flex-shrink-0 flex flex-col items-center justify-center gap-0.5 py-1 px-1.5 sm:py-1.5 sm:px-2 w-[38px] sm:w-[55px] md:w-[70px] data-[state=active]:bg-background data-[state=active]:shadow-sm rounded-md transition-all"},{default:a(()=>[s(e(Le),{class:"w-3 h-3 sm:w-3.5 sm:h-3.5 md:w-4 md:h-4"}),p[4]||(p[4]=t("span",{class:"text-[8px] sm:text-[9px] md:text-[10px] font-medium text-center leading-tight"},"Network",-1))]),_:1})):w("",!0),m.value?(r(),T(e(Y),{key:2,value:"bonus",class:"flex-shrink-0 flex flex-col items-center justify-center gap-0.5 py-1 px-1.5 sm:py-1.5 sm:px-2 w-[38px] sm:w-[55px] md:w-[70px] data-[state=active]:bg-background data-[state=active]:shadow-sm rounded-md transition-all"},{default:a(()=>[s(e(St),{class:"w-3 h-3 sm:w-3.5 sm:h-3.5 md:w-4 md:h-4"}),p[5]||(p[5]=t("span",{class:"text-[8px] sm:text-[9px] md:text-[10px] font-medium text-center leading-tight"},"Bonus",-1))]),_:1})):w("",!0),s(e(Y),{value:"wallet",class:"flex-shrink-0 flex flex-col items-center justify-center gap-0.5 py-1 px-1.5 sm:py-1.5 sm:px-2 w-[38px] sm:w-[55px] md:w-[70px] data-[state=active]:bg-background data-[state=active]:shadow-sm rounded-md transition-all"},{default:a(()=>[s(e(Ae),{class:"w-3 h-3 sm:w-3.5 sm:h-3.5 md:w-4 md:h-4"}),p[6]||(p[6]=t("span",{class:"text-[8px] sm:text-[9px] md:text-[10px] font-medium text-center leading-tight"},"Wallet",-1))]),_:1}),s(e(Y),{value:"security",class:"flex-shrink-0 flex flex-col items-center justify-center gap-0.5 py-1 px-1.5 sm:py-1.5 sm:px-2 w-[38px] sm:w-[55px] md:w-[70px] data-[state=active]:bg-background data-[state=active]:shadow-sm rounded-md transition-all"},{default:a(()=>[s(e(at),{class:"w-3 h-3 sm:w-3.5 sm:h-3.5 md:w-4 md:h-4"}),p[7]||(p[7]=t("span",{class:"text-[8px] sm:text-[9px] md:text-[10px] font-medium text-center leading-tight"},"Lock",-1))]),_:1}),s(e(Y),{value:"danger",class:"flex-shrink-0 flex flex-col items-center justify-center gap-0.5 py-1 px-1.5 sm:py-1.5 sm:px-2 w-[38px] sm:w-[55px] md:w-[70px] data-[state=active]:bg-background data-[state=active]:shadow-sm rounded-md transition-all"},{default:a(()=>[s(e($e),{class:"w-3 h-3 sm:w-3.5 sm:h-3.5 md:w-4 md:h-4"}),p[8]||(p[8]=t("span",{class:"text-[8px] sm:text-[9px] md:text-[10px] font-medium text-center leading-tight"},"Del",-1))]),_:1})]),_:1})])]),t("div",Ru,[s(e(ee),{value:"profile",class:"mt-0"},{default:a(()=>[s(al,{customer:l.customer},null,8,["customer"])]),_:1}),s(e(ee),{value:"orders",class:"mt-0"},{default:a(()=>[s(zn,{orders:l.orders},null,8,["orders"])]),_:1}),m.value?(r(),T(e(ee),{key:0,value:"network",class:"mt-0"},{default:a(()=>[s(Xo,{"active-members":l.activeMembers,"passive-members":l.passiveMembers,"prospect-members":l.prospectMembers,"has-left":!!l.binaryTree?.left,"has-right":!!l.binaryTree?.right},null,8,["active-members","passive-members","prospect-members","has-left","has-right"])]),_:1})):w("",!0),m.value?(r(),T(e(ee),{key:1,value:"binary",class:"mt-0"},{default:a(()=>[l.binaryTree?(r(),T(Si,{key:0,"binary-tree":l.binaryTree,"total-downlines":l.totalDownlines,"total-left":l.totalLeft,"total-right":l.totalRight,"passive-members":l.passiveMembers},null,8,["binary-tree","total-downlines","total-left","total-right","passive-members"])):(r(),f("div",Mu,[s(e(Le),{class:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),p[9]||(p[9]=t("h3",{class:"text-lg font-semibold mb-2"},"Belum Ada Jaringan Binary",-1)),p[10]||(p[10]=t("p",{class:"text-muted-foreground"}," Anda belum memiliki posisi dalam jaringan binary tree MLM. ",-1))]))]),_:1})):w("",!0),m.value?(r(),T(e(ee),{key:2,value:"bonus",class:"mt-0"},{default:a(()=>[s(mu,{"bonus-sponsors":l.bonusSponsors,"bonus-matchings":l.bonusMatchings,"bonus-pairings":l.bonusPairings,"bonus-cashbacks":l.bonusCashbacks,"bonus-rewards":l.bonusRewards,"bonus-retails":l.bonusRetails,"bonus-lifetime-cash-rewards":l.bonusLifetimeCashRewards},null,8,["bonus-sponsors","bonus-matchings","bonus-pairings","bonus-cashbacks","bonus-rewards","bonus-retails","bonus-lifetime-cash-rewards"])]),_:1})):w("",!0),s(e(ee),{value:"wallet",class:"mt-0"},{default:a(()=>[s(Nr,{customer:l.customer,transactions:l.walletTransactions},null,8,["customer","transactions"])]),_:1}),s(e(ee),{value:"security",class:"mt-0"},{default:a(()=>[s(Xr)]),_:1}),s(e(ee),{value:"danger",class:"mt-0"},{default:a(()=>[s(so)]),_:1})])]),_:1},8,["default-value"])])])])])]),_:1}))}});export{am as default};
