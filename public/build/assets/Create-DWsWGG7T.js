import{d as j,D as E,r as V,p as S,v as d,g as i,b as a,u as s,a0 as F,w as o,e as r,a3 as $,s as l,G as R,ad as z,t as m,J as g,K as u,ag as G,ak as I,Z as J,F as M,x as A,Q as v}from"./vendor-DaB_pQgP.js";import{i as P,_ as H,s as O}from"./AppLayout.vue_vue_type_script_setup_true_lang-D2z6-G88.js";import{_ as y}from"./index-BKBhFw5h.js";import{_ as x}from"./Input.vue_vue_type_script_setup_true_lang-fAtvLyIY.js";import{_ as p}from"./Label.vue_vue_type_script_setup_true_lang-CWjlkSoM.js";import{_ as C,a as U}from"./CardContent.vue_vue_type_script_setup_true_lang-BjMvSn1_.js";import{_ as h}from"./CardDescription.vue_vue_type_script_setup_true_lang-DsvaFasH.js";import{_ as L}from"./CardHeader.vue_vue_type_script_setup_true_lang-0_gXQ995.js";import{_ as B}from"./CardTitle.vue_vue_type_script_setup_true_lang-Ctf1rv4B.js";import{_ as Q,a as Z,b as W,c as X,d as N}from"./SelectValue.vue_vue_type_script_setup_true_lang-CL89SVC2.js";import"./index-CMWG4mbA.js";import"./AvatarFallback.vue_vue_type_script_setup_true_lang-BGvJCNeT.js";import"./AvatarImage.vue_vue_type_script_setup_true_lang-X5jrAjTx.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-DzqVjOcn.js";import"./index-DqFeuJ-n.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DeW2TNT-.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-DvbSElDR.js";const Y={class:"rounded-xl p-4 space-y-6 py-6"},ee={class:"flex items-center justify-between"},se={class:"grid gap-4 md:grid-cols-2"},te={class:"space-y-2"},ae={key:0,class:"text-sm text-destructive"},re={class:"space-y-2"},oe={key:0,class:"text-sm text-destructive"},ne={class:"space-y-2"},le={key:0,class:"text-sm text-destructive"},de={class:"space-y-2"},ie={key:0,class:"text-sm text-destructive"},ue={class:"space-y-2"},me={key:0,class:"text-sm text-destructive"},pe={class:"space-y-2"},fe={key:0,class:"text-sm text-destructive"},ge={class:"space-y-2"},xe={class:"space-y-2"},_e={class:"grid gap-4 md:grid-cols-2"},ke={class:"space-y-2"},ve={class:"relative"},be={class:"relative"},ce={key:0,class:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md border bg-popover p-1 shadow-md"},ye=["onClick"],we={class:"font-medium"},Ve={class:"text-xs text-muted-foreground"},Se={key:0,class:"mt-2 rounded-md border bg-muted p-3"},$e={class:"text-sm font-medium"},Me={class:"text-xs text-muted-foreground"},Pe={key:1,class:"text-sm text-destructive"},Ce={class:"space-y-2"},Ue={key:0,class:"text-sm text-destructive"},he={class:"flex justify-end gap-4"},Qe=j({__name:"Create",props:{customers:{}},setup(q){const b=q,t=E({name:"",username:"",email:"",phone:"",password:"",password_confirmation:"",sponsor_id:null,status:3,registration_amount:1e5,description:""}),_=V(""),k=V(!1),c=S(()=>b.customers.find(f=>f.id===t.sponsor_id)),w=S(()=>{if(!_.value)return b.customers;const f=_.value.toLowerCase();return b.customers.filter(e=>e.name.toLowerCase().includes(f)||e.ewallet_id.toLowerCase().includes(f))}),D=f=>{t.sponsor_id=f.id,k.value=!1,_.value=""},K=()=>{typeof window<"u"&&window.setTimeout(()=>{k.value=!1},200)},T=()=>{t.post(O.url(),{preserveScroll:!0,onSuccess:()=>{v.success("Pelanggan berhasil didaftarkan")},onError:f=>{const e=Object.values(f);e.length>0?(v.error(e[0]),e.length>1&&v.warning(`Terdapat ${e.length} kesalahan pada form. Silakan periksa kembali.`)):v.error("Gagal mendaftarkan pelanggan. Silakan periksa data yang dimasukkan.")}})};return(f,e)=>(i(),d(M,null,[a(s(F),{title:"Tambah Pelanggan"}),a(H,null,{default:o(()=>[r("div",Y,[r("div",ee,[e[12]||(e[12]=r("div",null,[r("h1",{class:"text-3xl font-bold"},"Tambah Pelanggan"),r("p",{class:"mt-2 text-muted-foreground"}," Daftarkan pelanggan baru ke dalam sistem MLM ")],-1)),a(s($),{href:s(P).url()},{default:o(()=>[a(s(y),{variant:"outline"},{default:o(()=>[a(s(R),{class:"mr-2 h-4 w-4"}),e[11]||(e[11]=l(" Kembali ",-1))]),_:1})]),_:1},8,["href"])]),r("form",{onSubmit:z(T,["prevent"]),class:"space-y-6"},[a(s(C),null,{default:o(()=>[a(s(L),null,{default:o(()=>[a(s(B),null,{default:o(()=>[...e[13]||(e[13]=[l("Informasi Pribadi",-1)])]),_:1}),a(s(h),null,{default:o(()=>[...e[14]||(e[14]=[l(" Data pribadi pelanggan yang akan didaftarkan ",-1)])]),_:1})]),_:1}),a(s(U),{class:"space-y-4"},{default:o(()=>[r("div",se,[r("div",te,[a(s(p),{for:"name"},{default:o(()=>[...e[15]||(e[15]=[l("Nama Lengkap *",-1)])]),_:1}),a(s(x),{id:"name",modelValue:s(t).name,"onUpdate:modelValue":e[0]||(e[0]=n=>s(t).name=n),placeholder:"Masukkan nama lengkap",class:g({"border-destructive":s(t).errors.name}),required:""},null,8,["modelValue","class"]),e[16]||(e[16]=r("p",{class:"text-xs text-muted-foreground"}," Nama lengkap sesuai identitas, maksimal 255 karakter ",-1)),s(t).errors.name?(i(),d("p",ae,u(s(t).errors.name),1)):m("",!0)]),r("div",re,[a(s(p),{for:"username"},{default:o(()=>[...e[17]||(e[17]=[l("Username *",-1)])]),_:1}),a(s(x),{id:"username",modelValue:s(t).username,"onUpdate:modelValue":e[1]||(e[1]=n=>s(t).username=n),placeholder:"contoh: johndoe123",class:g({"border-destructive":s(t).errors.username}),required:""},null,8,["modelValue","class"]),e[18]||(e[18]=r("p",{class:"text-xs text-muted-foreground"}," Username untuk login. Hanya boleh huruf, angka, dash (-) dan underscore (_) ",-1)),s(t).errors.username?(i(),d("p",oe,u(s(t).errors.username),1)):m("",!0)]),r("div",ne,[a(s(p),{for:"email"},{default:o(()=>[...e[19]||(e[19]=[l("Email *",-1)])]),_:1}),a(s(x),{id:"email",modelValue:s(t).email,"onUpdate:modelValue":e[2]||(e[2]=n=>s(t).email=n),type:"email",placeholder:"nama@email.com",class:g({"border-destructive":s(t).errors.email}),required:""},null,8,["modelValue","class"]),e[20]||(e[20]=r("p",{class:"text-xs text-muted-foreground"}," Email aktif untuk menerima notifikasi dan verifikasi akun ",-1)),s(t).errors.email?(i(),d("p",le,u(s(t).errors.email),1)):m("",!0)]),r("div",de,[a(s(p),{for:"phone"},{default:o(()=>[...e[21]||(e[21]=[l("No. Telepon",-1)])]),_:1}),a(s(x),{id:"phone",modelValue:s(t).phone,"onUpdate:modelValue":e[3]||(e[3]=n=>s(t).phone=n),placeholder:"08xxxxxxxxxx",class:g({"border-destructive":s(t).errors.phone})},null,8,["modelValue","class"]),e[22]||(e[22]=r("p",{class:"text-xs text-muted-foreground"}," Nomor telepon aktif (opsional), maksimal 20 karakter ",-1)),s(t).errors.phone?(i(),d("p",ie,u(s(t).errors.phone),1)):m("",!0)]),r("div",ue,[a(s(p),{for:"registration_amount"},{default:o(()=>[...e[23]||(e[23]=[l("Biaya Registrasi *",-1)])]),_:1}),a(s(x),{id:"registration_amount",modelValue:s(t).registration_amount,"onUpdate:modelValue":e[4]||(e[4]=n=>s(t).registration_amount=n),modelModifiers:{number:!0},type:"number",min:"0",step:"1000",class:g({"border-destructive":s(t).errors.registration_amount}),required:""},null,8,["modelValue","class"]),e[24]||(e[24]=r("p",{class:"text-xs text-muted-foreground"}," Biaya pendaftaran dalam Rupiah (Rp), minimal 0 ",-1)),s(t).errors.registration_amount?(i(),d("p",me,u(s(t).errors.registration_amount),1)):m("",!0)]),r("div",pe,[a(s(p),{for:"password"},{default:o(()=>[...e[25]||(e[25]=[l("Password *",-1)])]),_:1}),a(s(x),{id:"password",modelValue:s(t).password,"onUpdate:modelValue":e[5]||(e[5]=n=>s(t).password=n),type:"password",placeholder:"Minimal 8 karakter",class:g({"border-destructive":s(t).errors.password}),required:""},null,8,["modelValue","class"]),e[26]||(e[26]=r("p",{class:"text-xs text-muted-foreground"}," Password minimal 8 karakter, gunakan kombinasi huruf dan angka ",-1)),s(t).errors.password?(i(),d("p",fe,u(s(t).errors.password),1)):m("",!0)]),r("div",ge,[a(s(p),{for:"password_confirmation"},{default:o(()=>[...e[27]||(e[27]=[l("Konfirmasi Password *",-1)])]),_:1}),a(s(x),{id:"password_confirmation",modelValue:s(t).password_confirmation,"onUpdate:modelValue":e[6]||(e[6]=n=>s(t).password_confirmation=n),type:"password",placeholder:"Ulangi password",required:""},null,8,["modelValue"]),e[28]||(e[28]=r("p",{class:"text-xs text-muted-foreground"}," Ketik ulang password yang sama untuk konfirmasi ",-1))])]),r("div",xe,[a(s(p),{for:"description"},{default:o(()=>[...e[29]||(e[29]=[l("Keterangan",-1)])]),_:1}),G(r("textarea",{id:"description","onUpdate:modelValue":e[7]||(e[7]=n=>s(t).description=n),placeholder:"Keterangan tambahan (opsional)",rows:"3",class:"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm"},null,512),[[I,s(t).description]]),e[30]||(e[30]=r("p",{class:"text-xs text-muted-foreground"}," Catatan tambahan tentang pelanggan, seperti sumber referral atau informasi penting lainnya ",-1))])]),_:1})]),_:1}),a(s(C),null,{default:o(()=>[a(s(L),null,{default:o(()=>[a(s(B),null,{default:o(()=>[...e[31]||(e[31]=[l("Struktur Jaringan MLM",-1)])]),_:1}),a(s(h),null,{default:o(()=>[...e[32]||(e[32]=[l(" Pilih sponsor dan status pelanggan ",-1)])]),_:1})]),_:1}),a(s(U),{class:"space-y-4"},{default:o(()=>[r("div",_e,[r("div",ke,[a(s(p),{for:"sponsor"},{default:o(()=>[...e[33]||(e[33]=[l("Sponsor",-1)])]),_:1}),r("div",ve,[r("div",be,[a(s(x),{modelValue:_.value,"onUpdate:modelValue":e[8]||(e[8]=n=>_.value=n),onFocus:e[9]||(e[9]=n=>k.value=!0),onBlur:K,placeholder:"Cari sponsor berdasarkan nama atau ID...",class:g({"border-destructive":s(t).errors.sponsor_id})},null,8,["modelValue","class"]),a(s(J),{class:"absolute right-3 top-3 h-4 w-4 text-muted-foreground"})]),k.value&&w.value.length>0?(i(),d("div",ce,[(i(!0),d(M,null,A(w.value,n=>(i(),d("button",{key:n.id,type:"button",onClick:Le=>D(n),class:"w-full rounded px-3 py-2 text-left text-sm hover:bg-accent"},[r("div",we,u(n.name),1),r("div",Ve,u(n.ewallet_id),1)],8,ye))),128))])):m("",!0)]),c.value?(i(),d("div",Se,[r("p",$e,u(c.value.name),1),r("p",Me,u(c.value.ewallet_id),1)])):m("",!0),e[34]||(e[34]=r("p",{class:"text-xs text-muted-foreground"}," Member yang merekomendasikan pelanggan ini (opsional). Kosongkan jika tidak ada sponsor ",-1)),s(t).errors.sponsor_id?(i(),d("p",Pe,u(s(t).errors.sponsor_id),1)):m("",!0)]),r("div",Ce,[a(s(p),{for:"status"},{default:o(()=>[...e[35]||(e[35]=[l("Status *",-1)])]),_:1}),a(s(Q),{modelValue:s(t).status,"onUpdate:modelValue":e[10]||(e[10]=n=>s(t).status=n)},{default:o(()=>[a(s(Z),{class:g({"border-destructive":s(t).errors.status})},{default:o(()=>[a(s(W),{placeholder:"Pilih status"})]),_:1},8,["class"]),a(s(X),null,{default:o(()=>[a(s(N),{value:3},{default:o(()=>[...e[36]||(e[36]=[l("Prospek",-1)])]),_:1}),a(s(N),{value:2},{default:o(()=>[...e[37]||(e[37]=[l("Pasif",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e[38]||(e[38]=r("p",{class:"text-xs text-muted-foreground"},[r("strong",null,"Prospek:"),l(" Calon member, belum masuk jaringan MLM"),r("br"),r("strong",null,"Pasif:"),l(" Sudah terdaftar tapi belum aktif bertransaksi ")],-1)),s(t).errors.status?(i(),d("p",Ue,u(s(t).errors.status),1)):m("",!0)])])]),_:1})]),_:1}),r("div",he,[a(s($),{href:s(P).url()},{default:o(()=>[a(s(y),{type:"button",variant:"outline"},{default:o(()=>[...e[39]||(e[39]=[l(" Batal ",-1)])]),_:1})]),_:1},8,["href"]),a(s(y),{type:"submit",disabled:s(t).processing},{default:o(()=>[l(u(s(t).processing?"Menyimpan...":"Simpan Pelanggan"),1)]),_:1},8,["disabled"])])],32)])]),_:1})],64))}});export{Qe as default};
