import{d as M,r as E,p as I,v as y,g as u,b as t,u as a,a1 as Q,w as l,e as n,t as f,c as i,a4 as S,s,Y as R,Z as q,P as G,aR as J,F as C,x as F,K as v,aU as O,ar as W,$ as Y,z as Z,j as k,Q as h}from"./vendor-DfMbnFaR.js";import{_ as X}from"./AppLayout.vue_vue_type_script_setup_true_lang-3Xwj2Srj.js";import{_ as b}from"./index-Qe8U7avD.js";import{_ as g}from"./index-BhPH699V.js";import{_ as H,a as j}from"./CardContent.vue_vue_type_script_setup_true_lang-NxxB_dAy.js";import{_ as aa}from"./CardDescription.vue_vue_type_script_setup_true_lang-DW_PX5BW.js";import{_ as ea}from"./CardHeader.vue_vue_type_script_setup_true_lang-Kdg7L6IL.js";import{_ as ta}from"./CardTitle.vue_vue_type_script_setup_true_lang-Cj4ck2dV.js";import{_ as la}from"./Input.vue_vue_type_script_setup_true_lang-Bi8Aupzl.js";import{_ as sa,a as ra,b as V,c as m,d as ua,e as d}from"./TableHeader.vue_vue_type_script_setup_true_lang-PuAkTm4y.js";import{_ as na,a as ia,b as da,c as oa,d as A}from"./SelectValue.vue_vue_type_script_setup_true_lang-VBwlv4qP.js";import{_ as fa,a as ma,b as _a,d as pa,e as K,c as T}from"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-NxThyEhC.js";import{u as ca}from"./usePermissions-Bdkvyget.js";import"./index-CSEUMRIG.js";import"./AvatarFallback.vue_vue_type_script_setup_true_lang-Bqij1zEj.js";import"./AvatarImage.vue_vue_type_script_setup_true_lang-BOYUcfDs.js";import"./index-DnSHhU6t.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DrG-1awo.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-CpOM3BUc.js";const va={class:"container mx-auto py-6 space-y-6"},ga={class:"flex items-center justify-between"},xa={class:"flex flex-col md:flex-row gap-4"},$a={class:"flex-1 relative"},ya={class:"text-xs bg-muted px-2 py-1 rounded"},ka={key:0,class:"flex justify-center"},ba={class:"flex items-center gap-2"},wa=["innerHTML"],Qa=M({__name:"Index",props:{pages:{},filters:{}},setup(p){const{isSuperAdmin:x,isAdmin:$}=ca(),D=p,c=E(D.filters.search||""),_=E(D.filters.status||"all"),w=()=>{k.get("/admin/pages",{search:c.value||void 0,status:_.value!=="all"?_.value:void 0},{preserveState:!0,preserveScroll:!0})},L=()=>{c.value="",_.value="all",k.get("/admin/pages")},B=o=>{const e=Object.values(o)[0];return typeof e=="string"?e:Array.isArray(e)&&typeof e[0]=="string"?e[0]:"Gagal menghapus halaman. Silakan coba lagi."},N=o=>{confirm("Apakah Anda yakin ingin menghapus halaman ini?")&&k.delete(`/admin/pages/${o}`,{preserveScroll:!0,onSuccess:e=>{const r=e.props.flash;if(r?.error){h.error(r.error);return}h.success(r?.success||"Halaman berhasil dihapus.")},onError:e=>{h.error(B(e))}})},U=I(()=>!!c.value||_.value!=="all"),z=o=>({default:"Default","full-width":"Full Width",narrow:"Narrow"})[o]||o;return(o,e)=>(u(),y(C,null,[t(a(Q),{title:"Kelola Halaman"}),t(X,null,{default:l(()=>[n("div",va,[n("div",ga,[e[3]||(e[3]=n("div",null,[n("h1",{class:"text-3xl font-bold tracking-tight"},"Kelola Halaman"),n("p",{class:"text-muted-foreground mt-1"}," Kelola semua halaman statis di website Anda ")],-1)),a(x)||a($)?(u(),i(a(S),{key:0,href:"/admin/pages/create"},{default:l(()=>[a(x)||a($)?(u(),i(a(g),{key:0},{default:l(()=>[t(a(R),{class:"h-4 w-4 mr-2"}),e[2]||(e[2]=s(" Tambah Halaman ",-1))]),_:1})):f("",!0)]),_:1})):f("",!0)]),t(a(H),null,{default:l(()=>[t(a(ea),null,{default:l(()=>[t(a(ta),null,{default:l(()=>[...e[4]||(e[4]=[s("Filter & Pencarian",-1)])]),_:1}),t(a(aa),null,{default:l(()=>[...e[5]||(e[5]=[s("Cari dan filter halaman",-1)])]),_:1})]),_:1}),t(a(j),null,{default:l(()=>[n("div",xa,[n("div",$a,[t(a(q),{class:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),t(a(la),{modelValue:c.value,"onUpdate:modelValue":e[0]||(e[0]=r=>c.value=r),placeholder:"Cari berdasarkan judul atau slug...",class:"pl-10",onKeydown:G(w,["enter"])},null,8,["modelValue"])]),t(a(na),{modelValue:_.value,"onUpdate:modelValue":[e[1]||(e[1]=r=>_.value=r),w]},{default:l(()=>[t(a(ia),{class:"w-full md:w-[200px]"},{default:l(()=>[t(a(da),{placeholder:"Status"})]),_:1}),t(a(oa),null,{default:l(()=>[t(a(A),{value:"all"},{default:l(()=>[...e[6]||(e[6]=[s("Semua Status",-1)])]),_:1}),t(a(A),{value:"published"},{default:l(()=>[...e[7]||(e[7]=[s("Published",-1)])]),_:1}),t(a(A),{value:"draft"},{default:l(()=>[...e[8]||(e[8]=[s("Draft",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(a(g),{onClick:w},{default:l(()=>[...e[9]||(e[9]=[s("Cari",-1)])]),_:1}),U.value?(u(),i(a(g),{key:0,onClick:L,variant:"outline"},{default:l(()=>[...e[10]||(e[10]=[s(" Reset ",-1)])]),_:1})):f("",!0)])]),_:1})]),_:1}),t(a(H),null,{default:l(()=>[t(a(j),{class:"p-0"},{default:l(()=>[t(a(sa),null,{default:l(()=>[t(a(ra),null,{default:l(()=>[t(a(V),null,{default:l(()=>[t(a(m),null,{default:l(()=>[...e[11]||(e[11]=[s("Judul",-1)])]),_:1}),t(a(m),null,{default:l(()=>[...e[12]||(e[12]=[s("Slug",-1)])]),_:1}),t(a(m),null,{default:l(()=>[...e[13]||(e[13]=[s("Template",-1)])]),_:1}),t(a(m),null,{default:l(()=>[...e[14]||(e[14]=[s("Urutan",-1)])]),_:1}),t(a(m),null,{default:l(()=>[...e[15]||(e[15]=[s("Status",-1)])]),_:1}),t(a(m),null,{default:l(()=>[...e[16]||(e[16]=[s("Tanggal Dibuat",-1)])]),_:1}),t(a(m),{class:"text-right"},{default:l(()=>[...e[17]||(e[17]=[s("Aksi",-1)])]),_:1})]),_:1})]),_:1}),t(a(ua),null,{default:l(()=>[p.pages.data.length===0?(u(),i(a(V),{key:0},{default:l(()=>[t(a(d),{colspan:"7",class:"text-center py-8 text-muted-foreground"},{default:l(()=>[t(a(J),{class:"h-12 w-12 mx-auto mb-2 opacity-20"}),e[18]||(e[18]=n("p",null,"Belum ada halaman",-1))]),_:1})]),_:1})):f("",!0),(u(!0),y(C,null,F(p.pages.data,r=>(u(),i(a(V),{key:r.id},{default:l(()=>[t(a(d),{class:"font-medium"},{default:l(()=>[s(v(r.title),1)]),_:2},1024),t(a(d),null,{default:l(()=>[n("code",ya,v(r.slug),1)]),_:2},1024),t(a(d),null,{default:l(()=>[t(a(b),{variant:"outline"},{default:l(()=>[s(v(z(r.template)),1)]),_:2},1024)]),_:2},1024),t(a(d),null,{default:l(()=>[t(a(b),{variant:"secondary"},{default:l(()=>[s(v(r.order),1)]),_:2},1024)]),_:2},1024),t(a(d),null,{default:l(()=>[r.is_published?(u(),i(a(b),{key:0,variant:"default"},{default:l(()=>[...e[19]||(e[19]=[s(" Published ",-1)])]),_:1})):(u(),i(a(b),{key:1,variant:"secondary"},{default:l(()=>[...e[20]||(e[20]=[s(" Draft ",-1)])]),_:1}))]),_:2},1024),t(a(d),{class:"text-sm text-muted-foreground"},{default:l(()=>[s(v(new Date(r.created_at).toLocaleDateString("id-ID")),1)]),_:2},1024),t(a(d),{class:"text-right"},{default:l(()=>[t(a(fa),null,{default:l(()=>[t(a(ma),{"as-child":""},{default:l(()=>[t(a(g),{variant:"ghost",size:"icon"},{default:l(()=>[t(a(O),{class:"h-4 w-4"})]),_:1})]),_:1}),t(a(_a),{align:"end"},{default:l(()=>[t(a(pa),null,{default:l(()=>[...e[21]||(e[21]=[s("Aksi",-1)])]),_:1}),t(a(K)),a(x)||a($)?(u(),i(a(S),{key:0,href:`/page/${r.slug}`,target:"_blank"},{default:l(()=>[t(a(T),null,{default:l(()=>[t(a(W),{class:"h-4 w-4 mr-2"}),e[22]||(e[22]=s(" Lihat ",-1))]),_:1})]),_:1},8,["href"])):f("",!0),t(a(S),{href:`/admin/pages/${r.id}/edit`},{default:l(()=>[t(a(T),null,{default:l(()=>[t(a(Y),{class:"h-4 w-4 mr-2"}),e[23]||(e[23]=s(" Edit ",-1))]),_:1})]),_:1},8,["href"]),t(a(K)),a(x)||a($)?(u(),i(a(T),{key:1,onClick:P=>N(r.id),class:"text-destructive focus:text-destructive"},{default:l(()=>[t(a(Z),{class:"h-4 w-4 mr-2"}),e[24]||(e[24]=s(" Hapus ",-1))]),_:1},8,["onClick"])):f("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1}),p.pages.last_page>1?(u(),y("div",ka,[n("nav",ba,[(u(!0),y(C,null,F(p.pages.links,(r,P)=>(u(),i(a(g),{key:P,variant:r.active?"default":"outline",disabled:!r.url,size:"sm",onClick:Sa=>r.url&&a(k).visit(r.url)},{default:l(()=>[n("span",{innerHTML:r.label},null,8,wa)]),_:2},1032,["variant","disabled","onClick"]))),128))])])):f("",!0)])]),_:1})],64))}});export{Qa as default};
