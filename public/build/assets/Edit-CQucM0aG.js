import{d as Q,p as h,r as B,D as W,v as n,g as d,b as s,u as e,a1 as X,w as a,e as l,a4 as L,s as o,G as Y,ae as ee,K as u,c as y,t as b,J as v,ah as te,al as se,F as f,Z as ae,x as j,Q as U}from"./vendor-FclwbLvj.js";import{i as K,_ as le,u as re}from"./AppLayout.vue_vue_type_script_setup_true_lang-BpcLPOXg.js";import{_ as E}from"./index-B4cH97KR.js";import{_ as w}from"./Input.vue_vue_type_script_setup_true_lang-ZVESK4JK.js";import{_ as g}from"./Label.vue_vue_type_script_setup_true_lang-CTFNLsIT.js";import{_ as V,a as S}from"./CardContent.vue_vue_type_script_setup_true_lang-LKEwQoWP.js";import{_ as A}from"./CardDescription.vue_vue_type_script_setup_true_lang-CC80hHWr.js";import{_ as $}from"./CardHeader.vue_vue_type_script_setup_true_lang-N3E9ALN1.js";import{_ as M}from"./CardTitle.vue_vue_type_script_setup_true_lang-Mk0zvokq.js";import{_}from"./index-CRPqrtU2.js";import{_ as I,a as T,b as F,c as R,d as Z}from"./SelectValue.vue_vue_type_script_setup_true_lang-BqISnkMA.js";import"./index-CMWG4mbA.js";import"./AvatarFallback.vue_vue_type_script_setup_true_lang-ByVucR83.js";import"./AvatarImage.vue_vue_type_script_setup_true_lang-9OZOAxj9.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-D90ORJgI.js";import"./index-B_n2dl-_.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-ZLo4HemS.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-DuXcz617.js";const oe={class:"rounded-xl p-4 space-y-6 py-6"},de={class:"flex items-center justify-between"},ne={class:"flex items-center justify-between"},ie={class:"flex items-center gap-2"},ue={class:"grid gap-4 md:grid-cols-2"},me={class:"space-y-2"},fe={key:0,class:"text-sm text-destructive"},pe={class:"space-y-2"},ke={key:0,class:"text-sm text-destructive"},ce={class:"space-y-2"},ve={key:0,class:"text-sm text-destructive"},ge={class:"space-y-2"},be={key:0,class:"text-sm text-destructive"},_e={class:"space-y-2"},xe={class:"grid gap-4 md:grid-cols-3"},ye={class:"space-y-2"},we={key:0,class:"flex items-center justify-between rounded-md border p-3"},he={class:"font-medium"},Pe={class:"text-xs text-muted-foreground"},Ve={key:1,class:"relative"},Se={class:"relative"},Ae={key:0,class:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md border bg-popover p-1 shadow-md"},$e=["onClick"],Me={class:"font-medium"},Ne={class:"text-xs text-muted-foreground"},Ue={key:2,class:"text-sm text-destructive"},Ee={key:1,class:"rounded-md border bg-muted p-3"},Ce={class:"text-sm font-medium"},je={class:"space-y-2"},De={class:"rounded-md border bg-muted p-3"},Be={class:"text-sm font-medium"},Le={class:"space-y-2"},Ke={class:"rounded-md border bg-muted p-3"},Ie={key:1,class:"text-sm"},Te={class:"flex items-center gap-2"},Fe={class:"text-sm text-muted-foreground"},Re={class:"space-y-4"},Ze={class:"space-y-2"},qe={key:0,class:"text-sm text-destructive"},ze={class:"rounded-md border bg-muted p-3"},He={key:1,class:"text-sm text-muted-foreground"},Ge={class:"flex items-center gap-2"},Je={class:"text-sm text-muted-foreground"},Oe={class:"space-y-4"},Qe={class:"space-y-2"},We={key:0,class:"text-sm text-destructive"},Xe={class:"rounded-md border bg-muted p-3"},Ye={key:1,class:"text-sm text-muted-foreground"},et={class:"flex items-center gap-2"},tt={class:"text-sm text-muted-foreground"},st={class:"grid gap-4 md:grid-cols-2"},at={class:"space-y-2"},lt={key:0,class:"text-sm text-destructive"},rt={class:"space-y-2"},ot={class:"flex justify-end gap-4"},St=Q({__name:"Edit",props:{customer:{},customers:{},packages:{},levels:{}},setup(m){const k=m,x=h(()=>k.customer.status===1),c=h(()=>k.customer.status===3),P=B(""),N=B(!1),D=h(()=>{if(!P.value)return k.customers;const p=P.value.toLowerCase();return k.customers.filter(t=>(t.name?.toLowerCase().includes(p)??!1)||(t.ewallet_id?.toLowerCase().includes(p)??!1)||(t.username?.toLowerCase().includes(p)??!1))}),C=h(()=>k.customers.find(p=>p.id===r.sponsor_id)),r=W({name:k.customer.name,username:k.customer.username,email:k.customer.email,phone:k.customer.phone||"",password:"",password_confirmation:"",description:k.customer.description||"",sponsor_id:k.customer.sponsor_id,package_id:k.customer.package_id?.toString()||"",level:k.customer.level||""}),q=h(()=>r.package_id&&k.packages.find(t=>t.id.toString()===r.package_id)?.name||null),z=h(()=>r.level&&k.levels.find(t=>t.value===r.level)?.label||null),H=p=>{r.sponsor_id=p.id,N.value=!1,P.value=""},G=()=>{r.sponsor_id=null},J=()=>{typeof window<"u"&&window.setTimeout(()=>{N.value=!1},200)},O=()=>{r.transform(p=>({...p,package_id:p.package_id?parseInt(p.package_id,10):null,level:p.level||null})).put(re.url(k.customer.id),{preserveScroll:!0,onSuccess:()=>{U.success("Data pelanggan berhasil diperbarui")},onError:p=>{const t=Object.values(p);t.length>0?(U.error(t[0]),t.length>1&&U.warning(`Terdapat ${t.length} kesalahan pada form. Silakan periksa kembali.`)):U.error("Gagal memperbarui data pelanggan. Silakan periksa data yang dimasukkan.")}})};return(p,t)=>(d(),n(f,null,[s(e(X),{title:`Edit ${m.customer.name}`},null,8,["title"]),s(le,null,{default:a(()=>[l("div",oe,[l("div",de,[t[12]||(t[12]=l("div",null,[l("h1",{class:"text-3xl font-bold"},"Edit Pelanggan"),l("p",{class:"mt-2 text-muted-foreground"}," Perbarui informasi pelanggan ")],-1)),s(e(L),{href:e(K).url()},{default:a(()=>[s(e(E),{variant:"outline"},{default:a(()=>[s(e(Y),{class:"mr-2 h-4 w-4"}),t[11]||(t[11]=o(" Kembali ",-1))]),_:1})]),_:1},8,["href"])]),l("form",{onSubmit:ee(O,["prevent"]),class:"space-y-6"},[s(e(V),null,{default:a(()=>[s(e($),null,{default:a(()=>[l("div",ne,[l("div",null,[s(e(M),null,{default:a(()=>[...t[13]||(t[13]=[o("Informasi Akun",-1)])]),_:1}),s(e(A),null,{default:a(()=>[o("ID Ewallet: "+u(m.customer.ewallet_id),1)]),_:1})]),l("div",ie,[s(e(_),{variant:"outline"},{default:a(()=>[o(" Saldo: Rp "+u(m.customer.ewallet_saldo.toLocaleString("id-ID")),1)]),_:1}),m.customer.email_verified_at?(d(),y(e(_),{key:0,variant:"default"},{default:a(()=>[...t[14]||(t[14]=[o(" Terverifikasi ",-1)])]),_:1})):(d(),y(e(_),{key:1,variant:"secondary"},{default:a(()=>[...t[15]||(t[15]=[o(" Belum Verifikasi ",-1)])]),_:1}))])])]),_:1}),s(e(S),{class:"space-y-4"},{default:a(()=>[l("div",ue,[l("div",me,[s(e(g),{for:"name"},{default:a(()=>[...t[16]||(t[16]=[o("Nama Lengkap *",-1)])]),_:1}),s(e(w),{id:"name",modelValue:e(r).name,"onUpdate:modelValue":t[0]||(t[0]=i=>e(r).name=i),placeholder:"Masukkan nama lengkap",class:v({"border-destructive":e(r).errors.name}),required:""},null,8,["modelValue","class"]),t[17]||(t[17]=l("p",{class:"text-xs text-muted-foreground"}," Nama lengkap sesuai identitas, maksimal 255 karakter ",-1)),e(r).errors.name?(d(),n("p",fe,u(e(r).errors.name),1)):b("",!0)]),l("div",pe,[s(e(g),{for:"username"},{default:a(()=>[...t[18]||(t[18]=[o("Username *",-1)])]),_:1}),s(e(w),{id:"username",modelValue:e(r).username,"onUpdate:modelValue":t[1]||(t[1]=i=>e(r).username=i),placeholder:"contoh: johndoe123",class:v({"border-destructive":e(r).errors.username}),required:""},null,8,["modelValue","class"]),t[19]||(t[19]=l("p",{class:"text-xs text-muted-foreground"}," Username untuk login. Hanya boleh huruf, angka, dash (-) dan underscore (_) ",-1)),e(r).errors.username?(d(),n("p",ke,u(e(r).errors.username),1)):b("",!0)]),l("div",ce,[s(e(g),{for:"email"},{default:a(()=>[...t[20]||(t[20]=[o("Email *",-1)])]),_:1}),s(e(w),{id:"email",modelValue:e(r).email,"onUpdate:modelValue":t[2]||(t[2]=i=>e(r).email=i),type:"email",placeholder:"nama@email.com",class:v({"border-destructive":e(r).errors.email}),required:""},null,8,["modelValue","class"]),t[21]||(t[21]=l("p",{class:"text-xs text-muted-foreground"}," Email aktif untuk notifikasi dan verifikasi. Satu email dapat digunakan maksimal 7 akun. ",-1)),e(r).errors.email?(d(),n("p",ve,u(e(r).errors.email),1)):b("",!0)]),l("div",ge,[s(e(g),{for:"phone"},{default:a(()=>[...t[22]||(t[22]=[o("No. Telepon",-1)])]),_:1}),s(e(w),{id:"phone",modelValue:e(r).phone,"onUpdate:modelValue":t[3]||(t[3]=i=>e(r).phone=i),placeholder:"08xxxxxxxxxx",class:v({"border-destructive":e(r).errors.phone})},null,8,["modelValue","class"]),t[23]||(t[23]=l("p",{class:"text-xs text-muted-foreground"}," Nomor telepon aktif (opsional), maksimal 20 karakter ",-1)),e(r).errors.phone?(d(),n("p",be,u(e(r).errors.phone),1)):b("",!0)])]),l("div",_e,[s(e(g),{for:"description"},{default:a(()=>[...t[24]||(t[24]=[o("Keterangan",-1)])]),_:1}),te(l("textarea",{id:"description","onUpdate:modelValue":t[4]||(t[4]=i=>e(r).description=i),placeholder:"Keterangan tambahan (opsional)",rows:"3",class:"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm"},null,512),[[se,e(r).description]]),t[25]||(t[25]=l("p",{class:"text-xs text-muted-foreground"}," Catatan tambahan tentang pelanggan, seperti sumber referral atau informasi penting lainnya ",-1))])]),_:1})]),_:1}),s(e(V),null,{default:a(()=>[s(e($),null,{default:a(()=>[s(e(M),null,{default:a(()=>[...t[26]||(t[26]=[o("Informasi Jaringan MLM",-1)])]),_:1}),s(e(A),null,{default:a(()=>[x.value?(d(),n(f,{key:0},[o(" Sponsor dapat diubah untuk member Prospek ")],64)):(d(),n(f,{key:1},[o(" Data jaringan tidak dapat diubah untuk member aktif/pasif ")],64))]),_:1})]),_:1}),s(e(S),null,{default:a(()=>[l("div",xe,[l("div",ye,[s(e(g),{class:v({"text-muted-foreground":!x.value})},{default:a(()=>[...t[27]||(t[27]=[o("Sponsor",-1)])]),_:1},8,["class"]),x.value?(d(),n(f,{key:0},[C.value?(d(),n("div",we,[l("div",null,[l("p",he,u(C.value.name),1),l("p",Pe,u(C.value.ewallet_id),1)]),s(e(E),{type:"button",variant:"ghost",size:"sm",onClick:G},{default:a(()=>[...t[28]||(t[28]=[o(" Hapus ",-1)])]),_:1})])):(d(),n("div",Ve,[l("div",Se,[s(e(w),{modelValue:P.value,"onUpdate:modelValue":t[5]||(t[5]=i=>P.value=i),onFocus:t[6]||(t[6]=i=>N.value=!0),onBlur:J,placeholder:"Cari sponsor berdasarkan nama atau ID...",class:v({"border-destructive":e(r).errors.sponsor_id})},null,8,["modelValue","class"]),s(e(ae),{class:"absolute right-3 top-3 h-4 w-4 text-muted-foreground"})]),N.value&&D.value.length>0?(d(),n("div",Ae,[(d(!0),n(f,null,j(D.value,i=>(d(),n("button",{key:i.id,type:"button",onClick:dt=>H(i),class:"w-full rounded px-3 py-2 text-left text-sm hover:bg-accent"},[l("div",Me,u(i.name),1),l("div",Ne,u(i.ewallet_id)+" (@"+u(i.username)+")",1)],8,$e))),128))])):b("",!0)])),t[29]||(t[29]=l("p",{class:"text-xs text-muted-foreground"}," Pilih sponsor baru (opsional). Hanya member Pasif/Aktif yang dapat menjadi sponsor. ",-1)),e(r).errors.sponsor_id?(d(),n("p",Ue,u(e(r).errors.sponsor_id),1)):b("",!0)],64)):(d(),n("div",Ee,[l("p",Ce,u(m.customer.sponsor_name||"-"),1)]))]),l("div",je,[s(e(g),{class:"text-muted-foreground"},{default:a(()=>[...t[30]||(t[30]=[o("Upline",-1)])]),_:1}),l("div",De,[l("p",Be,u(m.customer.upline_name||"-"),1)])]),l("div",Le,[s(e(g),{class:"text-muted-foreground"},{default:a(()=>[...t[31]||(t[31]=[o("Posisi",-1)])]),_:1}),l("div",Ke,[m.customer.position?(d(),y(e(_),{key:0,variant:"outline"},{default:a(()=>[o(u(m.customer.position==="left"?"Kiri":"Kanan"),1)]),_:1})):(d(),n("span",Ie,"-"))])])]),l("div",{class:v(["mt-4 rounded-md border p-3",{"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-900":x.value,"bg-muted":!x.value}])},[l("div",Te,[s(e(_),{variant:x.value?"secondary":"default"},{default:a(()=>[o(u(m.customer.status===1?"Prospek":m.customer.status===2?"Pasif":"Aktif"),1)]),_:1},8,["variant"]),l("span",Fe,[x.value?(d(),n(f,{key:0},[o(" Member ini masih berstatus Prospek, sponsor dapat diubah. ")],64)):(d(),n(f,{key:1},[o(" Member ini sudah "+u(m.customer.status===2?"Pasif":"Aktif")+", jaringan tidak dapat diubah. ",1)],64))])])],2)]),_:1})]),_:1}),s(e(V),null,{default:a(()=>[s(e($),null,{default:a(()=>[s(e(M),null,{default:a(()=>[...t[32]||(t[32]=[o("Paket Member",-1)])]),_:1}),s(e(A),null,{default:a(()=>[c.value?(d(),n(f,{key:0},[o(" Paket dapat diubah untuk member Aktif ")],64)):(d(),n(f,{key:1},[o(" Paket hanya dapat diubah untuk member dengan status Aktif ")],64))]),_:1})]),_:1}),s(e(S),null,{default:a(()=>[l("div",Re,[l("div",Ze,[s(e(g),{class:v({"text-muted-foreground":!c.value})},{default:a(()=>[...t[33]||(t[33]=[o("Paket Saat Ini",-1)])]),_:1},8,["class"]),c.value?(d(),n(f,{key:0},[s(e(I),{modelValue:e(r).package_id,"onUpdate:modelValue":t[7]||(t[7]=i=>e(r).package_id=i)},{default:a(()=>[s(e(T),{class:v({"border-destructive":e(r).errors.package_id})},{default:a(()=>[s(e(F),{placeholder:"Pilih paket"},{default:a(()=>[o(u(q.value||"Pilih paket"),1)]),_:1})]),_:1},8,["class"]),s(e(R),null,{default:a(()=>[(d(!0),n(f,null,j(m.packages,i=>(d(),y(e(Z),{key:i.id,value:i.id.toString()},{default:a(()=>[o(u(i.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),t[34]||(t[34]=l("p",{class:"text-xs text-muted-foreground"}," Pilih paket untuk member ini: ZENNER Plus, ZENNER Prime, atau ZENNER Ultra ",-1)),e(r).errors.package_id?(d(),n("p",qe,u(e(r).errors.package_id),1)):b("",!0)],64)):(d(),n(f,{key:1},[l("div",ze,[m.customer.package_id?(d(),y(e(_),{key:0,variant:"outline"},{default:a(()=>[o(u(m.customer.package_name),1)]),_:1})):(d(),n("span",He,"Belum ada paket"))]),t[35]||(t[35]=l("p",{class:"text-xs text-muted-foreground"}," Paket akan ditetapkan saat member melakukan pembelian pertama dan menjadi Aktif. ",-1))],64))]),l("div",{class:v(["rounded-md border p-3",{"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-900":c.value,"bg-muted":!c.value}])},[l("div",Ge,[s(e(_),{variant:c.value?"default":"secondary"},{default:a(()=>[o(u(m.customer.status===1?"Prospek":m.customer.status===2?"Pasif":"Aktif"),1)]),_:1},8,["variant"]),l("span",Je,[c.value?(d(),n(f,{key:0},[o(" Member Aktif - paket dapat diubah. ")],64)):(d(),n(f,{key:1},[o(" Member belum Aktif - paket tidak dapat diubah. ")],64))])])],2)])]),_:1})]),_:1}),s(e(V),null,{default:a(()=>[s(e($),null,{default:a(()=>[s(e(M),null,{default:a(()=>[...t[36]||(t[36]=[o("Peringkat Member",-1)])]),_:1}),s(e(A),null,{default:a(()=>[c.value?(d(),n(f,{key:0},[o(" Peringkat dapat diubah untuk member Aktif ")],64)):(d(),n(f,{key:1},[o(" Peringkat hanya dapat diubah untuk member dengan status Aktif ")],64))]),_:1})]),_:1}),s(e(S),null,{default:a(()=>[l("div",Oe,[l("div",Qe,[s(e(g),{class:v({"text-muted-foreground":!c.value})},{default:a(()=>[...t[37]||(t[37]=[o("Peringkat Saat Ini",-1)])]),_:1},8,["class"]),c.value?(d(),n(f,{key:0},[s(e(I),{modelValue:e(r).level,"onUpdate:modelValue":t[8]||(t[8]=i=>e(r).level=i)},{default:a(()=>[s(e(T),{class:v({"border-destructive":e(r).errors.level})},{default:a(()=>[s(e(F),{placeholder:"Pilih peringkat"},{default:a(()=>[o(u(z.value||"Pilih peringkat"),1)]),_:1})]),_:1},8,["class"]),s(e(R),null,{default:a(()=>[(d(!0),n(f,null,j(m.levels,i=>(d(),y(e(Z),{key:i.value,value:i.value},{default:a(()=>[o(u(i.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),t[38]||(t[38]=l("p",{class:"text-xs text-muted-foreground"}," Pilih peringkat untuk member ini: Associate, Senior Associate, Executive, atau Director ",-1)),e(r).errors.level?(d(),n("p",We,u(e(r).errors.level),1)):b("",!0)],64)):(d(),n(f,{key:1},[l("div",Xe,[m.customer.level?(d(),y(e(_),{key:0,variant:"outline"},{default:a(()=>[o(u(m.customer.level),1)]),_:1})):(d(),n("span",Ye,"Belum ada peringkat"))]),t[39]||(t[39]=l("p",{class:"text-xs text-muted-foreground"}," Peringkat akan ditetapkan saat member menjadi Aktif. ",-1))],64))]),l("div",{class:v(["rounded-md border p-3",{"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-900":c.value,"bg-muted":!c.value}])},[l("div",et,[s(e(_),{variant:c.value?"default":"secondary"},{default:a(()=>[o(u(m.customer.status===1?"Prospek":m.customer.status===2?"Pasif":"Aktif"),1)]),_:1},8,["variant"]),l("span",tt,[c.value?(d(),n(f,{key:0},[o(" Member Aktif - peringkat dapat diubah. ")],64)):(d(),n(f,{key:1},[o(" Member belum Aktif - peringkat tidak dapat diubah. ")],64))])])],2)])]),_:1})]),_:1}),s(e(V),null,{default:a(()=>[s(e($),null,{default:a(()=>[s(e(M),null,{default:a(()=>[...t[40]||(t[40]=[o("Ubah Password",-1)])]),_:1}),s(e(A),null,{default:a(()=>[...t[41]||(t[41]=[o(" Kosongkan jika tidak ingin mengubah password ",-1)])]),_:1})]),_:1}),s(e(S),{class:"space-y-4"},{default:a(()=>[l("div",st,[l("div",at,[s(e(g),{for:"password"},{default:a(()=>[...t[42]||(t[42]=[o("Password Baru",-1)])]),_:1}),s(e(w),{id:"password",modelValue:e(r).password,"onUpdate:modelValue":t[9]||(t[9]=i=>e(r).password=i),type:"password",placeholder:"Minimal 8 karakter",class:v({"border-destructive":e(r).errors.password})},null,8,["modelValue","class"]),t[43]||(t[43]=l("p",{class:"text-xs text-muted-foreground"}," Password minimal 8 karakter, gunakan kombinasi huruf dan angka ",-1)),e(r).errors.password?(d(),n("p",lt,u(e(r).errors.password),1)):b("",!0)]),l("div",rt,[s(e(g),{for:"password_confirmation"},{default:a(()=>[...t[44]||(t[44]=[o("Konfirmasi Password",-1)])]),_:1}),s(e(w),{id:"password_confirmation",modelValue:e(r).password_confirmation,"onUpdate:modelValue":t[10]||(t[10]=i=>e(r).password_confirmation=i),type:"password",placeholder:"Ulangi password"},null,8,["modelValue"]),t[45]||(t[45]=l("p",{class:"text-xs text-muted-foreground"}," Ketik ulang password baru yang sama untuk konfirmasi ",-1))])])]),_:1})]),_:1}),l("div",ot,[s(e(L),{href:e(K).url()},{default:a(()=>[s(e(E),{type:"button",variant:"outline"},{default:a(()=>[...t[46]||(t[46]=[o(" Batal ",-1)])]),_:1})]),_:1},8,["href"]),s(e(E),{type:"submit",disabled:e(r).processing},{default:a(()=>[o(u(e(r).processing?"Menyimpan...":"Simpan Perubahan"),1)]),_:1},8,["disabled"])])],32)])]),_:1})],64))}});export{St as default};
