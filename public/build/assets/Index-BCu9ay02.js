import{_ as g}from"./index-B4cH97KR.js";import{_ as j,a as D}from"./CardContent.vue_vue_type_script_setup_true_lang-LKEwQoWP.js";import{_ as I}from"./CardHeader.vue_vue_type_script_setup_true_lang-N3E9ALN1.js";import{_ as $}from"./CardTitle.vue_vue_type_script_setup_true_lang-Mk0zvokq.js";import{_ as te}from"./Input.vue_vue_type_script_setup_true_lang-ZVESK4JK.js";import{_ as ae,a as se,b as P,c as re,d as le,e as B}from"./TableHeader.vue_vue_type_script_setup_true_lang-BhZiDflO.js";import{_ as oe}from"./AppLayout.vue_vue_type_script_setup_true_lang-ySs7Rre_.js";import{d as ne,a0 as de,r as K,p as z,q as ie,E as L,j as E,c as f,g as d,w as s,b as a,e as l,u as t,a1 as ue,v as p,t as A,s as h,a2 as Q,K as _,a3 as ce,Z as me,F as b,x as y,y as H,n,a4 as w,a5 as fe,a6 as ge,a7 as _e,a8 as pe,a9 as Z,aa as G,ab as J,A as ve,B as xe}from"./vendor-FclwbLvj.js";import"./index-CSEUMRIG.js";import"./AvatarFallback.vue_vue_type_script_setup_true_lang-ByVucR83.js";import"./AvatarImage.vue_vue_type_script_setup_true_lang-9OZOAxj9.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-D90ORJgI.js";import"./index-BUE9bFsX.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-ZLo4HemS.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-DuXcz617.js";const he={class:"rounded-xl p-4 space-y-6 py-6"},be={class:"grid gap-4 md:grid-cols-3"},ye={class:"text-2xl font-bold"},we={class:"text-2xl font-bold"},ke={class:"text-2xl font-bold"},Ce={class:"flex items-center gap-4"},Se={class:"relative flex-1"},je={class:"rounded-md border"},De={key:0,class:"flex items-center justify-between"},Ie={class:"text-sm text-muted-foreground"},$e={class:"flex gap-2"},v="/admin/carts",Qe=ne({__name:"Index",props:{carts:{},statistics:{},filters:{}},setup(W){const X=W,{carts:o,statistics:k,filters:C}=de(X),Y=[{title:"Keranjang Pelanggan",href:v}],m=K(C.value.search||""),i=K([{id:C.value.sort_by||"created_at",desc:C.value.sort_order==="desc"}]),R=e=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(e),O=e=>e?new Date(e).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-",F=e=>e.customer?.name??e.customer_name??"-",ee=e=>e.customer?.email??e.customer_email??"-",M=e=>e.product?.name??e.product_name??"-",N=e=>e.product?.price??e.product?.base_price??e.product_price??0,x=e=>e.quantity??e.qty??0,T=z(()=>o.value.links.find(r=>/prev|previous|&laquo;/i.test(r.label))?.url??null),V=z(()=>o.value.links.find(r=>/next|&raquo;/i.test(r.label))?.url??null),q=[{id:"index",header:()=>n("div",{class:"w-12"},"No"),cell:({row:e})=>{const r=e.index+1+(o.value.current_page-1)*o.value.per_page;return n("div",{class:"font-medium"},String(r))}},{id:"customer_name",header:({column:e})=>n(g,{variant:"ghost",onClick:()=>e.toggleSorting(e.getIsSorted()==="asc"),class:"-ml-4"},()=>["Pelanggan",n(e.getIsSorted()==="asc"?Z:e.getIsSorted()==="desc"?G:J,{class:"ml-2 h-4 w-4"})]),accessorFn:e=>F(e),cell:({row:e})=>{const r=F(e.original),u=ee(e.original);return n("div",[n("div",{class:"font-medium"},r),n("div",{class:"text-xs text-muted-foreground"},u)])}},{id:"product_name",header:()=>"Produk",accessorFn:e=>M(e),cell:({row:e})=>n("div",{class:"max-w-xs truncate"},M(e.original))},{id:"quantity",header:()=>n("div",{class:"text-center"},"Qty"),accessorFn:e=>x(e),cell:({row:e})=>n("div",{class:"text-center font-medium"},String(x(e.original)))},{id:"subtotal",header:()=>n("div",{class:"text-right"},"Subtotal"),accessorFn:e=>N(e)*x(e),cell:({row:e})=>{const r=N(e.original)*x(e.original);return n("div",{class:"text-right font-medium"},R(r))}},{id:"created_at",header:({column:e})=>n(g,{variant:"ghost",onClick:()=>e.toggleSorting(e.getIsSorted()==="asc"),class:"-ml-4"},()=>["Ditambahkan",n(e.getIsSorted()==="asc"?Z:e.getIsSorted()==="desc"?G:J,{class:"ml-2 h-4 w-4"})]),accessorFn:e=>e.created_at??null,cell:({row:e})=>O(e.original.created_at)}],S=ie({get data(){return o.value.data},columns:q,getCoreRowModel:xe(),getSortedRowModel:ve(),state:{get sorting(){return i.value}},onSortingChange:e=>{i.value=typeof e=="function"?e(i.value):e},manualSorting:!0});L(i,e=>{e.length&&E.get(v,{page:1,search:m.value||void 0,sort_by:e[0].id,sort_order:e[0].desc?"desc":"asc"},{preserveState:!0,preserveScroll:!0})},{deep:!0});let U;return L(m,()=>{clearTimeout(U),U=setTimeout(()=>{E.get(v,{page:1,search:m.value||void 0,sort_by:i.value[0]?.id||"created_at",sort_order:i.value[0]?.desc?"desc":"asc"},{preserveState:!0,preserveScroll:!0})},300)}),(e,r)=>(d(),f(oe,{breadcrumbs:Y},{default:s(()=>[a(t(ue),{title:"Keranjang Pelanggan"}),l("div",he,[r[8]||(r[8]=l("div",{class:"flex items-center justify-between"},[l("div",null,[l("h1",{class:"text-3xl font-bold tracking-tight"},"Keranjang Pelanggan"),l("p",{class:"text-muted-foreground"},"Monitor keranjang belanja pelanggan")])],-1)),l("div",be,[a(t(j),null,{default:s(()=>[a(t(I),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[a(t($),{class:"text-sm font-medium"},{default:s(()=>[...r[1]||(r[1]=[h("Total Keranjang",-1)])]),_:1}),a(t(Q),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),a(t(D),null,{default:s(()=>[l("div",ye,_(t(k).total_carts),1),r[2]||(r[2]=l("p",{class:"text-xs text-muted-foreground"},"Aktif",-1))]),_:1})]),_:1}),a(t(j),null,{default:s(()=>[a(t(I),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[a(t($),{class:"text-sm font-medium"},{default:s(()=>[...r[3]||(r[3]=[h("Total Item",-1)])]),_:1}),a(t(ce),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),a(t(D),null,{default:s(()=>[l("div",we,_(t(k).total_items),1),r[4]||(r[4]=l("p",{class:"text-xs text-muted-foreground"},"Produk di keranjang",-1))]),_:1})]),_:1}),a(t(j),null,{default:s(()=>[a(t(I),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[a(t($),{class:"text-sm font-medium"},{default:s(()=>[...r[5]||(r[5]=[h("Nilai Total",-1)])]),_:1}),a(t(Q),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),a(t(D),null,{default:s(()=>[l("div",ke,_(R(t(k).total_value)),1),r[6]||(r[6]=l("p",{class:"text-xs text-muted-foreground"},"Potential revenue",-1))]),_:1})]),_:1})]),l("div",Ce,[l("div",Se,[a(t(me),{class:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),a(t(te),{modelValue:m.value,"onUpdate:modelValue":r[0]||(r[0]=u=>m.value=u),placeholder:"Cari pelanggan atau produk...",class:"pl-9"},null,8,["modelValue"])])]),l("div",je,[a(t(ae),null,{default:s(()=>[a(t(se),null,{default:s(()=>[(d(!0),p(b,null,y(t(S).getHeaderGroups(),u=>(d(),f(t(P),{key:u.id},{default:s(()=>[(d(!0),p(b,null,y(u.headers,c=>(d(),f(t(re),{key:c.id},{default:s(()=>[c.isPlaceholder?A("",!0):(d(),f(t(H),{key:0,render:c.column.columnDef.header,props:c.getContext()},null,8,["render","props"]))]),_:2},1024))),128))]),_:2},1024))),128))]),_:1}),a(t(le),null,{default:s(()=>[t(S).getRowModel().rows?.length?(d(!0),p(b,{key:0},y(t(S).getRowModel().rows,u=>(d(),f(t(P),{key:u.id},{default:s(()=>[(d(!0),p(b,null,y(u.getVisibleCells(),c=>(d(),f(t(B),{key:c.id},{default:s(()=>[a(t(H),{render:c.column.columnDef.cell,props:c.getContext()},null,8,["render","props"])]),_:2},1024))),128))]),_:2},1024))),128)):(d(),f(t(P),{key:1},{default:s(()=>[a(t(B),{colspan:q.length,class:"h-24 text-center"},{default:s(()=>[...r[7]||(r[7]=[h(" Tidak ada data keranjang. ",-1)])]),_:1},8,["colspan"])]),_:1}))]),_:1})]),_:1})]),t(o).last_page>1?(d(),p("div",De,[l("p",Ie," Menampilkan "+_((t(o).current_page-1)*t(o).per_page+1)+" hingga "+_(Math.min(t(o).current_page*t(o).per_page,t(o).total))+" dari "+_(t(o).total)+" hasil ",1),l("div",$e,[a(t(g),{variant:"outline",size:"sm",disabled:t(o).current_page===1,"as-child":""},{default:s(()=>[a(t(w),{href:v,data:{page:1,search:m.value||void 0,sort_by:i.value[0]?.id||"created_at",sort_order:i.value[0]?.desc?"desc":"asc"},"preserve-scroll":"","preserve-state":""},{default:s(()=>[a(t(fe),{class:"h-4 w-4"})]),_:1},8,["data"])]),_:1},8,["disabled"]),a(t(g),{variant:"outline",size:"sm",disabled:!T.value,"as-child":""},{default:s(()=>[a(t(w),{href:T.value||"#","preserve-scroll":"","preserve-state":""},{default:s(()=>[a(t(ge),{class:"h-4 w-4"})]),_:1},8,["href"])]),_:1},8,["disabled"]),a(t(g),{variant:"outline",size:"sm",disabled:!V.value,"as-child":""},{default:s(()=>[a(t(w),{href:V.value||"#","preserve-scroll":"","preserve-state":""},{default:s(()=>[a(t(_e),{class:"h-4 w-4"})]),_:1},8,["href"])]),_:1},8,["disabled"]),a(t(g),{variant:"outline",size:"sm",disabled:t(o).current_page===t(o).last_page,"as-child":""},{default:s(()=>[a(t(w),{href:v,data:{page:t(o).last_page,search:m.value||void 0,sort_by:i.value[0]?.id||"created_at",sort_order:i.value[0]?.desc?"desc":"asc"},"preserve-scroll":"","preserve-state":""},{default:s(()=>[a(t(pe),{class:"h-4 w-4"})]),_:1},8,["data"])]),_:1},8,["disabled"])])])):A("",!0)])]),_:1}))}});export{Qe as default};
