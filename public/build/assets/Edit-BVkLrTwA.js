const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/PageBuilder-CmI2MJvD.js","assets/PageBuilder.vue_vue_type_script_setup_true_lang-CfzOGkld.js","assets/CardContent.vue_vue_type_script_setup_true_lang-CPgAkxDh.js","assets/index-Dgwk259n.js","assets/vendor-u69_SgX4.js","assets/vendor-UvtswsZk.css","assets/CardDescription.vue_vue_type_script_setup_true_lang-BchXfgZM.js","assets/CardHeader.vue_vue_type_script_setup_true_lang-CDPuo1h4.js","assets/CardTitle.vue_vue_type_script_setup_true_lang-DjmDdGQ7.js","assets/Input.vue_vue_type_script_setup_true_lang-B09zx5te.js","assets/Label.vue_vue_type_script_setup_true_lang-fV06lMYE.js","assets/Textarea.vue_vue_type_script_setup_true_lang-BCNWarC9.js","assets/SelectValue.vue_vue_type_script_setup_true_lang-Dglpcc31.js","assets/DialogTitle.vue_vue_type_script_setup_true_lang-DQ6J_eaU.js","assets/DialogFooter.vue_vue_type_script_setup_true_lang-CLunKIAX.js","assets/index-DyUpvQGF.js","assets/PageBuilder-B_VyrZVp.css"])))=>i.map(i=>d[i]);
import{d as z,c as y,g as p,u as t,R as K,U as M,V as G,w as l,W as Q,r as O,D as W,p as F,E as J,e as r,b as s,G as X,t as c,s as u,z as q,K as m,S as L,H as Y,v as _,J as k,N as Z,P as ee,F as te,x as se,X as le,Q as V,j as ae,_ as ie}from"./vendor-u69_SgX4.js";import{_ as ue}from"./AppLayout.vue_vue_type_script_setup_true_lang-CNFjYB-7.js";import{_ as S,a as w}from"./CardContent.vue_vue_type_script_setup_true_lang-CPgAkxDh.js";import{_ as T}from"./CardDescription.vue_vue_type_script_setup_true_lang-BchXfgZM.js";import{_ as A}from"./CardHeader.vue_vue_type_script_setup_true_lang-CDPuo1h4.js";import{_ as C}from"./CardTitle.vue_vue_type_script_setup_true_lang-DjmDdGQ7.js";import{_ as oe}from"./Skeleton.vue_vue_type_script_setup_true_lang-DT8KE3-G.js";import{_ as f}from"./index-Dgwk259n.js";import{_ as b}from"./Input.vue_vue_type_script_setup_true_lang-B09zx5te.js";import{_ as v}from"./Label.vue_vue_type_script_setup_true_lang-fV06lMYE.js";import{_ as re}from"./Textarea.vue_vue_type_script_setup_true_lang-BCNWarC9.js";import{_ as ne}from"./Checkbox.vue_vue_type_script_setup_true_lang-yx4_pKg1.js";import{_ as de}from"./index-DyUpvQGF.js";import{_ as pe,a as me,b as _e,c as ce,d as fe,e as ve,f as ge,g as ke}from"./AlertDialogTitle.vue_vue_type_script_setup_true_lang-CbM4MXOh.js";import"./index-CMWG4mbA.js";import"./AvatarFallback.vue_vue_type_script_setup_true_lang-dvnhmmY7.js";import"./AvatarImage.vue_vue_type_script_setup_true_lang-BW0SaXTm.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-BNRb2ZrY.js";import"./index-DqFeuJ-n.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-41k4hIm2.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-_3dn1dX5.js";const be=z({__name:"AlertDialogTrigger",props:{asChild:{type:Boolean},as:{}},setup(D){const U=D;return(n,E)=>(p(),y(t(K),M(G(U)),{default:l(()=>[Q(n.$slots,"default")]),_:3},16))}}),ye={class:"container mx-auto py-6 space-y-6"},xe={class:"flex items-center justify-between"},he={class:"flex items-center gap-4"},$e={href:"/admin/articles"},Ve={class:"flex gap-2"},Se={class:"grid gap-6 lg:grid-cols-3"},we={class:"lg:col-span-2 space-y-6"},Te={class:"space-y-2"},Ae={key:0,class:"text-sm text-destructive"},Ce={class:"space-y-2"},De={key:0,class:"text-sm text-destructive"},Ue={class:"text-sm text-muted-foreground"},Ee={class:"space-y-2"},Pe={key:0,class:"text-sm text-destructive"},Be={class:"text-sm text-muted-foreground"},Oe={class:"space-y-2"},Je={key:0,class:"text-sm text-destructive"},Ne={class:"text-sm text-muted-foreground"},je={class:"space-y-6"},Fe={class:"flex items-center space-x-2"},Le={key:0,class:"space-y-2"},ze={key:0,class:"text-sm text-destructive"},He={class:"flex gap-2"},Re={key:0,class:"flex flex-wrap gap-2"},Ie={key:1,class:"text-sm text-muted-foreground"},_t=z({__name:"Edit",props:{article:{}},setup(D){const U=Z({loader:()=>ie(()=>import("./PageBuilder-CmI2MJvD.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16])),loadingComponent:{template:'<div class="space-y-4"><Skeleton class="h-12 w-full" /><Skeleton class="h-64 w-full" /><Skeleton class="h-12 w-full" /></div>',components:{Skeleton:oe}}}),n=D,E=o=>{if(!o)return[];try{return JSON.parse(o).map(i=>({id:i.id||`block-${Date.now()}-${Math.random()}`,type:i.type,content:i.content||i.data||{}}))}catch{return[]}},a=O({title:n.article.title,slug:n.article.slug,seo_title:n.article.seo_title||"",seo_description:n.article.seo_description||"",content:n.article.content||"",blocks:E(n.article.content),tags:n.article.tags||[],is_published:n.article.is_published,published_at:n.article.published_at||""}),P=W({}),d=F(()=>P.errors),x=F(()=>P.processing),g=O(!1),h=O(""),H=n.article.slug;J(()=>n.article.content,o=>{a.value.blocks=E(o)},{immediate:!1}),J(()=>a.value.title,o=>{(a.value.slug===N(a.value.title)||a.value.slug===H)&&(a.value.slug=N(o))}),J(()=>a.value.blocks,o=>{a.value.content=JSON.stringify(o)},{deep:!0});const N=o=>o.toString().toLowerCase().trim().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-"),j=()=>{const o=h.value.trim();o&&!a.value.tags.includes(o)&&(a.value.tags.push(o),h.value="")},R=o=>{a.value.tags.splice(o,1)},B=(o=null)=>{const e=o!==null?o:a.value.is_published,i=JSON.stringify(a.value.blocks),$={title:a.value.title,slug:a.value.slug,seo_title:a.value.seo_title,seo_description:a.value.seo_description,content:i,tags:a.value.tags,is_published:e,published_at:e&&!a.value.published_at?new Date().toISOString():a.value.published_at,_method:"PUT"};P.transform(()=>$).post(`/admin/articles/${n.article.id}`,{onSuccess:()=>{V.success("Artikel berhasil diperbarui")},onError:()=>{V.error("Terjadi kesalahan, periksa form Anda")}})},I=()=>{g.value=!0,ae.delete(`/admin/articles/${n.article.id}`,{onSuccess:()=>{V.success("Artikel berhasil dihapus")},onError:()=>{V.error("Gagal menghapus artikel")},onFinish:()=>{g.value=!1}})};return(o,e)=>(p(),y(ue,null,{default:l(()=>[r("div",ye,[r("div",xe,[r("div",he,[s(t(f),{variant:"ghost",size:"icon","as-child":""},{default:l(()=>[r("a",$e,[s(t(X),{class:"h-4 w-4"})])]),_:1}),e[11]||(e[11]=r("div",null,[r("h1",{class:"text-3xl font-bold tracking-tight"},"Edit Artikel"),r("p",{class:"text-muted-foreground"}," Perbarui konten artikel ")],-1))]),r("div",Ve,[s(t(pe),null,{default:l(()=>[s(t(be),{"as-child":""},{default:l(()=>[s(t(f),{variant:"destructive",disabled:x.value||g.value},{default:l(()=>[s(t(q),{class:"mr-2 h-4 w-4"}),e[12]||(e[12]=u(" Hapus ",-1))]),_:1},8,["disabled"])]),_:1}),s(t(me),null,{default:l(()=>[s(t(_e),null,{default:l(()=>[s(t(ce),null,{default:l(()=>[...e[13]||(e[13]=[u("Hapus Artikel?",-1)])]),_:1}),s(t(fe),null,{default:l(()=>[...e[14]||(e[14]=[u(" Artikel akan dipindahkan ke sampah dan dapat dipulihkan nanti. Apakah Anda yakin ingin melanjutkan? ",-1)])]),_:1})]),_:1}),s(t(ve),null,{default:l(()=>[s(t(ge),null,{default:l(()=>[...e[15]||(e[15]=[u("Batal",-1)])]),_:1}),s(t(ke),{disabled:g.value,onClick:I},{default:l(()=>[u(m(g.value?"Menghapus...":"Hapus"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1}),a.value.is_published?(p(),y(t(f),{key:0,variant:"outline",disabled:x.value,onClick:e[0]||(e[0]=i=>B(!1))},{default:l(()=>[s(t(L),{class:"mr-2 h-4 w-4"}),e[16]||(e[16]=u(" Jadikan Draft ",-1))]),_:1},8,["disabled"])):c("",!0),s(t(f),{variant:"outline",disabled:x.value,onClick:e[1]||(e[1]=i=>B(null))},{default:l(()=>[s(t(L),{class:"mr-2 h-4 w-4"}),e[17]||(e[17]=u(" Simpan ",-1))]),_:1},8,["disabled"]),a.value.is_published?c("",!0):(p(),y(t(f),{key:1,disabled:x.value,onClick:e[2]||(e[2]=i=>B(!0))},{default:l(()=>[s(t(Y),{class:"mr-2 h-4 w-4"}),e[18]||(e[18]=u(" Terbitkan ",-1))]),_:1},8,["disabled"]))])]),r("div",Se,[r("div",we,[s(t(S),null,{default:l(()=>[s(t(A),null,{default:l(()=>[s(t(C),null,{default:l(()=>[...e[19]||(e[19]=[u("Informasi Dasar",-1)])]),_:1}),s(t(T),null,{default:l(()=>[...e[20]||(e[20]=[u("Detail utama artikel",-1)])]),_:1})]),_:1}),s(t(w),{class:"space-y-4"},{default:l(()=>[r("div",Te,[s(t(v),{for:"title"},{default:l(()=>[...e[21]||(e[21]=[u("Judul Artikel",-1)])]),_:1}),s(t(b),{id:"title",modelValue:a.value.title,"onUpdate:modelValue":e[3]||(e[3]=i=>a.value.title=i),placeholder:"Masukkan judul artikel",class:k({"border-destructive":d.value.title})},null,8,["modelValue","class"]),d.value.title?(p(),_("p",Ae,m(d.value.title),1)):c("",!0)]),r("div",Ce,[s(t(v),{for:"slug"},{default:l(()=>[...e[22]||(e[22]=[u("Slug (URL)",-1)])]),_:1}),s(t(b),{id:"slug",modelValue:a.value.slug,"onUpdate:modelValue":e[4]||(e[4]=i=>a.value.slug=i),placeholder:"slug-artikel",class:k({"border-destructive":d.value.slug})},null,8,["modelValue","class"]),d.value.slug?(p(),_("p",De,m(d.value.slug),1)):c("",!0),r("p",Ue," URL: /articles/"+m(a.value.slug||"slug-artikel"),1)])]),_:1})]),_:1}),s(t(U),{modelValue:a.value.blocks,"onUpdate:modelValue":e[5]||(e[5]=i=>a.value.blocks=i)},null,8,["modelValue"]),s(t(S),null,{default:l(()=>[s(t(A),null,{default:l(()=>[s(t(C),null,{default:l(()=>[...e[23]||(e[23]=[u("SEO",-1)])]),_:1}),s(t(T),null,{default:l(()=>[...e[24]||(e[24]=[u("Optimasi mesin pencari",-1)])]),_:1})]),_:1}),s(t(w),{class:"space-y-4"},{default:l(()=>[r("div",Ee,[s(t(v),{for:"seo_title"},{default:l(()=>[...e[25]||(e[25]=[u("Judul SEO",-1)])]),_:1}),s(t(b),{id:"seo_title",modelValue:a.value.seo_title,"onUpdate:modelValue":e[6]||(e[6]=i=>a.value.seo_title=i),placeholder:"Judul untuk mesin pencari",class:k({"border-destructive":d.value.seo_title})},null,8,["modelValue","class"]),d.value.seo_title?(p(),_("p",Pe,m(d.value.seo_title),1)):c("",!0),r("p",Be,m(a.value.seo_title.length)+"/255 karakter ",1)]),r("div",Oe,[s(t(v),{for:"seo_description"},{default:l(()=>[...e[26]||(e[26]=[u("Deskripsi SEO",-1)])]),_:1}),s(t(re),{id:"seo_description",modelValue:a.value.seo_description,"onUpdate:modelValue":e[7]||(e[7]=i=>a.value.seo_description=i),placeholder:"Deskripsi singkat untuk mesin pencari",rows:"3",class:k({"border-destructive":d.value.seo_description})},null,8,["modelValue","class"]),d.value.seo_description?(p(),_("p",Je,m(d.value.seo_description),1)):c("",!0),r("p",Ne,m(a.value.seo_description.length)+"/500 karakter ",1)])]),_:1})]),_:1})]),r("div",je,[s(t(S),null,{default:l(()=>[s(t(A),null,{default:l(()=>[s(t(C),null,{default:l(()=>[...e[27]||(e[27]=[u("Publikasi",-1)])]),_:1}),s(t(T),null,{default:l(()=>[...e[28]||(e[28]=[u("Atur tanggal publikasi",-1)])]),_:1})]),_:1}),s(t(w),{class:"space-y-4"},{default:l(()=>[r("div",Fe,[s(t(ne),{id:"is_published",checked:a.value.is_published,"onUpdate:checked":e[8]||(e[8]=i=>a.value.is_published=i)},null,8,["checked"]),s(t(v),{for:"is_published",class:"cursor-pointer"},{default:l(()=>[...e[29]||(e[29]=[u(" Terbitkan artikel ",-1)])]),_:1})]),a.value.is_published?(p(),_("div",Le,[s(t(v),{for:"published_at"},{default:l(()=>[...e[30]||(e[30]=[u("Tanggal Terbit",-1)])]),_:1}),s(t(b),{id:"published_at",modelValue:a.value.published_at,"onUpdate:modelValue":e[9]||(e[9]=i=>a.value.published_at=i),type:"datetime-local",class:k({"border-destructive":d.value.published_at})},null,8,["modelValue","class"]),d.value.published_at?(p(),_("p",ze,m(d.value.published_at),1)):c("",!0)])):c("",!0)]),_:1})]),_:1}),s(t(S),null,{default:l(()=>[s(t(A),null,{default:l(()=>[s(t(C),null,{default:l(()=>[...e[31]||(e[31]=[u("Tag",-1)])]),_:1}),s(t(T),null,{default:l(()=>[...e[32]||(e[32]=[u("Tambahkan tag untuk artikel",-1)])]),_:1})]),_:1}),s(t(w),{class:"space-y-4"},{default:l(()=>[r("div",He,[s(t(b),{modelValue:h.value,"onUpdate:modelValue":e[10]||(e[10]=i=>h.value=i),placeholder:"Tambah tag",onKeyup:ee(j,["enter"])},null,8,["modelValue"]),s(t(f),{type:"button",size:"sm",onClick:j},{default:l(()=>[...e[33]||(e[33]=[u(" Tambah ",-1)])]),_:1})]),a.value.tags.length>0?(p(),_("div",Re,[(p(!0),_(te,null,se(a.value.tags,(i,$)=>(p(),y(t(de),{key:$,variant:"secondary",class:"cursor-pointer hover:bg-destructive hover:text-destructive-foreground",onClick:Ke=>R($)},{default:l(()=>[u(m(i)+" ",1),s(t(le),{class:"ml-1 h-3 w-3"})]),_:2},1032,["onClick"]))),128))])):(p(),_("p",Ie," Belum ada tag "))]),_:1})]),_:1})])])])]),_:1}))}});export{_t as default};
