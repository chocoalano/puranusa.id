import{_ as K}from"./index-N1u60vhI.js";import{_ as C,v as F}from"./index-C6h2rSEx.js";import{_ as $,a as V}from"./CardContent.vue_vue_type_script_setup_true_lang-DMT_NDq0.js";import{_ as k}from"./CardHeader.vue_vue_type_script_setup_true_lang-CGqIWGeD.js";import{_ as D}from"./CardTitle.vue_vue_type_script_setup_true_lang-DLaLEZPb.js";import{_ as q,a as Z,b as G}from"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-C9WGGbb6.js";import{_ as J}from"./DropdownMenuCheckboxItem.vue_vue_type_script_setup_true_lang-RzxLYeQt.js";import{_ as Q}from"./Input.vue_vue_type_script_setup_true_lang-CucwjuSa.js";import{_ as W}from"./Pagination.vue_vue_type_script_setup_true_lang-BEOQ6vqn.js";import{_ as X,a as Y,b as ee,c as te,d as p}from"./SelectValue.vue_vue_type_script_setup_true_lang-CM9Iafca.js";import{_ as ae,a as se,b as P,c as le,d as re,e as N}from"./TableHeader.vue_vue_type_script_setup_true_lang-Cbaht4ar.js";import{_ as oe}from"./AppLayout.vue_vue_type_script_setup_true_lang-BLQAiOgB.js";import{d as ne,r as x,q as de,E as U,j as B,c,g as i,w as s,b as a,e as r,u as e,a0 as ie,t as A,s as u,a1 as ue,K as y,at as me,a2 as fe,aE as ce,Z as ge,a9 as _e,v as b,F as w,x as h,y as E,n as o,an as z,a3 as pe,ap as ve,aF as xe,A as ye,B as be}from"./vendor-BgSYH69o.js";import"./index-CMWG4mbA.js";import"./AvatarFallback.vue_vue_type_script_setup_true_lang-DU4k6tzW.js";import"./AvatarImage.vue_vue_type_script_setup_true_lang-BasOtxZI.js";import"./index-DqFeuJ-n.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CKeFYOA5.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-sGxRETQ-.js";const we={class:"rounded-xl p-4 space-y-6 py-6"},he={class:"grid gap-4 md:grid-cols-4"},Se={class:"text-2xl font-bold"},Ce={class:"text-2xl font-bold"},$e={class:"text-2xl font-bold"},Ve={class:"text-2xl font-bold"},ke={class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},De={class:"flex flex-1 gap-4"},Fe={class:"relative flex-1 max-w-sm"},Pe={class:"rounded-md border"},Qe=ne({__name:"Completed",props:{orders:{},statistics:{},filters:{}},setup(d){const g=d,H=[{title:"Pesanan Selesai",href:"/admin/orders/completed"}],v=x(g.filters.search||""),f=x(g.filters.status||"all"),_=x([{id:g.filters.sort_by,desc:g.filters.sort_order==="desc"}]),R=x([]),M=x({}),T=l=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(l),L=l=>new Date(l).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),O=l=>({pending:"secondary",processing:"outline",shipped:"default",delivered:"default",cancelled:"destructive",completed:"default"})[l]||"secondary",j=[{id:"index",header:()=>o("div",{class:"w-12"},"No"),cell:({row:l})=>{const t=l.index+1+(g.orders.current_page-1)*g.orders.per_page;return o("div",{class:"font-medium"},t)}},{accessorKey:"order_number",header:({column:l})=>o(C,{variant:"ghost",onClick:()=>l.toggleSorting(l.getIsSorted()==="asc"),class:"-ml-4"},()=>["Order Number",o(z,{class:"ml-2 h-4 w-4"})]),cell:({row:l})=>o("div",[o("div",{class:"font-medium font-mono"},l.original.order_number),o("div",{class:"text-xs text-muted-foreground"},l.original.customer.name)])},{accessorKey:"total_amount",header:()=>o("div",{class:"text-right"},"Total"),cell:({row:l})=>o("div",{class:"text-right font-medium"},()=>T(l.getValue("total_amount")))},{accessorKey:"payment_status",header:()=>"Payment",cell:({row:l})=>{const t=l.getValue("payment_status");return o(K,{variant:t==="paid"?"default":"secondary"},()=>t)}},{accessorKey:"status",header:()=>"Status",cell:({row:l})=>{const t=l.getValue("status");return o(K,{variant:O(t)},()=>t)}},{accessorKey:"created_at",header:({column:l})=>o(C,{variant:"ghost",onClick:()=>l.toggleSorting(l.getIsSorted()==="asc"),class:"-ml-4"},()=>["Tanggal",o(z,{class:"ml-2 h-4 w-4"})]),cell:({row:l})=>L(l.getValue("created_at"))},{id:"actions",header:()=>o("div",{class:"text-right"},"Actions"),cell:({row:l})=>{const t=l.original;return o("div",{class:"flex justify-end gap-2"},[o(pe,{href:`/admin/orders/${t.id}`},()=>o(C,{variant:"outline",size:"sm"},()=>o(ve,{class:"h-4 w-4"})))])}}],S=de({get data(){return g.orders.data},columns:j,getCoreRowModel:be(),getSortedRowModel:ye(),getFilteredRowModel:xe(),onSortingChange:l=>F(l,_),onColumnFiltersChange:l=>F(l,R),onColumnVisibilityChange:l=>F(l,M),state:{get sorting(){return _.value},get columnFilters(){return R.value},get columnVisibility(){return M.value}},manualSorting:!0});U(_,l=>{l.length>0&&B.get("/admin/orders",{search:v.value||void 0,status:f.value!=="all"?f.value:void 0,sort_by:l[0].id,sort_order:l[0].desc?"desc":"asc"},{preserveState:!0,preserveScroll:!0})},{deep:!0});let I;return U([v,f],()=>{clearTimeout(I),I=setTimeout(()=>{B.get("/admin/orders",{search:v.value||void 0,status:f.value!=="all"?f.value:void 0,sort_by:_.value[0]?.id||"created_at",sort_order:_.value[0]?.desc?"desc":"asc"},{preserveState:!0,preserveScroll:!0})},300)}),(l,t)=>(i(),c(oe,{breadcrumbs:H},{default:s(()=>[a(e(ie),{title:"Pesanan Selesai"}),r("div",we,[t[19]||(t[19]=r("div",{class:"flex items-center justify-between"},[r("div",null,[r("h1",{class:"text-3xl font-bold tracking-tight"},"Pesanan Selesai"),r("p",{class:"text-muted-foreground"},"Kelola pesanan yang sudah selesai")])],-1)),r("div",he,[a(e($),null,{default:s(()=>[a(e(k),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[a(e(D),{class:"text-sm font-medium"},{default:s(()=>[...t[2]||(t[2]=[u("Total Pesanan",-1)])]),_:1}),a(e(ue),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),a(e(V),null,{default:s(()=>[r("div",Se,y(d.statistics.total_orders),1),t[3]||(t[3]=r("p",{class:"text-xs text-muted-foreground"},"Semua pesanan",-1))]),_:1})]),_:1}),a(e($),null,{default:s(()=>[a(e(k),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[a(e(D),{class:"text-sm font-medium"},{default:s(()=>[...t[4]||(t[4]=[u("Total Pendapatan",-1)])]),_:1}),a(e(me),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),a(e(V),null,{default:s(()=>[r("div",Ce,y(T(d.statistics.total_revenue)),1),t[5]||(t[5]=r("p",{class:"text-xs text-muted-foreground"},"Revenue keseluruhan",-1))]),_:1})]),_:1}),a(e($),null,{default:s(()=>[a(e(k),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[a(e(D),{class:"text-sm font-medium"},{default:s(()=>[...t[6]||(t[6]=[u("Pending",-1)])]),_:1}),a(e(fe),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),a(e(V),null,{default:s(()=>[r("div",$e,y(d.statistics.total_pending),1),t[7]||(t[7]=r("p",{class:"text-xs text-muted-foreground"},"Menunggu pembayaran",-1))]),_:1})]),_:1}),a(e($),null,{default:s(()=>[a(e(k),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[a(e(D),{class:"text-sm font-medium"},{default:s(()=>[...t[8]||(t[8]=[u("Selesai",-1)])]),_:1}),a(e(ce),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),a(e(V),null,{default:s(()=>[r("div",Ve,y(d.statistics.total_completed),1),t[9]||(t[9]=r("p",{class:"text-xs text-muted-foreground"},"Order selesai",-1))]),_:1})]),_:1})]),r("div",ke,[r("div",De,[r("div",Fe,[a(e(ge),{class:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),a(e(Q),{modelValue:v.value,"onUpdate:modelValue":t[0]||(t[0]=n=>v.value=n),placeholder:"Cari nomor order atau nama pelanggan...",class:"pl-9"},null,8,["modelValue"])]),a(e(X),{modelValue:f.value,"onUpdate:modelValue":t[1]||(t[1]=n=>f.value=n)},{default:s(()=>[a(e(Y),{class:"w-[180px]"},{default:s(()=>[a(e(ee),{placeholder:"Semua Status"})]),_:1}),a(e(te),null,{default:s(()=>[a(e(p),{value:"all"},{default:s(()=>[...t[10]||(t[10]=[u("Semua Status",-1)])]),_:1}),a(e(p),{value:"pending"},{default:s(()=>[...t[11]||(t[11]=[u("Pending",-1)])]),_:1}),a(e(p),{value:"processing"},{default:s(()=>[...t[12]||(t[12]=[u("Processing",-1)])]),_:1}),a(e(p),{value:"shipped"},{default:s(()=>[...t[13]||(t[13]=[u("Shipped",-1)])]),_:1}),a(e(p),{value:"delivered"},{default:s(()=>[...t[14]||(t[14]=[u("Delivered",-1)])]),_:1}),a(e(p),{value:"completed"},{default:s(()=>[...t[15]||(t[15]=[u("Completed",-1)])]),_:1}),a(e(p),{value:"cancelled"},{default:s(()=>[...t[16]||(t[16]=[u("Cancelled",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),a(e(q),null,{default:s(()=>[a(e(Z),{"as-child":""},{default:s(()=>[a(e(C),{variant:"outline",class:"ml-auto"},{default:s(()=>[t[17]||(t[17]=u(" Kolom ",-1)),a(e(_e),{class:"ml-2 h-4 w-4"})]),_:1})]),_:1}),a(e(G),{align:"end"},{default:s(()=>[(i(!0),b(w,null,h(e(S).getAllColumns().filter(n=>n.getCanHide()),n=>(i(),c(e(J),{key:n.id,class:"capitalize","model-value":n.getIsVisible(),"onUpdate:modelValue":m=>{n.toggleVisibility(!!m)}},{default:s(()=>[u(y(n.id),1)]),_:2},1032,["model-value","onUpdate:modelValue"]))),128))]),_:1})]),_:1})]),r("div",Pe,[a(e(ae),null,{default:s(()=>[a(e(se),null,{default:s(()=>[(i(!0),b(w,null,h(e(S).getHeaderGroups(),n=>(i(),c(e(P),{key:n.id},{default:s(()=>[(i(!0),b(w,null,h(n.headers,m=>(i(),c(e(le),{key:m.id},{default:s(()=>[m.isPlaceholder?A("",!0):(i(),c(e(E),{key:0,render:m.column.columnDef.header,props:m.getContext()},null,8,["render","props"]))]),_:2},1024))),128))]),_:2},1024))),128))]),_:1}),a(e(re),null,{default:s(()=>[e(S).getRowModel().rows?.length?(i(!0),b(w,{key:0},h(e(S).getRowModel().rows,n=>(i(),c(e(P),{key:n.id},{default:s(()=>[(i(!0),b(w,null,h(n.getVisibleCells(),m=>(i(),c(e(N),{key:m.id},{default:s(()=>[a(e(E),{render:m.column.columnDef.cell,props:m.getContext()},null,8,["render","props"])]),_:2},1024))),128))]),_:2},1024))),128)):(i(),c(e(P),{key:1},{default:s(()=>[a(e(N),{colspan:j.length,class:"h-24 text-center"},{default:s(()=>[...t[18]||(t[18]=[u(" Tidak ada data pesanan. ",-1)])]),_:1},8,["colspan"])]),_:1}))]),_:1})]),_:1})]),d.orders.last_page>1?(i(),c(W,{key:0,data:{current_page:d.orders.current_page,last_page:d.orders.last_page,per_page:d.orders.per_page,from:(d.orders.current_page-1)*d.orders.per_page+1,to:Math.min(d.orders.current_page*d.orders.per_page,d.orders.total),total:d.orders.total},url:"/admin/orders/completed",filters:{search:v.value||void 0,status:f.value!=="all"?f.value:void 0,sort_by:_.value[0]?.id||"created_at",sort_order:_.value[0]?.desc?"desc":"asc"}},null,8,["data","filters"])):A("",!0)])]),_:1}))}});export{Qe as default};
