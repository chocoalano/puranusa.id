import{_ as K}from"./index-dZyugrTC.js";import{_ as C,v as P}from"./index-CZrke-cb.js";import{_ as $,a as V}from"./CardContent.vue_vue_type_script_setup_true_lang-_1UsOj1j.js";import{_ as k}from"./CardHeader.vue_vue_type_script_setup_true_lang-D4bDsMGa.js";import{_ as D}from"./CardTitle.vue_vue_type_script_setup_true_lang-Bj0VpeXV.js";import{_ as G,a as J,b as Q}from"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-pb5xULWW.js";import{_ as W}from"./DropdownMenuCheckboxItem.vue_vue_type_script_setup_true_lang-CtpnfcE2.js";import{_ as X}from"./Input.vue_vue_type_script_setup_true_lang-Oy3zhfwy.js";import{_ as Y}from"./Pagination.vue_vue_type_script_setup_true_lang-ejQGcEoF.js";import{_ as ee,a as te,b as ae,c as se,d as _}from"./SelectValue.vue_vue_type_script_setup_true_lang-CstBw1Qc.js";import{_ as le,a as re,b as F,c as oe,d as ne,e as N}from"./TableHeader.vue_vue_type_script_setup_true_lang-QP8FR1Pn.js";import{_ as de}from"./AppLayout.vue_vue_type_script_setup_true_lang-bcsz1tEe.js";import{d as ie,r as x,q as ue,E as A,j as B,c,g as i,w as s,b as a,e as o,u as e,a1 as me,t as U,s as u,a2 as fe,K as y,aB as ce,a3 as ge,aL as pe,Z as _e,aa as ve,v as b,F as w,x as h,y as E,n,ao as L,aq as xe,a4 as ye,aM as be,A as we,B as he}from"./vendor-DmSXq5eN.js";import{u as Se}from"./usePermissions-Cx4fk-e4.js";import"./index-CMWG4mbA.js";import"./AvatarFallback.vue_vue_type_script_setup_true_lang-BMZwzIZd.js";import"./AvatarImage.vue_vue_type_script_setup_true_lang-BL7Uc97k.js";import"./index-B_n2dl-_.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-361jQ8Ze.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-BtwiMKEj.js";const Ce={class:"rounded-xl p-4 space-y-6 py-6"},$e={class:"grid gap-4 md:grid-cols-4"},Ve={class:"text-2xl font-bold"},ke={class:"text-2xl font-bold"},De={class:"text-2xl font-bold"},Pe={class:"text-2xl font-bold"},Fe={class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},Me={class:"flex flex-1 gap-4"},Re={class:"relative flex-1 max-w-sm"},Te={class:"rounded-md border"},et=ie({__name:"Completed",props:{orders:{},statistics:{},filters:{}},setup(d){const{isSuperAdmin:q,isAdmin:z}=Se(),g=d,H=[{title:"Pesanan Selesai",href:"/admin/orders/completed"}],v=x(g.filters.search||""),f=x(g.filters.status||"all"),p=x([{id:g.filters.sort_by,desc:g.filters.sort_order==="desc"}]),M=x([]),R=x({}),T=l=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(l),O=l=>new Date(l).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),Z=l=>({pending:"secondary",processing:"outline",shipped:"default",delivered:"default",cancelled:"destructive",completed:"default"})[l]||"secondary",j=[{id:"index",header:()=>n("div",{class:"w-12"},"No"),cell:({row:l})=>{const t=l.index+1+(g.orders.current_page-1)*g.orders.per_page;return n("div",{class:"font-medium"},t)}},{accessorKey:"order_number",header:({column:l})=>n(C,{variant:"ghost",onClick:()=>l.toggleSorting(l.getIsSorted()==="asc"),class:"-ml-4"},()=>["Order Number",n(L,{class:"ml-2 h-4 w-4"})]),cell:({row:l})=>n("div",[n("div",{class:"font-medium font-mono"},l.original.order_number),n("div",{class:"text-xs text-muted-foreground"},l.original.customer.name)])},{accessorKey:"total_amount",header:()=>n("div",{class:"text-right"},"Total"),cell:({row:l})=>n("div",{class:"text-right font-medium"},()=>T(l.getValue("total_amount")))},{accessorKey:"payment_status",header:()=>"Payment",cell:({row:l})=>{const t=l.getValue("payment_status");return n(K,{variant:t==="paid"?"default":"secondary"},()=>t)}},{accessorKey:"status",header:()=>"Status",cell:({row:l})=>{const t=l.getValue("status");return n(K,{variant:Z(t)},()=>t)}},{accessorKey:"created_at",header:({column:l})=>n(C,{variant:"ghost",onClick:()=>l.toggleSorting(l.getIsSorted()==="asc"),class:"-ml-4"},()=>["Tanggal",n(L,{class:"ml-2 h-4 w-4"})]),cell:({row:l})=>O(l.getValue("created_at"))},{id:"actions",header:()=>n("div",{class:"text-right"},"Actions"),cell:({row:l})=>{const t=l.original,r=[];return(q||z)&&r.push(n(ye,{href:`/admin/orders/${t.id}`},()=>n(C,{variant:"outline",size:"sm"},()=>n(xe,{class:"h-4 w-4"})))),n("div",{class:"flex justify-end gap-2"},r)}}],S=ue({get data(){return g.orders.data},columns:j,getCoreRowModel:he(),getSortedRowModel:we(),getFilteredRowModel:be(),onSortingChange:l=>P(l,p),onColumnFiltersChange:l=>P(l,M),onColumnVisibilityChange:l=>P(l,R),state:{get sorting(){return p.value},get columnFilters(){return M.value},get columnVisibility(){return R.value}},manualSorting:!0});A(p,l=>{l.length>0&&B.get("/admin/orders",{search:v.value||void 0,status:f.value!=="all"?f.value:void 0,sort_by:l[0].id,sort_order:l[0].desc?"desc":"asc"},{preserveState:!0,preserveScroll:!0})},{deep:!0});let I;return A([v,f],()=>{clearTimeout(I),I=setTimeout(()=>{B.get("/admin/orders",{search:v.value||void 0,status:f.value!=="all"?f.value:void 0,sort_by:p.value[0]?.id||"created_at",sort_order:p.value[0]?.desc?"desc":"asc"},{preserveState:!0,preserveScroll:!0})},300)}),(l,t)=>(i(),c(de,{breadcrumbs:H},{default:s(()=>[a(e(me),{title:"Pesanan Selesai"}),o("div",Ce,[t[19]||(t[19]=o("div",{class:"flex items-center justify-between"},[o("div",null,[o("h1",{class:"text-3xl font-bold tracking-tight"},"Pesanan Selesai"),o("p",{class:"text-muted-foreground"},"Kelola pesanan yang sudah selesai")])],-1)),o("div",$e,[a(e($),null,{default:s(()=>[a(e(k),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[a(e(D),{class:"text-sm font-medium"},{default:s(()=>[...t[2]||(t[2]=[u("Total Pesanan",-1)])]),_:1}),a(e(fe),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),a(e(V),null,{default:s(()=>[o("div",Ve,y(d.statistics.total_orders),1),t[3]||(t[3]=o("p",{class:"text-xs text-muted-foreground"},"Semua pesanan",-1))]),_:1})]),_:1}),a(e($),null,{default:s(()=>[a(e(k),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[a(e(D),{class:"text-sm font-medium"},{default:s(()=>[...t[4]||(t[4]=[u("Total Pendapatan",-1)])]),_:1}),a(e(ce),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),a(e(V),null,{default:s(()=>[o("div",ke,y(T(d.statistics.total_revenue)),1),t[5]||(t[5]=o("p",{class:"text-xs text-muted-foreground"},"Revenue keseluruhan",-1))]),_:1})]),_:1}),a(e($),null,{default:s(()=>[a(e(k),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[a(e(D),{class:"text-sm font-medium"},{default:s(()=>[...t[6]||(t[6]=[u("Pending",-1)])]),_:1}),a(e(ge),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),a(e(V),null,{default:s(()=>[o("div",De,y(d.statistics.total_pending),1),t[7]||(t[7]=o("p",{class:"text-xs text-muted-foreground"},"Menunggu pembayaran",-1))]),_:1})]),_:1}),a(e($),null,{default:s(()=>[a(e(k),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[a(e(D),{class:"text-sm font-medium"},{default:s(()=>[...t[8]||(t[8]=[u("Selesai",-1)])]),_:1}),a(e(pe),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),a(e(V),null,{default:s(()=>[o("div",Pe,y(d.statistics.total_completed),1),t[9]||(t[9]=o("p",{class:"text-xs text-muted-foreground"},"Order selesai",-1))]),_:1})]),_:1})]),o("div",Fe,[o("div",Me,[o("div",Re,[a(e(_e),{class:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),a(e(X),{modelValue:v.value,"onUpdate:modelValue":t[0]||(t[0]=r=>v.value=r),placeholder:"Cari nomor order atau nama pelanggan...",class:"pl-9"},null,8,["modelValue"])]),a(e(ee),{modelValue:f.value,"onUpdate:modelValue":t[1]||(t[1]=r=>f.value=r)},{default:s(()=>[a(e(te),{class:"w-[180px]"},{default:s(()=>[a(e(ae),{placeholder:"Semua Status"})]),_:1}),a(e(se),null,{default:s(()=>[a(e(_),{value:"all"},{default:s(()=>[...t[10]||(t[10]=[u("Semua Status",-1)])]),_:1}),a(e(_),{value:"pending"},{default:s(()=>[...t[11]||(t[11]=[u("Pending",-1)])]),_:1}),a(e(_),{value:"processing"},{default:s(()=>[...t[12]||(t[12]=[u("Processing",-1)])]),_:1}),a(e(_),{value:"shipped"},{default:s(()=>[...t[13]||(t[13]=[u("Shipped",-1)])]),_:1}),a(e(_),{value:"delivered"},{default:s(()=>[...t[14]||(t[14]=[u("Delivered",-1)])]),_:1}),a(e(_),{value:"completed"},{default:s(()=>[...t[15]||(t[15]=[u("Completed",-1)])]),_:1}),a(e(_),{value:"cancelled"},{default:s(()=>[...t[16]||(t[16]=[u("Cancelled",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),a(e(G),null,{default:s(()=>[a(e(J),{"as-child":""},{default:s(()=>[a(e(C),{variant:"outline",class:"ml-auto"},{default:s(()=>[t[17]||(t[17]=u(" Kolom ",-1)),a(e(ve),{class:"ml-2 h-4 w-4"})]),_:1})]),_:1}),a(e(Q),{align:"end"},{default:s(()=>[(i(!0),b(w,null,h(e(S).getAllColumns().filter(r=>r.getCanHide()),r=>(i(),c(e(W),{key:r.id,class:"capitalize","model-value":r.getIsVisible(),"onUpdate:modelValue":m=>{r.toggleVisibility(!!m)}},{default:s(()=>[u(y(r.id),1)]),_:2},1032,["model-value","onUpdate:modelValue"]))),128))]),_:1})]),_:1})]),o("div",Te,[a(e(le),null,{default:s(()=>[a(e(re),null,{default:s(()=>[(i(!0),b(w,null,h(e(S).getHeaderGroups(),r=>(i(),c(e(F),{key:r.id},{default:s(()=>[(i(!0),b(w,null,h(r.headers,m=>(i(),c(e(oe),{key:m.id},{default:s(()=>[m.isPlaceholder?U("",!0):(i(),c(e(E),{key:0,render:m.column.columnDef.header,props:m.getContext()},null,8,["render","props"]))]),_:2},1024))),128))]),_:2},1024))),128))]),_:1}),a(e(ne),null,{default:s(()=>[e(S).getRowModel().rows?.length?(i(!0),b(w,{key:0},h(e(S).getRowModel().rows,r=>(i(),c(e(F),{key:r.id},{default:s(()=>[(i(!0),b(w,null,h(r.getVisibleCells(),m=>(i(),c(e(N),{key:m.id},{default:s(()=>[a(e(E),{render:m.column.columnDef.cell,props:m.getContext()},null,8,["render","props"])]),_:2},1024))),128))]),_:2},1024))),128)):(i(),c(e(F),{key:1},{default:s(()=>[a(e(N),{colspan:j.length,class:"h-24 text-center"},{default:s(()=>[...t[18]||(t[18]=[u(" Tidak ada data pesanan. ",-1)])]),_:1},8,["colspan"])]),_:1}))]),_:1})]),_:1})]),d.orders.last_page>1?(i(),c(Y,{key:0,data:{current_page:d.orders.current_page,last_page:d.orders.last_page,per_page:d.orders.per_page,from:(d.orders.current_page-1)*d.orders.per_page+1,to:Math.min(d.orders.current_page*d.orders.per_page,d.orders.total),total:d.orders.total},url:"/admin/orders/completed",filters:{search:v.value||void 0,status:f.value!=="all"?f.value:void 0,sort_by:p.value[0]?.id||"created_at",sort_order:p.value[0]?.desc?"desc":"asc"}},null,8,["data","filters"])):U("",!0)])]),_:1}))}});export{et as default};
