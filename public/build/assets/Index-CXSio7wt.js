import{_ as q}from"./ConfirmDialog.vue_vue_type_script_setup_true_lang-DGxEEV5o.js";import{_ as E}from"./index-DdPgXMF5.js";import{_ as f}from"./index-B-HLTJ14.js";import{_ as S,a as T}from"./CardContent.vue_vue_type_script_setup_true_lang-D_ByHwkr.js";import{_ as D}from"./CardHeader.vue_vue_type_script_setup_true_lang-CnGfQ4dp.js";import{_ as V}from"./CardTitle.vue_vue_type_script_setup_true_lang-g8lPgvYF.js";import{_ as Q}from"./Input.vue_vue_type_script_setup_true_lang-CtLoVYP_.js";import{_ as X,a as Y,b as Z,c as G,d as A}from"./SelectValue.vue_vue_type_script_setup_true_lang-DOFahpuV.js";import{_ as J,a as W,b as j,c as O,d as ee,e as N}from"./TableHeader.vue_vue_type_script_setup_true_lang-DwjJXyuR.js";import{_ as te}from"./AppLayout.vue_vue_type_script_setup_true_lang-DcdoyRoT.js";import{d as ae,r as b,E as z,q as se,c as p,g as o,w as s,b as t,e as i,u as e,a0 as re,s as u,aq as B,a3 as le,Y as ie,K as g,as as de,aR as ne,Z as oe,v as k,F as y,x as C,t as ue,y as L,n as d,a4 as ce,a5 as me,a6 as fe,a7 as ge,j as $,Q as ve,a8 as we,a9 as _e,aa as pe,cd as xe,z as he,A as be,B as ke}from"./vendor-BcJu9AAH.js";import"./AlertDialogTitle.vue_vue_type_script_setup_true_lang-B39-Z3w4.js";import"./index-CMWG4mbA.js";import"./AvatarFallback.vue_vue_type_script_setup_true_lang-DREEJQRG.js";import"./AvatarImage.vue_vue_type_script_setup_true_lang-DzjjQG7k.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-BccCC61Q.js";import"./index-DqFeuJ-n.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-6ChEtU6y.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-DduvX08w.js";const ye={class:"flex h-full flex-1 flex-col gap-6 p-6"},Ce={class:"flex items-center justify-between"},$e={class:"text-3xl font-bold tracking-tight flex items-center gap-2"},Re={class:"grid gap-4 md:grid-cols-3"},Se={class:"text-2xl font-bold text-blue-600"},Te={class:"text-2xl font-bold text-green-600"},De={class:"text-2xl font-bold text-gray-600"},Ve={class:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between"},Ae={class:"flex flex-1 items-center gap-4"},je={class:"relative flex-1 md:max-w-sm"},Ie={class:"rounded-md border"},Fe={class:"flex items-center justify-between"},Me={class:"text-sm text-muted-foreground"},Ne={class:"flex items-center gap-2"},ze={class:"text-sm"},st=ae({__name:"Index",props:{rewards:{},statistics:{},filters:{}},setup(l){const v=l,K=[{title:"Pengaturan",href:"#"},{title:"Lifetime Cash Rewards",href:"/admin/settings/lifetime-cash-rewards"}],x=b(v.filters.search||""),w=b(v.filters.status||"all"),c=b([{id:v.filters.sort_by,desc:v.filters.sort_order==="desc"}]),_=b({open:!1,reward:null}),P=r=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(r),U=r=>{_.value={open:!0,reward:r}},H=()=>{_.value.reward&&$.delete(`/admin/settings/lifetime-cash-rewards/${_.value.reward.id}`,{preserveScroll:!0,onSuccess:()=>{_.value={open:!1,reward:null},ve.success("Lifetime Cash Reward berhasil dihapus")}})},I=()=>{$.get("/admin/settings/lifetime-cash-rewards",{search:x.value||void 0,status:w.value!=="all"?w.value:void 0,sort_by:c.value[0]?.id||"created_at",sort_order:c.value[0]?.desc?"desc":"asc"},{preserveState:!0,replace:!0})};z([w,c],I,{deep:!0});let F;z(x,()=>{clearTimeout(F),F=setTimeout(I,300)});const M=[{id:"index",header:()=>d("div",{class:"w-12"},"No"),cell:({row:r})=>{const a=r.index+1+(v.rewards.current_page-1)*v.rewards.per_page;return d("div",{class:"font-medium"},a)}},{accessorKey:"name",header:({column:r})=>d(f,{variant:"ghost",onClick:()=>r.toggleSorting(r.getIsSorted()==="asc"),class:"-ml-4"},()=>["Nama Reward",d(r.getIsSorted()==="asc"?we:r.getIsSorted()==="desc"?_e:pe,{class:"ml-2 h-4 w-4"})]),cell:({row:r})=>d("div",[d("div",{class:"font-medium"},r.original.name),r.original.code&&d("div",{class:"text-xs text-muted-foreground font-mono"},r.original.code)])},{accessorKey:"reward",header:()=>"Reward",cell:({row:r})=>d("div",{class:"text-sm"},r.original.reward||"-")},{accessorKey:"value",header:()=>"Value",cell:({row:r})=>d("div",{class:"font-medium"},P(r.original.value))},{accessorKey:"bv",header:()=>"BV",cell:({row:r})=>d("div",Number(r.original.bv).toFixed(2))},{id:"status",header:()=>"Status",cell:({row:r})=>d(E,{variant:r.original.status===1?"default":"secondary"},()=>r.original.status===1?"Aktif":"Tidak Aktif")},{id:"actions",header:()=>d("div",{class:"text-right"},"Aksi"),cell:({row:r})=>{const a=r.original;return d("div",{class:"flex justify-end gap-2"},[d(f,{variant:"outline",size:"sm",onClick:()=>$.visit(`/admin/settings/lifetime-cash-rewards/${a.id}/edit`)},()=>[d(xe,{class:"h-4 w-4"})]),d(f,{variant:"outline",size:"sm",class:"text-destructive hover:bg-destructive hover:text-destructive-foreground",onClick:()=>U(a)},()=>[d(he,{class:"h-4 w-4"})])])}}],R=se({data:v.rewards.data,columns:M,getCoreRowModel:ke(),getSortedRowModel:be(),manualSorting:!0,state:{get sorting(){return c.value}},onSortingChange:r=>{c.value=typeof r=="function"?r(c.value):r}}),h=r=>{$.get("/admin/settings/lifetime-cash-rewards",{page:r,search:x.value||void 0,status:w.value!=="all"?w.value:void 0,sort_by:c.value[0]?.id||"created_at",sort_order:c.value[0]?.desc?"desc":"asc"},{preserveState:!0,replace:!0})};return(r,a)=>(o(),p(te,{breadcrumbs:K},{default:s(()=>[t(e(re),{title:"Lifetime Cash Rewards"}),i("div",ye,[i("div",Ce,[i("div",null,[i("h1",$e,[t(e(B),{class:"h-8 w-8"}),a[7]||(a[7]=u(" Lifetime Cash Rewards ",-1))]),a[8]||(a[8]=i("p",{class:"text-muted-foreground mt-1"}," Kelola reward permanen (tanpa periode waktu) ",-1))]),t(e(le),{href:"/admin/settings/lifetime-cash-rewards/create"},{default:s(()=>[t(e(f),null,{default:s(()=>[t(e(ie),{class:"h-4 w-4 mr-2"}),a[9]||(a[9]=u(" Tambah Reward ",-1))]),_:1})]),_:1})]),i("div",Re,[t(e(S),null,{default:s(()=>[t(e(D),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[t(e(V),{class:"text-sm font-medium"},{default:s(()=>[...a[10]||(a[10]=[u("Total Rewards",-1)])]),_:1}),t(e(B),{class:"h-4 w-4 text-blue-500"})]),_:1}),t(e(T),null,{default:s(()=>[i("div",Se,g(l.statistics.total),1)]),_:1})]),_:1}),t(e(S),null,{default:s(()=>[t(e(D),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[t(e(V),{class:"text-sm font-medium"},{default:s(()=>[...a[11]||(a[11]=[u("Aktif",-1)])]),_:1}),t(e(de),{class:"h-4 w-4 text-green-500"})]),_:1}),t(e(T),null,{default:s(()=>[i("div",Te,g(l.statistics.total_active),1)]),_:1})]),_:1}),t(e(S),null,{default:s(()=>[t(e(D),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[t(e(V),{class:"text-sm font-medium"},{default:s(()=>[...a[12]||(a[12]=[u("Tidak Aktif",-1)])]),_:1}),t(e(ne),{class:"h-4 w-4 text-gray-500"})]),_:1}),t(e(T),null,{default:s(()=>[i("div",De,g(l.statistics.total_inactive),1)]),_:1})]),_:1})]),i("div",Ve,[i("div",Ae,[i("div",je,[t(e(oe),{class:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),t(e(Q),{modelValue:x.value,"onUpdate:modelValue":a[0]||(a[0]=n=>x.value=n),placeholder:"Cari nama atau kode...",class:"pl-9"},null,8,["modelValue"])]),t(e(X),{modelValue:w.value,"onUpdate:modelValue":a[1]||(a[1]=n=>w.value=n)},{default:s(()=>[t(e(Y),{class:"w-40"},{default:s(()=>[t(e(Z),{placeholder:"Semua Status"})]),_:1}),t(e(G),null,{default:s(()=>[t(e(A),{value:"all"},{default:s(()=>[...a[13]||(a[13]=[u("Semua Status",-1)])]),_:1}),t(e(A),{value:"1"},{default:s(()=>[...a[14]||(a[14]=[u("Aktif",-1)])]),_:1}),t(e(A),{value:"0"},{default:s(()=>[...a[15]||(a[15]=[u("Tidak Aktif",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),i("div",Ie,[t(e(J),null,{default:s(()=>[t(e(W),null,{default:s(()=>[(o(!0),k(y,null,C(e(R).getHeaderGroups(),n=>(o(),p(e(j),{key:n.id},{default:s(()=>[(o(!0),k(y,null,C(n.headers,m=>(o(),p(e(O),{key:m.id},{default:s(()=>[m.isPlaceholder?ue("",!0):(o(),p(e(L),{key:0,render:m.column.columnDef.header,props:m.getContext()},null,8,["render","props"]))]),_:2},1024))),128))]),_:2},1024))),128))]),_:1}),t(e(ee),null,{default:s(()=>[e(R).getRowModel().rows?.length?(o(!0),k(y,{key:0},C(e(R).getRowModel().rows,n=>(o(),p(e(j),{key:n.id},{default:s(()=>[(o(!0),k(y,null,C(n.getVisibleCells(),m=>(o(),p(e(N),{key:m.id},{default:s(()=>[t(e(L),{render:m.column.columnDef.cell,props:m.getContext()},null,8,["render","props"])]),_:2},1024))),128))]),_:2},1024))),128)):(o(),p(e(j),{key:1},{default:s(()=>[t(e(N),{colspan:M.length,class:"h-24 text-center"},{default:s(()=>[...a[16]||(a[16]=[u(" Tidak ada data. ",-1)])]),_:1},8,["colspan"])]),_:1}))]),_:1})]),_:1})]),i("div",Fe,[i("div",Me," Menampilkan "+g((l.rewards.current_page-1)*l.rewards.per_page+1)+" - "+g(Math.min(l.rewards.current_page*l.rewards.per_page,l.rewards.total))+" dari "+g(l.rewards.total)+" data ",1),i("div",Ne,[t(e(f),{variant:"outline",size:"sm",disabled:l.rewards.current_page===1,onClick:a[2]||(a[2]=n=>h(1))},{default:s(()=>[t(e(ce),{class:"h-4 w-4"})]),_:1},8,["disabled"]),t(e(f),{variant:"outline",size:"sm",disabled:l.rewards.current_page===1,onClick:a[3]||(a[3]=n=>h(l.rewards.current_page-1))},{default:s(()=>[t(e(me),{class:"h-4 w-4"})]),_:1},8,["disabled"]),i("span",ze," Halaman "+g(l.rewards.current_page)+" dari "+g(l.rewards.last_page),1),t(e(f),{variant:"outline",size:"sm",disabled:l.rewards.current_page===l.rewards.last_page,onClick:a[4]||(a[4]=n=>h(l.rewards.current_page+1))},{default:s(()=>[t(e(fe),{class:"h-4 w-4"})]),_:1},8,["disabled"]),t(e(f),{variant:"outline",size:"sm",disabled:l.rewards.current_page===l.rewards.last_page,onClick:a[5]||(a[5]=n=>h(l.rewards.last_page))},{default:s(()=>[t(e(ge),{class:"h-4 w-4"})]),_:1},8,["disabled"])])])]),t(q,{open:_.value.open,title:"Hapus Reward",description:`Apakah Anda yakin ingin menghapus reward '${_.value.reward?.name}'? Tindakan ini tidak dapat dibatalkan.`,"confirm-text":"Hapus","onUpdate:open":a[6]||(a[6]=n=>_.value.open=n),onConfirm:H},null,8,["open","description"])]),_:1}))}});export{st as default};
