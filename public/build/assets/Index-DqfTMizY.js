import{d as Q,r as x,v as $,g as n,b as t,u as e,a1 as Y,w as l,e as d,t as w,c as p,j as S,s as u,Y as Z,Z as q,P as G,F as C,x as P,K as r,ap as y,aj as J}from"./vendor-DfMbnFaR.js";import{_ as W}from"./AppLayout.vue_vue_type_script_setup_true_lang-3Xwj2Srj.js";import{_ as V}from"./index-Qe8U7avD.js";import{_ as v}from"./index-BhPH699V.js";import{_ as X}from"./Input.vue_vue_type_script_setup_true_lang-Bi8Aupzl.js";import{_ as h,a as ee,b as I,c as f,d as te,e as o}from"./TableHeader.vue_vue_type_script_setup_true_lang-PuAkTm4y.js";import{_ as ae,a as le,b as se,c as L}from"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-NxThyEhC.js";import{_ as E,a as z,b as H,c as R,d as _}from"./SelectValue.vue_vue_type_script_setup_true_lang-VBwlv4qP.js";import{u as ue}from"./usePermissions-Bdkvyget.js";import"./index-CSEUMRIG.js";import"./AvatarFallback.vue_vue_type_script_setup_true_lang-Bqij1zEj.js";import"./AvatarImage.vue_vue_type_script_setup_true_lang-BOYUcfDs.js";import"./index-DnSHhU6t.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DrG-1awo.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-CpOM3BUc.js";const ne={class:"space-y-6rounded-xl p-4 space-y-6 py-6"},ie={class:"flex items-center justify-between"},re={class:"flex items-center gap-4"},de={class:"relative flex-1"},oe={class:"rounded-md border"},fe={class:"flex flex-wrap gap-1"},me={key:0,class:"flex items-center justify-between"},ve={class:"text-sm text-muted-foreground"},_e={class:"flex gap-2"},Pe=Q({__name:"Index",props:{products:{},categories:{},filters:{}},setup(m){const{isSuperAdmin:N,isAdmin:T}=ue(),k=m,U=x(k.filters.search||""),K=x(k.filters.category?.toString()||"all"),A=x(k.filters.status?.toString()||"all"),j=x(k.filters.sort_by||"created_at"),B=x(k.filters.sort_order||"desc"),D=x(k.filters.per_page||15),F=i=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(i),c=()=>{S.get("/admin/products",{search:U.value,category:K.value==="all"?void 0:K.value,status:A.value==="all"?void 0:A.value,sort_by:j.value,sort_order:B.value,per_page:D.value},{preserveState:!0,preserveScroll:!0})},g=i=>{j.value===i?B.value=B.value==="asc"?"desc":"asc":(j.value=i,B.value="asc"),c()},M=i=>{const a=(i.b_sponsor||0)+(i.b_matching||0)+(i.b_pairing||0)+(i.b_cashback||0)+(i.b_retail||0);return a>0?F(a):"-"},O=i=>{confirm("Apakah Anda yakin ingin menghapus produk ini?")&&S.delete(`/admin/products/${i}`,{preserveScroll:!0})};return(i,a)=>(n(),$(C,null,[t(e(Y),{title:"Kelola Produk"}),t(W,null,{default:l(()=>[d("div",ne,[d("div",ie,[a[12]||(a[12]=d("div",null,[d("h2",{class:"text-3xl font-bold tracking-tight"},"Kelola Produk"),d("p",{class:"text-muted-foreground"},"Kelola semua produk yang tersedia di toko")],-1)),e(N)||e(T)?(n(),p(e(v),{key:0,onClick:a[0]||(a[0]=s=>e(S).visit("/admin/products/create"))},{default:l(()=>[t(e(Z),{class:"mr-2 h-4 w-4"}),a[11]||(a[11]=u(" Tambah Produk ",-1))]),_:1})):w("",!0)]),d("div",re,[d("div",de,[t(e(q),{class:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),t(e(X),{modelValue:U.value,"onUpdate:modelValue":a[1]||(a[1]=s=>U.value=s),placeholder:"Cari produk...",class:"pl-10",onKeydown:G(c,["enter"])},null,8,["modelValue"])]),t(e(E),{modelValue:K.value,"onUpdate:modelValue":[a[2]||(a[2]=s=>K.value=s),c]},{default:l(()=>[t(e(z),{class:"w-[200px]"},{default:l(()=>[t(e(H),{placeholder:"Semua Kategori"})]),_:1}),t(e(R),null,{default:l(()=>[t(e(_),{value:"all"},{default:l(()=>[...a[13]||(a[13]=[u("Semua Kategori",-1)])]),_:1}),(n(!0),$(C,null,P(m.categories,s=>(n(),p(e(_),{key:s.id,value:s.id.toString()},{default:l(()=>[u(r(s.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),t(e(E),{modelValue:A.value,"onUpdate:modelValue":[a[3]||(a[3]=s=>A.value=s),c]},{default:l(()=>[t(e(z),{class:"w-[150px]"},{default:l(()=>[t(e(H),{placeholder:"Status"})]),_:1}),t(e(R),null,{default:l(()=>[t(e(_),{value:"all"},{default:l(()=>[...a[14]||(a[14]=[u("Semua Status",-1)])]),_:1}),t(e(_),{value:"1"},{default:l(()=>[...a[15]||(a[15]=[u("Aktif",-1)])]),_:1}),t(e(_),{value:"0"},{default:l(()=>[...a[16]||(a[16]=[u("Tidak Aktif",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(e(E),{modelValue:D.value,"onUpdate:modelValue":[a[4]||(a[4]=s=>D.value=s),c]},{default:l(()=>[t(e(z),{class:"w-[100px]"},{default:l(()=>[t(e(H))]),_:1}),t(e(R),null,{default:l(()=>[t(e(_),{value:10},{default:l(()=>[...a[17]||(a[17]=[u("10",-1)])]),_:1}),t(e(_),{value:25},{default:l(()=>[...a[18]||(a[18]=[u("25",-1)])]),_:1}),t(e(_),{value:50},{default:l(()=>[...a[19]||(a[19]=[u("50",-1)])]),_:1}),t(e(_),{value:100},{default:l(()=>[...a[20]||(a[20]=[u("100",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),d("div",oe,[t(e(h),null,{default:l(()=>[t(e(ee),null,{default:l(()=>[t(e(I),null,{default:l(()=>[t(e(f),null,{default:l(()=>[t(e(v),{variant:"ghost",onClick:a[5]||(a[5]=s=>g("sku")),class:"flex items-center gap-1 p-0 h-auto"},{default:l(()=>[a[21]||(a[21]=u(" SKU ",-1)),t(e(y),{class:"h-3 w-3"})]),_:1})]),_:1}),t(e(f),null,{default:l(()=>[t(e(v),{variant:"ghost",onClick:a[6]||(a[6]=s=>g("name")),class:"flex items-center gap-1 p-0 h-auto"},{default:l(()=>[a[22]||(a[22]=u(" Nama Produk ",-1)),t(e(y),{class:"h-3 w-3"})]),_:1})]),_:1}),t(e(f),null,{default:l(()=>[...a[23]||(a[23]=[u("Kategori",-1)])]),_:1}),t(e(f),null,{default:l(()=>[t(e(v),{variant:"ghost",onClick:a[7]||(a[7]=s=>g("base_price")),class:"flex items-center gap-1 p-0 h-auto"},{default:l(()=>[a[24]||(a[24]=u(" Harga ",-1)),t(e(y),{class:"h-3 w-3"})]),_:1})]),_:1}),t(e(f),null,{default:l(()=>[t(e(v),{variant:"ghost",onClick:a[8]||(a[8]=s=>g("bv")),class:"flex items-center gap-1 p-0 h-auto"},{default:l(()=>[a[25]||(a[25]=u(" BV ",-1)),t(e(y),{class:"h-3 w-3"})]),_:1})]),_:1}),t(e(f),null,{default:l(()=>[...a[26]||(a[26]=[u("Total Bonus",-1)])]),_:1}),t(e(f),null,{default:l(()=>[t(e(v),{variant:"ghost",onClick:a[9]||(a[9]=s=>g("b_retail")),class:"flex items-center gap-1 p-0 h-auto"},{default:l(()=>[a[27]||(a[27]=u(" B. Retail ",-1)),t(e(y),{class:"h-3 w-3"})]),_:1})]),_:1}),t(e(f),null,{default:l(()=>[t(e(v),{variant:"ghost",onClick:a[10]||(a[10]=s=>g("stock")),class:"flex items-center gap-1 p-0 h-auto"},{default:l(()=>[a[28]||(a[28]=u(" Stok ",-1)),t(e(y),{class:"h-3 w-3"})]),_:1})]),_:1}),t(e(f),null,{default:l(()=>[...a[29]||(a[29]=[u("Status",-1)])]),_:1}),t(e(f),{class:"w-[80px]"})]),_:1})]),_:1}),t(e(te),null,{default:l(()=>[m.products.data.length===0?(n(),p(e(I),{key:0},{default:l(()=>[t(e(o),{colspan:"10",class:"text-center text-muted-foreground"},{default:l(()=>[...a[30]||(a[30]=[u(" Tidak ada produk ditemukan ",-1)])]),_:1})]),_:1})):w("",!0),(n(!0),$(C,null,P(m.products.data,s=>(n(),p(e(I),{key:s.id},{default:l(()=>[t(e(o),{class:"font-medium"},{default:l(()=>[u(r(s.sku),1)]),_:2},1024),t(e(o),null,{default:l(()=>[u(r(s.name),1)]),_:2},1024),t(e(o),null,{default:l(()=>[d("div",fe,[(n(!0),$(C,null,P(s.categories,b=>(n(),p(e(V),{key:b.id,variant:"secondary"},{default:l(()=>[u(r(b.name),1)]),_:2},1024))),128))])]),_:2},1024),t(e(o),null,{default:l(()=>[u(r(F(s.base_price)),1)]),_:2},1024),t(e(o),null,{default:l(()=>[t(e(V),{variant:"outline"},{default:l(()=>[u(r(s.bv||0),1)]),_:2},1024)]),_:2},1024),t(e(o),null,{default:l(()=>[u(r(M(s)),1)]),_:2},1024),t(e(o),null,{default:l(()=>[t(e(V),{variant:"outline"},{default:l(()=>[u(r(s.b_retail?F(s.b_retail):"-"),1)]),_:2},1024)]),_:2},1024),t(e(o),null,{default:l(()=>[t(e(V),{variant:s.stock>0?"default":"destructive"},{default:l(()=>[u(r(s.stock),1)]),_:2},1032,["variant"])]),_:2},1024),t(e(o),null,{default:l(()=>[t(e(V),{variant:s.is_active?"default":"secondary"},{default:l(()=>[u(r(s.is_active?"Aktif":"Tidak Aktif"),1)]),_:2},1032,["variant"])]),_:2},1024),t(e(o),null,{default:l(()=>[t(e(ae),null,{default:l(()=>[t(e(le),{"as-child":""},{default:l(()=>[t(e(v),{variant:"ghost",size:"icon"},{default:l(()=>[t(e(J),{class:"h-4 w-4"})]),_:1})]),_:1}),t(e(se),{align:"end"},{default:l(()=>[e(N)||e(T)?(n(),p(e(L),{key:0,onClick:b=>e(S).visit(`/admin/products/${s.id}/edit`)},{default:l(()=>[...a[31]||(a[31]=[u(" Edit ",-1)])]),_:1},8,["onClick"])):w("",!0),e(N)||e(T)?(n(),p(e(L),{key:1,onClick:b=>O(s.id),class:"text-destructive"},{default:l(()=>[...a[32]||(a[32]=[u(" Hapus ",-1)])]),_:1},8,["onClick"])):w("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),m.products.last_page>1?(n(),$("div",me,[d("p",ve," Menampilkan "+r(m.products.data.length)+" dari "+r(m.products.total)+" produk ",1),d("div",_e,[(n(!0),$(C,null,P(m.products.last_page,s=>(n(),p(e(v),{key:s,variant:s===m.products.current_page?"default":"outline",size:"sm",onClick:b=>e(S).get(`/admin/products?page=${s}`)},{default:l(()=>[u(r(s),1)]),_:2},1032,["variant","onClick"]))),128))])])):w("",!0)])]),_:1})],64))}});export{Pe as default};
