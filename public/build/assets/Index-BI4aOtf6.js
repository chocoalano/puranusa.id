import{d as F,r as k,p as v,q as K,c as o,g as a,w as s,e as $,b as r,u as t,s as S,aD as P,t as C,v as m,F as _,x as f,y as T,n,z as j,j as b,A as z,B as E}from"./vendor-0sCoMzHy.js";import{_ as H}from"./AppLayout.vue_vue_type_script_setup_true_lang-J4pIkQSF.js";import{_ as L}from"./StatisticsCards.vue_vue_type_script_setup_true_lang-B4ZJTRX0.js";import{_ as q,a as Q}from"./TablePagination.vue_vue_type_script_setup_true_lang-Clf_fCAI.js";import{_ as U,a as G}from"./CardContent.vue_vue_type_script_setup_true_lang-DUWiWpeg.js";import{_ as J}from"./CardHeader.vue_vue_type_script_setup_true_lang-Bo9DeG24.js";import{_ as W}from"./CardTitle.vue_vue_type_script_setup_true_lang-SuNAGsFF.js";import{_ as X}from"./index-DJk7aHkf.js";import{_ as Y,a as Z,b as w,c as O,d as ee,e as D}from"./TableHeader.vue_vue_type_script_setup_true_lang-Bg-l8dVV.js";import"./index-DaR_mHDg.js";import"./AvatarFallback.vue_vue_type_script_setup_true_lang-BhL6n9ND.js";import"./AvatarImage.vue_vue_type_script_setup_true_lang-CAfd5pFE.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-KgsqrYLn.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DEiiatvc.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-CbD5L1KI.js";import"./CardDescription.vue_vue_type_script_setup_true_lang-CcT-2mF2.js";import"./Input.vue_vue_type_script_setup_true_lang-nikPKNAJ.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-Dc4bXstG.js";const te={class:"space-y-6"},se={class:"rounded-md border"},ye=F({__name:"Index",props:{newsletters:{},statistics:{},filters:{}},setup(p){const c=p,u=k(c.filters?.search||""),g=k([]);let y;const V=v(()=>[{label:"Total Subscriber",value:c.statistics.total_subscribers},{label:"Hari Ini",value:c.statistics.total_today},{label:"Bulan Ini",value:c.statistics.total_this_month}]),M=v(()=>[{type:"search",placeholder:"Cari email...",modelValue:u.value}]),N=()=>{clearTimeout(y),y=setTimeout(()=>{b.get("/admin/settings/newsletters",{search:u.value},{preserveState:!0,preserveScroll:!0})},300)},R=(e,l)=>{const d=l?.toString()||"";e===0&&(u.value=d,N())},B=e=>{confirm("Apakah Anda yakin ingin menghapus subscriber ini?")&&b.delete(`/admin/settings/newsletters/${e}`,{preserveScroll:!0})},A=e=>new Date(e).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),x=[{id:"index",header:()=>n("div",{class:"w-12"},"No"),cell:({row:e})=>{const l=e.index+1+(c.newsletters.current_page-1)*c.newsletters.per_page;return n("div",{class:"font-medium"},l)}},{accessorKey:"email",header:"Email",cell:({row:e})=>n("div",{class:"font-medium"},e.getValue("email"))},{accessorKey:"ip_address",header:"IP Address",cell:({row:e})=>n("code",{class:"rounded bg-muted px-2 py-1 text-xs"},e.getValue("ip_address"))},{accessorKey:"created_at",header:"Tanggal Daftar",cell:({row:e})=>n("div",{class:"text-sm"},A(e.getValue("created_at")))},{id:"actions",header:()=>n("div",{class:"text-right"},"Aksi"),cell:({row:e})=>{const l=e.original;return n("div",{class:"flex justify-end gap-2"},[n(X,{variant:"ghost",size:"sm",onClick:()=>B(l.id)},()=>n(j,{class:"h-4 w-4 text-destructive"}))])}}],h=K({data:v(()=>c.newsletters.data),columns:x,getCoreRowModel:E(),getSortedRowModel:z(),state:{get sorting(){return g.value}},onSortingChange:e=>{g.value=typeof e=="function"?e(g.value):e}}),I=e=>{b.get("/admin/settings/newsletters",{page:e,search:u.value},{preserveState:!0,preserveScroll:!0})};return(e,l)=>(a(),o(H,{title:"Newsletter Subscribers"},{default:s(()=>[$("div",te,[r(L,{stats:V.value,columns:3},null,8,["stats"]),r(t(U),null,{default:s(()=>[r(t(J),null,{default:s(()=>[r(t(W),{class:"flex items-center gap-2"},{default:s(()=>[r(t(P),{class:"h-5 w-5"}),l[0]||(l[0]=S(" Newsletter Subscribers ",-1))]),_:1})]),_:1}),r(t(G),{class:"space-y-4"},{default:s(()=>[r(q,{filters:M.value,"on-update":R},null,8,["filters"]),$("div",se,[r(t(Y),null,{default:s(()=>[r(t(Z),null,{default:s(()=>[(a(!0),m(_,null,f(t(h).getHeaderGroups(),d=>(a(),o(t(w),{key:d.id},{default:s(()=>[(a(!0),m(_,null,f(d.headers,i=>(a(),o(t(O),{key:i.id},{default:s(()=>[i.isPlaceholder?C("",!0):(a(),o(t(T),{key:0,render:i.column.columnDef.header,props:i.getContext()},null,8,["render","props"]))]),_:2},1024))),128))]),_:2},1024))),128))]),_:1}),r(t(ee),null,{default:s(()=>[t(h).getRowModel().rows?.length?(a(!0),m(_,{key:0},f(t(h).getRowModel().rows,d=>(a(),o(t(w),{key:d.id},{default:s(()=>[(a(!0),m(_,null,f(d.getVisibleCells(),i=>(a(),o(t(D),{key:i.id},{default:s(()=>[r(t(T),{render:i.column.columnDef.cell,props:i.getContext()},null,8,["render","props"])]),_:2},1024))),128))]),_:2},1024))),128)):(a(),o(t(w),{key:1},{default:s(()=>[r(t(D),{colspan:x.length,class:"h-24 text-center"},{default:s(()=>[...l[1]||(l[1]=[S(" Tidak ada data subscriber. ",-1)])]),_:1},8,["colspan"])]),_:1}))]),_:1})]),_:1})]),p.newsletters.last_page>1?(a(),o(Q,{key:0,data:p.newsletters,"on-page-change":I,"item-label":"subscriber"},null,8,["data"])):C("",!0)]),_:1})]),_:1})])]),_:1}))}});export{ye as default};
