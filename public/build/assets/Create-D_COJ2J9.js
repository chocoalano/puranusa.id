import{d as K,D as F,r as k,p as V,v as d,g as i,b as t,u as e,a0 as j,w as a,e as r,a3 as $,s as n,G as A,ad as E,t as m,K as u,ag as G,ak as z,Z as I,F as S,x as J,Q as h}from"./vendor-DGO3ezSh.js";import{i as P,_ as Q,s as R}from"./AppLayout.vue_vue_type_script_setup_true_lang-84tL2wVt.js";import{_ as b}from"./index-p1XqrTaB.js";import{_}from"./Input.vue_vue_type_script_setup_true_lang-BOQ98pUO.js";import{_ as p}from"./Label.vue_vue_type_script_setup_true_lang-DhaSprrA.js";import{_ as C,a as M}from"./CardContent.vue_vue_type_script_setup_true_lang-Bn_j05SD.js";import{_ as U}from"./CardDescription.vue_vue_type_script_setup_true_lang-DX-GJzuo.js";import{_ as L}from"./CardHeader.vue_vue_type_script_setup_true_lang-CXiZUsYP.js";import{_ as B}from"./CardTitle.vue_vue_type_script_setup_true_lang-C8sdAIK-.js";import{_ as Z,a as H,b as O,c as W,d as w}from"./SelectValue.vue_vue_type_script_setup_true_lang-Dp0JlaKf.js";import"./index-DaR_mHDg.js";import"./AvatarFallback.vue_vue_type_script_setup_true_lang-BCTRkhoz.js";import"./AvatarImage.vue_vue_type_script_setup_true_lang-IyrdkPzY.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-CBMnmEAQ.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-aUuRqzXG.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-B0H8bar2.js";const X={class:"rounded-xl p-4 space-y-6 py-6"},Y={class:"flex items-center justify-between"},ee={class:"grid gap-4 md:grid-cols-2"},se={class:"space-y-2"},te={key:0,class:"text-sm text-destructive"},oe={class:"space-y-2"},ae={key:0,class:"text-sm text-destructive"},re={class:"space-y-2"},le={key:0,class:"text-sm text-destructive"},ne={class:"space-y-2"},de={key:0,class:"text-sm text-destructive"},ie={class:"space-y-2"},ue={key:0,class:"text-sm text-destructive"},me={class:"space-y-2"},pe={class:"space-y-2"},fe={class:"grid gap-4 md:grid-cols-2"},_e={class:"space-y-2"},ge={class:"relative"},ve={class:"relative"},xe={key:0,class:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md border bg-popover p-1 shadow-md"},ce=["onClick"],be={class:"font-medium"},we={class:"text-xs text-muted-foreground"},ye={key:0,class:"mt-2 rounded-md border bg-muted p-3"},ke={class:"text-sm font-medium"},Ve={class:"text-xs text-muted-foreground"},$e={key:1,class:"text-sm text-destructive"},Se={class:"space-y-2"},he={key:0,class:"text-sm text-destructive"},Pe={class:"flex justify-end gap-4"},Je=K({__name:"Create",props:{customers:{}},setup(q){const x=q,o=F({name:"",email:"",phone:"",password:"",password_confirmation:"",sponsor_id:null,status:3,registration_amount:1e5,description:""}),g=k(""),v=k(!1),c=V(()=>x.customers.find(f=>f.id===o.sponsor_id)),y=V(()=>{if(!g.value)return x.customers;const f=g.value.toLowerCase();return x.customers.filter(s=>s.name.toLowerCase().includes(f)||s.ewallet_id.toLowerCase().includes(f))}),D=f=>{o.sponsor_id=f.id,v.value=!1,g.value=""},N=()=>{typeof window<"u"&&window.setTimeout(()=>{v.value=!1},200)},T=()=>{o.post(R.url(),{preserveScroll:!0,onSuccess:()=>{h.success("Pelanggan berhasil didaftarkan")},onError:()=>{h.error("Gagal mendaftarkan pelanggan")}})};return(f,s)=>(i(),d(S,null,[t(e(j),{title:"Tambah Pelanggan"}),t(Q,null,{default:a(()=>[r("div",X,[r("div",Y,[s[11]||(s[11]=r("div",null,[r("h1",{class:"text-3xl font-bold"},"Tambah Pelanggan"),r("p",{class:"mt-2 text-muted-foreground"}," Daftarkan pelanggan baru ke dalam sistem MLM ")],-1)),t(e($),{href:e(P).url()},{default:a(()=>[t(e(b),{variant:"outline"},{default:a(()=>[t(e(A),{class:"mr-2 h-4 w-4"}),s[10]||(s[10]=n(" Kembali ",-1))]),_:1})]),_:1},8,["href"])]),r("form",{onSubmit:E(T,["prevent"]),class:"space-y-6"},[t(e(C),null,{default:a(()=>[t(e(L),null,{default:a(()=>[t(e(B),null,{default:a(()=>[...s[12]||(s[12]=[n("Informasi Pribadi",-1)])]),_:1}),t(e(U),null,{default:a(()=>[...s[13]||(s[13]=[n(" Data pribadi pelanggan yang akan didaftarkan ",-1)])]),_:1})]),_:1}),t(e(M),{class:"space-y-4"},{default:a(()=>[r("div",ee,[r("div",se,[t(e(p),{for:"name"},{default:a(()=>[...s[14]||(s[14]=[n("Nama Lengkap *",-1)])]),_:1}),t(e(_),{id:"name",modelValue:e(o).name,"onUpdate:modelValue":s[0]||(s[0]=l=>e(o).name=l),placeholder:"Masukkan nama lengkap",required:""},null,8,["modelValue"]),e(o).errors.name?(i(),d("p",te,u(e(o).errors.name),1)):m("",!0)]),r("div",oe,[t(e(p),{for:"email"},{default:a(()=>[...s[15]||(s[15]=[n("Email *",-1)])]),_:1}),t(e(_),{id:"email",modelValue:e(o).email,"onUpdate:modelValue":s[1]||(s[1]=l=>e(o).email=l),type:"email",placeholder:"nama@email.com",required:""},null,8,["modelValue"]),e(o).errors.email?(i(),d("p",ae,u(e(o).errors.email),1)):m("",!0)]),r("div",re,[t(e(p),{for:"phone"},{default:a(()=>[...s[16]||(s[16]=[n("No. Telepon",-1)])]),_:1}),t(e(_),{id:"phone",modelValue:e(o).phone,"onUpdate:modelValue":s[2]||(s[2]=l=>e(o).phone=l),placeholder:"08xxxxxxxxxx"},null,8,["modelValue"]),e(o).errors.phone?(i(),d("p",le,u(e(o).errors.phone),1)):m("",!0)]),r("div",ne,[t(e(p),{for:"registration_amount"},{default:a(()=>[...s[17]||(s[17]=[n("Biaya Registrasi *",-1)])]),_:1}),t(e(_),{id:"registration_amount",modelValue:e(o).registration_amount,"onUpdate:modelValue":s[3]||(s[3]=l=>e(o).registration_amount=l),modelModifiers:{number:!0},type:"number",min:"0",step:"1000",required:""},null,8,["modelValue"]),e(o).errors.registration_amount?(i(),d("p",de,u(e(o).errors.registration_amount),1)):m("",!0)]),r("div",ie,[t(e(p),{for:"password"},{default:a(()=>[...s[18]||(s[18]=[n("Password *",-1)])]),_:1}),t(e(_),{id:"password",modelValue:e(o).password,"onUpdate:modelValue":s[4]||(s[4]=l=>e(o).password=l),type:"password",placeholder:"Minimal 8 karakter",required:""},null,8,["modelValue"]),e(o).errors.password?(i(),d("p",ue,u(e(o).errors.password),1)):m("",!0)]),r("div",me,[t(e(p),{for:"password_confirmation"},{default:a(()=>[...s[19]||(s[19]=[n("Konfirmasi Password *",-1)])]),_:1}),t(e(_),{id:"password_confirmation",modelValue:e(o).password_confirmation,"onUpdate:modelValue":s[5]||(s[5]=l=>e(o).password_confirmation=l),type:"password",placeholder:"Ulangi password",required:""},null,8,["modelValue"])])]),r("div",pe,[t(e(p),{for:"description"},{default:a(()=>[...s[20]||(s[20]=[n("Keterangan",-1)])]),_:1}),G(r("textarea",{id:"description","onUpdate:modelValue":s[6]||(s[6]=l=>e(o).description=l),placeholder:"Keterangan tambahan (opsional)",rows:"3",class:"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm"},null,512),[[z,e(o).description]])])]),_:1})]),_:1}),t(e(C),null,{default:a(()=>[t(e(L),null,{default:a(()=>[t(e(B),null,{default:a(()=>[...s[21]||(s[21]=[n("Struktur Jaringan MLM",-1)])]),_:1}),t(e(U),null,{default:a(()=>[...s[22]||(s[22]=[n(" Pilih sponsor dan status pelanggan ",-1)])]),_:1})]),_:1}),t(e(M),{class:"space-y-4"},{default:a(()=>[r("div",fe,[r("div",_e,[t(e(p),{for:"sponsor"},{default:a(()=>[...s[23]||(s[23]=[n("Sponsor",-1)])]),_:1}),r("div",ge,[r("div",ve,[t(e(_),{modelValue:g.value,"onUpdate:modelValue":s[7]||(s[7]=l=>g.value=l),onFocus:s[8]||(s[8]=l=>v.value=!0),onBlur:N,placeholder:"Cari sponsor..."},null,8,["modelValue"]),t(e(I),{class:"absolute right-3 top-3 h-4 w-4 text-muted-foreground"})]),v.value&&y.value.length>0?(i(),d("div",xe,[(i(!0),d(S,null,J(y.value,l=>(i(),d("button",{key:l.id,type:"button",onClick:Ce=>D(l),class:"w-full rounded px-3 py-2 text-left text-sm hover:bg-accent"},[r("div",be,u(l.name),1),r("div",we,u(l.ewallet_id),1)],8,ce))),128))])):m("",!0)]),c.value?(i(),d("div",ye,[r("p",ke,u(c.value.name),1),r("p",Ve,u(c.value.ewallet_id),1)])):m("",!0),e(o).errors.sponsor_id?(i(),d("p",$e,u(e(o).errors.sponsor_id),1)):m("",!0)]),r("div",Se,[t(e(p),{for:"status"},{default:a(()=>[...s[24]||(s[24]=[n("Status *",-1)])]),_:1}),t(e(Z),{modelValue:e(o).status,"onUpdate:modelValue":s[9]||(s[9]=l=>e(o).status=l)},{default:a(()=>[t(e(H),null,{default:a(()=>[t(e(O),{placeholder:"Pilih status"})]),_:1}),t(e(W),null,{default:a(()=>[t(e(w),{value:3},{default:a(()=>[...s[25]||(s[25]=[n("Prospek",-1)])]),_:1}),t(e(w),{value:2},{default:a(()=>[...s[26]||(s[26]=[n("Pasif",-1)])]),_:1}),t(e(w),{value:1},{default:a(()=>[...s[27]||(s[27]=[n("Aktif",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"]),s[28]||(s[28]=r("p",{class:"text-xs text-muted-foreground"}," Prospek: belum terdaftar di jaringan, Pasif: terdaftar tapi belum aktif, Aktif: terdaftar dan aktif ",-1)),e(o).errors.status?(i(),d("p",he,u(e(o).errors.status),1)):m("",!0)])])]),_:1})]),_:1}),r("div",Pe,[t(e($),{href:e(P).url()},{default:a(()=>[t(e(b),{type:"button",variant:"outline"},{default:a(()=>[...s[29]||(s[29]=[n(" Batal ",-1)])]),_:1})]),_:1},8,["href"]),t(e(b),{type:"submit",disabled:e(o).processing},{default:a(()=>[n(u(e(o).processing?"Menyimpan...":"Simpan Pelanggan"),1)]),_:1},8,["disabled"])])],32)])]),_:1})],64))}});export{Je as default};
