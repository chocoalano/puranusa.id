import{_ as v}from"./index-D-ZDeNW7.js";import{_ as C,a as S}from"./CardContent.vue_vue_type_script_setup_true_lang-DMEXwOYw.js";import{_ as j}from"./CardHeader.vue_vue_type_script_setup_true_lang-DAmVrl_s.js";import{_ as D}from"./CardTitle.vue_vue_type_script_setup_true_lang-BNxuRtlf.js";import{_ as H}from"./Input.vue_vue_type_script_setup_true_lang-B8h33Tay.js";import{_ as E,a as J,b as $,c as Q,d as Y,e as P}from"./TableHeader.vue_vue_type_script_setup_true_lang-B4pjwwGU.js";import{_ as G}from"./AppLayout.vue_vue_type_script_setup_true_lang-FntsTJOn.js";import{d as W,r as T,q as X,D as V,j as K,c as f,g as o,w as s,b as a,e as n,u as e,$ as Z,v as x,t as N,s as p,a0 as z,J as h,a1 as O,Y as ee,F as _,x as y,y as B,n as i,a2 as b,H as k,a3 as te,a4 as ae,a5 as se,a6 as re,a7 as F,a8 as q,a9 as L,A as le,B as ne}from"./vendor-zBKKL15G.js";import"./index-B7Ms5jW_.js";import"./AvatarFallback.vue_vue_type_script_setup_true_lang-kKofCkkG.js";import"./AvatarImage.vue_vue_type_script_setup_true_lang-CzoF4v2h.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-CJL3Y8wp.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-5qqdoF-N.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-DSZTc71l.js";const ie={class:"rounded-xl p-4 space-y-6 py-6"},oe={class:"grid gap-4 md:grid-cols-3"},de={class:"text-2xl font-bold"},ce={class:"text-2xl font-bold"},ue={class:"text-2xl font-bold"},me={class:"flex items-center gap-4"},fe={class:"relative flex-1"},ge={class:"rounded-md border"},ve={key:0,class:"flex items-center justify-between"},he={class:"text-sm text-muted-foreground"},xe={class:"flex gap-2"},Pe=W({__name:"Index",props:{carts:{},statistics:{},filters:{}},setup(r){const g=r,U=[{title:"Keranjang Pelanggan",href:"/admin/carts"}],u=T(g.filters.search||""),d=T([{id:g.filters.sort_by,desc:g.filters.sort_order==="desc"}]),I=t=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(t),A=t=>new Date(t).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),R=[{id:"index",header:()=>i("div",{class:"w-12"},"No"),cell:({row:t})=>{const l=t.index+1+(g.carts.current_page-1)*g.carts.per_page;return i("div",{class:"font-medium"},l)}},{accessorKey:"customer.name",header:({column:t})=>i(v,{variant:"ghost",onClick:()=>t.toggleSorting(t.getIsSorted()==="asc"),class:"-ml-4"},()=>["Pelanggan",i(t.getIsSorted()==="asc"?F:t.getIsSorted()==="desc"?q:L,{class:"ml-2 h-4 w-4"})]),cell:({row:t})=>i("div",[i("div",{class:"font-medium"},t.original.customer.name),i("div",{class:"text-xs text-muted-foreground"},t.original.customer.email)])},{accessorKey:"product.name",header:()=>"Produk",cell:({row:t})=>i("div",{class:"max-w-xs truncate"},t.original.product.name)},{accessorKey:"quantity",header:()=>i("div",{class:"text-center"},"Qty"),cell:({row:t})=>i("div",{class:"text-center font-medium"},()=>t.getValue("quantity"))},{id:"subtotal",header:()=>i("div",{class:"text-right"},"Subtotal"),cell:({row:t})=>{const l=t.original.product.price*t.original.quantity;return i("div",{class:"text-right font-medium"},()=>I(l))}},{accessorKey:"created_at",header:({column:t})=>i(v,{variant:"ghost",onClick:()=>t.toggleSorting(t.getIsSorted()==="asc"),class:"-ml-4"},()=>["Ditambahkan",i(t.getIsSorted()==="asc"?F:t.getIsSorted()==="desc"?q:L,{class:"ml-2 h-4 w-4"})]),cell:({row:t})=>A(t.getValue("created_at"))}],w=X({get data(){return g.carts.data},columns:R,getCoreRowModel:ne(),getSortedRowModel:le(),state:{get sorting(){return d.value}},onSortingChange:t=>{d.value=typeof t=="function"?t(d.value):t},manualSorting:!0});V(d,t=>{t.length>0&&K.get("/admin/carts",{search:u.value||void 0,sort_by:t[0].id,sort_order:t[0].desc?"desc":"asc"},{preserveState:!0,preserveScroll:!0})},{deep:!0});let M;return V(u,()=>{clearTimeout(M),M=setTimeout(()=>{K.get("/admin/carts",{search:u.value||void 0,sort_by:d.value[0]?.id||"created_at",sort_order:d.value[0]?.desc?"desc":"asc"},{preserveState:!0,preserveScroll:!0})},300)}),(t,l)=>(o(),f(G,{breadcrumbs:U},{default:s(()=>[a(e(Z),{title:"Keranjang Pelanggan"}),n("div",ie,[l[8]||(l[8]=n("div",{class:"flex items-center justify-between"},[n("div",null,[n("h1",{class:"text-3xl font-bold tracking-tight"},"Keranjang Pelanggan"),n("p",{class:"text-muted-foreground"},"Monitor keranjang belanja pelanggan")])],-1)),n("div",oe,[a(e(C),null,{default:s(()=>[a(e(j),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[a(e(D),{class:"text-sm font-medium"},{default:s(()=>[...l[1]||(l[1]=[p("Total Keranjang",-1)])]),_:1}),a(e(z),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),a(e(S),null,{default:s(()=>[n("div",de,h(r.statistics.total_carts),1),l[2]||(l[2]=n("p",{class:"text-xs text-muted-foreground"},"Aktif",-1))]),_:1})]),_:1}),a(e(C),null,{default:s(()=>[a(e(j),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[a(e(D),{class:"text-sm font-medium"},{default:s(()=>[...l[3]||(l[3]=[p("Total Item",-1)])]),_:1}),a(e(O),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),a(e(S),null,{default:s(()=>[n("div",ce,h(r.statistics.total_items),1),l[4]||(l[4]=n("p",{class:"text-xs text-muted-foreground"},"Produk di keranjang",-1))]),_:1})]),_:1}),a(e(C),null,{default:s(()=>[a(e(j),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[a(e(D),{class:"text-sm font-medium"},{default:s(()=>[...l[5]||(l[5]=[p("Nilai Total",-1)])]),_:1}),a(e(z),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),a(e(S),null,{default:s(()=>[n("div",ue,h(I(r.statistics.total_value)),1),l[6]||(l[6]=n("p",{class:"text-xs text-muted-foreground"},"Potential revenue",-1))]),_:1})]),_:1})]),n("div",me,[n("div",fe,[a(e(ee),{class:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),a(e(H),{modelValue:u.value,"onUpdate:modelValue":l[0]||(l[0]=m=>u.value=m),placeholder:"Cari pelanggan atau produk...",class:"pl-9"},null,8,["modelValue"])])]),n("div",ge,[a(e(E),null,{default:s(()=>[a(e(J),null,{default:s(()=>[(o(!0),x(_,null,y(e(w).getHeaderGroups(),m=>(o(),f(e($),{key:m.id},{default:s(()=>[(o(!0),x(_,null,y(m.headers,c=>(o(),f(e(Q),{key:c.id},{default:s(()=>[c.isPlaceholder?N("",!0):(o(),f(e(B),{key:0,render:c.column.columnDef.header,props:c.getContext()},null,8,["render","props"]))]),_:2},1024))),128))]),_:2},1024))),128))]),_:1}),a(e(Y),null,{default:s(()=>[e(w).getRowModel().rows?.length?(o(!0),x(_,{key:0},y(e(w).getRowModel().rows,m=>(o(),f(e($),{key:m.id},{default:s(()=>[(o(!0),x(_,null,y(m.getVisibleCells(),c=>(o(),f(e(P),{key:c.id},{default:s(()=>[a(e(B),{render:c.column.columnDef.cell,props:c.getContext()},null,8,["render","props"])]),_:2},1024))),128))]),_:2},1024))),128)):(o(),f(e($),{key:1},{default:s(()=>[a(e(P),{colspan:R.length,class:"h-24 text-center"},{default:s(()=>[...l[7]||(l[7]=[p(" Tidak ada data keranjang. ",-1)])]),_:1},8,["colspan"])]),_:1}))]),_:1})]),_:1})]),r.carts.last_page>1?(o(),x("div",ve,[n("p",he," Menampilkan "+h((r.carts.current_page-1)*r.carts.per_page+1)+" hingga "+h(Math.min(r.carts.current_page*r.carts.per_page,r.carts.total))+" dari "+h(r.carts.total)+" hasil ",1),n("div",xe,[a(e(v),{variant:"outline",size:"sm",disabled:r.carts.current_page===1,"as-child":""},{default:s(()=>[a(e(b),{href:"/admin/carts",data:{page:1,search:u.value||void 0,sort_by:d.value[0]?.id,sort_order:d.value[0]?.desc?"desc":"asc"},class:k({"pointer-events-none opacity-50":r.carts.current_page===1}),"preserve-scroll":"","preserve-state":""},{default:s(()=>[a(e(te),{class:"h-4 w-4"})]),_:1},8,["data","class"])]),_:1},8,["disabled"]),a(e(v),{variant:"outline",size:"sm",disabled:!r.carts.links[0]?.url,"as-child":""},{default:s(()=>[a(e(b),{href:r.carts.links[0]?.url||"#",class:k({"pointer-events-none opacity-50":!r.carts.links[0]?.url}),"preserve-scroll":"","preserve-state":""},{default:s(()=>[a(e(ae),{class:"h-4 w-4"})]),_:1},8,["href","class"])]),_:1},8,["disabled"]),a(e(v),{variant:"outline",size:"sm",disabled:!r.carts.links[r.carts.links.length-1]?.url,"as-child":""},{default:s(()=>[a(e(b),{href:r.carts.links[r.carts.links.length-1]?.url||"#",class:k({"pointer-events-none opacity-50":!r.carts.links[r.carts.links.length-1]?.url}),"preserve-scroll":"","preserve-state":""},{default:s(()=>[a(e(se),{class:"h-4 w-4"})]),_:1},8,["href","class"])]),_:1},8,["disabled"]),a(e(v),{variant:"outline",size:"sm",disabled:r.carts.current_page===r.carts.last_page,"as-child":""},{default:s(()=>[a(e(b),{href:"/admin/carts",data:{page:r.carts.last_page,search:u.value||void 0,sort_by:d.value[0]?.id,sort_order:d.value[0]?.desc?"desc":"asc"},class:k({"pointer-events-none opacity-50":r.carts.current_page===r.carts.last_page}),"preserve-scroll":"","preserve-state":""},{default:s(()=>[a(e(re),{class:"h-4 w-4"})]),_:1},8,["data","class"])]),_:1},8,["disabled"])])])):N("",!0)])]),_:1}))}});export{Pe as default};
