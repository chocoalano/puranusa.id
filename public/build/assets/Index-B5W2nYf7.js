import{_ as Fe,a as Ke,b as Q,c as ee}from"./TabsTrigger.vue_vue_type_script_setup_true_lang-cujzmSfi.js";import{_ as pt}from"./Ecommerce.vue_vue_type_script_setup_true_lang-KJhdcIxV.js";import{d as J,r as T,p as E,c as P,g as r,u as e,w as a,b as s,e as t,s as o,K as n,cw as ie,aN as pe,bt as xt,cK as ft,dd as vt,Q as j,E as Pe,v as p,M as fe,Y as gt,F as G,x as te,J as U,t as C,aX as bt,$ as yt,z as Ue,h as ne,j as me,D as de,d3 as kt,dp as _t,dq as tt,ct as ht,aI as Se,aE as wt,dn as $t,ad as je,L as Ee,a2 as ge,aj as Ct,aF as be,C as Pt,aO as Ge,dr as st,ds as St,a3 as Rt,dt as at,du as lt,o as We,aH as nt,aq as rt,d7 as Ne,ap as Me,dm as Te,cx as qe,cv as De,cW as ce,dv as ve,dw as jt,d2 as Mt,ar as ot,at as Je,dx as Tt,dg as Dt,dy as At,aD as Bt,dz as Vt,dA as Lt,au as It,dB as Ut,a1 as Et,as as it,dC as dt,a0 as Nt}from"./vendor-CZXNXaHB.js";import{_ as Oe,a as Ot}from"./AvatarFallback.vue_vue_type_script_setup_true_lang-TpB8oA6T.js";import{_ as ze}from"./AvatarImage.vue_vue_type_script_setup_true_lang-Bh3WDF-P.js";import{_ as A}from"./index-B-sjbl-G.js";import{_ as z,a as F}from"./CardContent.vue_vue_type_script_setup_true_lang-tg0tM1mE.js";import{_ as I}from"./index-DQccm4Bv.js";import{_ as W}from"./CardHeader.vue_vue_type_script_setup_true_lang-DNr1O3j0.js";import{_ as q}from"./CardTitle.vue_vue_type_script_setup_true_lang-DiexmtNY.js";import{a as ye,b as ke,c as _e,d as he,_ as we}from"./DialogTitle.vue_vue_type_script_setup_true_lang-CBq_BxBW.js";import{_ as $e}from"./DialogFooter.vue_vue_type_script_setup_true_lang-ib92ZSBd.js";import{_ as se}from"./Input.vue_vue_type_script_setup_true_lang-CQ6gFgAL.js";import{_ as K}from"./Label.vue_vue_type_script_setup_true_lang-BTaAbAG1.js";import{_ as Re}from"./Textarea.vue_vue_type_script_setup_true_lang-BaGXD3ZE.js";import{_ as zt}from"./Switch.vue_vue_type_script_setup_true_lang-C04IPTfx.js";import{_ as le}from"./Separator.vue_vue_type_script_setup_true_lang-lCohU5N2.js";import{_ as He,a as Xe,b as Ye,c as Ze,d as Qe}from"./SelectValue.vue_vue_type_script_setup_true_lang-Dx5Mn26f.js";import{_ as re}from"./CardDescription.vue_vue_type_script_setup_true_lang-BUya40Xk.js";import{f as Ft,g as Kt,h as Gt,i as Wt,j as qt}from"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-gjluvqqt.js";import{_ as Ae,a as Be,b as Ve}from"./index-Cey2jpQK.js";import"./Checkbox.vue_vue_type_script_setup_true_lang-BXOBP0m7.js";import"./app-D76-NYRf.js";function xe(){return{formatCurrency:m=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(m),formatDate:m=>new Intl.DateTimeFormat("id-ID",{year:"numeric",month:"long",day:"numeric"}).format(new Date(m)),getStatusLabel:m=>({pending:"Menunggu",processing:"Diproses",shipped:"Dikirim",delivered:"Selesai",cancelled:"Dibatalkan"})[m]||m,getTransactionTypeLabel:m=>({topup:"Top Up",withdrawal:"Penarikan",bonus:"Bonus",purchase:"Pembelian",refund:"Refund"})[m]||m,getTransactionStatusLabel:m=>({pending:"Menunggu",completed:"Selesai",failed:"Gagal",cancelled:"Dibatalkan"})[m]||m}}const Jt={class:"flex flex-col items-center text-center"},Ht={class:"text-xl font-bold text-gray-900 dark:text-gray-100"},Xt={class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},Yt={class:"mt-4 w-full space-y-2 text-sm"},Zt={class:"space-y-1.5"},Qt={class:"flex items-center justify-between"},es={class:"flex gap-1"},ts={class:"p-2 bg-gray-50 dark:bg-gray-800 rounded-lg"},ss={class:"flex items-center justify-between"},as={class:"font-mono font-semibold"},ls={class:"text-[10px] text-gray-500 dark:text-gray-400 mt-1 break-all"},ns={class:"flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-800 rounded-lg"},rs={class:"font-mono font-semibold"},os={class:"flex items-center justify-between p-2 bg-emerald-50 dark:bg-emerald-900/20 rounded-lg"},is={class:"font-semibold text-emerald-700 dark:text-emerald-400"},ds=J({__name:"ProfileCard",props:{customer:{}},setup(l){const x=l,{formatCurrency:d}=xe(),u=T(!1),b=E(()=>x.customer.name.split(" ").map(R=>R[0]).join("").toUpperCase().slice(0,2)),m=E(()=>typeof window>"u"?"":`${window.location.origin}/client/register?ref=${x.customer.ref_code}`),c=async()=>{if(typeof window>"u"||!navigator.clipboard){j.error("Tidak dapat menyalin link ke clipboard");return}try{await navigator.clipboard.writeText(m.value),u.value=!0,j.success("Link referral telah disalin ke clipboard"),setTimeout(()=>{u.value=!1},2e3)}catch{j.error("Tidak dapat menyalin link ke clipboard")}},_=async()=>{if(typeof window>"u")return;const R={title:"Bergabung dengan Referral Saya",text:`Gunakan kode referral saya: ${x.customer.ref_code}`,url:m.value};if(navigator.share)try{await navigator.share(R),j.success("Link referral berhasil dibagikan")}catch(i){i.name!=="AbortError"&&console.error("Error sharing:",i)}else await c()};return(R,i)=>(r(),P(e(z),null,{default:a(()=>[s(e(F),{class:"pt-6"},{default:a(()=>[t("div",Jt,[s(e(Oe),{class:"h-24 w-24 mb-4"},{default:a(()=>[s(e(ze),{src:`https://api.dicebear.com/7.x/initials/svg?seed=${l.customer.name}`},null,8,["src"]),s(e(Ot),null,{default:a(()=>[o(n(b.value),1)]),_:1})]),_:1}),t("h2",Ht,n(l.customer.name),1),t("p",Xt,n(l.customer.email),1),l.customer.email_verified_at?(r(),P(e(A),{key:0,class:"mt-3 bg-emerald-100 text-emerald-700 hover:bg-emerald-200 dark:bg-emerald-900 dark:text-emerald-100"},{default:a(()=>[s(e(ie),{class:"w-3 h-3 mr-1"}),i[0]||(i[0]=o(" Email Terverifikasi ",-1))]),_:1})):(r(),P(e(A),{key:1,variant:"secondary",class:"mt-3"},{default:a(()=>[s(e(pe),{class:"w-3 h-3 mr-1"}),i[1]||(i[1]=o(" Email Belum Terverifikasi ",-1))]),_:1})),t("div",Yt,[t("div",Zt,[t("div",Qt,[i[3]||(i[3]=t("span",{class:"text-xs text-gray-600 dark:text-gray-400"},"Referral Link",-1)),t("div",es,[s(e(I),{size:"sm",variant:"outline",class:"h-6 px-2 text-[10px]",onClick:c},{default:a(()=>[u.value?(r(),P(e(xt),{key:0,class:"w-3 h-3 mr-1"})):(r(),P(e(ft),{key:1,class:"w-3 h-3 mr-1"})),o(" "+n(u.value?"Tersalin":"Salin"),1)]),_:1}),s(e(I),{size:"sm",variant:"outline",class:"h-6 px-2 text-[10px]",onClick:_},{default:a(()=>[s(e(vt),{class:"w-3 h-3 mr-1"}),i[2]||(i[2]=o(" Bagikan ",-1))]),_:1})])]),t("div",ts,[t("div",ss,[i[4]||(i[4]=t("span",{class:"text-gray-600 dark:text-gray-400"},"Kode Referral",-1)),t("span",as,n(l.customer.ref_code),1)]),t("p",ls,n(m.value),1)])]),t("div",ns,[i[5]||(i[5]=t("span",{class:"text-gray-600 dark:text-gray-400"},"E-Wallet ID",-1)),t("span",rs,n(l.customer.ewallet_id),1)]),t("div",os,[i[6]||(i[6]=t("span",{class:"text-emerald-700 dark:text-emerald-400"},"Saldo",-1)),t("span",is,n(e(d)(l.customer.ewallet_saldo)),1)])])])]),_:1})]),_:1}))}}),us={class:"flex items-center justify-between"},ms={key:0,class:"text-center py-12 text-muted-foreground"},cs={key:1,class:"space-y-4"},ps={class:"flex items-start gap-3 mb-3"},xs={class:"flex-1 min-w-0"},fs={class:"flex items-center gap-2 mb-1"},vs={class:"font-semibold text-sm"},gs={class:"text-sm font-medium"},bs={class:"text-xs text-muted-foreground"},ys={class:"space-y-1 mb-3"},ks={class:"text-sm"},_s={key:0,class:"text-sm text-muted-foreground"},hs={class:"text-sm text-muted-foreground"},ws={key:0},$s={class:"text-xs text-muted-foreground"},Cs={key:1,class:"text-xs text-muted-foreground italic mt-2"},Ps={class:"flex items-center gap-2"},Ss={class:"space-y-4 py-4"},Rs={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},js={class:"space-y-2"},Ms={class:"flex items-center space-x-2 pt-8"},Ts={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},Ds={class:"space-y-2"},As={class:"space-y-2"},Bs={class:"space-y-2"},Vs={class:"space-y-2"},Ls={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},Is={class:"space-y-2"},Us={class:"space-y-2"},Es={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},Ns={class:"space-y-2"},Os={class:"space-y-2"},zs={class:"space-y-2"},Fs=J({__name:"AddressManagement",props:{addresses:{}},setup(l){const x=T(!1),d=T(!1),u=T(!1),b=T(!1),m=T([]),c=T([]),_=T(!1),R=T(!1),i=T(""),f=T(""),g=T({label:"",is_default:!1,recipient_name:"",recipient_phone:"",address_line1:"",address_line2:"",province_label:"",province_id:0,city_label:"",city_id:0,postal_code:"",country:"Indonesia",description:""}),v=T(null),D=async()=>{_.value=!0;try{const M=await ne.get("/api/shipping/provinces");m.value=M.data.data}catch(M){j.error("Gagal memuat data provinsi"),console.error("Error loading provinces:",M)}finally{_.value=!1}},N=async M=>{if(M){R.value=!0,c.value=[],f.value="";try{const y=await ne.get("/api/shipping/cities",{params:{province_id:M}});c.value=y.data.data}catch(y){j.error("Gagal memuat data kota"),console.error("Error loading cities:",y)}finally{R.value=!1}}};Pe(i,M=>{if(!M)return;const y=m.value.find(w=>w.id.toString()===M);y&&(g.value.province_id=parseInt(M),g.value.province_label=y.name,N(M))}),Pe(f,M=>{if(!M)return;const y=c.value.find(w=>w.id.toString()===M);y&&(g.value.city_id=parseInt(M),g.value.city_label=y.name)});const $=()=>{d.value=!1,g.value={label:"",is_default:!1,recipient_name:"",recipient_phone:"",address_line1:"",address_line2:"",province_label:"",province_id:0,city_label:"",city_id:0,postal_code:"",country:"Indonesia",description:""},i.value="",f.value="",c.value=[],D(),x.value=!0},L=M=>{d.value=!0,v.value=M.id,g.value={...M},D().then(()=>{M.province_id&&(i.value=M.province_id.toString(),N(M.province_id.toString()).then(()=>{M.city_id&&(f.value=M.city_id.toString())}))}),x.value=!0},Y=()=>{x.value=!1,v.value=null},oe=()=>{if(!g.value.recipient_name||!g.value.recipient_phone||!g.value.address_line1){j.error("Mohon lengkapi nama penerima, telepon, dan alamat");return}if(!g.value.province_id||!g.value.city_id){j.error("Mohon pilih provinsi dan kota/kabupaten");return}b.value=!0;const M=d.value&&v.value?`/client/profile/addresses/${v.value}`:"/client/profile/addresses",y=d.value?"put":"post";me[y](M,g.value,{preserveScroll:!0,onSuccess:()=>{j.success(`Alamat berhasil ${d.value?"diperbarui":"ditambahkan"}`),Y()},onError:w=>{if(console.error("Address save error:",w),typeof w=="object"&&w!==null){const Z=Object.values(w)[0],h=Array.isArray(Z)?Z[0]:Z;j.error(h||"Gagal menyimpan alamat")}else j.error("Gagal menyimpan alamat. Silakan coba lagi.")},onFinish:()=>{b.value=!1}})},X=M=>{confirm("Apakah Anda yakin ingin menghapus alamat ini?")&&(u.value=!0,me.delete(`/client/profile/addresses/${M}`,{preserveScroll:!0,onSuccess:()=>{j.success("Alamat berhasil dihapus")},onError:y=>{if(console.error("Address delete error:",y),typeof y=="object"&&y!==null){const w=Object.values(y)[0],Z=Array.isArray(w)?w[0]:w;j.error(Z||"Gagal menghapus alamat")}else j.error("Gagal menghapus alamat. Silakan coba lagi.")},onFinish:()=>{u.value=!1}}))},V=M=>{de({}).post(`/client/profile/addresses/${M}/set-default`,{preserveScroll:!0,onSuccess:()=>{j.success("Alamat utama berhasil diubah")},onError:w=>{if(console.error("Set default address error:",w),typeof w=="object"&&w!==null){const Z=Object.values(w)[0],h=Array.isArray(Z)?Z[0]:Z;j.error(h||"Gagal mengubah alamat utama")}else j.error("Gagal mengubah alamat utama. Silakan coba lagi.")}})},H=M=>M?M.toLowerCase().includes("rumah")||M.toLowerCase().includes("home")?kt:M.toLowerCase().includes("kantor")||M.toLowerCase().includes("office")?_t:fe:fe;return(M,y)=>(r(),p(G,null,[s(e(z),null,{default:a(()=>[s(e(W),null,{default:a(()=>[t("div",us,[s(e(q),{class:"flex items-center gap-2"},{default:a(()=>[s(e(fe),{class:"w-5 h-5"}),y[11]||(y[11]=o(" Kelola Alamat ",-1))]),_:1}),s(e(I),{size:"sm",onClick:$},{default:a(()=>[s(e(gt),{class:"w-4 h-4 mr-2"}),y[12]||(y[12]=o(" Tambah Alamat ",-1))]),_:1})])]),_:1}),s(e(F),null,{default:a(()=>[l.addresses.length===0?(r(),p("div",ms,[s(e(fe),{class:"w-12 h-12 mx-auto mb-4 opacity-20"}),y[13]||(y[13]=t("p",{class:"mb-2"},"Belum ada alamat tersimpan",-1)),y[14]||(y[14]=t("p",{class:"text-sm"},"Tambahkan alamat untuk mempermudah proses pengiriman",-1))])):(r(),p("div",cs,[(r(!0),p(G,null,te(l.addresses,w=>(r(),p("div",{key:w.id,class:U(["relative p-4 rounded-lg border transition-all",w.is_default?"border-primary bg-primary/5":"border-gray-200 dark:border-gray-700"])},[w.is_default?(r(),P(e(A),{key:0,variant:"default",class:"absolute top-2 right-2 text-xs"},{default:a(()=>[...y[15]||(y[15]=[o(" Utama ",-1)])]),_:1})):C("",!0),t("div",ps,[(r(),P(bt(H(w.label)),{class:U(["w-5 h-5 mt-1 flex-shrink-0",w.is_default?"text-primary":"text-muted-foreground"])},null,8,["class"])),t("div",xs,[t("div",fs,[t("h4",vs,n(w.label||"Alamat"),1)]),t("p",gs,n(w.recipient_name),1),t("p",bs,n(w.recipient_phone),1)])]),t("div",ys,[t("p",ks,n(w.address_line1),1),w.address_line2?(r(),p("p",_s,n(w.address_line2),1)):C("",!0),t("p",hs,[o(n(w.city_label)+", "+n(w.province_label)+" ",1),w.postal_code?(r(),p("span",ws,n(w.postal_code),1)):C("",!0)]),t("p",$s,n(w.country),1),w.description?(r(),p("p",Cs,n(w.description),1)):C("",!0)]),s(e(le),{class:"my-3"}),t("div",Ps,[w.is_default?C("",!0):(r(),P(e(I),{key:0,variant:"outline",size:"sm",onClick:Z=>V(w.id)},{default:a(()=>[...y[16]||(y[16]=[o(" Jadikan Utama ",-1)])]),_:1},8,["onClick"])),s(e(I),{variant:"outline",size:"sm",onClick:Z=>L(w)},{default:a(()=>[s(e(yt),{class:"w-3 h-3 mr-1"}),y[17]||(y[17]=o(" Edit ",-1))]),_:1},8,["onClick"]),s(e(I),{variant:"destructive",size:"sm",disabled:u.value,onClick:Z=>X(w.id)},{default:a(()=>[s(e(Ue),{class:"w-3 h-3 mr-1"}),y[18]||(y[18]=o(" Hapus ",-1))]),_:1},8,["disabled","onClick"])])],2))),128))]))]),_:1})]),_:1}),s(e(we),{open:x.value,"onUpdate:open":Y},{default:a(()=>[s(e(ye),{class:"sm:max-w-2xl max-h-[90vh] overflow-y-auto"},{default:a(()=>[s(e(ke),null,{default:a(()=>[s(e(_e),null,{default:a(()=>[o(n(d.value?"Edit Alamat":"Tambah Alamat Baru"),1)]),_:1}),s(e(he),null,{default:a(()=>[o(n(d.value?"Perbarui informasi alamat Anda":"Tambahkan alamat pengiriman baru"),1)]),_:1})]),_:1}),t("div",Ss,[t("div",Rs,[t("div",js,[s(e(K),{for:"label"},{default:a(()=>[...y[19]||(y[19]=[o("Label Alamat",-1)])]),_:1}),s(e(se),{id:"label",modelValue:g.value.label,"onUpdate:modelValue":y[0]||(y[0]=w=>g.value.label=w),placeholder:"Rumah, Kantor, dll"},null,8,["modelValue"])]),t("div",Ms,[s(e(zt),{id:"is_default",checked:g.value.is_default,"onUpdate:checked":y[1]||(y[1]=w=>g.value.is_default=w)},null,8,["checked"]),s(e(K),{for:"is_default",class:"cursor-pointer"},{default:a(()=>[...y[20]||(y[20]=[o("Jadikan alamat utama",-1)])]),_:1})])]),t("div",Ts,[t("div",Ds,[s(e(K),{for:"recipient_name"},{default:a(()=>[...y[21]||(y[21]=[o("Nama Penerima ",-1),t("span",{class:"text-red-500"},"*",-1)])]),_:1}),s(e(se),{id:"recipient_name",modelValue:g.value.recipient_name,"onUpdate:modelValue":y[2]||(y[2]=w=>g.value.recipient_name=w),placeholder:"Nama lengkap penerima",required:""},null,8,["modelValue"])]),t("div",As,[s(e(K),{for:"recipient_phone"},{default:a(()=>[...y[22]||(y[22]=[o("No. Telepon Penerima ",-1),t("span",{class:"text-red-500"},"*",-1)])]),_:1}),s(e(se),{id:"recipient_phone",modelValue:g.value.recipient_phone,"onUpdate:modelValue":y[3]||(y[3]=w=>g.value.recipient_phone=w),placeholder:"08xxxxxxxxxx",required:""},null,8,["modelValue"])])]),t("div",Bs,[s(e(K),{for:"address_line1"},{default:a(()=>[...y[23]||(y[23]=[o("Alamat Lengkap ",-1),t("span",{class:"text-red-500"},"*",-1)])]),_:1}),s(e(Re),{id:"address_line1",modelValue:g.value.address_line1,"onUpdate:modelValue":y[4]||(y[4]=w=>g.value.address_line1=w),placeholder:"Jalan, nomor rumah, RT/RW, blok",rows:"3",required:""},null,8,["modelValue"])]),t("div",Vs,[s(e(K),{for:"address_line2"},{default:a(()=>[...y[24]||(y[24]=[o("Detail Tambahan (Opsional)",-1)])]),_:1}),s(e(se),{id:"address_line2",modelValue:g.value.address_line2,"onUpdate:modelValue":y[5]||(y[5]=w=>g.value.address_line2=w),placeholder:"Patokan, gedung, unit, warna rumah, dll"},null,8,["modelValue"])]),t("div",Ls,[t("div",Is,[s(e(K),{for:"province"},{default:a(()=>[...y[25]||(y[25]=[o("Provinsi ",-1),t("span",{class:"text-red-500"},"*",-1)])]),_:1}),s(e(He),{modelValue:i.value,"onUpdate:modelValue":y[6]||(y[6]=w=>i.value=w),disabled:_.value},{default:a(()=>[s(e(Xe),{id:"province"},{default:a(()=>[s(e(Ye),{placeholder:_.value?"Memuat provinsi...":"Pilih provinsi"},null,8,["placeholder"])]),_:1}),s(e(Ze),null,{default:a(()=>[(r(!0),p(G,null,te(m.value,w=>(r(),P(e(Qe),{key:w.id,value:w.id.toString()},{default:a(()=>[o(n(w.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue","disabled"])]),t("div",Us,[s(e(K),{for:"city"},{default:a(()=>[...y[26]||(y[26]=[o("Kota/Kabupaten ",-1),t("span",{class:"text-red-500"},"*",-1)])]),_:1}),s(e(He),{modelValue:f.value,"onUpdate:modelValue":y[7]||(y[7]=w=>f.value=w),disabled:!i.value||R.value},{default:a(()=>[s(e(Xe),{id:"city"},{default:a(()=>[s(e(Ye),{placeholder:R.value?"Memuat kota...":i.value?"Pilih kota/kabupaten":"Pilih provinsi terlebih dahulu"},null,8,["placeholder"])]),_:1}),s(e(Ze),null,{default:a(()=>[(r(!0),p(G,null,te(c.value,w=>(r(),P(e(Qe),{key:w.id,value:w.id.toString()},{default:a(()=>[o(n(w.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue","disabled"])])]),t("div",Es,[t("div",Ns,[s(e(K),{for:"postal_code"},{default:a(()=>[...y[27]||(y[27]=[o("Kode Pos",-1)])]),_:1}),s(e(se),{id:"postal_code",modelValue:g.value.postal_code,"onUpdate:modelValue":y[8]||(y[8]=w=>g.value.postal_code=w),placeholder:"12345"},null,8,["modelValue"])]),t("div",Os,[s(e(K),{for:"country"},{default:a(()=>[...y[28]||(y[28]=[o("Negara",-1)])]),_:1}),s(e(se),{id:"country",modelValue:g.value.country,"onUpdate:modelValue":y[9]||(y[9]=w=>g.value.country=w),placeholder:"Indonesia"},null,8,["modelValue"])])]),t("div",zs,[s(e(K),{for:"description"},{default:a(()=>[...y[29]||(y[29]=[o("Catatan (Opsional)",-1)])]),_:1}),s(e(Re),{id:"description",modelValue:g.value.description,"onUpdate:modelValue":y[10]||(y[10]=w=>g.value.description=w),placeholder:"Catatan khusus untuk alamat ini",rows:"2"},null,8,["modelValue"])])]),s(e($e),null,{default:a(()=>[s(e(I),{variant:"outline",onClick:Y,disabled:b.value},{default:a(()=>[...y[30]||(y[30]=[o(" Batal ",-1)])]),_:1},8,["disabled"]),s(e(I),{onClick:oe,disabled:b.value},{default:a(()=>[o(n(b.value?"Menyimpan...":d.value?"Perbarui":"Simpan"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])],64))}}),Ks={class:"p-3 bg-emerald-50 dark:bg-emerald-900/20 rounded-lg"},Gs={class:"text-xl font-bold text-emerald-700 dark:text-emerald-400"},Ws={class:"p-3 bg-amber-50 dark:bg-amber-900/20 rounded-lg"},qs={class:"text-xl font-bold text-amber-700 dark:text-amber-400"},Js=J({__name:"BonusStatsCard",props:{customer:{}},setup(l){const{formatCurrency:x}=xe();return(d,u)=>(r(),P(e(z),null,{default:a(()=>[s(e(W),null,{default:a(()=>[s(e(q),{class:"flex items-center gap-2"},{default:a(()=>[s(e(tt),{class:"w-5 h-5"}),u[0]||(u[0]=o(" Statistik Bonus ",-1))]),_:1})]),_:1}),s(e(F),{class:"space-y-3"},{default:a(()=>[t("div",Ks,[u[1]||(u[1]=t("p",{class:"text-xs text-emerald-700 dark:text-emerald-400 mb-1"},"Total Dirilis",-1)),t("p",Gs,n(e(x)(l.customer.bonus_stats.total_released)),1)]),t("div",Ws,[u[2]||(u[2]=t("p",{class:"text-xs text-amber-700 dark:text-amber-400 mb-1"},"Total Pending",-1)),t("p",qs,n(e(x)(l.customer.bonus_stats.total_pending)),1)])]),_:1})]),_:1}))}}),Hs={class:"flex items-center gap-3"},Xs={class:"p-2 bg-blue-100 dark:bg-blue-900/20 rounded-lg"},Ys={class:"font-semibold"},Zs=J({__name:"MemberSinceCard",props:{createdAt:{}},setup(l){const{formatDate:x}=xe();return(d,u)=>(r(),P(e(z),null,{default:a(()=>[s(e(F),{class:"pt-6"},{default:a(()=>[t("div",Hs,[t("div",Xs,[s(e(ht),{class:"w-5 h-5 text-blue-600 dark:text-blue-400"})]),t("div",null,[u[0]||(u[0]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Member Sejak",-1)),t("p",Ys,n(e(x)(l.createdAt)),1)])])]),_:1})]),_:1}))}}),Qs={class:"space-y-2"},ea={class:"relative"},ta={key:0,class:"text-sm text-red-500"},sa={class:"space-y-2"},aa={class:"relative"},la={key:0,class:"text-sm text-red-500"},na={class:"space-y-2"},ra={class:"relative"},oa={key:0,class:"text-sm text-red-500"},ia={class:"space-y-2"},da={key:0,class:"text-sm text-red-500"},ua={class:"flex items-center justify-end gap-3"},ma=J({__name:"ProfileInformationTab",props:{customer:{}},setup(l){const x=l,d=de({name:x.customer.name,email:x.customer.email,phone:x.customer.phone,description:x.customer.description||""}),u=()=>{d.patch("/client/profile",{preserveScroll:!0,onSuccess:()=>{j.success("Informasi profil berhasil diperbarui")}})};return(b,m)=>(r(),P(e(z),null,{default:a(()=>[s(e(W),null,{default:a(()=>[s(e(q),null,{default:a(()=>[...m[5]||(m[5]=[o("Informasi Profile",-1)])]),_:1}),s(e(re),null,{default:a(()=>[...m[6]||(m[6]=[o(" Update informasi profil Anda di sini ",-1)])]),_:1})]),_:1}),s(e(F),null,{default:a(()=>[t("form",{onSubmit:je(u,["prevent"]),class:"space-y-6"},[t("div",Qs,[s(e(K),{for:"name"},{default:a(()=>[...m[7]||(m[7]=[o(" Nama Lengkap ",-1),t("span",{class:"text-red-500"},"*",-1)])]),_:1}),t("div",ea,[s(e(Se),{class:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s(e(se),{id:"name",modelValue:e(d).name,"onUpdate:modelValue":m[0]||(m[0]=c=>e(d).name=c),type:"text",placeholder:"Masukkan nama lengkap",class:"pl-10",required:""},null,8,["modelValue"])]),e(d).errors.name?(r(),p("p",ta,n(e(d).errors.name),1)):C("",!0)]),t("div",sa,[s(e(K),{for:"email"},{default:a(()=>[...m[8]||(m[8]=[o(" Email ",-1),t("span",{class:"text-red-500"},"*",-1)])]),_:1}),t("div",aa,[s(e(wt),{class:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s(e(se),{id:"email",modelValue:e(d).email,"onUpdate:modelValue":m[1]||(m[1]=c=>e(d).email=c),type:"email",placeholder:"email@example.com",class:"pl-10",required:""},null,8,["modelValue"])]),e(d).errors.email?(r(),p("p",la,n(e(d).errors.email),1)):C("",!0)]),t("div",na,[s(e(K),{for:"phone"},{default:a(()=>[...m[9]||(m[9]=[o(" Nomor Telepon ",-1),t("span",{class:"text-red-500"},"*",-1)])]),_:1}),t("div",ra,[s(e($t),{class:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s(e(se),{id:"phone",modelValue:e(d).phone,"onUpdate:modelValue":m[2]||(m[2]=c=>e(d).phone=c),type:"tel",placeholder:"08123456789",class:"pl-10",required:""},null,8,["modelValue"])]),e(d).errors.phone?(r(),p("p",oa,n(e(d).errors.phone),1)):C("",!0)]),t("div",ia,[s(e(K),{for:"description"},{default:a(()=>[...m[10]||(m[10]=[o("Deskripsi",-1)])]),_:1}),s(e(Re),{id:"description",modelValue:e(d).description,"onUpdate:modelValue":m[3]||(m[3]=c=>e(d).description=c),placeholder:"Ceritakan tentang diri Anda...",rows:"4"},null,8,["modelValue"]),m[11]||(m[11]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"}," Maksimal 1000 karakter ",-1)),e(d).errors.description?(r(),p("p",da,n(e(d).errors.description),1)):C("",!0)]),t("div",ua,[s(e(I),{type:"button",variant:"outline",onClick:m[4]||(m[4]=c=>e(d).reset()),disabled:e(d).processing},{default:a(()=>[...m[12]||(m[12]=[o(" Reset ",-1)])]),_:1},8,["disabled"]),s(e(I),{type:"submit",disabled:e(d).processing},{default:a(()=>[e(d).processing?C("",!0):(r(),P(e(ie),{key:0,class:"w-4 h-4 mr-2"})),o(" "+n(e(d).processing?"Menyimpan...":"Simpan Perubahan"),1)]),_:1},8,["disabled"])])],32)]),_:1})]),_:1}))}}),ca={key:0,class:"flex items-center justify-center py-12"},pa={key:1,class:"space-y-6 py-6"},xa={class:"space-y-3"},fa={class:"flex items-center gap-2 text-sm font-medium"},va={class:"space-y-2"},ga={class:"flex justify-between"},ba={class:"text-sm font-medium"},ya={class:"flex justify-between items-center"},ka={key:0,class:"flex justify-between"},_a={class:"text-sm font-medium"},ha={key:1,class:"flex justify-between items-center"},wa={class:"space-y-3"},$a={class:"flex items-center gap-2 text-sm font-medium"},Ca={class:"space-y-3"},Pa=["src","alt"],Sa={class:"flex-1"},Ra={class:"font-medium text-sm"},ja={class:"text-xs text-muted-foreground"},Ma={class:"text-xs text-muted-foreground"},Ta={class:"text-right"},Da={class:"font-semibold text-sm"},Aa={key:0,class:"space-y-3"},Ba={class:"flex items-center gap-2 text-sm font-medium"},Va={class:"p-3 bg-muted/30 rounded-lg space-y-1"},La={class:"font-medium text-sm"},Ia={class:"text-sm text-muted-foreground"},Ua={class:"text-sm text-muted-foreground"},Ea={class:"text-sm text-muted-foreground"},Na={key:1,class:"space-y-3"},Oa={class:"flex items-center gap-2 text-sm font-medium"},za={class:"p-3 bg-muted/30 rounded-lg space-y-2"},Fa={class:"flex justify-between"},Ka={class:"text-sm font-medium"},Ga={class:"flex justify-between"},Wa={class:"text-sm font-medium"},qa={class:"flex justify-between"},Ja={class:"text-sm font-medium"},Ha={class:"space-y-3"},Xa={class:"flex items-center gap-2 text-sm font-medium"},Ya={class:"space-y-2 text-sm"},Za={class:"flex justify-between"},Qa={key:0,class:"flex justify-between"},el={class:"text-red-600"},tl={class:"flex justify-between"},sl={key:1,class:"flex justify-between"},al={class:"flex justify-between font-semibold text-base"},ll={class:"text-primary"},nl={key:2,class:"space-y-2"},rl={class:"space-y-1"},ol={class:"text-sm text-muted-foreground"},il={key:3,class:"pt-4"},dl={key:2,class:"flex items-center justify-center py-12 text-muted-foreground"},ul=J({__name:"OrderDetailSheet",props:{open:{type:Boolean},orderId:{}},emits:["update:open"],setup(l,{emit:x}){const d=l,u=x,{formatCurrency:b,formatDate:m,getStatusLabel:c}=xe(),_=T(!1),R=T(!1),i=T(null),f=E(()=>i.value?.status?.toUpperCase()==="SHIPPED"),g=E(()=>{const N=i.value?.status?.toLowerCase();return{"bg-yellow-100 text-yellow-700 hover:bg-yellow-200 dark:bg-yellow-900 dark:text-yellow-100":N==="pending","bg-blue-100 text-blue-700 hover:bg-blue-200 dark:bg-blue-900 dark:text-blue-100":N==="processing"||N==="paid","bg-purple-100 text-purple-700 hover:bg-purple-200 dark:bg-purple-900 dark:text-purple-100":N==="shipped","bg-emerald-100 text-emerald-700 hover:bg-emerald-200 dark:bg-emerald-900 dark:text-emerald-100":N==="delivered"||N==="completed","bg-red-100 text-red-700 hover:bg-red-200 dark:bg-red-900 dark:text-red-100":N==="cancelled"}}),v=async()=>{if(d.orderId){_.value=!0;try{const N=await ne.get(`/api/client/orders/${d.orderId}`);i.value=N.data.data}catch(N){console.error("Failed to load order:",N),j.error("Gagal memuat detail pesanan")}finally{_.value=!1}}},D=async()=>{if(!(!i.value||!f.value||R.value)){R.value=!0;try{await ne.post(`/api/client/orders/${i.value.id}/complete`),await v(),me.reload({only:["orders"]}),j.success('Status pesanan berhasil diperbarui menjadi "Selesai".')}catch(N){console.error("Failed to update order status:",N),j.error(N.response?.data?.message||"Gagal memperbarui status pesanan")}finally{R.value=!1}}};return Pe(()=>[d.open,d.orderId],([N,$])=>{N&&$&&v()}),(N,$)=>(r(),P(e(Ft),{open:l.open,"onUpdate:open":$[0]||($[0]=L=>u("update:open",L))},{default:a(()=>[s(e(Kt),{side:"right",class:"sm:max-w-2xl w-full overflow-y-auto"},{default:a(()=>[s(e(Gt),null,{default:a(()=>[s(e(Wt),null,{default:a(()=>[...$[1]||($[1]=[o("Detail Pesanan",-1)])]),_:1}),s(e(qt),null,{default:a(()=>[...$[2]||($[2]=[o(" Informasi lengkap pesanan Anda ",-1)])]),_:1})]),_:1}),_.value?(r(),p("div",ca,[s(e(Ee),{class:"h-8 w-8 animate-spin text-muted-foreground"})])):i.value?(r(),p("div",pa,[t("div",xa,[t("div",fa,[s(e(ge),{class:"h-4 w-4"}),$[3]||($[3]=t("span",null,"Ringkasan Pesanan",-1))]),t("div",va,[t("div",ga,[$[4]||($[4]=t("span",{class:"text-sm text-muted-foreground"},"Nomor Pesanan",-1)),t("span",ba,n(i.value.order_no),1)]),t("div",ya,[$[5]||($[5]=t("span",{class:"text-sm text-muted-foreground"},"Status",-1)),s(e(A),{class:U(g.value)},{default:a(()=>[o(n(e(c)(i.value.status)),1)]),_:1},8,["class"])]),i.value.placed_at?(r(),p("div",ka,[$[6]||($[6]=t("span",{class:"text-sm text-muted-foreground"},"Tanggal Pesan",-1)),t("span",_a,n(e(m)(i.value.placed_at)),1)])):C("",!0),i.value.paid_at?(r(),p("div",ha,[$[7]||($[7]=t("span",{class:"text-sm text-muted-foreground"},"Status Pembayaran",-1)),s(e(A),{variant:"secondary"},{default:a(()=>[s(e(ie),{class:"w-3 h-3 mr-1"}),o(" Dibayar "+n(e(m)(i.value.paid_at)),1)]),_:1})])):C("",!0)])]),s(e(le)),t("div",wa,[t("div",$a,[s(e(ge),{class:"h-4 w-4"}),$[8]||($[8]=t("span",null,"Produk Pesanan",-1))]),t("div",Ca,[(r(!0),p(G,null,te(i.value.items,L=>(r(),p("div",{key:L.id,class:"flex gap-4 p-3 bg-muted/30 rounded-lg"},[L.meta_json?.image?(r(),p("img",{key:0,src:L.meta_json.image,alt:L.name,class:"w-16 h-16 object-cover rounded-md"},null,8,Pa)):C("",!0),t("div",Sa,[t("h4",Ra,n(L.name),1),t("p",ja,"SKU: "+n(L.sku),1),t("p",Ma,n(L.qty)+"x "+n(e(b)(L.unit_price)),1)]),t("div",Ta,[t("p",Da,n(e(b)(L.row_total)),1)])]))),128))])]),s(e(le)),i.value.shipping_address?(r(),p("div",Aa,[t("div",Ba,[s(e(fe),{class:"h-4 w-4"}),$[9]||($[9]=t("span",null,"Alamat Pengiriman",-1))]),t("div",Va,[t("p",La,n(i.value.shipping_address.recipient_name),1),t("p",Ia,n(i.value.shipping_address.recipient_phone),1),t("p",Ua,n(i.value.shipping_address.address_line1),1),t("p",Ea,n(i.value.shipping_address.city_label)+", "+n(i.value.shipping_address.province_label)+" "+n(i.value.shipping_address.postal_code),1)])])):C("",!0),s(e(le)),i.value.applied_promos?.shipping?(r(),p("div",Na,[t("div",Oa,[s(e(Ct),{class:"h-4 w-4"}),$[10]||($[10]=t("span",null,"Informasi Pengiriman",-1))]),t("div",za,[t("div",Fa,[$[11]||($[11]=t("span",{class:"text-sm text-muted-foreground"},"Kurir",-1)),t("span",Ka,n(i.value.applied_promos.shipping.courier),1)]),t("div",Ga,[$[12]||($[12]=t("span",{class:"text-sm text-muted-foreground"},"Layanan",-1)),t("span",Wa,n(i.value.applied_promos.shipping.service),1)]),t("div",qa,[$[13]||($[13]=t("span",{class:"text-sm text-muted-foreground"},"Estimasi",-1)),t("span",Ja,n(i.value.applied_promos.shipping.etd)+" hari",1)])])])):C("",!0),s(e(le)),t("div",Ha,[t("div",Xa,[s(e(be),{class:"h-4 w-4"}),$[14]||($[14]=t("span",null,"Ringkasan Pembayaran",-1))]),t("div",Ya,[t("div",Za,[$[15]||($[15]=t("span",{class:"text-muted-foreground"},"Subtotal",-1)),t("span",null,n(e(b)(i.value.subtotal_amount)),1)]),i.value.discount_amount>0?(r(),p("div",Qa,[$[16]||($[16]=t("span",{class:"text-muted-foreground"},"Diskon",-1)),t("span",el,"-"+n(e(b)(i.value.discount_amount)),1)])):C("",!0),t("div",tl,[$[17]||($[17]=t("span",{class:"text-muted-foreground"},"Ongkos Kirim",-1)),t("span",null,n(e(b)(i.value.shipping_amount)),1)]),i.value.tax_amount>0?(r(),p("div",sl,[$[18]||($[18]=t("span",{class:"text-muted-foreground"},"Pajak",-1)),t("span",null,n(e(b)(i.value.tax_amount)),1)])):C("",!0),s(e(le)),t("div",al,[$[19]||($[19]=t("span",null,"Total",-1)),t("span",ll,n(e(b)(i.value.grand_total)),1)])])]),i.value.notes?(r(),p("div",nl,[s(e(le)),t("div",rl,[$[20]||($[20]=t("p",{class:"text-sm font-medium"},"Catatan",-1)),t("p",ol,n(i.value.notes),1)])])):C("",!0),f.value?(r(),p("div",il,[s(e(I),{onClick:D,disabled:R.value,class:"w-full",size:"lg"},{default:a(()=>[R.value?(r(),P(e(Ee),{key:0,class:"h-4 w-4 mr-2 animate-spin"})):(r(),P(e(ie),{key:1,class:"h-4 w-4 mr-2"})),$[21]||($[21]=o(" Tandai Pesanan Selesai ",-1))]),_:1},8,["disabled"])])):C("",!0)])):(r(),p("div",dl," Tidak ada data pesanan "))]),_:1})]),_:1},8,["open"]))}}),ml={class:"space-y-6 py-4"},cl={key:2,class:"flex gap-4 rounded-lg bg-muted p-4"},pl=["src","alt"],xl={class:"flex-1"},fl={class:"font-medium"},vl={class:"space-y-2"},gl={class:"flex items-center gap-2"},bl=["onClick","onMouseenter"],yl={class:"ml-2 text-sm text-muted-foreground"},kl={class:"space-y-2"},_l={key:0,class:"text-sm text-destructive"},hl={class:"space-y-2"},wl={class:"text-right text-xs text-muted-foreground"},$l={key:0,class:"text-sm text-destructive"},Cl=J({__name:"ProductReviewDialog",props:{open:{type:Boolean},orderId:{},orderItems:{}},emits:["update:open","review-submitted"],setup(l,{emit:x}){const d=l,u=x,b=T(0),m=T(null),c=T(!1),_=T({}),R=E(()=>d.orderItems[b.value]),i=E(()=>b.value<d.orderItems.length-1),f=E(()=>b.value===d.orderItems.length-1),g=T({order_item_id:0,product_id:0,rating:5,title:"",comment:""}),v=T(0),D=X=>{g.value.rating=X},N=async()=>{if(R.value){g.value.order_item_id=R.value.id,g.value.product_id=R.value.product_id,m.value=null,_.value={},c.value=!0;try{const X=await ne.post(`/api/client/orders/${d.orderId}/reviews`,g.value);if(X.data.success){const V=X.data.message||"Review berhasil dikirim dan menunggu persetujuan!";m.value={type:"success",message:V},j.success(V),i.value?setTimeout(()=>{b.value++,L(),m.value=null},1500):setTimeout(()=>{u("update:open",!1),u("review-submitted"),Y()},2e3)}}catch(X){console.error("Submit review error:",X);let V="Gagal mengirim review. Silakan coba lagi.";if(X.response?.data){const H=X.response.data;if(H.message&&(V=H.message),H.errors){_.value=H.errors;const M=Object.values(H.errors)[0];Array.isArray(M)&&M.length>0?V=M[0]:typeof M=="string"&&(V=M)}}m.value={type:"error",message:V},j.error(V)}finally{c.value=!1}}},$=()=>{i.value?(b.value++,L(),m.value=null):(u("update:open",!1),u("review-submitted"),Y())},L=()=>{g.value={order_item_id:0,product_id:0,rating:5,title:"",comment:""},_.value={}},Y=()=>{b.value=0,L(),m.value=null},oe=X=>{u("update:open",X),X||Y()};return(X,V)=>(r(),P(e(we),{open:l.open,"onUpdate:open":oe},{default:a(()=>[s(e(ye),{class:"sm:max-w-[500px]"},{default:a(()=>[s(e(ke),null,{default:a(()=>[s(e(_e),null,{default:a(()=>[...V[4]||(V[4]=[o("Beri Rating & Review",-1)])]),_:1}),s(e(he),null,{default:a(()=>[o(" Bagikan pengalaman Anda dengan produk ini ("+n(b.value+1)+" dari "+n(l.orderItems.length)+") ",1)]),_:1})]),_:1}),t("div",ml,[!R.value||l.orderItems.length===0?(r(),P(e(Ae),{key:0,variant:"default"},{default:a(()=>[s(e(pe),{class:"h-4 w-4"}),s(e(Be),null,{default:a(()=>[...V[5]||(V[5]=[o("Tidak Ada Item",-1)])]),_:1}),s(e(Ve),null,{default:a(()=>[...V[6]||(V[6]=[o(" Tidak ada produk yang dapat direview dari pesanan ini. ",-1)])]),_:1})]),_:1})):(r(),p(G,{key:1},[m.value?.type==="success"?(r(),P(e(Ae),{key:0,variant:"default"},{default:a(()=>[s(e(Pt),{class:"h-4 w-4"}),s(e(Be),null,{default:a(()=>[...V[7]||(V[7]=[o("Berhasil!",-1)])]),_:1}),s(e(Ve),null,{default:a(()=>[o(n(m.value.message),1)]),_:1})]),_:1})):C("",!0),m.value?.type==="error"?(r(),P(e(Ae),{key:1,variant:"destructive"},{default:a(()=>[s(e(pe),{class:"h-4 w-4"}),s(e(Be),null,{default:a(()=>[...V[8]||(V[8]=[o("Terjadi Kesalahan",-1)])]),_:1}),s(e(Ve),null,{default:a(()=>[o(n(m.value.message),1)]),_:1})]),_:1})):C("",!0),R.value?(r(),p("div",cl,[R.value.product_image?(r(),p("img",{key:0,src:R.value.product_image,alt:R.value.product_name,class:"h-20 w-20 rounded-md object-cover"},null,8,pl)):C("",!0),t("div",xl,[t("h4",fl,n(R.value.product_name),1)])])):C("",!0),t("div",vl,[s(e(K),null,{default:a(()=>[...V[9]||(V[9]=[o("Rating Produk",-1)])]),_:1}),t("div",gl,[(r(),p(G,null,te(5,H=>t("button",{key:H,type:"button",onClick:M=>D(H),onMouseenter:M=>v.value=H,onMouseleave:V[0]||(V[0]=M=>v.value=0),class:"transition-transform hover:scale-110 focus:outline-none"},[s(e(Ge),{class:U(["h-8 w-8 transition-colors",(v.value||g.value.rating)>=H?"fill-yellow-400 text-yellow-400":"text-gray-300"])},null,8,["class"])],40,bl)),64)),t("span",yl,n(g.value.rating)+" / 5 ",1)])]),t("div",kl,[s(e(K),{for:"title"},{default:a(()=>[...V[10]||(V[10]=[o("Judul Review (Opsional)",-1)])]),_:1}),s(e(se),{id:"title",modelValue:g.value.title,"onUpdate:modelValue":V[1]||(V[1]=H=>g.value.title=H),placeholder:"Ringkasan singkat pengalaman Anda",maxlength:"100"},null,8,["modelValue"]),_.value.title?(r(),p("p",_l,n(_.value.title),1)):C("",!0)]),t("div",hl,[s(e(K),{for:"comment"},{default:a(()=>[...V[11]||(V[11]=[o("Komentar (Opsional)",-1)])]),_:1}),s(e(Re),{id:"comment",modelValue:g.value.comment,"onUpdate:modelValue":V[2]||(V[2]=H=>g.value.comment=H),placeholder:"Ceritakan pengalaman Anda dengan produk ini...",rows:"4",maxlength:"500"},null,8,["modelValue"]),t("p",wl,n(g.value.comment?.length||0)+" / 500 karakter ",1),_.value.comment?(r(),p("p",$l,n(_.value.comment),1)):C("",!0)])],64))]),s(e($e),{class:"flex-col gap-2 sm:flex-row"},{default:a(()=>[R.value&&l.orderItems.length>0?(r(),p(G,{key:0},[i.value||f.value?(r(),P(e(I),{key:0,type:"button",variant:"outline",onClick:$,disabled:c.value},{default:a(()=>[o(n(i.value?"Lewati":"Tutup"),1)]),_:1},8,["disabled"])):C("",!0),s(e(I),{type:"button",onClick:N,disabled:c.value||g.value.rating===0,class:"w-full sm:w-auto"},{default:a(()=>[c.value?(r(),P(e(Ee),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):C("",!0),o(" "+n(i.value?"Kirim & Lanjut":"Kirim Review"),1)]),_:1},8,["disabled"])],64)):(r(),P(e(I),{key:1,type:"button",variant:"outline",onClick:V[3]||(V[3]=H=>oe(!1))},{default:a(()=>[...V[12]||(V[12]=[o(" Tutup ",-1)])]),_:1}))]),_:1})]),_:1})]),_:1},8,["open"]))}}),Pl={class:"rounded-lg border p-4 transition-colors hover:border-primary"},Sl={class:"flex flex-col justify-between gap-4 md:flex-row md:items-center"},Rl={class:"flex-1"},jl={class:"mb-2 flex items-center gap-3"},Ml={class:"text-sm font-semibold"},Tl={class:"text-xs text-muted-foreground"},Dl={class:"mt-2 flex items-center gap-2"},Al={class:"flex flex-col gap-2 md:items-end"},Bl={class:"text-lg font-bold text-primary"},Vl={class:"flex flex-wrap gap-2"},Ll=J({__name:"OrderCard",props:{order:{}},setup(l){const x=l,{formatCurrency:d,formatDate:u,getStatusLabel:b}=xe(),m=T(!1),c=T(!1),_=T(!1),R=T(!1),i=T(x.order.status),f=T(x.order.paid_at),g=async()=>{if(!_.value){_.value=!0;try{const $=await ne.post(`/api/client/orders/${x.order.id}/check-payment-status`);$.data.success?(i.value=$.data.status,$.data.paid_at&&(f.value=$.data.paid_at),j.success($.data.message),setTimeout(()=>{me.reload({only:["orders"]})},500)):j.error($.data.message)}catch($){console.error("Check payment status error:",$),j.error($.response?.data?.message||"Gagal memeriksa status pembayaran")}finally{_.value=!1}}},v=async()=>{if(!R.value){R.value=!0;try{const $=await ne.post(`/api/client/orders/${x.order.id}/complete`);$.data.success&&(i.value="COMPLETED",j.success($.data.message||"Pesanan berhasil diselesaikan"),$.data.items&&$.data.items.length>0?(x.order.items=$.data.items,c.value=!0):setTimeout(()=>{me.reload({only:["orders"]})},500))}catch($){console.error("Complete order error:",$),j.error($.response?.data?.message||"Gagal menandai pesanan sebagai diterima")}finally{R.value=!1}}},D=()=>{me.reload({only:["orders"]})},N=()=>{const $=(x.order.items||[]).filter(L=>!L.has_review);$.length>0?(x.order.items=$,c.value=!0):j.info("Semua produk sudah direview")};return($,L)=>(r(),p("div",Pl,[t("div",Sl,[t("div",Rl,[t("div",jl,[s(e(ge),{class:"h-5 w-5 text-muted-foreground"}),t("div",null,[t("p",Ml,n(l.order.order_no),1),t("p",Tl,n(l.order.placed_at?e(u)(l.order.placed_at):"Belum ditempatkan"),1)])]),t("div",Dl,[s(e(A),{class:U({"bg-yellow-100 text-yellow-700 hover:bg-yellow-200 dark:bg-yellow-900 dark:text-yellow-100":i.value.toUpperCase()==="PENDING","bg-blue-100 text-blue-700 hover:bg-blue-200 dark:bg-blue-900 dark:text-blue-100":i.value.toUpperCase()==="PROCESSING"||i.value.toUpperCase()==="PAID","bg-purple-100 text-purple-700 hover:bg-purple-200 dark:bg-purple-900 dark:text-purple-100":i.value.toUpperCase()==="SHIPPED","bg-emerald-100 text-emerald-700 hover:bg-emerald-200 dark:bg-emerald-900 dark:text-emerald-100":i.value.toUpperCase()==="DELIVERED"||i.value.toUpperCase()==="COMPLETED","bg-red-100 text-red-700 hover:bg-red-200 dark:bg-red-900 dark:text-red-100":i.value.toUpperCase()==="CANCELLED"})},{default:a(()=>[o(n(e(b)(i.value)),1)]),_:1},8,["class"]),f.value?(r(),P(e(A),{key:0,variant:"secondary"},{default:a(()=>[s(e(ie),{class:"mr-1 h-3 w-3"}),L[3]||(L[3]=o(" Dibayar ",-1))]),_:1})):C("",!0)])]),t("div",Al,[t("p",Bl,n(e(d)(l.order.grand_total)),1),t("div",Vl,[i.value.toUpperCase()==="PENDING"&&!f.value?(r(),P(e(I),{key:0,variant:"outline",size:"sm",disabled:_.value,onClick:g},{default:a(()=>[s(e(st),{class:U(["mr-1 h-3 w-3",{"animate-spin":_.value}])},null,8,["class"]),L[4]||(L[4]=o(" Cek Status ",-1))]),_:1},8,["disabled"])):C("",!0),i.value.toUpperCase()==="SHIPPED"?(r(),P(e(I),{key:1,variant:"default",size:"sm",disabled:R.value,onClick:v},{default:a(()=>[s(e(St),{class:"mr-1 h-3 w-3"}),L[5]||(L[5]=o(" Pesanan Diterima ",-1))]),_:1},8,["disabled"])):C("",!0),i.value.toUpperCase()==="COMPLETED"&&l.order.has_unreviewed_items?(r(),P(e(I),{key:2,variant:"outline",size:"sm",onClick:N},{default:a(()=>[s(e(Ge),{class:"mr-1 h-3 w-3"}),L[6]||(L[6]=o(" Tambah Review ",-1))]),_:1})):C("",!0),s(e(I),{variant:"outline",size:"sm",onClick:L[0]||(L[0]=Y=>m.value=!0)},{default:a(()=>[...L[7]||(L[7]=[o(" Lihat Detail ",-1)])]),_:1})])])]),s(ul,{open:m.value,"onUpdate:open":L[1]||(L[1]=Y=>m.value=Y),"order-id":l.order.id},null,8,["open","order-id"]),s(Cl,{open:c.value,"onUpdate:open":L[2]||(L[2]=Y=>c.value=Y),"order-id":l.order.id,"order-items":l.order.items||[],onReviewSubmitted:D},null,8,["open","order-id","order-items"])]))}}),Il={key:0,class:"space-y-4"},Ul={key:1,class:"py-12 text-center"},El=J({__name:"OrdersTab",props:{orders:{}},setup(l){return(x,d)=>(r(),P(e(z),null,{default:a(()=>[s(e(W),null,{default:a(()=>[s(e(q),null,{default:a(()=>[...d[0]||(d[0]=[o("Pesanan Saya",-1)])]),_:1}),s(e(re),null,{default:a(()=>[...d[1]||(d[1]=[o(" Riwayat pesanan dan status pengiriman ",-1)])]),_:1})]),_:1}),s(e(F),null,{default:a(()=>[l.orders.length>0?(r(),p("div",Il,[(r(!0),p(G,null,te(l.orders,u=>(r(),P(Ll,{key:u.id,order:u},null,8,["order"]))),128))])):(r(),p("div",Ul,[s(e(ge),{class:"h-16 w-16 mx-auto mb-4 text-muted-foreground opacity-20"}),d[3]||(d[3]=t("p",{class:"text-muted-foreground mb-4"},"Belum ada pesanan",-1)),s(e(Rt),{href:"/beranda"},{default:a(()=>[s(e(I),null,{default:a(()=>[...d[2]||(d[2]=[o(" Mulai Belanja ",-1)])]),_:1})]),_:1})]))]),_:1})]),_:1}))}}),Nl={class:"text-center"},Ol={class:"text-4xl font-bold text-primary mb-4"},zl={class:"flex gap-3 justify-center"},Fl=J({__name:"WalletBalance",props:{balance:{}},emits:["topup","withdrawal"],setup(l,{emit:x}){const d=x,{formatCurrency:u}=xe();return(b,m)=>(r(),P(e(z),null,{default:a(()=>[s(e(F),{class:"pt-6"},{default:a(()=>[t("div",Nl,[m[4]||(m[4]=t("p",{class:"text-sm text-muted-foreground mb-2"},"Saldo E-Wallet",-1)),t("p",Ol,n(e(u)(l.balance)),1),t("div",zl,[s(e(I),{onClick:m[0]||(m[0]=c=>d("topup")),size:"sm"},{default:a(()=>[s(e(at),{class:"w-4 h-4 mr-2"}),m[2]||(m[2]=o(" Top Up ",-1))]),_:1}),s(e(I),{onClick:m[1]||(m[1]=c=>d("withdrawal")),variant:"outline",size:"sm"},{default:a(()=>[s(e(lt),{class:"w-4 h-4 mr-2"}),m[3]||(m[3]=o(" Tarik Dana ",-1))]),_:1})])])]),_:1})]),_:1}))}}),Kl={class:"space-y-2"},Gl={class:"relative"},Wl={key:0,class:"text-sm text-red-500"},ql={class:"p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-900 rounded-lg"},Jl={class:"flex items-start gap-3"},Hl={key:0,class:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-900 rounded-lg"},Xl={class:"flex items-start gap-3"},Yl={class:"flex items-center justify-end gap-3"},Zl={key:0},Ql={key:1},en={key:2},tn={key:3},sn=J({__name:"WalletTopupForm",emits:["cancel"],setup(l,{emit:x}){const d=x,u=de({amount:"",payment_method:"midtrans"}),b=T(!1),m=T(!1);We(()=>{if(window.snap){b.value=!0;return}if(typeof window>"u")return;const i=()=>{window.snap&&(b.value=!0,m.value=!1,console.log("Midtrans Snap loaded (event)."))};window.addEventListener("midtrans:snap:loaded",i,{once:!0}),setTimeout(()=>{b.value||(window.snap?(b.value=!0,console.log("Midtrans Snap loaded (fallback).")):(m.value=!0,console.error("Failed to load Midtrans Snap (timeout).")))},5e3)});const c=i=>{if(!window.snap){console.error("Snap not available"),alert("Pembayaran tidak dapat diproses. Silakan refresh halaman dan coba lagi."),d("cancel");return}try{window.snap.pay(i,{onSuccess:function(f){console.log("Payment success:",f),j.success("Pembayaran berhasil."),typeof window<"u"&&(window.location.href="/client/profile?tab=wallet")},onPending:function(f){console.log("Payment pending:",f),j.info("Pembayaran sedang diproses."),typeof window<"u"&&(window.location.href="/client/profile?tab=wallet")},onError:function(f){console.error("Payment error (Midtrans):",f),j.error("Pembayaran gagal.");try{console.log("Midtrans raw error JSON:",JSON.stringify(f,null,2))}catch{}const g=f?.status_message||f?.status_code||"Terjadi kesalahan pembayaran.",v=f?.status_code==="505"?`
Catatan: Sandbox sering menolak VA dengan nominal rendah (coba >= 15000 atau metode lain).`:"";if(f?.status_code==="505"){alert("Midtrans Error: "+g+v+`
Sandbox akan otomatis mencoba QRIS.`),R("qris");return}alert("Midtrans Error: "+g+`
Silakan coba metode lain atau refresh.`),d("cancel")},onClose:function(){console.log("Payment modal closed"),j("Pembayaran ditutup sebelum selesai."),d("cancel")}})}catch(f){console.error("Error opening Snap modal:",f),alert("Terjadi kesalahan saat membuka pembayaran. Silakan coba lagi."),j.error("Terjadi kesalahan saat membuka pembayaran. Silakan coba lagi."),d("cancel")}},_=async()=>{if(!u.processing){if(!b.value||!window.snap){j.error("Sistem pembayaran belum siap. Silakan tunggu beberapa saat atau refresh halaman.");return}try{u.processing=!0;const f=(await ne.post("/client/wallet/topup",{amount:u.amount,payment_method:u.payment_method})).data,g=f.snap_token;if(f.success===!1&&f.message){j.error(f.message),u.processing=!1;return}g&&typeof g=="string"&&g.trim()!==""?(u.reset(),u.processing=!1,setTimeout(()=>{c(g)},100)):(u.processing=!1,console.error("Invalid snap token:",g),console.error("Full response:",f),j.error("Gagal mendapatkan token pembayaran. Silakan coba lagi."),u.reset(),d("cancel"))}catch(i){if(u.processing=!1,console.error("Form submission error:",i),j.error("Terjadi kesalahan saat mengirim formulir."),i.response?.status===422&&i.response?.data?.errors){const f=i.response.data.errors,g=Object.values(f)[0],v=Array.isArray(g)?g[0]:g;j.error(v)}else{const f=i.response?.data?.message||i.message||"Terjadi kesalahan. Silakan coba lagi.";j.error(f)}u.reset()}}},R=async i=>{if(!u.processing){if(!b.value||!window.snap){alert("Sistem pembayaran belum siap untuk retry.");return}try{u.processing=!0;const g=(await ne.post("/client/wallet/topup",{amount:u.amount||"20000",payment_method:u.payment_method,force_payment:i})).data,v=g.snap_token;if(!g.success||!v){j.error(g.message||"Retry gagal mendapatkan token."),u.processing=!1;return}u.processing=!1,j.success("Metode dialihkan ke "+i.toUpperCase()+". Silakan lanjutkan pembayaran."),c(v)}catch(f){u.processing=!1,j.error(f?.response?.data?.message||f.message||"Retry gagal.")}}};return(i,f)=>(r(),P(e(z),null,{default:a(()=>[s(e(W),null,{default:a(()=>[s(e(q),null,{default:a(()=>[...f[2]||(f[2]=[o("Top Up E-Wallet",-1)])]),_:1}),s(e(re),null,{default:a(()=>[...f[3]||(f[3]=[o(" Isi saldo e-wallet Anda melalui Midtrans ",-1)])]),_:1})]),_:1}),s(e(F),null,{default:a(()=>[t("form",{onSubmit:je(_,["prevent"]),class:"space-y-6"},[t("div",Kl,[s(e(K),{for:"topup_amount"},{default:a(()=>[...f[4]||(f[4]=[o(" Jumlah Top Up ",-1),t("span",{class:"text-red-500"},"*",-1)])]),_:1}),t("div",Gl,[s(e(be),{class:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s(e(se),{id:"topup_amount",modelValue:e(u).amount,"onUpdate:modelValue":f[0]||(f[0]=g=>e(u).amount=g),type:"number",placeholder:"Minimal Rp 10.000",class:"pl-10",min:"10000",max:"10000000",required:""},null,8,["modelValue"])]),f[5]||(f[5]=t("p",{class:"text-xs text-muted-foreground"}," Minimum Rp 10.000 - Maximum Rp 10.000.000. Disarankan >= Rp 15.000 untuk Virtual Account agar tidak ditolak (505). ",-1)),e(u).errors.amount?(r(),p("p",Wl,n(e(u).errors.amount),1)):C("",!0)]),t("div",ql,[t("div",Jl,[s(e(be),{class:"w-5 h-5 text-blue-600 dark:text-blue-400 mt-0.5"}),f[6]||(f[6]=t("div",null,[t("p",{class:"text-sm font-semibold text-blue-900 dark:text-blue-100"}," Pembayaran via Midtrans "),t("p",{class:"text-xs text-blue-700 dark:text-blue-300 mt-1"}," Anda akan diarahkan ke halaman pembayaran Midtrans untuk menyelesaikan transaksi ")],-1))])]),m.value?(r(),p("div",Hl,[t("div",Xl,[s(e(pe),{class:"w-5 h-5 text-red-600 dark:text-red-400 mt-0.5"}),f[7]||(f[7]=t("div",null,[t("p",{class:"text-sm font-semibold text-red-900 dark:text-red-100"}," Sistem Pembayaran Belum Siap "),t("p",{class:"text-xs text-red-700 dark:text-red-300 mt-1"}," Silakan refresh halaman untuk memuat ulang sistem pembayaran. ")],-1))])])):C("",!0),t("div",Yl,[s(e(I),{type:"button",variant:"outline",onClick:f[1]||(f[1]=g=>{e(u).reset(),d("cancel")}),disabled:e(u).processing},{default:a(()=>[...f[8]||(f[8]=[o(" Batal ",-1)])]),_:1},8,["disabled"]),s(e(I),{type:"submit",disabled:e(u).processing||m.value||!b.value},{default:a(()=>[e(u).processing?(r(),p("span",Zl,"Memproses...")):!b.value&&!m.value?(r(),p("span",Ql,"Memuat sistem pembayaran...")):m.value?(r(),p("span",en,"Sistem pembayaran error")):(r(),p("span",tn,"Lanjut ke Pembayaran"))]),_:1},8,["disabled"])])],32)]),_:1})]),_:1}))}}),an={class:"space-y-2"},ln={class:"relative"},nn={class:"text-xs text-muted-foreground"},rn={key:0,class:"text-sm text-red-500"},on={class:"space-y-4"},dn={class:"space-y-2"},un={key:0,class:"text-sm text-red-500"},mn={class:"space-y-2"},cn={key:0,class:"text-sm text-red-500"},pn={class:"space-y-2"},xn={key:0,class:"text-sm text-red-500"},fn={class:"flex items-center justify-end gap-3"},vn=J({__name:"WalletWithdrawalForm",props:{maxAmount:{}},emits:["cancel"],setup(l,{emit:x}){const d=x,u=de({amount:"",bank_name:"",bank_account:"",bank_holder:""}),b=()=>{u.post("/client/wallet/withdrawal",{preserveScroll:!0,onSuccess:()=>{u.reset(),d("cancel"),j.success("Permintaan penarikan berhasil diajukan.")}})};return(m,c)=>(r(),P(e(z),null,{default:a(()=>[s(e(W),null,{default:a(()=>[s(e(q),null,{default:a(()=>[...c[5]||(c[5]=[o("Tarik Dana E-Wallet",-1)])]),_:1}),s(e(re),null,{default:a(()=>[...c[6]||(c[6]=[o(" Tarik saldo ke rekening bank Anda ",-1)])]),_:1})]),_:1}),s(e(F),null,{default:a(()=>[t("form",{onSubmit:je(b,["prevent"]),class:"space-y-6"},[t("div",an,[s(e(K),{for:"withdrawal_amount"},{default:a(()=>[...c[7]||(c[7]=[o(" Jumlah Penarikan ",-1),t("span",{class:"text-red-500"},"*",-1)])]),_:1}),t("div",ln,[s(e(be),{class:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s(e(se),{id:"withdrawal_amount",modelValue:e(u).amount,"onUpdate:modelValue":c[0]||(c[0]=_=>e(u).amount=_),type:"number",placeholder:"Minimal Rp 50.000",class:"pl-10",min:"50000",max:l.maxAmount,required:""},null,8,["modelValue","max"])]),t("p",nn," Minimum Rp 50.000 - Maksimal Rp "+n(l.maxAmount.toLocaleString("id-ID")),1),e(u).errors.amount?(r(),p("p",rn,n(e(u).errors.amount),1)):C("",!0)]),s(e(le)),t("div",on,[c[11]||(c[11]=t("h4",{class:"font-semibold"},"Informasi Rekening",-1)),t("div",dn,[s(e(K),{for:"bank_name"},{default:a(()=>[...c[8]||(c[8]=[o(" Nama Bank ",-1),t("span",{class:"text-red-500"},"*",-1)])]),_:1}),s(e(se),{id:"bank_name",modelValue:e(u).bank_name,"onUpdate:modelValue":c[1]||(c[1]=_=>e(u).bank_name=_),type:"text",placeholder:"e.g., BCA, Mandiri, BNI",required:""},null,8,["modelValue"]),e(u).errors.bank_name?(r(),p("p",un,n(e(u).errors.bank_name),1)):C("",!0)]),t("div",mn,[s(e(K),{for:"bank_account"},{default:a(()=>[...c[9]||(c[9]=[o(" Nomor Rekening ",-1),t("span",{class:"text-red-500"},"*",-1)])]),_:1}),s(e(se),{id:"bank_account",modelValue:e(u).bank_account,"onUpdate:modelValue":c[2]||(c[2]=_=>e(u).bank_account=_),type:"text",placeholder:"Nomor rekening bank",required:""},null,8,["modelValue"]),e(u).errors.bank_account?(r(),p("p",cn,n(e(u).errors.bank_account),1)):C("",!0)]),t("div",pn,[s(e(K),{for:"bank_holder"},{default:a(()=>[...c[10]||(c[10]=[o(" Nama Pemilik Rekening ",-1),t("span",{class:"text-red-500"},"*",-1)])]),_:1}),s(e(se),{id:"bank_holder",modelValue:e(u).bank_holder,"onUpdate:modelValue":c[3]||(c[3]=_=>e(u).bank_holder=_),type:"text",placeholder:"Nama sesuai rekening bank",required:""},null,8,["modelValue"]),e(u).errors.bank_holder?(r(),p("p",xn,n(e(u).errors.bank_holder),1)):C("",!0)])]),c[13]||(c[13]=t("div",{class:"p-4 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-900 rounded-lg"},[t("p",{class:"text-sm text-amber-700 dark:text-amber-300"},[t("strong",null,"Catatan:"),o(" Penarikan akan diproses dalam 1-3 hari kerja. Pastikan data rekening sudah benar. ")])],-1)),t("div",fn,[s(e(I),{type:"button",variant:"outline",onClick:c[4]||(c[4]=_=>{e(u).reset(),d("cancel")}),disabled:e(u).processing},{default:a(()=>[...c[12]||(c[12]=[o(" Batal ",-1)])]),_:1},8,["disabled"]),s(e(I),{type:"submit",disabled:e(u).processing},{default:a(()=>[o(n(e(u).processing?"Memproses...":"Ajukan Penarikan"),1)]),_:1},8,["disabled"])])],32)]),_:1})]),_:1}))}}),gn={class:"p-3 border rounded-lg"},bn={class:"flex items-center justify-between"},yn={class:"flex items-center gap-3"},kn={class:"font-semibold text-sm"},_n={class:"text-xs text-muted-foreground"},hn={class:"text-xs text-muted-foreground"},wn={class:"text-right"},$n={key:0,class:"mt-3 pt-3 border-t"},Cn={class:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2"},Pn={class:"flex gap-2"},Sn=J({__name:"WalletTransactionCard",props:{transaction:{}},emits:["continue-payment","status-updated"],setup(l,{emit:x}){const d=l,u=x,{formatCurrency:b,formatDate:m,getTransactionTypeLabel:c,getTransactionStatusLabel:_}=xe(),R=T(!1),i=T(d.transaction.status),f=async g=>{if(!R.value){R.value=!0;try{const v=await ne.post("/client/wallet/check-status",{transaction_ref:g});v.data.success?(i.value=v.data.status,u("status-updated",{transactionRef:g,status:v.data.status,newBalance:v.data.new_balance}),j.success(v.data.message),setTimeout(()=>{me.reload({only:["customer","transactions"]})},500)):j.error(v.data.message)}catch(v){console.error("Check status error:",v),j.error(v.response?.data?.message||"Gagal memeriksa status pembayaran")}finally{R.value=!1}}};return(g,v)=>(r(),p("div",gn,[t("div",bn,[t("div",yn,[t("div",{class:U(["p-2 rounded-full",{"bg-emerald-100 dark:bg-emerald-900/20":l.transaction.type==="topup"||l.transaction.type==="bonus","bg-red-100 dark:bg-red-900/20":l.transaction.type==="withdrawal"||l.transaction.type==="purchase","bg-blue-100 dark:bg-blue-900/20":l.transaction.type==="refund"}])},[l.transaction.type==="topup"||l.transaction.type==="bonus"||l.transaction.type==="refund"?(r(),P(e(at),{key:0,class:U(["w-4 h-4",{"text-emerald-600 dark:text-emerald-400":l.transaction.type==="topup"||l.transaction.type==="bonus","text-blue-600 dark:text-blue-400":l.transaction.type==="refund"}])},null,8,["class"])):(r(),P(e(lt),{key:1,class:"w-4 h-4 text-red-600 dark:text-red-400"}))],2),t("div",null,[t("p",kn,n(e(c)(l.transaction.type)),1),t("p",_n,n(l.transaction.transaction_ref),1),t("p",hn,n(e(m)(l.transaction.created_at)),1)])]),t("div",wn,[t("p",{class:U(["font-bold",{"text-emerald-600 dark:text-emerald-400":l.transaction.type==="topup"||l.transaction.type==="bonus"||l.transaction.type==="refund","text-red-600 dark:text-red-400":l.transaction.type==="withdrawal"||l.transaction.type==="purchase"}])},n(l.transaction.type==="topup"||l.transaction.type==="bonus"||l.transaction.type==="refund"?"+":"-")+" "+n(e(b)(l.transaction.amount)),3),s(e(A),{variant:"secondary",class:U({"bg-yellow-100 text-yellow-700 dark:bg-yellow-900 dark:text-yellow-100":i.value==="pending","bg-emerald-100 text-emerald-700 dark:bg-emerald-900 dark:text-emerald-100":i.value==="completed","bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-100":i.value==="failed"||i.value==="cancelled"})},{default:a(()=>[o(n(e(_)(i.value)),1)]),_:1},8,["class"])])]),l.transaction.type==="topup"&&i.value==="pending"&&l.transaction.midtrans_transaction_id?(r(),p("div",$n,[t("div",Cn,[v[4]||(v[4]=t("p",{class:"text-xs text-muted-foreground"}," Pembayaran menunggu konfirmasi ",-1)),t("div",Pn,[s(e(I),{size:"sm",variant:"outline",disabled:R.value,onClick:v[0]||(v[0]=D=>f(l.transaction.transaction_ref)),class:"shrink-0"},{default:a(()=>[s(e(st),{class:U(["w-3 h-3 mr-1",{"animate-spin":R.value}])},null,8,["class"]),v[2]||(v[2]=o(" Cek Status ",-1))]),_:1},8,["disabled"]),s(e(I),{size:"sm",onClick:v[1]||(v[1]=D=>u("continue-payment",l.transaction.midtrans_transaction_id)),class:"shrink-0"},{default:a(()=>[s(e(be),{class:"w-3 h-3 mr-1"}),v[3]||(v[3]=o(" Lanjutkan Pembayaran ",-1))]),_:1})])])])):C("",!0)]))}}),Rn={key:0,class:"space-y-3"},jn={key:1,class:"py-12 text-center"},Mn=J({__name:"WalletTransactionList",props:{transactions:{}},setup(l){const x=nt(),d=E(()=>x.props.customer),u=m=>{typeof window>"u"||(window.snap?window.snap.pay(m,{onSuccess:function(c){console.log("Payment success:",c),j.success("Pembayaran berhasil."),typeof window<"u"&&(window.location.href="/client/profile?tab=wallet")},onPending:function(c){console.log("Payment pending:",c),j.info("Pembayaran sedang diproses."),typeof window<"u"&&(window.location.href="/client/profile?tab=wallet")},onError:function(c){j.error("Pembayaran gagal."),console.error("Payment error:",c)},onClose:function(){j("Pembayaran ditutup sebelum selesai."),console.log("Payment modal closed")}}):alert("Midtrans Snap belum siap. Silakan refresh halaman."))},b=m=>{m.newBalance!==void 0&&d.value&&(d.value.ewallet_saldo=m.newBalance)};return(m,c)=>(r(),P(e(z),null,{default:a(()=>[s(e(W),null,{default:a(()=>[s(e(q),null,{default:a(()=>[...c[0]||(c[0]=[o("Riwayat Transaksi",-1)])]),_:1}),s(e(re),null,{default:a(()=>[o(n(l.transactions.length)+" transaksi e-wallet terbaru ",1)]),_:1})]),_:1}),s(e(F),null,{default:a(()=>[l.transactions.length>0?(r(),p("div",Rn,[(r(!0),p(G,null,te(l.transactions,_=>(r(),P(Sn,{key:_.id,transaction:_,onContinuePayment:u,onStatusUpdated:b},null,8,["transaction"]))),128))])):(r(),p("div",jn,[s(e(rt),{class:"h-16 w-16 mx-auto mb-4 text-muted-foreground opacity-20"}),c[1]||(c[1]=t("p",{class:"text-muted-foreground"},"Belum ada transaksi",-1))]))]),_:1})]),_:1}))}}),Tn={class:"flex-1"},Dn={key:0,class:"text-xs mt-1 text-gray-700 dark:text-gray-300"},An={class:"font-mono"},Bn={class:"uppercase"},Vn=["disabled"],Ln={key:1,class:"border border-amber-200 dark:border-amber-900 bg-amber-50 dark:bg-amber-900/20 rounded-lg p-4 text-xs text-amber-800 dark:text-amber-200"},In=J({__name:"WalletStatusBanner",props:{initialTransactions:{}},setup(l){const x=l,d=T(!1),u=T(null),b=T(null),m=E(()=>{const i=b.value?.status||"";return i==="completed"||i==="success"?{tone:"success",title:"Top up berhasil",bg:"bg-green-50 dark:bg-green-900/20",border:"border-green-200 dark:border-green-900",text:"text-green-800 dark:text-green-200"}:i==="pending"?{tone:"pending",title:"Menunggu pembayaran",bg:"bg-yellow-50 dark:bg-yellow-900/20",border:"border-yellow-200 dark:border-yellow-900",text:"text-yellow-800 dark:text-yellow-200"}:i==="cancelled"||i==="failed"||i==="expire"||i==="denied"||i==="deny"?{tone:"failed",title:"Pembayaran gagal / dibatalkan",bg:"bg-red-50 dark:bg-red-900/20",border:"border-red-200 dark:border-red-900",text:"text-red-800 dark:text-red-200"}:{tone:"info",title:"Status transaksi",bg:"bg-blue-50 dark:bg-blue-900/20",border:"border-blue-200 dark:border-blue-900",text:"text-blue-800 dark:text-blue-200"}});function c(i,f=2){const g=new Date(i).getTime();return(Date.now()-g)/36e5<=f}const _=E(()=>{if(!b.value)return!1;const i=b.value.status;return i==="pending"?!0:i==="completed"||i==="success"?c(b.value.created_at,2):c(b.value.created_at,6)});async function R(){try{d.value=!0,u.value=null;const{data:i}=await ne.get("/client/wallet/history",{params:{type:"topup"}}),f=Array.isArray(i?.data)?i.data:Array.isArray(i)?i:[];f.length>0&&(b.value=f[0])}catch(i){u.value=i?.response?.data?.message||i?.message||"Gagal memuat status transaksi."}finally{d.value=!1}}return We(()=>{x.initialTransactions&&x.initialTransactions.length>0&&(b.value=x.initialTransactions[0]),R()}),(i,f)=>_.value?(r(),p("div",{key:0,class:U(["border rounded-lg p-4 flex items-start gap-3",m.value.border,m.value.bg])},[t("div",Tn,[t("p",{class:U(["text-sm font-semibold",m.value.text])},n(m.value.title),3),b.value?(r(),p("p",Dn,[f[0]||(f[0]=o(" Ref: ",-1)),t("span",An,n(b.value.transaction_ref),1),o("  Jumlah: Rp "+n(new Intl.NumberFormat("id-ID").format(b.value.amount))+"  Status: ",1),t("span",Bn,n(b.value.status),1)])):C("",!0)]),t("button",{type:"button",class:"text-xs underline text-gray-700 dark:text-gray-300",onClick:R,disabled:d.value},n(d.value?"Menyegarkan...":"Segarkan"),9,Vn)],2)):u.value?(r(),p("div",Ln,n(u.value),1)):C("",!0)}}),Un={class:"space-y-6"},En=J({__name:"WalletTab",props:{customer:{},transactions:{}},setup(l){const x=T("wallet");return(d,u)=>(r(),p("div",Un,[s(Fl,{balance:Number(l.customer.ewallet_saldo)||0,onTopup:u[0]||(u[0]=b=>x.value="wallet-topup"),onWithdrawal:u[1]||(u[1]=b=>x.value="wallet-withdrawal")},null,8,["balance"]),x.value==="wallet"?(r(),P(In,{key:0,"initial-transactions":l.transactions},null,8,["initial-transactions"])):C("",!0),x.value==="wallet-topup"?(r(),P(sn,{key:1,onCancel:u[2]||(u[2]=b=>x.value="wallet")})):C("",!0),x.value==="wallet-withdrawal"?(r(),P(vn,{key:2,"max-amount":Number(l.customer.ewallet_saldo)||0,onCancel:u[3]||(u[3]=b=>x.value="wallet")},null,8,["max-amount"])):C("",!0),x.value==="wallet"?(r(),P(Mn,{key:3,transactions:l.transactions},null,8,["transactions"])):C("",!0)]))}}),Nn={class:"space-y-2"},On={class:"relative"},zn={key:0,class:"text-sm text-red-500"},Fn={class:"space-y-2"},Kn={class:"relative"},Gn={key:0,class:"text-sm text-red-500"},Wn={class:"space-y-2"},qn={class:"relative"},Jn={class:"flex items-center justify-end gap-3"},Hn=J({__name:"SecurityTab",setup(l){const x=de({current_password:"",password:"",password_confirmation:""}),d=T(!1),u=T(!1),b=T(!1),m=()=>{x.patch("/client/profile/password",{preserveScroll:!0,onSuccess:()=>{x.reset(),d.value=!1,u.value=!1,b.value=!1,j.success("Password berhasil diubah")}})};return(c,_)=>(r(),P(e(z),null,{default:a(()=>[s(e(W),null,{default:a(()=>[s(e(q),null,{default:a(()=>[..._[7]||(_[7]=[o("Ubah Password",-1)])]),_:1}),s(e(re),null,{default:a(()=>[..._[8]||(_[8]=[o(" Pastikan akun Anda menggunakan password yang kuat ",-1)])]),_:1})]),_:1}),s(e(F),null,{default:a(()=>[t("form",{onSubmit:je(m,["prevent"]),class:"space-y-6"},[t("div",Nn,[s(e(K),{for:"current_password"},{default:a(()=>[..._[9]||(_[9]=[o(" Password Saat Ini ",-1),t("span",{class:"text-red-500"},"*",-1)])]),_:1}),t("div",On,[s(e(Ne),{class:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s(e(se),{id:"current_password",modelValue:e(x).current_password,"onUpdate:modelValue":_[0]||(_[0]=R=>e(x).current_password=R),type:d.value?"text":"password",placeholder:"Masukkan password saat ini",class:"pl-10 pr-10",required:""},null,8,["modelValue","type"]),t("button",{type:"button",onClick:_[1]||(_[1]=R=>d.value=!d.value),class:"absolute right-3 top-3 text-gray-400 hover:text-gray-600"},[d.value?(r(),P(e(Te),{key:1,class:"h-4 w-4"})):(r(),P(e(Me),{key:0,class:"h-4 w-4"}))])]),e(x).errors.current_password?(r(),p("p",zn,n(e(x).errors.current_password),1)):C("",!0)]),s(e(le)),t("div",Fn,[s(e(K),{for:"password"},{default:a(()=>[..._[10]||(_[10]=[o(" Password Baru ",-1),t("span",{class:"text-red-500"},"*",-1)])]),_:1}),t("div",Kn,[s(e(qe),{class:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s(e(se),{id:"password",modelValue:e(x).password,"onUpdate:modelValue":_[2]||(_[2]=R=>e(x).password=R),type:u.value?"text":"password",placeholder:"Masukkan password baru",class:"pl-10 pr-10",required:""},null,8,["modelValue","type"]),t("button",{type:"button",onClick:_[3]||(_[3]=R=>u.value=!u.value),class:"absolute right-3 top-3 text-gray-400 hover:text-gray-600"},[u.value?(r(),P(e(Te),{key:1,class:"h-4 w-4"})):(r(),P(e(Me),{key:0,class:"h-4 w-4"}))])]),_[11]||(_[11]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"}," Minimal 8 karakter ",-1)),e(x).errors.password?(r(),p("p",Gn,n(e(x).errors.password),1)):C("",!0)]),t("div",Wn,[s(e(K),{for:"password_confirmation"},{default:a(()=>[..._[12]||(_[12]=[o(" Konfirmasi Password Baru ",-1),t("span",{class:"text-red-500"},"*",-1)])]),_:1}),t("div",qn,[s(e(qe),{class:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s(e(se),{id:"password_confirmation",modelValue:e(x).password_confirmation,"onUpdate:modelValue":_[4]||(_[4]=R=>e(x).password_confirmation=R),type:b.value?"text":"password",placeholder:"Konfirmasi password baru",class:"pl-10 pr-10",required:""},null,8,["modelValue","type"]),t("button",{type:"button",onClick:_[5]||(_[5]=R=>b.value=!b.value),class:"absolute right-3 top-3 text-gray-400 hover:text-gray-600"},[b.value?(r(),P(e(Te),{key:1,class:"h-4 w-4"})):(r(),P(e(Me),{key:0,class:"h-4 w-4"}))])])]),t("div",Jn,[s(e(I),{type:"button",variant:"outline",onClick:_[6]||(_[6]=R=>e(x).reset()),disabled:e(x).processing},{default:a(()=>[..._[13]||(_[13]=[o(" Reset ",-1)])]),_:1},8,["disabled"]),s(e(I),{type:"submit",disabled:e(x).processing},{default:a(()=>[e(x).processing?C("",!0):(r(),P(e(Ne),{key:0,class:"w-4 h-4 mr-2"})),o(" "+n(e(x).processing?"Mengupdate...":"Update Password"),1)]),_:1},8,["disabled"])])],32)]),_:1})]),_:1}))}}),Xn={class:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-900 rounded-lg"},Yn={class:"flex items-start gap-3"},Zn={class:"flex-1"},Qn=J({__name:"DangerZoneTab",setup(l){const x=T(!1),d=de({}),u=()=>{d.delete("/client/profile",{onFinish:()=>{x.value=!1}})};return(b,m)=>(r(),p(G,null,[s(e(z),{class:"border-red-200 dark:border-red-900"},{default:a(()=>[s(e(W),null,{default:a(()=>[s(e(q),{class:"text-red-600 dark:text-red-400"},{default:a(()=>[...m[3]||(m[3]=[o("Zona Bahaya",-1)])]),_:1}),s(e(re),null,{default:a(()=>[...m[4]||(m[4]=[o(" Tindakan di bawah ini bersifat permanen dan tidak dapat dibatalkan ",-1)])]),_:1})]),_:1}),s(e(F),{class:"space-y-6"},{default:a(()=>[t("div",Xn,[t("div",Yn,[s(e(pe),{class:"w-5 h-5 text-red-600 dark:text-red-400 mt-0.5"}),t("div",Zn,[m[6]||(m[6]=t("h3",{class:"font-semibold text-red-900 dark:text-red-100"}," Hapus Akun ",-1)),m[7]||(m[7]=t("p",{class:"text-sm text-red-700 dark:text-red-300 mt-1"}," Setelah akun Anda dihapus, semua data akan dihapus secara permanen. Tindakan ini tidak dapat dibatalkan. ",-1)),s(e(I),{type:"button",variant:"destructive",class:"mt-4",onClick:m[0]||(m[0]=c=>x.value=!0)},{default:a(()=>[s(e(Ue),{class:"w-4 h-4 mr-2"}),m[5]||(m[5]=o(" Hapus Akun Saya ",-1))]),_:1})])])])]),_:1})]),_:1}),s(e(we),{open:x.value,"onUpdate:open":m[2]||(m[2]=c=>x.value=c)},{default:a(()=>[s(e(ye),null,{default:a(()=>[s(e(ke),null,{default:a(()=>[s(e(_e),{class:"flex items-center gap-2 text-red-600"},{default:a(()=>[s(e(pe),{class:"w-5 h-5"}),m[8]||(m[8]=o(" Konfirmasi Hapus Akun ",-1))]),_:1}),s(e(he),null,{default:a(()=>[...m[9]||(m[9]=[o(" Apakah Anda yakin ingin menghapus akun Anda? Tindakan ini tidak dapat dibatalkan dan semua data Anda akan dihapus secara permanen. ",-1)])]),_:1})]),_:1}),m[11]||(m[11]=t("div",{class:"py-4"},[t("div",{class:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-900 rounded-lg"},[t("p",{class:"text-sm text-red-700 dark:text-red-300"},[t("strong",null,"Data yang akan dihapus:")]),t("ul",{class:"mt-2 text-sm text-red-700 dark:text-red-300 list-disc list-inside space-y-1"},[t("li",null,"Informasi profil dan akun"),t("li",null,"Riwayat transaksi"),t("li",null,"E-wallet dan saldo"),t("li",null,"Jaringan dan bonus")])])],-1)),s(e($e),null,{default:a(()=>[s(e(I),{type:"button",variant:"outline",onClick:m[1]||(m[1]=c=>x.value=!1),disabled:e(d).processing},{default:a(()=>[...m[10]||(m[10]=[o(" Batal ",-1)])]),_:1},8,["disabled"]),s(e(I),{type:"button",variant:"destructive",onClick:u,disabled:e(d).processing},{default:a(()=>[s(e(Ue),{class:"w-4 h-4 mr-2"}),o(" "+n(e(d).processing?"Menghapus...":"Ya, Hapus Akun"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])],64))}}),er={key:0,class:"text-center py-12 text-muted-foreground"},tr={class:"flex items-start justify-between"},sr={class:"flex-1"},ar={class:"flex items-center gap-2 mb-2"},lr={class:"font-semibold text-lg"},nr={class:"space-y-1 text-sm text-muted-foreground"},rr={key:0},or={class:"text-xs"},ir={class:"text-xs font-medium text-green-600 dark:text-green-400"},dr={class:"flex flex-col items-end gap-2"},ur={key:0,class:"text-center py-12 text-muted-foreground"},mr={class:"flex items-start justify-between"},cr={class:"flex-1"},pr={class:"flex items-center gap-2 mb-2"},xr={class:"font-semibold text-lg"},fr={class:"space-y-1 text-sm text-muted-foreground"},vr={key:0},gr={class:"text-xs"},br={class:"text-xs font-medium text-orange-600 dark:text-orange-400"},yr={class:"flex flex-col items-end gap-2"},kr={key:0,class:"text-center py-12 text-muted-foreground"},_r={class:"flex items-start justify-between"},hr={class:"flex-1"},wr={class:"flex items-center gap-2 mb-2"},$r={class:"font-semibold text-lg"},Cr={class:"space-y-1 text-sm text-muted-foreground"},Pr={key:0},Sr={class:"text-xs"},Rr={class:"text-xs font-medium text-gray-500 dark:text-gray-400"},jr={class:"flex flex-col items-end gap-2"},Mr={class:"font-semibold"},Tr={class:"grid grid-cols-2 gap-4 py-4"},Dr=J({__name:"NetworkMembersTab",props:{activeMembers:{},passiveMembers:{},prospectMembers:{}},setup(l){const x=T(!1),d=T(null),u=T(null),b=de({member_id:0,position:""}),m=g=>{d.value=g,u.value=null,b.member_id=g.id,b.position="",x.value=!0},c=()=>{x.value=!1,d.value=null,u.value=null,b.reset()},_=()=>{if(!d.value||!u.value){j.error("Pilih posisi terlebih dahulu");return}b.position=u.value,b.post("/client/profile/place-member",{onSuccess:()=>{j.success(`${d.value?.name} berhasil ditempatkan di posisi ${u.value}`),c()},onError:g=>{const v=g.error||"Gagal menempatkan member ke binary tree";j.error(v)}})},R=g=>new Date(g).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"}),i=g=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(g),f=g=>g?{variant:g==="left"?"default":"secondary",text:g==="left"?"Kiri":"Kanan"}:{variant:"outline",text:"Belum Ditempatkan"};return(g,v)=>(r(),p(G,null,[s(e(z),null,{default:a(()=>[s(e(W),null,{default:a(()=>[s(e(q),null,{default:a(()=>[...v[2]||(v[2]=[o("Jaringan Member",-1)])]),_:1}),s(e(re),null,{default:a(()=>[...v[3]||(v[3]=[o("Kelola dan lihat member dalam jaringan Anda",-1)])]),_:1})]),_:1}),s(e(F),null,{default:a(()=>[s(e(Fe),{"default-value":"active",class:"w-full"},{default:a(()=>[s(e(Ke),{class:"grid w-full grid-cols-3"},{default:a(()=>[s(e(Q),{value:"active"},{default:a(()=>[s(e(ie),{class:"w-4 h-4 mr-2"}),o(" Aktif ("+n(l.activeMembers.length)+") ",1)]),_:1}),s(e(Q),{value:"passive"},{default:a(()=>[s(e(De),{class:"w-4 h-4 mr-2"}),o(" Pasif ("+n(l.passiveMembers.length)+") ",1)]),_:1}),s(e(Q),{value:"prospect"},{default:a(()=>[s(e(ce),{class:"w-4 h-4 mr-2"}),o(" Prospek ("+n(l.prospectMembers.length)+") ",1)]),_:1})]),_:1}),s(e(ee),{value:"active",class:"space-y-4"},{default:a(()=>[l.activeMembers.length===0?(r(),p("div",er,[s(e(ie),{class:"w-12 h-12 mx-auto mb-4 opacity-20"}),v[4]||(v[4]=t("p",null,"Belum ada member aktif",-1)),v[5]||(v[5]=t("p",{class:"text-sm mt-2"},"Member aktif adalah member yang sudah ditempatkan di binary tree",-1))])):C("",!0),(r(!0),p(G,null,te(l.activeMembers,D=>(r(),P(e(z),{key:D.id,class:"hover:shadow-md transition-shadow"},{default:a(()=>[s(e(F),{class:"p-4"},{default:a(()=>[t("div",tr,[t("div",sr,[t("div",ar,[t("h4",lr,n(D.name),1),s(e(A),{variant:f(D.position).variant},{default:a(()=>[o(n(f(D.position).text),1)]),_:2},1032,["variant"]),D.level?(r(),P(e(A),{key:0,variant:"outline"},{default:a(()=>[o(" Level "+n(D.level),1)]),_:2},1024)):C("",!0)]),t("div",nr,[t("p",null,n(D.email),1),D.phone?(r(),p("p",rr,n(D.phone),1)):C("",!0),t("p",or,"Bergabung: "+n(R(D.joined_at)),1),t("p",ir," Omzet: "+n(i(D.omzet)),1)])]),t("div",dr,[s(e(A),{variant:"default"},{default:a(()=>[s(e(ie),{class:"w-3 h-3 mr-1"}),v[6]||(v[6]=o(" Aktif ",-1))]),_:1})])])]),_:2},1024)]),_:2},1024))),128))]),_:1}),s(e(ee),{value:"passive",class:"space-y-4"},{default:a(()=>[l.passiveMembers.length===0?(r(),p("div",ur,[s(e(De),{class:"w-12 h-12 mx-auto mb-4 opacity-20"}),v[7]||(v[7]=t("p",null,"Belum ada member pasif",-1)),v[8]||(v[8]=t("p",{class:"text-sm mt-2"},"Member pasif adalah member yang belum ditempatkan di binary tree tapi sudah memiliki pembelian/order",-1))])):C("",!0),(r(!0),p(G,null,te(l.passiveMembers,D=>(r(),P(e(z),{key:D.id,class:"hover:shadow-md transition-shadow"},{default:a(()=>[s(e(F),{class:"p-4"},{default:a(()=>[t("div",mr,[t("div",cr,[t("div",pr,[t("h4",xr,n(D.name),1),s(e(A),{variant:"secondary"},{default:a(()=>[...v[9]||(v[9]=[o("Belum Ditempatkan",-1)])]),_:1})]),t("div",fr,[t("p",null,n(D.email),1),D.phone?(r(),p("p",vr,n(D.phone),1)):C("",!0),t("p",gr,"Bergabung: "+n(R(D.joined_at)),1),t("p",br," Omzet: "+n(i(D.omzet)),1)])]),t("div",yr,[s(e(A),{variant:"outline"},{default:a(()=>[s(e(De),{class:"w-3 h-3 mr-1"}),v[10]||(v[10]=o(" Pasif ",-1))]),_:1}),s(e(A),{variant:"default"},{default:a(()=>[...v[11]||(v[11]=[o(" Sudah Belanja ",-1)])]),_:1}),s(e(I),{size:"sm",variant:"default",class:"mt-2",onClick:N=>m(D)},{default:a(()=>[s(e(ve),{class:"w-3 h-3 mr-1"}),v[12]||(v[12]=o(" Tempatkan ke Binary ",-1))]),_:1},8,["onClick"])])])]),_:2},1024)]),_:2},1024))),128))]),_:1}),s(e(ee),{value:"prospect",class:"space-y-4"},{default:a(()=>[l.prospectMembers.length===0?(r(),p("div",kr,[s(e(ce),{class:"w-12 h-12 mx-auto mb-4 opacity-20"}),v[13]||(v[13]=t("p",null,"Belum ada member prospek",-1)),v[14]||(v[14]=t("p",{class:"text-sm mt-2"},"Member prospek adalah member yang baru mendaftar, belum ditempatkan di binary tree dan belum memiliki pembelian/order",-1))])):C("",!0),(r(!0),p(G,null,te(l.prospectMembers,D=>(r(),P(e(z),{key:D.id,class:"hover:shadow-md transition-shadow"},{default:a(()=>[s(e(F),{class:"p-4"},{default:a(()=>[t("div",_r,[t("div",hr,[t("div",wr,[t("h4",$r,n(D.name),1),s(e(A),{variant:"outline"},{default:a(()=>[...v[15]||(v[15]=[o("Baru Bergabung",-1)])]),_:1})]),t("div",Cr,[t("p",null,n(D.email),1),D.phone?(r(),p("p",Pr,n(D.phone),1)):C("",!0),t("p",Sr,"Bergabung: "+n(R(D.joined_at)),1),t("p",Rr," Omzet: "+n(i(D.omzet)),1)])]),t("div",jr,[s(e(A),{variant:"secondary"},{default:a(()=>[s(e(ce),{class:"w-3 h-3 mr-1"}),v[16]||(v[16]=o(" Prospek ",-1))]),_:1}),s(e(A),{variant:"secondary"},{default:a(()=>[...v[17]||(v[17]=[o(" Belum Belanja ",-1)])]),_:1})])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1}),s(e(we),{open:x.value,"onUpdate:open":c},{default:a(()=>[s(e(ye),{class:"sm:max-w-md"},{default:a(()=>[s(e(ke),null,{default:a(()=>[s(e(_e),null,{default:a(()=>[...v[18]||(v[18]=[o("Tempatkan Member ke Binary Tree",-1)])]),_:1}),s(e(he),null,{default:a(()=>[v[19]||(v[19]=o(" Pilih posisi untuk menempatkan ",-1)),t("span",Mr,n(d.value?.name),1),v[20]||(v[20]=o(" di jaringan binary tree Anda. ",-1))]),_:1})]),_:1}),t("div",Tr,[t("button",{type:"button",class:U(["flex flex-col items-center justify-center p-6 rounded-lg border-2 transition-all",u.value==="left"?"border-primary bg-primary/10":"border-gray-200 hover:border-gray-300"]),onClick:v[0]||(v[0]=D=>u.value="left")},[s(e(ve),{class:"w-8 h-8 mb-2 rotate-90"}),v[21]||(v[21]=t("span",{class:"font-semibold"},"Posisi Kiri",-1)),v[22]||(v[22]=t("span",{class:"text-xs text-muted-foreground mt-1"},"Left Position",-1))],2),t("button",{type:"button",class:U(["flex flex-col items-center justify-center p-6 rounded-lg border-2 transition-all",u.value==="right"?"border-primary bg-primary/10":"border-gray-200 hover:border-gray-300"]),onClick:v[1]||(v[1]=D=>u.value="right")},[s(e(ve),{class:"w-8 h-8 mb-2 -rotate-90"}),v[23]||(v[23]=t("span",{class:"font-semibold"},"Posisi Kanan",-1)),v[24]||(v[24]=t("span",{class:"text-xs text-muted-foreground mt-1"},"Right Position",-1))],2)]),s(e($e),null,{default:a(()=>[s(e(I),{variant:"outline",onClick:c,disabled:e(b).processing},{default:a(()=>[...v[25]||(v[25]=[o(" Batal ",-1)])]),_:1},8,["disabled"]),s(e(I),{onClick:_,disabled:!u.value||e(b).processing},{default:a(()=>[o(n(e(b).processing?"Memproses...":"Tempatkan"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])],64))}}),Ar={class:"flex justify-center mb-3 sm:mb-6"},Br={class:"flex-1 min-w-0"},Vr={class:"sm:hidden"},Lr={class:"hidden sm:inline"},Ir={class:"sm:hidden"},Ur={class:"hidden sm:inline"},Er={class:"flex items-center gap-0.5 sm:gap-1 mt-0.5 sm:mt-1 flex-wrap"},Nr={class:"text-center"},Or={class:"hidden sm:inline"},zr={key:1,class:"flex justify-center mb-3 sm:mb-6"},Fr={class:"text-center"},Kr={key:1,class:"flex justify-center mb-3 sm:mb-6"},Gr={class:"text-center"},Wr=J({__name:"TreeNodeComponent",props:{node:{},isRoot:{type:Boolean},maxLevel:{default:15}},emits:["open-placement"],setup(l,{emit:x}){const d=l,u=x,b=(i,f)=>{if(!f)return"bg-gray-100 border-gray-300 dark:bg-gray-800 dark:border-gray-600";const g=["bg-primary/10 border-primary/30","bg-blue-50 border-blue-200 dark:bg-blue-950 dark:border-blue-800","bg-green-50 border-green-200 dark:bg-green-950 dark:border-green-800","bg-purple-50 border-purple-200 dark:bg-purple-950 dark:border-purple-800","bg-orange-50 border-orange-200 dark:bg-orange-950 dark:border-orange-800","bg-pink-50 border-pink-200 dark:bg-pink-950 dark:border-pink-800"];return g[Math.min(i-1,g.length-1)]||g[g.length-1]},m=(i,f)=>{u("open-placement",i,f)},c=d.node.level<d.maxLevel,_=(i,f)=>i.length<=f?i:i.substring(0,f)+"...",R=(i,f)=>i.length<=f?i:i.indexOf("@")>f-3?i.substring(0,f-3)+"...":i.substring(0,f)+"...";return(i,f)=>{const g=jt("TreeNodeComponent",!0);return r(),p("div",null,[t("div",Ar,[l.node.name?(r(),p("div",{key:0,class:U(["relative rounded-lg border-2 shadow-sm sm:shadow-lg transition-all hover:shadow-md sm:hover:shadow-xl max-w-[120px] sm:max-w-none",l.isRoot?"px-2 py-2 sm:px-6 sm:py-4":"px-1.5 py-1.5 sm:px-3 sm:py-2",b(l.node.level,l.node.status)])},[t("div",{class:U(["flex items-center gap-1.5 sm:gap-2",l.isRoot&&"sm:gap-3"])},[t("div",{class:U(["flex items-center justify-center rounded-full text-primary-foreground flex-shrink-0",l.isRoot?"h-7 w-7 sm:h-12 sm:w-12 bg-primary":"h-5 w-5 sm:h-8 sm:w-8 bg-blue-100 dark:bg-blue-900"])},[s(e(Se),{class:U(l.isRoot?"h-4 w-4 sm:h-6 sm:w-6":"h-3 w-3 sm:h-4 sm:w-4 text-blue-600 dark:text-blue-400")},null,8,["class"])],2),t("div",Br,[t("div",{class:U(["font-medium truncate",l.isRoot?"text-xs sm:text-base font-semibold":"text-[10px] sm:text-xs"])},[t("span",Vr,n(_(l.node.name,10)),1),t("span",Lr,n(l.node.name),1)],2),t("div",{class:U(["text-muted-foreground truncate",l.isRoot?"text-[10px] sm:text-xs":"text-[8px] sm:text-[10px]"])},[t("span",Ir,n(R(l.node.email,12)),1),t("span",Ur,n(l.node.email),1)],2),t("div",Er,[l.node.position==="left"?(r(),P(e(A),{key:0,variant:"secondary",class:U(l.isRoot?"text-[8px] sm:text-xs px-1 py-0":"text-[7px] sm:text-[10px] px-0.5 py-0")},{default:a(()=>[...f[5]||(f[5]=[t("span",{class:"sm:hidden"},"L",-1),t("span",{class:"hidden sm:inline"},"Kiri",-1)])]),_:1},8,["class"])):l.node.position==="right"?(r(),P(e(A),{key:1,variant:"secondary",class:U(l.isRoot?"text-[8px] sm:text-xs px-1 py-0":"text-[7px] sm:text-[10px] px-0.5 py-0")},{default:a(()=>[...f[6]||(f[6]=[t("span",{class:"sm:hidden"},"R",-1),t("span",{class:"hidden sm:inline"},"Kanan",-1)])]),_:1},8,["class"])):C("",!0),s(e(A),{variant:"outline",class:U(l.isRoot?"text-[8px] sm:text-xs px-1 py-0":"text-[7px] sm:text-[10px] px-0.5 py-0")},{default:a(()=>[o(" L"+n(l.node.level),1)]),_:1},8,["class"])])])],2)],2)):l.node.member_id>0?(r(),p("div",{key:1,class:U(["rounded-lg border-2 border-dashed bg-muted/50 hover:bg-muted hover:border-primary/50 transition-all cursor-pointer group",l.isRoot?"px-2 py-2 sm:px-6 sm:py-4":"px-1.5 py-1 sm:px-3 sm:py-2"]),onClick:f[0]||(f[0]=v=>m(l.node.member_id,l.node.position))},[t("div",Nr,[s(e(ce),{class:U(["mx-auto mb-0.5 sm:mb-1 text-muted-foreground group-hover:text-primary",l.isRoot?"w-4 h-4 sm:w-6 sm:h-6":"w-3 h-3 sm:w-4 sm:h-4"])},null,8,["class"]),t("div",{class:U(["text-muted-foreground group-hover:text-primary",l.isRoot?"text-[10px] sm:text-sm":"text-[8px] sm:text-[10px]"])},[f[7]||(f[7]=t("span",{class:"sm:hidden"},"+",-1)),t("span",Or,n(l.isRoot?"Tempatkan Member":"Tambah"),1)],2)])],2)):(r(),p("div",{key:2,class:U(["rounded-lg border-2 border-dashed bg-muted/30",l.isRoot?"px-2 py-2 sm:px-6 sm:py-4":"px-1.5 py-1 sm:px-3 sm:py-2"])},[t("div",{class:U(["text-center text-muted-foreground",l.isRoot?"text-[10px] sm:text-sm":"text-[8px] sm:text-[10px]"])}," - ",2)],2))]),l.node.name&&c?(r(),p("div",{key:0,class:U(["flex justify-center gap-1 sm:gap-4 mb-2 sm:mb-4",l.isRoot&&"gap-2 sm:gap-16 sm:mb-6"])},[t("div",{class:U(l.isRoot?"w-[130px] sm:w-64":"w-[65px] sm:w-36")},[l.node.left?(r(),P(g,{key:0,node:l.node.left,"is-root":!1,"max-level":l.maxLevel,onOpenPlacement:f[1]||(f[1]=(v,D)=>i.$emit("open-placement",v,D))},null,8,["node","max-level"])):(r(),p("div",zr,[t("div",{class:U(["rounded-lg border-2 border-dashed bg-muted/50 hover:bg-muted hover:border-primary/50 transition-all cursor-pointer group",l.isRoot?"px-2 py-2 sm:px-6 sm:py-4":"px-1.5 py-1 sm:px-3 sm:py-2"]),onClick:f[2]||(f[2]=v=>m(l.node.member_id,"left"))},[t("div",Fr,[s(e(ce),{class:U(["mx-auto mb-0.5 sm:mb-1 text-muted-foreground group-hover:text-primary",l.isRoot?"w-4 h-4 sm:w-6 sm:h-6":"w-3 h-3 sm:w-4 sm:h-4"])},null,8,["class"]),t("div",{class:U(["text-muted-foreground group-hover:text-primary",l.isRoot?"text-[10px] sm:text-sm":"text-[8px] sm:text-[10px]"])},[...f[8]||(f[8]=[t("span",{class:"sm:hidden"},"+",-1),t("span",{class:"hidden sm:inline"},"Tambah",-1)])],2)])],2)]))],2),t("div",{class:U(l.isRoot?"w-[130px] sm:w-64":"w-[65px] sm:w-36")},[l.node.right?(r(),P(g,{key:0,node:l.node.right,"is-root":!1,"max-level":l.maxLevel,onOpenPlacement:f[3]||(f[3]=(v,D)=>i.$emit("open-placement",v,D))},null,8,["node","max-level"])):(r(),p("div",Kr,[t("div",{class:U(["rounded-lg border-2 border-dashed bg-muted/50 hover:bg-muted hover:border-primary/50 transition-all cursor-pointer group",l.isRoot?"px-2 py-2 sm:px-6 sm:py-4":"px-1.5 py-1 sm:px-3 sm:py-2"]),onClick:f[4]||(f[4]=v=>m(l.node.member_id,"right"))},[t("div",Gr,[s(e(ce),{class:U(["mx-auto mb-0.5 sm:mb-1 text-muted-foreground group-hover:text-primary",l.isRoot?"w-4 h-4 sm:w-6 sm:h-6":"w-3 h-3 sm:w-4 sm:h-4"])},null,8,["class"]),t("div",{class:U(["text-muted-foreground group-hover:text-primary",l.isRoot?"text-[10px] sm:text-sm":"text-[8px] sm:text-[10px]"])},[...f[9]||(f[9]=[t("span",{class:"sm:hidden"},"+",-1),t("span",{class:"hidden sm:inline"},"Tambah",-1)])],2)])],2)]))],2)],2)):C("",!0)])}}}),qr={class:"space-y-4 sm:space-y-6"},Jr={class:"grid grid-cols-3 gap-2 sm:gap-4"},Hr={class:"text-lg sm:text-2xl font-bold"},Xr={class:"text-lg sm:text-2xl font-bold text-blue-600"},Yr={class:"text-lg sm:text-2xl font-bold text-green-600"},Zr={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2"},Qr={class:"flex items-center gap-1 sm:gap-2"},eo={class:"mt-4 sm:mt-6 p-2 sm:p-4 rounded-lg bg-muted/50"},to={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 text-center sm:text-left"},so={class:"text-[10px] sm:text-sm text-muted-foreground"},ao={class:"hidden sm:inline"},lo={class:"sm:hidden"},no={class:"text-[10px] sm:text-sm text-muted-foreground"},ro={class:"sm:hidden"},oo={class:"font-semibold"},io={class:"flex-1 overflow-y-auto py-2 sm:py-4"},uo={key:0,class:"text-center py-8 sm:py-12 text-muted-foreground"},mo={key:1,class:"space-y-2"},co=["onClick"],po={class:"flex items-start justify-between gap-2"},xo={class:"flex-1 min-w-0"},fo={class:"flex flex-wrap items-center gap-1 sm:gap-2 mb-1"},vo={class:"font-semibold text-sm sm:text-base truncate"},go={class:"space-y-0.5 text-xs sm:text-sm text-muted-foreground"},bo={class:"truncate"},yo={key:0,class:"truncate"},ko={class:"text-[10px] sm:text-xs"},_o={key:0,class:"flex-shrink-0"},Le=.3,Ie=2,et=.1,ho=J({__name:"BinaryTreeTab",props:{binaryTree:{},totalDownlines:{},totalLeft:{},totalRight:{},passiveMembers:{}},setup(l){const x=l,d=T(!1),u=E(()=>d.value?3:15),b=T(1),m=()=>{b.value<Ie&&(b.value=Math.min(Ie,b.value+et))},c=()=>{b.value>Le&&(b.value=Math.max(Le,b.value-et))},_=()=>{b.value=1},R=E(()=>Math.round(b.value*100)),i=T(null),f=T(null),g=T(!1),v=T({x:0,y:0}),D=T({x:0,y:0}),N=T({x:0,y:0}),$=O=>{if(!i.value)return;g.value=!0;const B="touches"in O?O.touches[0].clientX:O.clientX,ae="touches"in O?O.touches[0].clientY:O.clientY;D.value={x:B,y:ae},N.value={x:i.value.scrollLeft,y:i.value.scrollTop},O.preventDefault()},L=O=>{if(!g.value||!i.value)return;const B="touches"in O?O.touches[0].clientX:O.clientX,ae="touches"in O?O.touches[0].clientY:O.clientY,ue=D.value.x-B,Ce=D.value.y-ae;i.value.scrollLeft=N.value.x+ue,i.value.scrollTop=N.value.y+Ce},Y=()=>{g.value=!1};Pe(b,()=>{});const oe=()=>{b.value=1,v.value={x:0,y:0},i.value&&(i.value.scrollLeft=0,i.value.scrollTop=0)},X=()=>{d.value=window.innerWidth<640};We(()=>{X(),window.addEventListener("resize",X)}),Mt(()=>{window.removeEventListener("resize",X)});const V=T(!1),H=T(null),M=T(null),y=T(null),w=de({member_id:0,position:""}),Z=(O,B,ae,ue)=>{if(ue>u.value)return null;if(O){const Ce=ue<u.value;return{...O,left:Ce?Z(O.left||null,O.member_id,"left",ue+1):void 0,right:Ce?Z(O.right||null,O.member_id,"right",ue+1):void 0}}return null},h=E(()=>Z(x.binaryTree,null,null,x.binaryTree.level)||x.binaryTree),k=(O,B)=>{H.value=O,M.value=B,y.value=null,V.value=!0},S=()=>{V.value=!1,H.value=null,M.value=null,y.value=null},ut=O=>{y.value=O},mt=()=>{if(!y.value||!M.value){j.error("Pilih member terlebih dahulu");return}w.member_id=y.value.id,w.position=M.value,w.post("/client/profile/place-member",{onSuccess:()=>{j.success(`${y.value?.name} berhasil ditempatkan di posisi ${M.value}`),S()},onError:O=>{const B=O.error||"Gagal menempatkan member ke binary tree";j.error(B)}})},ct=O=>new Date(O).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"});return(O,B)=>(r(),p(G,null,[t("div",qr,[t("div",Jr,[s(e(z),{class:"p-0"},{default:a(()=>[s(e(W),{class:"flex flex-row items-center justify-between space-y-0 p-2 sm:p-4 pb-1 sm:pb-2"},{default:a(()=>[s(e(q),{class:"text-[10px] sm:text-sm font-medium truncate"},{default:a(()=>[...B[0]||(B[0]=[o("Total Jaringan",-1)])]),_:1}),s(e(ot),{class:"h-3 w-3 sm:h-4 sm:w-4 text-muted-foreground flex-shrink-0"})]),_:1}),s(e(F),{class:"p-2 sm:p-4 pt-0 sm:pt-0"},{default:a(()=>[t("div",Hr,n(l.totalDownlines),1),B[1]||(B[1]=t("p",{class:"text-[8px] sm:text-xs text-muted-foreground hidden sm:block"},"Member aktif di jaringan Anda",-1))]),_:1})]),_:1}),s(e(z),{class:"p-0"},{default:a(()=>[s(e(W),{class:"flex flex-row items-center justify-between space-y-0 p-2 sm:p-4 pb-1 sm:pb-2"},{default:a(()=>[s(e(q),{class:"text-[10px] sm:text-sm font-medium truncate"},{default:a(()=>[...B[2]||(B[2]=[o("Kaki Kiri",-1)])]),_:1}),s(e(Je),{class:"h-3 w-3 sm:h-4 sm:w-4 text-blue-600 flex-shrink-0"})]),_:1}),s(e(F),{class:"p-2 sm:p-4 pt-0 sm:pt-0"},{default:a(()=>[t("div",Xr,n(l.totalLeft),1),B[3]||(B[3]=t("p",{class:"text-[8px] sm:text-xs text-muted-foreground hidden sm:block"},"Member di posisi kiri",-1))]),_:1})]),_:1}),s(e(z),{class:"p-0"},{default:a(()=>[s(e(W),{class:"flex flex-row items-center justify-between space-y-0 p-2 sm:p-4 pb-1 sm:pb-2"},{default:a(()=>[s(e(q),{class:"text-[10px] sm:text-sm font-medium truncate"},{default:a(()=>[...B[4]||(B[4]=[o("Kaki Kanan",-1)])]),_:1}),s(e(Je),{class:"h-3 w-3 sm:h-4 sm:w-4 text-green-600 flex-shrink-0"})]),_:1}),s(e(F),{class:"p-2 sm:p-4 pt-0 sm:pt-0"},{default:a(()=>[t("div",Yr,n(l.totalRight),1),B[5]||(B[5]=t("p",{class:"text-[8px] sm:text-xs text-muted-foreground hidden sm:block"},"Member di posisi kanan",-1))]),_:1})]),_:1})]),s(e(z),null,{default:a(()=>[s(e(W),{class:"p-3 sm:p-6"},{default:a(()=>[t("div",Zr,[t("div",null,[s(e(q),{class:"text-sm sm:text-base"},{default:a(()=>[...B[6]||(B[6]=[o("Struktur Binary Tree",-1)])]),_:1}),s(e(re),{class:"text-xs sm:text-sm"},{default:a(()=>[...B[7]||(B[7]=[o(" Visualisasi jaringan MLM binary tree Anda ",-1)])]),_:1})]),t("div",Qr,[s(e(I),{variant:"outline",size:"icon",class:"h-7 w-7 sm:h-8 sm:w-8",onClick:c,disabled:b.value<=Le},{default:a(()=>[s(e(Tt),{class:"h-3.5 w-3.5 sm:h-4 sm:w-4"})]),_:1},8,["disabled"]),s(e(I),{variant:"outline",size:"sm",class:"h-7 px-2 sm:h-8 sm:px-3 text-xs sm:text-sm min-w-[50px] sm:min-w-[60px]",onClick:_},{default:a(()=>[o(n(R.value)+"% ",1)]),_:1}),s(e(I),{variant:"outline",size:"icon",class:"h-7 w-7 sm:h-8 sm:w-8",onClick:m,disabled:b.value>=Ie},{default:a(()=>[s(e(Dt),{class:"h-3.5 w-3.5 sm:h-4 sm:w-4"})]),_:1},8,["disabled"]),s(e(I),{variant:"ghost",size:"icon",class:"h-7 w-7 sm:h-8 sm:w-8",onClick:oe,title:"Reset View"},{default:a(()=>[s(e(At),{class:"h-3.5 w-3.5 sm:h-4 sm:w-4"})]),_:1})])])]),_:1}),s(e(F),{class:"p-2 sm:p-6 pt-0"},{default:a(()=>[t("div",{ref_key:"treeContainer",ref:i,class:U(["overflow-auto pb-4 -mx-2 px-2 max-h-[60vh] sm:max-h-[70vh] select-none",{"cursor-grab":!g.value&&b.value!==1,"cursor-grabbing":g.value}]),onMousedown:$,onMousemove:L,onMouseup:Y,onMouseleave:Y,onTouchstart:$,onTouchmove:L,onTouchend:Y},[t("div",{ref_key:"treeWrapper",ref:f,class:"min-w-[280px] sm:min-w-max transition-transform duration-200 origin-top-left inline-block",style:Bt({transform:`scale(${b.value})`,transformOrigin:"top left"})},[s(Wr,{node:h.value,"is-root":!0,"max-level":u.value,onOpenPlacement:k},null,8,["node","max-level"])],4)],34),t("div",eo,[t("div",to,[t("p",so,[B[8]||(B[8]=o("  ",-1)),t("span",ao,"Tree menampilkan maksimal "+n(u.value)+" level untuk performa optimal",1),t("span",lo,"Max "+n(u.value)+" level",1)]),t("p",no,[s(e(Vt),{class:"inline-block h-3 w-3 sm:h-4 sm:w-4 mr-1"}),B[9]||(B[9]=t("span",{class:"hidden sm:inline"},"Drag untuk menggeser, gunakan tombol zoom untuk resize",-1)),t("span",ro,"Geser & Zoom: "+n(R.value)+"%",1)])])])]),_:1})]),_:1})]),s(e(we),{open:V.value,"onUpdate:open":S},{default:a(()=>[s(e(ye),{class:"w-[95vw] max-w-2xl max-h-[85vh] overflow-hidden flex flex-col p-4 sm:p-6"},{default:a(()=>[s(e(ke),{class:"space-y-1 sm:space-y-2"},{default:a(()=>[s(e(_e),{class:"text-base sm:text-lg"},{default:a(()=>[...B[10]||(B[10]=[o("Pilih Member untuk Ditempatkan",-1)])]),_:1}),s(e(he),{class:"text-xs sm:text-sm"},{default:a(()=>[B[11]||(B[11]=o(" Pilih member pasif untuk ditempatkan di posisi ",-1)),t("span",oo,n(M.value==="left"?"Kiri":"Kanan"),1)]),_:1})]),_:1}),t("div",io,[l.passiveMembers.length===0?(r(),p("div",uo,[s(e(ce),{class:"w-8 h-8 sm:w-12 sm:h-12 mx-auto mb-3 sm:mb-4 opacity-20"}),B[12]||(B[12]=t("p",{class:"text-sm sm:text-base"},"Tidak ada member pasif",-1)),B[13]||(B[13]=t("p",{class:"text-xs sm:text-sm mt-1 sm:mt-2"},"Semua member sudah ditempatkan",-1))])):(r(),p("div",mo,[(r(!0),p(G,null,te(l.passiveMembers,ae=>(r(),p("button",{key:ae.id,type:"button",class:U(["w-full p-3 sm:p-4 rounded-lg border-2 text-left transition-all",y.value?.id===ae.id?"border-primary bg-primary/10":"border-gray-200 hover:border-gray-300 dark:border-gray-700 dark:hover:border-gray-600"]),onClick:ue=>ut(ae)},[t("div",po,[t("div",xo,[t("div",fo,[t("h4",vo,n(ae.name),1),ae.has_purchase?(r(),P(e(A),{key:0,variant:"default",class:"text-[10px] sm:text-xs"},{default:a(()=>[...B[14]||(B[14]=[t("span",{class:"hidden sm:inline"},"Ada Pembelian",-1),t("span",{class:"sm:hidden"},"Beli",-1)])]),_:1})):(r(),P(e(A),{key:1,variant:"secondary",class:"text-[10px] sm:text-xs"},{default:a(()=>[...B[15]||(B[15]=[t("span",{class:"hidden sm:inline"},"Belum Belanja",-1),t("span",{class:"sm:hidden"},"Belum",-1)])]),_:1}))]),t("div",go,[t("p",bo,n(ae.email),1),ae.phone?(r(),p("p",yo,n(ae.phone),1)):C("",!0),t("p",ko,"Bergabung: "+n(ct(ae.joined_at)),1)])]),y.value?.id===ae.id?(r(),p("div",_o,[...B[16]||(B[16]=[t("div",{class:"flex h-5 w-5 sm:h-6 sm:w-6 items-center justify-center rounded-full bg-primary text-primary-foreground"},[t("svg",{class:"w-3 h-3 sm:w-4 sm:h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1)])])):C("",!0)])],10,co))),128))]))]),s(e($e),{class:"flex-col-reverse sm:flex-row gap-2 sm:gap-0"},{default:a(()=>[s(e(I),{variant:"outline",onClick:S,disabled:e(w).processing,class:"w-full sm:w-auto"},{default:a(()=>[...B[17]||(B[17]=[o(" Batal ",-1)])]),_:1},8,["disabled"]),s(e(I),{onClick:mt,disabled:!y.value||e(w).processing,class:"w-full sm:w-auto"},{default:a(()=>[o(n(e(w).processing?"Memproses...":"Tempatkan"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])],64))}}),wo={class:"space-y-4 sm:space-y-6"},$o={class:"grid gap-3 sm:gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3"},Co={class:"text-xl sm:text-2xl font-bold truncate"},Po={class:"text-[10px] sm:text-xs text-muted-foreground mt-1"},So={class:"flex flex-col sm:flex-row gap-1 sm:gap-2 mt-2"},Ro={class:"text-xl sm:text-2xl font-bold truncate"},jo={class:"text-[10px] sm:text-xs text-muted-foreground mt-1"},Mo={class:"flex flex-col sm:flex-row gap-1 sm:gap-2 mt-2"},To={class:"text-xl sm:text-2xl font-bold truncate"},Do={class:"text-[10px] sm:text-xs text-muted-foreground mt-1"},Ao={class:"flex flex-col sm:flex-row gap-1 sm:gap-2 mt-2"},Bo={class:"text-xl sm:text-2xl font-bold truncate"},Vo={class:"text-[10px] sm:text-xs text-muted-foreground mt-1"},Lo={class:"flex flex-col sm:flex-row gap-1 sm:gap-2 mt-2"},Io={class:"text-xl sm:text-2xl font-bold truncate"},Uo={class:"text-[10px] sm:text-xs text-muted-foreground mt-1"},Eo={class:"flex flex-col sm:flex-row gap-1 sm:gap-2 mt-2"},No={class:"text-xl sm:text-2xl font-bold truncate"},Oo={class:"text-[10px] sm:text-xs text-muted-foreground mt-1"},zo={class:"flex flex-col sm:flex-row gap-1 sm:gap-2 mt-2"},Fo={class:"text-xl sm:text-2xl font-bold truncate"},Ko={class:"text-[10px] sm:text-xs text-muted-foreground mt-1"},Go={class:"flex flex-col sm:flex-row gap-1 sm:gap-2 mt-2"},Wo={class:"text-xl sm:text-2xl font-bold text-primary truncate"},qo={class:"w-full text-center overflow-x-auto [&::-webkit-scrollbar]:hidden [-ms-overflow-style:none] [scrollbar-width:none] -mx-2 px-2 sm:mx-0 sm:px-0",style:{"-webkit-overflow-scrolling":"touch"}},Jo={key:0,class:"text-center py-4 sm:py-8 text-muted-foreground text-[10px] sm:text-sm"},Ho={key:1,class:"space-y-1.5 sm:space-y-3"},Xo={class:"flex-1 min-w-0"},Yo={class:"flex flex-wrap items-center gap-1 sm:gap-2"},Zo={class:"text-[10px] sm:text-xs md:text-sm font-medium break-words line-clamp-1"},Qo={class:"text-[8px] sm:text-[10px] md:text-xs text-muted-foreground mt-0.5"},ei={key:0,class:"block sm:inline"},ti={class:"block sm:inline sm:ml-1"},si={class:"text-left sm:text-right flex-shrink-0"},ai={class:"text-xs sm:text-base md:text-lg font-bold text-green-600"},li={key:0,class:"text-center py-4 sm:py-8 text-muted-foreground text-[10px] sm:text-sm"},ni={key:1,class:"space-y-1.5 sm:space-y-3"},ri={class:"flex-1 min-w-0"},oi={class:"flex flex-wrap items-center gap-1 sm:gap-2"},ii={class:"text-[10px] sm:text-xs md:text-sm font-medium break-words line-clamp-1"},di={class:"text-[8px] sm:text-[10px] md:text-xs text-muted-foreground mt-0.5"},ui={key:0,class:"block sm:inline"},mi={class:"block sm:inline sm:ml-2"},ci={class:"text-left sm:text-right flex-shrink-0"},pi={class:"text-xs sm:text-base md:text-lg font-bold text-green-600"},xi={key:0,class:"text-center py-4 sm:py-8 text-muted-foreground text-[10px] sm:text-sm"},fi={key:1,class:"space-y-3"},vi={class:"flex-1 min-w-0"},gi={class:"flex flex-wrap items-center gap-2"},bi={class:"text-xs sm:text-sm font-medium break-words"},yi={class:"text-[10px] sm:text-xs text-muted-foreground mt-1"},ki={class:"text-left sm:text-right flex-shrink-0"},_i={class:"text-base sm:text-lg font-bold text-green-600"},hi={key:0,class:"text-center py-4 sm:py-8 text-muted-foreground text-[10px] sm:text-sm"},wi={key:1,class:"space-y-1.5 sm:space-y-3"},$i={class:"flex-1 min-w-0"},Ci={class:"flex flex-wrap items-center gap-1 sm:gap-2"},Pi={class:"text-[10px] sm:text-xs md:text-sm font-medium break-words line-clamp-1"},Si={class:"text-[8px] sm:text-[10px] md:text-xs text-muted-foreground mt-0.5"},Ri={key:0,class:"block sm:inline"},ji={class:"block sm:inline sm:ml-1"},Mi={class:"text-left sm:text-right flex-shrink-0"},Ti={class:"text-xs sm:text-base md:text-lg font-bold text-green-600"},Di={key:0,class:"text-center py-4 sm:py-8 text-muted-foreground text-[10px] sm:text-sm"},Ai={key:1,class:"space-y-1.5 sm:space-y-3"},Bi={class:"flex-1 min-w-0"},Vi={class:"flex flex-wrap items-center gap-1 sm:gap-2"},Li={class:"text-[10px] sm:text-xs md:text-sm font-medium break-words line-clamp-1"},Ii={class:"text-[8px] sm:text-[10px] md:text-xs text-muted-foreground mt-0.5"},Ui={class:"text-left sm:text-right flex-shrink-0"},Ei={class:"text-xs sm:text-base md:text-lg font-bold text-green-600"},Ni={key:0,class:"text-center py-4 sm:py-8 text-muted-foreground text-[10px] sm:text-sm"},Oi={key:1,class:"space-y-1.5 sm:space-y-3"},zi={class:"flex-1 min-w-0"},Fi={class:"flex flex-wrap items-center gap-1 sm:gap-2"},Ki={class:"text-[10px] sm:text-xs md:text-sm font-medium break-words line-clamp-1"},Gi={class:"text-[8px] sm:text-[10px] md:text-xs text-muted-foreground mt-0.5"},Wi={key:0,class:"block sm:inline"},qi={class:"block sm:inline sm:ml-1"},Ji={class:"text-left sm:text-right flex-shrink-0"},Hi={class:"text-xs sm:text-base md:text-lg font-bold text-green-600"},Xi={key:0,class:"text-center py-4 sm:py-8 text-muted-foreground text-[10px] sm:text-sm"},Yi={key:1,class:"space-y-1.5 sm:space-y-3"},Zi={class:"flex-1 min-w-0"},Qi={class:"flex flex-wrap items-center gap-1 sm:gap-2"},ed={class:"text-[10px] sm:text-xs md:text-sm font-medium break-words line-clamp-1"},td={class:"text-[8px] sm:text-[10px] md:text-xs text-muted-foreground mt-0.5"},sd={class:"block sm:inline"},ad={class:"block sm:inline sm:ml-1"},ld={class:"text-left sm:text-right flex-shrink-0"},nd={class:"text-xs sm:text-base md:text-lg font-bold text-green-600"},rd=J({__name:"BonusTab",props:{bonusSponsors:{},bonusMatchings:{},bonusPairings:{},bonusCashbacks:{},bonusRewards:{},bonusRetails:{},bonusLifetimeCashRewards:{}},setup(l){const x=l,d=h=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(h),u=h=>new Date(h).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"}),b=E(()=>x.bonusSponsors.reduce((h,k)=>h+k.amount,0)),m=E(()=>x.bonusMatchings.reduce((h,k)=>h+k.amount,0)),c=E(()=>x.bonusPairings.reduce((h,k)=>h+k.amount,0)),_=E(()=>x.bonusCashbacks.reduce((h,k)=>h+k.amount,0)),R=E(()=>x.bonusRewards.reduce((h,k)=>h+k.amount,0)),i=E(()=>x.bonusSponsors.filter(h=>h.status===0).reduce((h,k)=>h+k.amount,0)),f=E(()=>x.bonusSponsors.filter(h=>h.status===1).reduce((h,k)=>h+k.amount,0)),g=E(()=>x.bonusMatchings.filter(h=>h.status===0).reduce((h,k)=>h+k.amount,0)),v=E(()=>x.bonusMatchings.filter(h=>h.status===1).reduce((h,k)=>h+k.amount,0)),D=E(()=>x.bonusPairings.filter(h=>h.status===0).reduce((h,k)=>h+k.amount,0)),N=E(()=>x.bonusPairings.filter(h=>h.status===1).reduce((h,k)=>h+k.amount,0)),$=E(()=>x.bonusCashbacks.filter(h=>h.status===0).reduce((h,k)=>h+k.amount,0)),L=E(()=>x.bonusCashbacks.filter(h=>h.status===1).reduce((h,k)=>h+k.amount,0)),Y=E(()=>x.bonusRewards.filter(h=>h.status===0).reduce((h,k)=>h+k.amount,0)),oe=E(()=>x.bonusRewards.filter(h=>h.status===1).reduce((h,k)=>h+k.amount,0)),X=E(()=>x.bonusRetails.reduce((h,k)=>h+k.amount,0)),V=E(()=>x.bonusRetails.filter(h=>h.status===0).reduce((h,k)=>h+k.amount,0)),H=E(()=>x.bonusRetails.filter(h=>h.status===1).reduce((h,k)=>h+k.amount,0)),M=E(()=>x.bonusLifetimeCashRewards.reduce((h,k)=>h+k.amount,0)),y=E(()=>x.bonusLifetimeCashRewards.filter(h=>h.status===0).reduce((h,k)=>h+k.amount,0)),w=E(()=>x.bonusLifetimeCashRewards.filter(h=>h.status===1).reduce((h,k)=>h+k.amount,0)),Z=E(()=>b.value+m.value+c.value+_.value+R.value+X.value+M.value);return(h,k)=>(r(),p("div",wo,[t("div",$o,[s(e(z),null,{default:a(()=>[s(e(W),{class:"pb-2 sm:pb-3"},{default:a(()=>[s(e(q),{class:"text-xs sm:text-sm font-medium flex items-center gap-2"},{default:a(()=>[s(e(ot),{class:"h-3 w-3 sm:h-4 sm:w-4 text-blue-500 flex-shrink-0"}),k[0]||(k[0]=t("span",{class:"truncate"},"Referral Incentive",-1))]),_:1})]),_:1}),s(e(F),null,{default:a(()=>[t("div",Co,n(d(b.value)),1),t("p",Po,n(l.bonusSponsors.length)+" transaksi ",1),t("div",So,[s(e(A),{variant:"outline",class:"text-[10px] sm:text-xs justify-center sm:justify-start"},{default:a(()=>[o(" Pending: "+n(d(i.value)),1)]),_:1}),s(e(A),{variant:"secondary",class:"text-[10px] sm:text-xs justify-center sm:justify-start"},{default:a(()=>[o(" Released: "+n(d(f.value)),1)]),_:1})])]),_:1})]),_:1}),s(e(z),null,{default:a(()=>[s(e(W),{class:"pb-2 sm:pb-3"},{default:a(()=>[s(e(q),{class:"text-xs sm:text-sm font-medium flex items-center gap-2"},{default:a(()=>[s(e(Lt),{class:"h-3 w-3 sm:h-4 sm:w-4 text-green-500 flex-shrink-0"}),k[1]||(k[1]=t("span",{class:"truncate"},"Team Affiliate Commission",-1))]),_:1})]),_:1}),s(e(F),null,{default:a(()=>[t("div",Ro,n(d(m.value)),1),t("p",jo,n(l.bonusMatchings.length)+" transaksi ",1),t("div",Mo,[s(e(A),{variant:"outline",class:"text-[10px] sm:text-xs justify-center sm:justify-start"},{default:a(()=>[o(" Pending: "+n(d(g.value)),1)]),_:1}),s(e(A),{variant:"secondary",class:"text-[10px] sm:text-xs justify-center sm:justify-start"},{default:a(()=>[o(" Released: "+n(d(v.value)),1)]),_:1})])]),_:1})]),_:1}),s(e(z),null,{default:a(()=>[s(e(W),{class:"pb-2 sm:pb-3"},{default:a(()=>[s(e(q),{class:"text-xs sm:text-sm font-medium flex items-center gap-2"},{default:a(()=>[s(e(It),{class:"h-3 w-3 sm:h-4 sm:w-4 text-purple-500 flex-shrink-0"}),k[2]||(k[2]=t("span",{class:"truncate"},"Partner Team Commission",-1))]),_:1})]),_:1}),s(e(F),null,{default:a(()=>[t("div",To,n(d(c.value)),1),t("p",Do,n(l.bonusPairings.length)+" transaksi ",1),t("div",Ao,[s(e(A),{variant:"outline",class:"text-[10px] sm:text-xs justify-center sm:justify-start"},{default:a(()=>[o(" Pending: "+n(d(D.value)),1)]),_:1}),s(e(A),{variant:"secondary",class:"text-[10px] sm:text-xs justify-center sm:justify-start"},{default:a(()=>[o(" Released: "+n(d(N.value)),1)]),_:1})])]),_:1})]),_:1}),s(e(z),null,{default:a(()=>[s(e(W),{class:"pb-2 sm:pb-3"},{default:a(()=>[s(e(q),{class:"text-xs sm:text-sm font-medium flex items-center gap-2"},{default:a(()=>[s(e(Ut),{class:"h-3 w-3 sm:h-4 sm:w-4 text-orange-500 flex-shrink-0"}),k[3]||(k[3]=t("span",{class:"truncate"},"Cashback Commission",-1))]),_:1})]),_:1}),s(e(F),null,{default:a(()=>[t("div",Bo,n(d(_.value)),1),t("p",Vo,n(l.bonusCashbacks.length)+" transaksi ",1),t("div",Lo,[s(e(A),{variant:"outline",class:"text-[10px] sm:text-xs justify-center sm:justify-start"},{default:a(()=>[o(" Pending: "+n(d($.value)),1)]),_:1}),s(e(A),{variant:"secondary",class:"text-[10px] sm:text-xs justify-center sm:justify-start"},{default:a(()=>[o(" Released: "+n(d(L.value)),1)]),_:1})])]),_:1})]),_:1}),s(e(z),null,{default:a(()=>[s(e(W),{class:"pb-2 sm:pb-3"},{default:a(()=>[s(e(q),{class:"text-xs sm:text-sm font-medium flex items-center gap-2"},{default:a(()=>[s(e(tt),{class:"h-3 w-3 sm:h-4 sm:w-4 text-yellow-500 flex-shrink-0"}),k[4]||(k[4]=t("span",{class:"truncate"},"Promotions Rewards",-1))]),_:1})]),_:1}),s(e(F),null,{default:a(()=>[t("div",Io,n(d(R.value)),1),t("p",Uo,n(l.bonusRewards.length)+" transaksi ",1),t("div",Eo,[s(e(A),{variant:"outline",class:"text-[10px] sm:text-xs justify-center sm:justify-start"},{default:a(()=>[o(" Pending: "+n(d(Y.value)),1)]),_:1}),s(e(A),{variant:"secondary",class:"text-[10px] sm:text-xs justify-center sm:justify-start"},{default:a(()=>[o(" Released: "+n(d(oe.value)),1)]),_:1})])]),_:1})]),_:1}),s(e(z),null,{default:a(()=>[s(e(W),{class:"pb-2 sm:pb-3"},{default:a(()=>[s(e(q),{class:"text-xs sm:text-sm font-medium flex items-center gap-2"},{default:a(()=>[s(e(Et),{class:"h-3 w-3 sm:h-4 sm:w-4 text-cyan-500 flex-shrink-0"}),k[5]||(k[5]=t("span",{class:"truncate"},"Retail Commission",-1))]),_:1})]),_:1}),s(e(F),null,{default:a(()=>[t("div",No,n(d(X.value)),1),t("p",Oo,n(l.bonusRetails.length)+" transaksi ",1),t("div",zo,[s(e(A),{variant:"outline",class:"text-[10px] sm:text-xs justify-center sm:justify-start"},{default:a(()=>[o(" Pending: "+n(d(V.value)),1)]),_:1}),s(e(A),{variant:"secondary",class:"text-[10px] sm:text-xs justify-center sm:justify-start"},{default:a(()=>[o(" Released: "+n(d(H.value)),1)]),_:1})])]),_:1})]),_:1}),s(e(z),null,{default:a(()=>[s(e(W),{class:"pb-2 sm:pb-3"},{default:a(()=>[s(e(q),{class:"text-xs sm:text-sm font-medium flex items-center gap-2"},{default:a(()=>[s(e(Ge),{class:"h-3 w-3 sm:h-4 sm:w-4 text-amber-500 flex-shrink-0"}),k[6]||(k[6]=t("span",{class:"truncate"},"Lifetime Cash Rewards",-1))]),_:1})]),_:1}),s(e(F),null,{default:a(()=>[t("div",Fo,n(d(M.value)),1),t("p",Ko,n(l.bonusLifetimeCashRewards.length)+" transaksi ",1),t("div",Go,[s(e(A),{variant:"outline",class:"text-[10px] sm:text-xs justify-center sm:justify-start"},{default:a(()=>[o(" Pending: "+n(d(y.value)),1)]),_:1}),s(e(A),{variant:"secondary",class:"text-[10px] sm:text-xs justify-center sm:justify-start"},{default:a(()=>[o(" Released: "+n(d(w.value)),1)]),_:1})])]),_:1})]),_:1}),s(e(z),null,{default:a(()=>[s(e(W),{class:"pb-2 sm:pb-3"},{default:a(()=>[s(e(q),{class:"text-xs sm:text-sm font-medium flex items-center gap-2"},{default:a(()=>[s(e(it),{class:"h-3 w-3 sm:h-4 sm:w-4 text-primary flex-shrink-0"}),k[7]||(k[7]=t("span",{class:"truncate"},"Total Bonus",-1))]),_:1})]),_:1}),s(e(F),null,{default:a(()=>[t("div",Wo,n(d(Z.value)),1),k[8]||(k[8]=t("p",{class:"text-[10px] sm:text-xs text-muted-foreground mt-1"}," Semua jenis bonus ",-1))]),_:1})]),_:1})]),s(e(z),null,{default:a(()=>[s(e(W),{class:"p-2 sm:p-4 md:p-6 pb-2"},{default:a(()=>[s(e(q),{class:"text-xs sm:text-base md:text-lg"},{default:a(()=>[...k[9]||(k[9]=[o("Riwayat Bonus",-1)])]),_:1}),s(e(re),{class:"text-[9px] sm:text-xs md:text-sm"},{default:a(()=>[...k[10]||(k[10]=[o(" Detail transaksi bonus ",-1)])]),_:1})]),_:1}),s(e(F),{class:"p-2 sm:p-4 md:p-6 pt-0"},{default:a(()=>[s(e(Fe),{"default-value":"sponsor",class:"w-full"},{default:a(()=>[t("div",qo,[s(e(Ke),{class:"flex w-max sm:grid sm:w-full sm:grid-cols-7 gap-0.5 sm:gap-1 h-7 sm:h-auto bg-muted/30"},{default:a(()=>[s(e(Q),{value:"sponsor",class:"text-[12px] sm:text-xs md:text-sm whitespace-nowrap px-1.5 sm:px-3 md:px-4 py-1 sm:py-2 h-6 sm:h-auto"},{default:a(()=>[...k[11]||(k[11]=[o(" Referral ",-1)])]),_:1}),s(e(Q),{value:"matching",class:"text-[12px] sm:text-xs md:text-sm whitespace-nowrap px-1.5 sm:px-3 md:px-4 py-1 sm:py-2 h-6 sm:h-auto"},{default:a(()=>[...k[12]||(k[12]=[o(" Team Aff. ",-1)])]),_:1}),s(e(Q),{value:"pairing",class:"text-[12px] sm:text-xs md:text-sm whitespace-nowrap px-1.5 sm:px-3 md:px-4 py-1 sm:py-2 h-6 sm:h-auto"},{default:a(()=>[...k[13]||(k[13]=[o(" Partner ",-1)])]),_:1}),s(e(Q),{value:"cashback",class:"text-[12px] sm:text-xs md:text-sm whitespace-nowrap px-1.5 sm:px-3 md:px-4 py-1 sm:py-2 h-6 sm:h-auto"},{default:a(()=>[...k[14]||(k[14]=[o(" Cashback ",-1)])]),_:1}),s(e(Q),{value:"reward",class:"text-[12px] sm:text-xs md:text-sm whitespace-nowrap px-1.5 sm:px-3 md:px-4 py-1 sm:py-2 h-6 sm:h-auto"},{default:a(()=>[...k[15]||(k[15]=[o(" Rewards ",-1)])]),_:1}),s(e(Q),{value:"retail",class:"text-[12px] sm:text-xs md:text-sm whitespace-nowrap px-1.5 sm:px-3 md:px-4 py-1 sm:py-2 h-6 sm:h-auto"},{default:a(()=>[...k[16]||(k[16]=[o(" Retail ",-1)])]),_:1}),s(e(Q),{value:"lifetime",class:"text-[12px] sm:text-xs md:text-sm whitespace-nowrap px-1.5 sm:px-3 md:px-4 py-1 sm:py-2 h-6 sm:h-auto"},{default:a(()=>[...k[17]||(k[17]=[o(" Lifetime ",-1)])]),_:1})]),_:1})]),s(e(ee),{value:"sponsor",class:"mt-2 sm:mt-4"},{default:a(()=>[l.bonusSponsors.length===0?(r(),p("div",Jo," Belum ada bonus referral incentive ")):(r(),p("div",Ho,[(r(!0),p(G,null,te(l.bonusSponsors,S=>(r(),p("div",{key:S.id,class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-1.5 sm:gap-3 p-2 sm:p-3 md:p-4 border rounded-lg hover:bg-muted/50 transition-colors"},[t("div",Xo,[t("div",Yo,[s(e(A),{variant:S.status===1?"secondary":"outline",class:"text-[8px] sm:text-xs px-1 sm:px-2 py-0"},{default:a(()=>[o(n(S.status===1?"R":"P"),1)]),_:2},1032,["variant"]),t("span",Zo,n(S.description||"Bonus Sponsor"),1)]),t("p",Qo,[S.from_member?(r(),p("span",ei," Dari: "+n(S.from_member.name),1)):C("",!0),t("span",ti,n(u(S.created_at)),1)])]),t("div",si,[t("div",ai,n(d(S.amount)),1)])]))),128))]))]),_:1}),s(e(ee),{value:"matching",class:"mt-2 sm:mt-4"},{default:a(()=>[l.bonusMatchings.length===0?(r(),p("div",li," Belum ada bonus team affiliate commission ")):(r(),p("div",ni,[(r(!0),p(G,null,te(l.bonusMatchings,S=>(r(),p("div",{key:S.id,class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-1.5 sm:gap-3 p-2 sm:p-3 md:p-4 border rounded-lg hover:bg-muted/50 transition-colors"},[t("div",ri,[t("div",oi,[s(e(A),{variant:S.status===1?"secondary":"outline",class:"text-[8px] sm:text-xs px-1 sm:px-2 py-0"},{default:a(()=>[o(n(S.status===1?"R":"P"),1)]),_:2},1032,["variant"]),s(e(A),{variant:"outline",class:"text-[8px] sm:text-xs px-1 sm:px-2 py-0"},{default:a(()=>[o(" L"+n(S.level),1)]),_:2},1024),t("span",ii,n(S.description||"Bonus Matching"),1)]),t("p",di,[S.from_member?(r(),p("span",ui," Dari: "+n(S.from_member.name),1)):C("",!0),t("span",mi,n(u(S.created_at)),1)])]),t("div",ci,[t("div",pi,n(d(S.amount)),1)])]))),128))]))]),_:1}),s(e(ee),{value:"pairing",class:"mt-2 sm:mt-4"},{default:a(()=>[l.bonusPairings.length===0?(r(),p("div",xi," Belum ada bonus partner team commission ")):(r(),p("div",fi,[(r(!0),p(G,null,te(l.bonusPairings,S=>(r(),p("div",{key:S.id,class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 p-3 sm:p-4 border rounded-lg hover:bg-muted/50 transition-colors"},[t("div",vi,[t("div",gi,[s(e(A),{variant:S.status===1?"secondary":"outline",class:"text-xs"},{default:a(()=>[o(n(S.status===1?"Released":"Pending"),1)]),_:2},1032,["variant"]),s(e(A),{variant:"outline",class:"text-xs"},{default:a(()=>[o(n(S.pair)+" Pairs ",1)]),_:2},1024),t("span",bi,n(S.description||"Bonus Pairing"),1)]),t("p",yi,n(u(S.created_at)),1)]),t("div",ki,[t("div",_i,n(d(S.amount)),1)])]))),128))]))]),_:1}),s(e(ee),{value:"cashback",class:"mt-2 sm:mt-4"},{default:a(()=>[l.bonusCashbacks.length===0?(r(),p("div",hi," Belum ada bonus cashback commission ")):(r(),p("div",wi,[(r(!0),p(G,null,te(l.bonusCashbacks,S=>(r(),p("div",{key:S.id,class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-1.5 sm:gap-3 p-2 sm:p-3 md:p-4 border rounded-lg hover:bg-muted/50 transition-colors"},[t("div",$i,[t("div",Ci,[s(e(A),{variant:S.status===1?"secondary":"outline",class:"text-[8px] sm:text-xs px-1 sm:px-2 py-0"},{default:a(()=>[o(n(S.status===1?"R":"P"),1)]),_:2},1032,["variant"]),t("span",Pi,n(S.description||"Bonus Cashback"),1)]),t("p",Si,[k[18]||(k[18]=o('eground mt-0.5"> ',-1)),S.order_id?(r(),p("span",Ri," #"+n(S.order_id),1)):C("",!0),t("span",ji,n(u(S.created_at)),1)])]),t("div",Mi,[t("div",Ti,n(d(S.amount)),1)])]))),128))]))]),_:1}),s(e(ee),{value:"reward",class:"mt-2 sm:mt-4"},{default:a(()=>[l.bonusRewards.length===0?(r(),p("div",Di," Belum ada promotions rewards ")):(r(),p("div",Ai,[(r(!0),p(G,null,te(l.bonusRewards,S=>(r(),p("div",{key:S.id,class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-1.5 sm:gap-3 p-2 sm:p-3 md:p-4 border rounded-lg hover:bg-muted/50 transition-colors"},[t("div",Bi,[t("div",Vi,[s(e(A),{variant:S.status===1?"secondary":"outline",class:"text-[8px] sm:text-xs px-1 sm:px-2 py-0"},{default:a(()=>[o(n(S.status===1?"R":"P"),1)]),_:2},1032,["variant"]),S.reward_type?(r(),P(e(A),{key:0,variant:"outline",class:"text-[8px] sm:text-xs px-1 sm:px-2 py-0"},{default:a(()=>[o(n(S.reward_type),1)]),_:2},1024)):C("",!0),t("span",Li,n(S.description||"Promotions Reward"),1)]),t("p",Ii,n(u(S.created_at)),1)]),t("div",Ui,[t("div",Ei,n(d(S.amount)),1)])]))),128))]))]),_:1}),s(e(ee),{value:"retail",class:"mt-2 sm:mt-4"},{default:a(()=>[l.bonusRetails.length===0?(r(),p("div",Ni," Belum ada bonus retail commission ")):(r(),p("div",Oi,[(r(!0),p(G,null,te(l.bonusRetails,S=>(r(),p("div",{key:S.id,class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-1.5 sm:gap-3 p-2 sm:p-3 md:p-4 border rounded-lg hover:bg-muted/50 transition-colors"},[t("div",zi,[t("div",Fi,[s(e(A),{variant:S.status===1?"secondary":"outline",class:"text-[8px] sm:text-xs px-1 sm:px-2 py-0"},{default:a(()=>[o(n(S.status===1?"R":"P"),1)]),_:2},1032,["variant"]),S.index_value?(r(),P(e(A),{key:0,variant:"outline",class:"text-[8px] sm:text-xs px-1 sm:px-2 py-0"},{default:a(()=>[o(" IDX: "+n(S.index_value),1)]),_:2},1024)):C("",!0),t("span",Ki,n(S.description||"Retail Commission"),1)]),t("p",Gi,[S.from_member?(r(),p("span",Wi," Dari: "+n(S.from_member.name),1)):C("",!0),t("span",qi,n(u(S.created_at)),1)])]),t("div",Ji,[t("div",Hi,n(d(S.amount)),1)])]))),128))]))]),_:1}),s(e(ee),{value:"lifetime",class:"mt-2 sm:mt-4"},{default:a(()=>[l.bonusLifetimeCashRewards.length===0?(r(),p("div",Xi," Belum ada lifetime cash rewards ")):(r(),p("div",Yi,[(r(!0),p(G,null,te(l.bonusLifetimeCashRewards,S=>(r(),p("div",{key:S.id,class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-1.5 sm:gap-3 p-2 sm:p-3 md:p-4 border rounded-lg hover:bg-muted/50 transition-colors"},[t("div",Zi,[t("div",Qi,[s(e(A),{variant:S.status===1?"secondary":"outline",class:"text-[8px] sm:text-xs px-1 sm:px-2 py-0"},{default:a(()=>[o(n(S.status===1?"R":"P"),1)]),_:2},1032,["variant"]),s(e(A),{variant:"outline",class:"text-[8px] sm:text-xs px-1 sm:px-2 py-0"},{default:a(()=>[o(n(S.reward_name),1)]),_:2},1024),t("span",ed,n(S.description||"Lifetime Cash Reward"),1)]),t("p",td,[t("span",sd," Reward: "+n(d(S.reward))+" | BV: "+n(S.bv),1),t("span",ad,n(u(S.created_at)),1)])]),t("div",ld,[t("div",nd,n(d(S.amount)),1)])]))),128))]))]),_:1})]),_:1})]),_:1})]),_:1})]))}}),od={class:"flex items-center justify-between"},id={class:"font-semibold"},dd={class:"flex items-center justify-between"},ud={class:"font-semibold"},md={class:"flex items-center justify-between"},cd={key:0,class:"space-y-2"},pd={class:"flex items-center gap-2"},xd={class:"text-sm font-medium"},fd={class:"text-xs text-gray-500 dark:text-gray-400"},vd={key:1,class:"space-y-2"},gd={class:"flex items-center gap-2"},bd={class:"text-sm font-medium"},yd={class:"text-xs text-gray-500 dark:text-gray-400"},kd=J({__name:"NetworkStatsCard",props:{customer:{}},setup(l){return(x,d)=>(r(),P(e(z),null,{default:a(()=>[s(e(W),null,{default:a(()=>[s(e(q),{class:"flex items-center gap-2"},{default:a(()=>[s(e(dt),{class:"w-5 h-5"}),d[0]||(d[0]=o(" Statistik Jaringan ",-1))]),_:1})]),_:1}),s(e(F),{class:"space-y-3"},{default:a(()=>[t("div",od,[d[1]||(d[1]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Jaringan Kiri",-1)),t("span",id,n(l.customer.network_stats.left_count),1)]),s(e(le)),t("div",dd,[d[2]||(d[2]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Jaringan Kanan",-1)),t("span",ud,n(l.customer.network_stats.right_count),1)]),s(e(le)),t("div",md,[d[3]||(d[3]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Total Downline",-1)),s(e(A),{variant:"secondary"},{default:a(()=>[o(n(l.customer.network_stats.total_downlines),1)]),_:1})]),l.customer.upline||l.customer.sponsor?(r(),p(G,{key:0},[s(e(le),{class:"my-4"}),l.customer.upline?(r(),p("div",cd,[d[4]||(d[4]=t("p",{class:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase"},"Upline",-1)),t("div",pd,[s(e(Oe),{class:"h-8 w-8"},{default:a(()=>[s(e(ze),{src:`https://api.dicebear.com/7.x/initials/svg?seed=${l.customer.upline.name}`},null,8,["src"])]),_:1}),t("div",null,[t("p",xd,n(l.customer.upline.name),1),t("p",fd,n(l.customer.upline.email),1)])])])):C("",!0),l.customer.sponsor?(r(),p("div",vd,[d[5]||(d[5]=t("p",{class:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase"},"Sponsor",-1)),t("div",gd,[s(e(Oe),{class:"h-8 w-8"},{default:a(()=>[s(e(ze),{src:`https://api.dicebear.com/7.x/initials/svg?seed=${l.customer.sponsor.name}`},null,8,["src"])]),_:1}),t("div",null,[t("p",bd,n(l.customer.sponsor.name),1),t("p",yd,n(l.customer.sponsor.email),1)])])])):C("",!0)],64)):C("",!0)]),_:1})]),_:1}))}}),_d={class:"bg-gradient-to-br from-primary/10 via-primary/5 to-background border-b"},hd={class:"container mx-auto px-3 py-6 sm:px-4 sm:py-12 max-w-7xl"},wd={class:"flex items-center justify-between"},$d={class:"hidden md:flex items-center gap-2 px-4 py-2 rounded-lg bg-background/80 backdrop-blur-sm border shadow-sm"},Cd={class:"font-semibold"},Pd={class:"container mx-auto px-3 py-4 sm:px-4 sm:py-8 max-w-7xl"},Sd={class:"grid gap-4 sm:gap-6 lg:grid-cols-3"},Rd={class:"lg:col-span-1 space-y-4 sm:space-y-6"},jd={class:"lg:col-span-2"},Md={class:"rounded-xl border bg-card overflow-hidden"},Td={class:"border-b bg-muted/30"},Dd={class:"overflow-x-auto text-center overflow-y-hidden px-1.5 py-1.5 sm:px-2 sm:py-2 [&::-webkit-scrollbar]:hidden [-ms-overflow-style:none] [scrollbar-width:none]"},Ad={class:"p-3 sm:p-4 md:p-6"},Bd={key:1,class:"text-center py-12"},lu=J({__name:"Index",props:{customer:{},orders:{},walletTransactions:{},activeMembers:{},passiveMembers:{},prospectMembers:{},binaryTree:{},totalDownlines:{},totalLeft:{},totalRight:{},bonusSponsors:{},bonusMatchings:{},bonusPairings:{},bonusCashbacks:{},bonusRewards:{},bonusRetails:{},bonusLifetimeCashRewards:{},addresses:{}},setup(l){const x=l,d=nt(),u=E(()=>Number(x.customer.status)===3),b=E(()=>{if(typeof window>"u")return"profile";const m=d.url;try{return new URL(m,window.location.origin).searchParams.get("tab")||"profile"}catch{return"profile"}});return(m,c)=>(r(),P(pt,null,{default:a(()=>[s(e(Nt),{title:"Profile Saya"}),t("div",_d,[t("div",hd,[t("div",wd,[c[0]||(c[0]=t("div",null,[t("h1",{class:"text-2xl sm:text-3xl md:text-4xl font-bold text-foreground mb-1 sm:mb-2"},"Profile Saya"),t("p",{class:"text-sm sm:text-base md:text-lg text-muted-foreground"}," Kelola informasi profil dan keamanan akun Anda ")],-1)),t("div",$d,[s(e(Se),{class:"w-5 h-5 text-primary"}),t("span",Cd,n(l.customer.name),1)])])])]),t("div",Pd,[t("div",Sd,[t("div",Rd,[s(ds,{customer:l.customer},null,8,["customer"]),u.value?(r(),P(kd,{key:0,customer:l.customer},null,8,["customer"])):C("",!0),s(Fs,{addresses:l.addresses},null,8,["addresses"]),u.value?(r(),P(Js,{key:1,customer:l.customer},null,8,["customer"])):C("",!0),s(Zs,{"created-at":l.customer.created_at},null,8,["created-at"])]),t("div",jd,[t("div",Md,[s(e(Fe),{"default-value":b.value,class:"w-full"},{default:a(()=>[t("div",Td,[t("div",Dd,[s(e(Ke),{class:"inline-flex h-auto w-max bg-transparent gap-1 sm:gap-1.5 p-0"},{default:a(()=>[s(e(Q),{value:"profile",class:"flex-shrink-0 flex flex-col items-center justify-center gap-0.5 py-1 px-1.5 sm:py-1.5 sm:px-2 w-[38px] sm:w-[55px] md:w-[70px] data-[state=active]:bg-background data-[state=active]:shadow-sm rounded-md transition-all"},{default:a(()=>[s(e(Se),{class:"w-3 h-3 sm:w-3.5 sm:h-3.5 md:w-4 md:h-4"}),c[1]||(c[1]=t("span",{class:"text-[8px] sm:text-[9px] md:text-[10px] font-medium text-center leading-tight"},"Info",-1))]),_:1}),s(e(Q),{value:"orders",class:"flex-shrink-0 flex flex-col items-center justify-center gap-0.5 py-1 px-1.5 sm:py-1.5 sm:px-2 w-[38px] sm:w-[55px] md:w-[70px] data-[state=active]:bg-background data-[state=active]:shadow-sm rounded-md transition-all"},{default:a(()=>[s(e(ge),{class:"w-3 h-3 sm:w-3.5 sm:h-3.5 md:w-4 md:h-4"}),c[2]||(c[2]=t("span",{class:"text-[8px] sm:text-[9px] md:text-[10px] font-medium text-center leading-tight"},"Order",-1))]),_:1}),u.value?(r(),P(e(Q),{key:0,value:"network",class:"flex-shrink-0 flex flex-col items-center justify-center gap-0.5 py-1 px-1.5 sm:py-1.5 sm:px-2 w-[38px] sm:w-[55px] md:w-[70px] data-[state=active]:bg-background data-[state=active]:shadow-sm rounded-md transition-all"},{default:a(()=>[s(e(dt),{class:"w-3 h-3 sm:w-3.5 sm:h-3.5 md:w-4 md:h-4"}),c[3]||(c[3]=t("span",{class:"text-[8px] sm:text-[9px] md:text-[10px] font-medium text-center leading-tight"},"Mitra",-1))]),_:1})):C("",!0),u.value?(r(),P(e(Q),{key:1,value:"binary",class:"flex-shrink-0 flex flex-col items-center justify-center gap-0.5 py-1 px-1.5 sm:py-1.5 sm:px-2 w-[38px] sm:w-[55px] md:w-[70px] data-[state=active]:bg-background data-[state=active]:shadow-sm rounded-md transition-all"},{default:a(()=>[s(e(ve),{class:"w-3 h-3 sm:w-3.5 sm:h-3.5 md:w-4 md:h-4"}),c[4]||(c[4]=t("span",{class:"text-[8px] sm:text-[9px] md:text-[10px] font-medium text-center leading-tight"},"Network",-1))]),_:1})):C("",!0),u.value?(r(),P(e(Q),{key:2,value:"bonus",class:"flex-shrink-0 flex flex-col items-center justify-center gap-0.5 py-1 px-1.5 sm:py-1.5 sm:px-2 w-[38px] sm:w-[55px] md:w-[70px] data-[state=active]:bg-background data-[state=active]:shadow-sm rounded-md transition-all"},{default:a(()=>[s(e(it),{class:"w-3 h-3 sm:w-3.5 sm:h-3.5 md:w-4 md:h-4"}),c[5]||(c[5]=t("span",{class:"text-[8px] sm:text-[9px] md:text-[10px] font-medium text-center leading-tight"},"Bonus",-1))]),_:1})):C("",!0),s(e(Q),{value:"wallet",class:"flex-shrink-0 flex flex-col items-center justify-center gap-0.5 py-1 px-1.5 sm:py-1.5 sm:px-2 w-[38px] sm:w-[55px] md:w-[70px] data-[state=active]:bg-background data-[state=active]:shadow-sm rounded-md transition-all"},{default:a(()=>[s(e(rt),{class:"w-3 h-3 sm:w-3.5 sm:h-3.5 md:w-4 md:h-4"}),c[6]||(c[6]=t("span",{class:"text-[8px] sm:text-[9px] md:text-[10px] font-medium text-center leading-tight"},"Wallet",-1))]),_:1}),s(e(Q),{value:"security",class:"flex-shrink-0 flex flex-col items-center justify-center gap-0.5 py-1 px-1.5 sm:py-1.5 sm:px-2 w-[38px] sm:w-[55px] md:w-[70px] data-[state=active]:bg-background data-[state=active]:shadow-sm rounded-md transition-all"},{default:a(()=>[s(e(Ne),{class:"w-3 h-3 sm:w-3.5 sm:h-3.5 md:w-4 md:h-4"}),c[7]||(c[7]=t("span",{class:"text-[8px] sm:text-[9px] md:text-[10px] font-medium text-center leading-tight"},"Lock",-1))]),_:1}),s(e(Q),{value:"danger",class:"flex-shrink-0 flex flex-col items-center justify-center gap-0.5 py-1 px-1.5 sm:py-1.5 sm:px-2 w-[38px] sm:w-[55px] md:w-[70px] data-[state=active]:bg-background data-[state=active]:shadow-sm rounded-md transition-all"},{default:a(()=>[s(e(pe),{class:"w-3 h-3 sm:w-3.5 sm:h-3.5 md:w-4 md:h-4"}),c[8]||(c[8]=t("span",{class:"text-[8px] sm:text-[9px] md:text-[10px] font-medium text-center leading-tight"},"Del",-1))]),_:1})]),_:1})])]),t("div",Ad,[s(e(ee),{value:"profile",class:"mt-0"},{default:a(()=>[s(ma,{customer:l.customer},null,8,["customer"])]),_:1}),s(e(ee),{value:"orders",class:"mt-0"},{default:a(()=>[s(El,{orders:l.orders},null,8,["orders"])]),_:1}),u.value?(r(),P(e(ee),{key:0,value:"network",class:"mt-0"},{default:a(()=>[s(Dr,{"active-members":l.activeMembers,"passive-members":l.passiveMembers,"prospect-members":l.prospectMembers},null,8,["active-members","passive-members","prospect-members"])]),_:1})):C("",!0),u.value?(r(),P(e(ee),{key:1,value:"binary",class:"mt-0"},{default:a(()=>[l.binaryTree?(r(),P(ho,{key:0,"binary-tree":l.binaryTree,"total-downlines":l.totalDownlines,"total-left":l.totalLeft,"total-right":l.totalRight,"passive-members":l.passiveMembers},null,8,["binary-tree","total-downlines","total-left","total-right","passive-members"])):(r(),p("div",Bd,[s(e(ve),{class:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),c[9]||(c[9]=t("h3",{class:"text-lg font-semibold mb-2"},"Belum Ada Jaringan Binary",-1)),c[10]||(c[10]=t("p",{class:"text-muted-foreground"}," Anda belum memiliki posisi dalam jaringan binary tree MLM. ",-1))]))]),_:1})):C("",!0),u.value?(r(),P(e(ee),{key:2,value:"bonus",class:"mt-0"},{default:a(()=>[s(rd,{"bonus-sponsors":l.bonusSponsors,"bonus-matchings":l.bonusMatchings,"bonus-pairings":l.bonusPairings,"bonus-cashbacks":l.bonusCashbacks,"bonus-rewards":l.bonusRewards,"bonus-retails":l.bonusRetails,"bonus-lifetime-cash-rewards":l.bonusLifetimeCashRewards},null,8,["bonus-sponsors","bonus-matchings","bonus-pairings","bonus-cashbacks","bonus-rewards","bonus-retails","bonus-lifetime-cash-rewards"])]),_:1})):C("",!0),s(e(ee),{value:"wallet",class:"mt-0"},{default:a(()=>[s(En,{customer:l.customer,transactions:l.walletTransactions},null,8,["customer","transactions"])]),_:1}),s(e(ee),{value:"security",class:"mt-0"},{default:a(()=>[s(Hn)]),_:1}),s(e(ee),{value:"danger",class:"mt-0"},{default:a(()=>[s(Qn)]),_:1})])]),_:1},8,["default-value"])])])])])]),_:1}))}});export{lu as default};
