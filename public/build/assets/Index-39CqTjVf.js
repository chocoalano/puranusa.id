import{_ as G}from"./ConfirmDialog.vue_vue_type_script_setup_true_lang-DIFD_3jQ.js";import{_ as Q}from"./index-C1dtYa4S.js";import{_ as v}from"./index-B-X7eMkz.js";import{_ as b,a as y}from"./CardContent.vue_vue_type_script_setup_true_lang-DVNpmg3O.js";import{_ as k}from"./CardHeader.vue_vue_type_script_setup_true_lang-Dz8oRHi7.js";import{_ as C}from"./CardTitle.vue_vue_type_script_setup_true_lang-CQceWl5u.js";import{_ as X}from"./Input.vue_vue_type_script_setup_true_lang-D3BHBQPI.js";import{_ as Y,a as Z,b as J,c as W,d as T}from"./SelectValue.vue_vue_type_script_setup_true_lang-CJUD8UXx.js";import{_ as O,a as ee,b as j,c as te,d as ae,e as N}from"./TableHeader.vue_vue_type_script_setup_true_lang-Bv779NdJ.js";import{_ as se}from"./AppLayout.vue_vue_type_script_setup_true_lang-DBUncxF3.js";import{d as re,r as $,E as z,q as le,c as _,g as o,w as r,b as t,e as i,u as e,a0 as ne,s as c,ar as B,a3 as ie,Y as de,K as m,cx as oe,cC as ue,aL as ce,Z as me,v as S,F as D,x as R,t as fe,y as K,n,a4 as ve,a5 as ge,a6 as we,a7 as xe,j as V,Q as _e,a8 as pe,a9 as he,aa as be,cs as ye,z as ke,A as Ce,B as $e}from"./vendor-f9ZWdYDq.js";import"./AlertDialogTitle.vue_vue_type_script_setup_true_lang-Dpt0zlvo.js";import"./index-DaR_mHDg.js";import"./AvatarFallback.vue_vue_type_script_setup_true_lang-DL_31zq_.js";import"./AvatarImage.vue_vue_type_script_setup_true_lang-DACiz-14.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-DGuexjfe.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CHvPJZAi.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-kz_KXNX2.js";const Se={class:"flex h-full flex-1 flex-col gap-6 p-6"},De={class:"flex items-center justify-between"},Re={class:"text-3xl font-bold tracking-tight flex items-center gap-2"},Ve={class:"grid gap-4 md:grid-cols-4"},Ie={class:"text-2xl font-bold text-green-600"},Te={class:"text-2xl font-bold text-blue-600"},je={class:"text-2xl font-bold text-orange-600"},Pe={class:"text-2xl font-bold text-gray-600"},Ae={class:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between"},Fe={class:"flex flex-1 items-center gap-4"},Me={class:"relative flex-1 md:max-w-sm"},Ne={class:"rounded-md border"},ze={class:"flex items-center justify-between"},Be={class:"text-sm text-muted-foreground"},Ke={class:"flex items-center gap-2"},Le={class:"text-sm"},nt=re({__name:"Index",props:{rewards:{},statistics:{},filters:{}},setup(l){const g=l,L=[{title:"Pengaturan",href:"#"},{title:"Promotions Rewards",href:"/admin/settings/promotions-rewards"}],p=$(g.filters.search||""),w=$(g.filters.status||"all"),f=$([{id:g.filters.sort_by,desc:g.filters.sort_order==="desc"}]),x=$({open:!1,reward:null}),P=s=>new Date(s).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric"}),U=s=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(s),E=s=>{const a=new Date,d=new Date(s.start),u=new Date(s.end);return s.status===0?{text:"Inactive",variant:"secondary"}:a<d?{text:"Scheduled",variant:"outline"}:a>u?{text:"Expired",variant:"destructive"}:{text:"Active",variant:"default"}},H=s=>{x.value={open:!0,reward:s}},q=()=>{x.value.reward&&V.delete(`/admin/settings/promotions-rewards/${x.value.reward.id}`,{preserveScroll:!0,onSuccess:()=>{x.value={open:!1,reward:null},_e.success("Promotions Reward berhasil dihapus")}})},A=()=>{V.get("/admin/settings/promotions-rewards",{search:p.value||void 0,status:w.value!=="all"?w.value:void 0,sort_by:f.value[0]?.id||"created_at",sort_order:f.value[0]?.desc?"desc":"asc"},{preserveState:!0,replace:!0})};z([w,f],A,{deep:!0});let F;z(p,()=>{clearTimeout(F),F=setTimeout(A,300)});const M=[{id:"index",header:()=>n("div",{class:"w-12"},"No"),cell:({row:s})=>{const a=s.index+1+(g.rewards.current_page-1)*g.rewards.per_page;return n("div",{class:"font-medium"},a)}},{accessorKey:"name",header:({column:s})=>n(v,{variant:"ghost",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),class:"-ml-4"},()=>["Nama Reward",n(s.getIsSorted()==="asc"?pe:s.getIsSorted()==="desc"?he:be,{class:"ml-2 h-4 w-4"})]),cell:({row:s})=>n("div",[n("div",{class:"font-medium"},s.original.name),s.original.code&&n("div",{class:"text-xs text-muted-foreground font-mono"},s.original.code)])},{accessorKey:"reward",header:()=>"Reward",cell:({row:s})=>n("div",{class:"text-sm"},s.original.reward||"-")},{accessorKey:"value",header:()=>"Value",cell:({row:s})=>n("div",{class:"font-medium"},U(s.original.value))},{accessorKey:"bv",header:()=>"BV",cell:({row:s})=>n("div",Number(s.original.bv).toFixed(2))},{id:"periode",header:()=>"Periode",cell:({row:s})=>n("div",{class:"text-sm"},[n("div",P(s.original.start)),n("div",{class:"text-muted-foreground"},P(s.original.end))])},{id:"status",header:()=>"Status",cell:({row:s})=>{const a=E(s.original);return n(Q,{variant:a.variant},()=>a.text)}},{id:"actions",header:()=>n("div",{class:"text-right"},"Aksi"),cell:({row:s})=>{const a=s.original;return n("div",{class:"flex justify-end gap-2"},[n(v,{variant:"outline",size:"sm",onClick:()=>V.visit(`/admin/settings/promotions-rewards/${a.id}/edit`)},()=>[n(ye,{class:"h-4 w-4"})]),n(v,{variant:"outline",size:"sm",class:"text-destructive hover:bg-destructive hover:text-destructive-foreground",onClick:()=>H(a)},()=>[n(ke,{class:"h-4 w-4"})])])}}],I=le({data:g.rewards.data,columns:M,getCoreRowModel:$e(),getSortedRowModel:Ce(),manualSorting:!0,state:{get sorting(){return f.value}},onSortingChange:s=>{f.value=typeof s=="function"?s(f.value):s}}),h=s=>{V.get("/admin/settings/promotions-rewards",{page:s,search:p.value||void 0,status:w.value!=="all"?w.value:void 0,sort_by:f.value[0]?.id||"created_at",sort_order:f.value[0]?.desc?"desc":"asc"},{preserveState:!0,replace:!0})};return(s,a)=>(o(),_(se,{breadcrumbs:L},{default:r(()=>[t(e(ne),{title:"Promotions Rewards"}),i("div",Se,[i("div",De,[i("div",null,[i("h1",Re,[t(e(B),{class:"h-8 w-8"}),a[7]||(a[7]=c(" Promotions Rewards ",-1))]),a[8]||(a[8]=i("p",{class:"text-muted-foreground mt-1"}," Kelola reward dengan periode (ada tanggal mulai & berakhir) ",-1))]),t(e(ie),{href:"/admin/settings/promotions-rewards/create"},{default:r(()=>[t(e(v),null,{default:r(()=>[t(e(de),{class:"h-4 w-4 mr-2"}),a[9]||(a[9]=c(" Tambah Reward ",-1))]),_:1})]),_:1})]),i("div",Ve,[t(e(b),null,{default:r(()=>[t(e(k),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:r(()=>[t(e(C),{class:"text-sm font-medium"},{default:r(()=>[...a[10]||(a[10]=[c("Active",-1)])]),_:1}),t(e(B),{class:"h-4 w-4 text-green-500"})]),_:1}),t(e(y),null,{default:r(()=>[i("div",Ie,m(l.statistics.total_active),1)]),_:1})]),_:1}),t(e(b),null,{default:r(()=>[t(e(k),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:r(()=>[t(e(C),{class:"text-sm font-medium"},{default:r(()=>[...a[11]||(a[11]=[c("Scheduled",-1)])]),_:1}),t(e(oe),{class:"h-4 w-4 text-blue-500"})]),_:1}),t(e(y),null,{default:r(()=>[i("div",Te,m(l.statistics.total_scheduled),1)]),_:1})]),_:1}),t(e(b),null,{default:r(()=>[t(e(k),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:r(()=>[t(e(C),{class:"text-sm font-medium"},{default:r(()=>[...a[12]||(a[12]=[c("Expired",-1)])]),_:1}),t(e(ue),{class:"h-4 w-4 text-orange-500"})]),_:1}),t(e(y),null,{default:r(()=>[i("div",je,m(l.statistics.total_expired),1)]),_:1})]),_:1}),t(e(b),null,{default:r(()=>[t(e(k),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:r(()=>[t(e(C),{class:"text-sm font-medium"},{default:r(()=>[...a[13]||(a[13]=[c("Inactive",-1)])]),_:1}),t(e(ce),{class:"h-4 w-4 text-gray-500"})]),_:1}),t(e(y),null,{default:r(()=>[i("div",Pe,m(l.statistics.total_inactive),1)]),_:1})]),_:1})]),i("div",Ae,[i("div",Fe,[i("div",Me,[t(e(me),{class:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),t(e(X),{modelValue:p.value,"onUpdate:modelValue":a[0]||(a[0]=d=>p.value=d),placeholder:"Cari nama atau kode...",class:"pl-9"},null,8,["modelValue"])]),t(e(Y),{modelValue:w.value,"onUpdate:modelValue":a[1]||(a[1]=d=>w.value=d)},{default:r(()=>[t(e(Z),{class:"w-40"},{default:r(()=>[t(e(J),{placeholder:"Semua Status"})]),_:1}),t(e(W),null,{default:r(()=>[t(e(T),{value:"all"},{default:r(()=>[...a[14]||(a[14]=[c("Semua Status",-1)])]),_:1}),t(e(T),{value:"1"},{default:r(()=>[...a[15]||(a[15]=[c("Aktif",-1)])]),_:1}),t(e(T),{value:"0"},{default:r(()=>[...a[16]||(a[16]=[c("Tidak Aktif",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),i("div",Ne,[t(e(O),null,{default:r(()=>[t(e(ee),null,{default:r(()=>[(o(!0),S(D,null,R(e(I).getHeaderGroups(),d=>(o(),_(e(j),{key:d.id},{default:r(()=>[(o(!0),S(D,null,R(d.headers,u=>(o(),_(e(te),{key:u.id},{default:r(()=>[u.isPlaceholder?fe("",!0):(o(),_(e(K),{key:0,render:u.column.columnDef.header,props:u.getContext()},null,8,["render","props"]))]),_:2},1024))),128))]),_:2},1024))),128))]),_:1}),t(e(ae),null,{default:r(()=>[e(I).getRowModel().rows?.length?(o(!0),S(D,{key:0},R(e(I).getRowModel().rows,d=>(o(),_(e(j),{key:d.id},{default:r(()=>[(o(!0),S(D,null,R(d.getVisibleCells(),u=>(o(),_(e(N),{key:u.id},{default:r(()=>[t(e(K),{render:u.column.columnDef.cell,props:u.getContext()},null,8,["render","props"])]),_:2},1024))),128))]),_:2},1024))),128)):(o(),_(e(j),{key:1},{default:r(()=>[t(e(N),{colspan:M.length,class:"h-24 text-center"},{default:r(()=>[...a[17]||(a[17]=[c(" Tidak ada data. ",-1)])]),_:1},8,["colspan"])]),_:1}))]),_:1})]),_:1})]),i("div",ze,[i("div",Be," Menampilkan "+m((l.rewards.current_page-1)*l.rewards.per_page+1)+" - "+m(Math.min(l.rewards.current_page*l.rewards.per_page,l.rewards.total))+" dari "+m(l.rewards.total)+" data ",1),i("div",Ke,[t(e(v),{variant:"outline",size:"sm",disabled:l.rewards.current_page===1,onClick:a[2]||(a[2]=d=>h(1))},{default:r(()=>[t(e(ve),{class:"h-4 w-4"})]),_:1},8,["disabled"]),t(e(v),{variant:"outline",size:"sm",disabled:l.rewards.current_page===1,onClick:a[3]||(a[3]=d=>h(l.rewards.current_page-1))},{default:r(()=>[t(e(ge),{class:"h-4 w-4"})]),_:1},8,["disabled"]),i("span",Le," Halaman "+m(l.rewards.current_page)+" dari "+m(l.rewards.last_page),1),t(e(v),{variant:"outline",size:"sm",disabled:l.rewards.current_page===l.rewards.last_page,onClick:a[4]||(a[4]=d=>h(l.rewards.current_page+1))},{default:r(()=>[t(e(we),{class:"h-4 w-4"})]),_:1},8,["disabled"]),t(e(v),{variant:"outline",size:"sm",disabled:l.rewards.current_page===l.rewards.last_page,onClick:a[5]||(a[5]=d=>h(l.rewards.last_page))},{default:r(()=>[t(e(xe),{class:"h-4 w-4"})]),_:1},8,["disabled"])])])]),t(G,{open:x.value.open,title:"Hapus Reward",description:`Apakah Anda yakin ingin menghapus reward '${x.value.reward?.name}'? Tindakan ini tidak dapat dibatalkan.`,"confirm-text":"Hapus","onUpdate:open":a[6]||(a[6]=d=>x.value.open=d),onConfirm:q},null,8,["open","description"])]),_:1}))}});export{nt as default};
