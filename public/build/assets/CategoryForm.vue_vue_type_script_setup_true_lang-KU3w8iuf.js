import{d as F,aa as x,ab as G,r as b,v as d,g as u,ac as L,b as a,e as r,u as t,w as s,s as i,t as p,J as v,c as y,X as j,ad as z,ae as q,F as A,x as R,af as T,ag as E,V as J}from"./vendor-DTOvI-mL.js";import{_ as k}from"./Input.vue_vue_type_script_setup_true_lang-sYWCYV49.js";import{_ as m}from"./Label.vue_vue_type_script_setup_true_lang-Bkvht4jR.js";import{_ as W}from"./Textarea.vue_vue_type_script_setup_true_lang-Dt0uRcWG.js";import{_ as V}from"./index-D22QrCMB.js";import{_ as $,a as w}from"./CardContent.vue_vue_type_script_setup_true_lang-Bj2sOBs1.js";import{_ as C}from"./CardDescription.vue_vue_type_script_setup_true_lang-Dh4Au0Nv.js";import{_ as U}from"./CardHeader.vue_vue_type_script_setup_true_lang-Dnz_aDai.js";import{_ as I}from"./CardTitle.vue_vue_type_script_setup_true_lang-DNuWsNXR.js";import{_ as O,a as X,b as H,c as Q,d as D}from"./SelectValue.vue_vue_type_script_setup_true_lang-CBkKfeqw.js";const Y={class:"space-y-2"},Z={key:0,class:"text-sm text-destructive"},h={class:"space-y-2"},ee={key:0,class:"text-sm text-destructive"},te={class:"space-y-2"},ae={class:"space-y-2"},se={class:"space-y-3"},le={key:0,class:"relative inline-block"},re=["src"],oe={key:0,class:"text-sm text-destructive"},ie={class:"space-y-2"},ne={class:"space-y-2"},ue={class:"flex items-center gap-2"},de={class:"flex justify-end gap-4"},ye=F({__name:"CategoryForm",props:x({parentCategories:{},errors:{},processing:{type:Boolean},existingImage:{}},{formData:{required:!0},formDataModifiers:{}}),emits:x(["submit"],["update:formData"]),setup(n,{emit:M}){const B=n,P=M,o=G(n,"formData"),f=b(B.existingImage||null),g=b(null),K=()=>{o.value.slug=o.value.name.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"")},N=c=>{const l=c.target.files?.[0];if(l){if(!l.type.startsWith("image/")){alert("File harus berupa gambar");return}if(l.size>2*1024*1024){alert("Ukuran file maksimal 2MB");return}o.value.image=l,f.value=URL.createObjectURL(l)}},S=()=>{o.value.image=null,f.value=null,g.value&&(g.value.value="")},_=()=>{g.value?.click()};return(c,e)=>(u(),d("form",{onSubmit:e[6]||(e[6]=L(l=>P("submit"),["prevent"])),class:"space-y-6"},[a(t($),null,{default:s(()=>[a(t(U),null,{default:s(()=>[a(t(I),null,{default:s(()=>[...e[7]||(e[7]=[i("Informasi Dasar",-1)])]),_:1}),a(t(C),null,{default:s(()=>[...e[8]||(e[8]=[i("Informasi utama kategori produk",-1)])]),_:1})]),_:1}),a(t(w),{class:"space-y-4"},{default:s(()=>[r("div",Y,[a(t(m),{for:"name"},{default:s(()=>[...e[9]||(e[9]=[i("Nama Kategori *",-1)])]),_:1}),a(t(k),{id:"name",modelValue:o.value.name,"onUpdate:modelValue":e[0]||(e[0]=l=>o.value.name=l),placeholder:"Masukkan nama kategori",onInput:K,required:""},null,8,["modelValue"]),n.errors?.name?(u(),d("p",Z,v(n.errors.name),1)):p("",!0)]),r("div",h,[a(t(m),{for:"slug"},{default:s(()=>[...e[10]||(e[10]=[i("Slug *",-1)])]),_:1}),a(t(k),{id:"slug",modelValue:o.value.slug,"onUpdate:modelValue":e[1]||(e[1]=l=>o.value.slug=l),placeholder:"nama-kategori",required:""},null,8,["modelValue"]),e[11]||(e[11]=r("p",{class:"text-sm text-muted-foreground"}," URL-friendly identifier (contoh: fashion-pria) ",-1)),n.errors?.slug?(u(),d("p",ee,v(n.errors.slug),1)):p("",!0)]),r("div",te,[a(t(m),{for:"description"},{default:s(()=>[...e[12]||(e[12]=[i("Deskripsi",-1)])]),_:1}),a(t(W),{id:"description",modelValue:o.value.description,"onUpdate:modelValue":e[2]||(e[2]=l=>o.value.description=l),placeholder:"Deskripsi kategori (opsional)",rows:"3"},null,8,["modelValue"])]),r("div",ae,[a(t(m),null,{default:s(()=>[...e[13]||(e[13]=[i("Gambar Kategori",-1)])]),_:1}),r("div",se,[f.value?(u(),d("div",le,[r("img",{src:f.value,alt:"Preview",class:"w-32 h-32 object-cover rounded-lg border"},null,8,re),a(t(V),{type:"button",variant:"destructive",size:"icon",class:"absolute -top-2 -right-2 h-6 w-6",onClick:S},{default:s(()=>[a(t(j),{class:"h-3 w-3"})]),_:1})])):p("",!0),f.value?p("",!0):(u(),d("div",{key:1,class:"border-2 border-dashed border-muted-foreground/25 rounded-lg p-6 text-center cursor-pointer hover:border-muted-foreground/50 transition-colors",onClick:_},[a(t(z),{class:"h-10 w-10 mx-auto text-muted-foreground mb-2"}),e[14]||(e[14]=r("p",{class:"text-sm text-muted-foreground"}," Klik untuk upload gambar ",-1)),e[15]||(e[15]=r("p",{class:"text-xs text-muted-foreground mt-1"}," PNG, JPG, WEBP (max. 2MB) ",-1))])),r("input",{ref_key:"fileInput",ref:g,type:"file",accept:"image/*",class:"hidden",onChange:N},null,544),f.value?(u(),y(t(V),{key:2,type:"button",variant:"outline",size:"sm",onClick:_},{default:s(()=>[a(t(q),{class:"h-4 w-4 mr-2"}),e[16]||(e[16]=i(" Ganti Gambar ",-1))]),_:1})):p("",!0)]),n.errors?.image?(u(),d("p",oe,v(n.errors.image),1)):p("",!0)])]),_:1})]),_:1}),a(t($),null,{default:s(()=>[a(t(U),null,{default:s(()=>[a(t(I),null,{default:s(()=>[...e[17]||(e[17]=[i("Pengaturan",-1)])]),_:1}),a(t(C),null,{default:s(()=>[...e[18]||(e[18]=[i("Atur hierarki dan status kategori",-1)])]),_:1})]),_:1}),a(t(w),{class:"space-y-4"},{default:s(()=>[r("div",ie,[a(t(m),{for:"parent_id"},{default:s(()=>[...e[19]||(e[19]=[i("Kategori Parent",-1)])]),_:1}),a(t(O),{modelValue:o.value.parent_id,"onUpdate:modelValue":e[3]||(e[3]=l=>o.value.parent_id=l)},{default:s(()=>[a(t(X),null,{default:s(()=>[a(t(H),{placeholder:"Pilih kategori parent (opsional)"})]),_:1}),a(t(Q),null,{default:s(()=>[a(t(D),{value:null},{default:s(()=>[...e[20]||(e[20]=[i("Tidak ada parent",-1)])]),_:1}),(u(!0),d(A,null,R(n.parentCategories,l=>(u(),y(t(D),{key:l.id,value:l.id},{default:s(()=>[i(v(l.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),e[21]||(e[21]=r("p",{class:"text-sm text-muted-foreground"}," Kosongkan jika ini adalah kategori utama ",-1))]),r("div",ne,[a(t(m),{for:"sort_order"},{default:s(()=>[...e[22]||(e[22]=[i("Urutan Tampilan",-1)])]),_:1}),a(t(k),{id:"sort_order",modelValue:o.value.sort_order,"onUpdate:modelValue":e[4]||(e[4]=l=>o.value.sort_order=l),modelModifiers:{number:!0},type:"number",min:"0"},null,8,["modelValue"]),e[23]||(e[23]=r("p",{class:"text-sm text-muted-foreground"}," Angka lebih kecil akan ditampilkan lebih dulu ",-1))]),r("div",ue,[T(r("input",{id:"is_active","onUpdate:modelValue":e[5]||(e[5]=l=>o.value.is_active=l),type:"checkbox",class:"rounded"},null,512),[[E,o.value.is_active]]),a(t(m),{for:"is_active"},{default:s(()=>[...e[24]||(e[24]=[i("Kategori Aktif",-1)])]),_:1})])]),_:1})]),_:1}),r("div",de,[J(c.$slots,"actions",{processing:n.processing})])],32))}});export{ye as _};
