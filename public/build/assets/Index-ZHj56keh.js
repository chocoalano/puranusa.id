import{z as N,_ as ne,A as re}from"./AppLayout.vue_vue_type_script_setup_true_lang-DBUncxF3.js";import{a as P,_ as R}from"./CardContent.vue_vue_type_script_setup_true_lang-DVNpmg3O.js";import{_ as K}from"./CardHeader.vue_vue_type_script_setup_true_lang-Dz8oRHi7.js";import{_ as T}from"./CardTitle.vue_vue_type_script_setup_true_lang-CQceWl5u.js";import{d as I,v as w,g as m,b as t,w as s,u as e,s as u,a2 as ie,e as d,K as U,aj as ue,cy as oe,ab as E,ac as H,c as _,ad as de,r as y,q as me,E as L,j,a0 as fe,t as O,Z as pe,a9 as ce,F as S,x as C,y as Z,n as f,am as ge,cs as ve,aF as _e,A as xe,B as be}from"./vendor-f9ZWdYDq.js";import{_ as M,v as B}from"./index-B-X7eMkz.js";import{_ as ye,b as ke,c as $e,d as we,a as he}from"./DialogTitle.vue_vue_type_script_setup_true_lang-DWSAKSDo.js";import{_ as Ve}from"./DialogFooter.vue_vue_type_script_setup_true_lang-CVqZmyXj.js";import{_ as Q}from"./Input.vue_vue_type_script_setup_true_lang-D3BHBQPI.js";import{_ as G}from"./Label.vue_vue_type_script_setup_true_lang-PRHbwN2o.js";import{_ as W,a as X,b as Y,c as ee,d as x}from"./SelectValue.vue_vue_type_script_setup_true_lang-CJUD8UXx.js";import{_ as Se}from"./Pagination.vue_vue_type_script_setup_true_lang-_SaNW8FU.js";import{_ as Ce}from"./index-C1dtYa4S.js";import{_ as Ue,a as Me,b as De}from"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-DGuexjfe.js";import{_ as Ne}from"./DropdownMenuCheckboxItem.vue_vue_type_script_setup_true_lang-BEUAFQFx.js";import{_ as Fe,a as Pe,b as A,c as Re,d as Ke,e as J}from"./TableHeader.vue_vue_type_script_setup_true_lang-Bv779NdJ.js";import"./index-DaR_mHDg.js";import"./AvatarFallback.vue_vue_type_script_setup_true_lang-DL_31zq_.js";import"./AvatarImage.vue_vue_type_script_setup_true_lang-DACiz-14.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CHvPJZAi.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-kz_KXNX2.js";const Te={class:"grid gap-4 md:grid-cols-3"},je={class:"text-2xl font-bold"},Be={class:"text-2xl font-bold"},Ae={class:"text-2xl font-bold"},Ie=I({__name:"ShipmentStatistics",props:{statistics:{}},setup(r){return(c,o)=>(m(),w("div",Te,[t(e(R),null,{default:s(()=>[t(e(K),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[t(e(T),{class:"text-sm font-medium"},{default:s(()=>[...o[0]||(o[0]=[u("Pending",-1)])]),_:1}),t(e(ie),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(e(P),null,{default:s(()=>[d("div",je,U(r.statistics.total_pending),1),o[1]||(o[1]=d("p",{class:"text-xs text-muted-foreground"},"Menunggu pengiriman",-1))]),_:1})]),_:1}),t(e(R),null,{default:s(()=>[t(e(K),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[t(e(T),{class:"text-sm font-medium"},{default:s(()=>[...o[2]||(o[2]=[u("Dikirim",-1)])]),_:1}),t(e(ue),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(e(P),null,{default:s(()=>[d("div",Be,U(r.statistics.total_shipped),1),o[3]||(o[3]=d("p",{class:"text-xs text-muted-foreground"},"Dalam pengiriman",-1))]),_:1})]),_:1}),t(e(R),null,{default:s(()=>[t(e(K),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[t(e(T),{class:"text-sm font-medium"},{default:s(()=>[...o[4]||(o[4]=[u("Terkirim",-1)])]),_:1}),t(e(oe),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(e(P),null,{default:s(()=>[d("div",Ae,U(r.statistics.total_delivered),1),o[5]||(o[5]=d("p",{class:"text-xs text-muted-foreground"},"Sudah sampai",-1))]),_:1})]),_:1})]))}}),qe={class:"space-y-2"},ze={class:"space-y-2"},Ee=I({__name:"UpdateShipmentDialog",props:E({open:{type:Boolean},shipment:{},processing:{type:Boolean}},{trackingNumber:{required:!0},trackingNumberModifiers:{},status:{required:!0},statusModifiers:{}}),emits:E(["update:open","submit"],["update:trackingNumber","update:status"]),setup(r,{emit:c}){const o=c,b=H(r,"trackingNumber"),p=H(r,"status");return(k,n)=>(m(),_(e(ye),{open:r.open,"onUpdate:open":n[4]||(n[4]=g=>o("update:open",g))},{default:s(()=>[t(e(he),null,{default:s(()=>[t(e(ke),null,{default:s(()=>[t(e($e),null,{default:s(()=>[...n[5]||(n[5]=[u("Update Pengiriman",-1)])]),_:1}),t(e(we),null,{default:s(()=>[...n[6]||(n[6]=[u(" Update nomor resi dan status pengiriman ",-1)])]),_:1})]),_:1}),d("form",{onSubmit:n[3]||(n[3]=de(g=>o("submit"),["prevent"])),class:"space-y-4 py-4"},[d("div",qe,[t(e(G),{for:"tracking_number"},{default:s(()=>[...n[7]||(n[7]=[u("Nomor Resi",-1)])]),_:1}),t(e(Q),{id:"tracking_number",modelValue:b.value,"onUpdate:modelValue":n[0]||(n[0]=g=>b.value=g),placeholder:"Masukkan nomor resi"},null,8,["modelValue"])]),d("div",ze,[t(e(G),{for:"status"},{default:s(()=>[...n[8]||(n[8]=[u("Status",-1)])]),_:1}),t(e(W),{modelValue:p.value,"onUpdate:modelValue":n[1]||(n[1]=g=>p.value=g)},{default:s(()=>[t(e(X),{id:"status"},{default:s(()=>[t(e(Y),{placeholder:"Pilih status"})]),_:1}),t(e(ee),null,{default:s(()=>[t(e(x),{value:"pending"},{default:s(()=>[...n[9]||(n[9]=[u("Pending",-1)])]),_:1}),t(e(x),{value:"shipped"},{default:s(()=>[...n[10]||(n[10]=[u("Shipped",-1)])]),_:1}),t(e(x),{value:"in_transit"},{default:s(()=>[...n[11]||(n[11]=[u("In Transit",-1)])]),_:1}),t(e(x),{value:"delivered"},{default:s(()=>[...n[12]||(n[12]=[u("Delivered",-1)])]),_:1}),t(e(x),{value:"failed"},{default:s(()=>[...n[13]||(n[13]=[u("Failed",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),t(e(Ve),null,{default:s(()=>[t(e(M),{type:"button",variant:"outline",onClick:n[2]||(n[2]=g=>o("update:open",!1))},{default:s(()=>[...n[14]||(n[14]=[u(" Batal ",-1)])]),_:1}),t(e(M),{type:"submit",disabled:r.processing},{default:s(()=>[u(U(r.processing?"Menyimpan...":"Update"),1)]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]))}}),He={class:"rounded-xl p-4 space-y-6 py-6"},Le={class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},Oe={class:"flex flex-1 gap-4"},Ze={class:"relative flex-1 max-w-sm"},Ge={class:"rounded-md border"},vt=I({__name:"Index",props:{shipments:{},statistics:{},filters:{}},setup(r){const c=r,o=[{title:"Pengiriman",href:N.url()}],b=y(c.filters.search||""),p=y(c.filters.status||"all"),k=y([{id:c.filters.sort_by,desc:c.filters.sort_order==="desc"}]),n=y([]),g=y({}),$=y({open:!1,shipment:null}),h=y(""),V=y(""),F=y(!1),te=l=>l?new Date(l).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-",se=l=>({pending:"secondary",shipped:"default",delivered:"outline",cancelled:"destructive"})[l]||"secondary",ae=l=>{$.value={open:!0,shipment:l},h.value=l.tracking_number||"",V.value=l.status},le=()=>{$.value.shipment&&(F.value=!0,j.put(re.url($.value.shipment.id),{tracking_no:h.value,status:V.value},{preserveScroll:!0,onSuccess:()=>{$.value={open:!1,shipment:null},h.value="",V.value=""},onFinish:()=>{F.value=!1}}))},q=[{id:"index",header:()=>f("div",{class:"w-12"},"No"),cell:({row:l})=>{const a=l.index+1+(c.shipments.current_page-1)*c.shipments.per_page;return f("div",{class:"font-medium"},a)}},{accessorKey:"order.order_number",header:({column:l})=>f(M,{variant:"ghost",onClick:()=>l.toggleSorting(l.getIsSorted()==="asc"),class:"-ml-4"},()=>["Order",f(ge,{class:"ml-2 h-4 w-4"})]),cell:({row:l})=>{const a=l.original.order;return a?f("div",[f("div",{class:"font-medium"},a.order_number),f("div",{class:"text-xs text-muted-foreground"},a.customer?.name||"Unknown")]):f("div",{class:"text-muted-foreground"},"N/A")}},{accessorKey:"courier",header:()=>"Kurir",cell:({row:l})=>f("div",{class:"font-medium uppercase"},l.getValue("courier"))},{accessorKey:"tracking_number",header:()=>"Resi",cell:({row:l})=>{const a=l.getValue("tracking_number");return f("div",{class:"font-mono text-sm"},()=>a||"-")}},{accessorKey:"status",header:()=>"Status",cell:({row:l})=>{const a=l.getValue("status");return f(Ce,{variant:se(a)},()=>a)}},{accessorKey:"shipped_at",header:()=>"Tanggal Kirim",cell:({row:l})=>te(l.getValue("shipped_at"))},{id:"actions",header:()=>f("div",{class:"text-right"},"Actions"),cell:({row:l})=>{const a=l.original;return f("div",{class:"flex justify-end gap-2"},[f(M,{variant:"outline",size:"sm",onClick:()=>ae(a)},()=>f(ve,{class:"h-4 w-4"}))])}}],D=me({get data(){return c.shipments.data},columns:q,getCoreRowModel:be(),getSortedRowModel:xe(),getFilteredRowModel:_e(),onSortingChange:l=>B(l,k),onColumnFiltersChange:l=>B(l,n),onColumnVisibilityChange:l=>B(l,g),state:{get sorting(){return k.value},get columnFilters(){return n.value},get columnVisibility(){return g.value}},manualSorting:!0});L(k,l=>{l.length>0&&j.get(N.url(),{search:b.value||void 0,status:p.value!=="all"?p.value:void 0,sort_by:l[0].id,sort_order:l[0].desc?"desc":"asc"},{preserveState:!0,preserveScroll:!0})},{deep:!0});let z;return L([b,p],()=>{clearTimeout(z),z=setTimeout(()=>{j.get(N.url(),{search:b.value||void 0,status:p.value!=="all"?p.value:void 0,sort_by:k.value[0]?.id||"created_at",sort_order:k.value[0]?.desc?"desc":"asc"},{preserveState:!0,preserveScroll:!0})},300)}),(l,a)=>(m(),_(ne,{breadcrumbs:o},{default:s(()=>[t(e(fe),{title:"Pengiriman"}),d("div",He,[a[12]||(a[12]=d("div",{class:"flex items-center justify-between"},[d("div",null,[d("h1",{class:"text-3xl font-bold tracking-tight"},"Pengiriman"),d("p",{class:"text-muted-foreground"},"Kelola pengiriman pesanan")])],-1)),t(Ie,{statistics:r.statistics},null,8,["statistics"]),d("div",Le,[d("div",Oe,[d("div",Ze,[t(e(pe),{class:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),t(e(Q),{modelValue:b.value,"onUpdate:modelValue":a[0]||(a[0]=i=>b.value=i),placeholder:"Cari order atau customer...",class:"pl-9"},null,8,["modelValue"])]),t(e(W),{modelValue:p.value,"onUpdate:modelValue":a[1]||(a[1]=i=>p.value=i)},{default:s(()=>[t(e(X),{class:"w-[180px]"},{default:s(()=>[t(e(Y),{placeholder:"Semua Status"})]),_:1}),t(e(ee),null,{default:s(()=>[t(e(x),{value:"all"},{default:s(()=>[...a[5]||(a[5]=[u("Semua Status",-1)])]),_:1}),t(e(x),{value:"pending"},{default:s(()=>[...a[6]||(a[6]=[u("Pending",-1)])]),_:1}),t(e(x),{value:"shipped"},{default:s(()=>[...a[7]||(a[7]=[u("Shipped",-1)])]),_:1}),t(e(x),{value:"delivered"},{default:s(()=>[...a[8]||(a[8]=[u("Delivered",-1)])]),_:1}),t(e(x),{value:"cancelled"},{default:s(()=>[...a[9]||(a[9]=[u("Cancelled",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),t(e(Ue),null,{default:s(()=>[t(e(Me),{"as-child":""},{default:s(()=>[t(e(M),{variant:"outline",class:"ml-auto"},{default:s(()=>[a[10]||(a[10]=u(" Kolom ",-1)),t(e(ce),{class:"ml-2 h-4 w-4"})]),_:1})]),_:1}),t(e(De),{align:"end"},{default:s(()=>[(m(!0),w(S,null,C(e(D).getAllColumns().filter(i=>i.getCanHide()),i=>(m(),_(e(Ne),{key:i.id,class:"capitalize","model-value":i.getIsVisible(),"onUpdate:modelValue":v=>{i.toggleVisibility(!!v)}},{default:s(()=>[u(U(i.id),1)]),_:2},1032,["model-value","onUpdate:modelValue"]))),128))]),_:1})]),_:1})]),d("div",Ge,[t(e(Fe),null,{default:s(()=>[t(e(Pe),null,{default:s(()=>[(m(!0),w(S,null,C(e(D).getHeaderGroups(),i=>(m(),_(e(A),{key:i.id},{default:s(()=>[(m(!0),w(S,null,C(i.headers,v=>(m(),_(e(Re),{key:v.id},{default:s(()=>[v.isPlaceholder?O("",!0):(m(),_(e(Z),{key:0,render:v.column.columnDef.header,props:v.getContext()},null,8,["render","props"]))]),_:2},1024))),128))]),_:2},1024))),128))]),_:1}),t(e(Ke),null,{default:s(()=>[e(D).getRowModel().rows?.length?(m(!0),w(S,{key:0},C(e(D).getRowModel().rows,i=>(m(),_(e(A),{key:i.id},{default:s(()=>[(m(!0),w(S,null,C(i.getVisibleCells(),v=>(m(),_(e(J),{key:v.id},{default:s(()=>[t(e(Z),{render:v.column.columnDef.cell,props:v.getContext()},null,8,["render","props"])]),_:2},1024))),128))]),_:2},1024))),128)):(m(),_(e(A),{key:1},{default:s(()=>[t(e(J),{colspan:q.length,class:"h-24 text-center"},{default:s(()=>[...a[11]||(a[11]=[u(" Tidak ada data pengiriman. ",-1)])]),_:1},8,["colspan"])]),_:1}))]),_:1})]),_:1})]),r.shipments.last_page>1?(m(),_(Se,{key:0,data:{current_page:r.shipments.current_page,last_page:r.shipments.last_page,per_page:r.shipments.per_page,from:(r.shipments.current_page-1)*r.shipments.per_page+1,to:Math.min(r.shipments.current_page*r.shipments.per_page,r.shipments.total),total:r.shipments.total},url:e(N).url(),filters:{search:b.value||void 0,status:p.value!=="all"?p.value:void 0,sort_by:k.value[0]?.id||"created_at",sort_order:k.value[0]?.desc?"desc":"asc"}},null,8,["data","url","filters"])):O("",!0)]),t(Ee,{open:$.value.open,"onUpdate:open":a[2]||(a[2]=i=>$.value.open=i),"tracking-number":h.value,"onUpdate:trackingNumber":a[3]||(a[3]=i=>h.value=i),status:V.value,"onUpdate:status":a[4]||(a[4]=i=>V.value=i),shipment:$.value.shipment,processing:F.value,onSubmit:le},null,8,["open","tracking-number","status","shipment","processing"])]),_:1}))}});export{vt as default};
