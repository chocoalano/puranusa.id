import{_ as F}from"./index-Qe8U7avD.js";import{_ as S,v as $}from"./index-BhPH699V.js";import{_ as N,a as R}from"./CardContent.vue_vue_type_script_setup_true_lang-NxxB_dAy.js";import{_ as T}from"./CardHeader.vue_vue_type_script_setup_true_lang-Kdg7L6IL.js";import{_ as A}from"./CardTitle.vue_vue_type_script_setup_true_lang-Cj4ck2dV.js";import{_ as Y,a as ee,b as te}from"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-NxThyEhC.js";import{_ as ae}from"./DropdownMenuCheckboxItem.vue_vue_type_script_setup_true_lang-hxH_Oz-B.js";import{_ as se}from"./Input.vue_vue_type_script_setup_true_lang-Bi8Aupzl.js";import{_ as le}from"./Pagination.vue_vue_type_script_setup_true_lang-C64O0K5A.js";import{_ as K,a as U,b as j,c as L,d as p}from"./SelectValue.vue_vue_type_script_setup_true_lang-VBwlv4qP.js";import{_ as re,a as ne,b as D,c as oe,d as de,e as B}from"./TableHeader.vue_vue_type_script_setup_true_lang-PuAkTm4y.js";import{_ as ie}from"./AppLayout.vue_vue_type_script_setup_true_lang-3Xwj2Srj.js";import{d as ue,r as x,q as me,E as O,j as z,c,g as o,w as l,b as s,e as i,u as e,a1 as ce,t as H,s as u,a3 as fe,K as V,aC as ge,Z as pe,v as b,F as h,x as w,aa as _e,y as G,n,ap as q,ar as ve,a4 as ye,aO as xe,A as be,B as he}from"./vendor-DfMbnFaR.js";import{u as we}from"./usePermissions-Bdkvyget.js";import"./index-CSEUMRIG.js";import"./AvatarFallback.vue_vue_type_script_setup_true_lang-Bqij1zEj.js";import"./AvatarImage.vue_vue_type_script_setup_true_lang-BOYUcfDs.js";import"./index-DnSHhU6t.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DrG-1awo.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-CpOM3BUc.js";const Ce={class:"rounded-xl p-4 space-y-6 py-6"},Se={class:"grid gap-4 md:grid-cols-2"},Ve={class:"text-2xl font-bold"},$e={class:"text-2xl font-bold"},De={class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},Pe={class:"flex flex-1 gap-4"},ke={class:"relative flex-1 max-w-sm"},Me={class:"rounded-md border"},We=ue({__name:"Pending",props:{orders:{},statistics:{},paymentMethods:{},filters:{}},setup(d){const{isSuperAdmin:Z,isAdmin:J}=we(),_=d,Q=[{title:"Pesanan Pending",href:"/admin/orders/pending"}],y=x(_.filters.search||""),f=x(_.filters.payment_method||"all"),g=x(_.filters.status||"all"),v=x([{id:_.filters.sort_by,desc:_.filters.sort_order==="desc"}]),P=x([]),k=x({}),M=a=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(a),W=a=>new Date(a).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),X=a=>{const t=a.toUpperCase();return{PENDING:"secondary",PROCESSING:"outline",SHIPPED:"default",DELIVERED:"default",CANCELLED:"destructive",CANCELED:"destructive",COMPLETED:"default",PAID:"default"}[t]||"secondary"},E=[{id:"index",header:()=>n("div",{class:"w-12"},"No"),cell:({row:a})=>{const t=a.index+1+(_.orders.current_page-1)*_.orders.per_page;return n("div",{class:"font-medium"},t)}},{accessorKey:"order_no",header:({column:a})=>n(S,{variant:"ghost",onClick:()=>a.toggleSorting(a.getIsSorted()==="asc"),class:"-ml-4"},()=>["Order Number",n(q,{class:"ml-2 h-4 w-4"})]),cell:({row:a})=>n("div",[n("div",{class:"font-medium font-mono"},a.original.order_no),n("div",{class:"text-xs text-muted-foreground"},a.original.customer.name)])},{accessorKey:"grand_total",header:()=>n("div",{class:"text-right"},"Total"),cell:({row:a})=>n("div",{class:"text-right font-medium"},M(a.getValue("grand_total")))},{accessorKey:"payment_status",header:()=>"Payment",cell:({row:a})=>{const t=a.getValue("payment_status");return n(F,{variant:t==="paid"?"default":"secondary"},()=>t)}},{id:"payment_method",header:()=>"Metode",cell:({row:a})=>{const r=a.original.payments?.[0]?.method?.name;return n("div",{class:"text-sm"},{default:()=>r||"-"})}},{accessorKey:"status",header:()=>"Status",cell:({row:a})=>{const t=a.getValue("status");return n(F,{variant:X(t)},()=>t)}},{accessorKey:"created_at",header:({column:a})=>n(S,{variant:"ghost",onClick:()=>a.toggleSorting(a.getIsSorted()==="asc"),class:"-ml-4"},()=>["Tanggal",n(q,{class:"ml-2 h-4 w-4"})]),cell:({row:a})=>W(a.getValue("created_at"))},{id:"actions",header:()=>n("div",{class:"text-right"},"Actions"),cell:({row:a})=>{const t=a.original,r=[];return(Z||J)&&r.push(n(ye,{href:`/admin/orders/${t.id}`},()=>n(S,{variant:"outline",size:"sm"},()=>n(ve,{class:"h-4 w-4"})))),n("div",{class:"flex justify-end gap-2"},r)}}],C=me({get data(){return _.orders.data},columns:E,getCoreRowModel:he(),getSortedRowModel:be(),getFilteredRowModel:xe(),onSortingChange:a=>$(a,v),onColumnFiltersChange:a=>$(a,P),onColumnVisibilityChange:a=>$(a,k),state:{get sorting(){return v.value},get columnFilters(){return P.value},get columnVisibility(){return k.value}},manualSorting:!0});O(v,a=>{a.length>0&&z.get("/admin/orders",{search:y.value||void 0,status:g.value!=="all"?g.value:void 0,payment_method:f.value!=="all"?f.value:void 0,sort_by:a[0].id,sort_order:a[0].desc?"desc":"asc"},{preserveState:!0,preserveScroll:!0})},{deep:!0});let I;return O([y,g,f],()=>{clearTimeout(I),I=setTimeout(()=>{z.get("/admin/orders",{search:y.value||void 0,status:g.value!=="all"?g.value:void 0,payment_method:f.value!=="all"?f.value:void 0,sort_by:v.value[0]?.id||"created_at",sort_order:v.value[0]?.desc?"desc":"asc"},{preserveState:!0,preserveScroll:!0})},300)}),(a,t)=>(o(),c(ie,{breadcrumbs:Q},{default:l(()=>[s(e(ce),{title:"Pesanan Pending"}),i("div",Ce,[t[17]||(t[17]=i("div",{class:"flex items-center justify-between"},[i("div",null,[i("h1",{class:"text-3xl font-bold tracking-tight"},"Pesanan Pending"),i("p",{class:"text-muted-foreground"},"Kelola pesanan yang menunggu pembayaran")])],-1)),i("div",Se,[s(e(N),null,{default:l(()=>[s(e(T),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:l(()=>[s(e(A),{class:"text-sm font-medium"},{default:l(()=>[...t[3]||(t[3]=[u("Total Pending",-1)])]),_:1}),s(e(fe),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),s(e(R),null,{default:l(()=>[i("div",Ve,V(d.statistics.total_pending),1),t[4]||(t[4]=i("p",{class:"text-xs text-muted-foreground"},"Pesanan menunggu pembayaran",-1))]),_:1})]),_:1}),s(e(N),null,{default:l(()=>[s(e(T),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:l(()=>[s(e(A),{class:"text-sm font-medium"},{default:l(()=>[...t[5]||(t[5]=[u("Total Amount",-1)])]),_:1}),s(e(ge),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),s(e(R),null,{default:l(()=>[i("div",$e,V(M(d.statistics.total_amount)),1),t[6]||(t[6]=i("p",{class:"text-xs text-muted-foreground"},"Total nilai pending",-1))]),_:1})]),_:1})]),i("div",De,[i("div",Pe,[i("div",ke,[s(e(pe),{class:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),s(e(se),{modelValue:y.value,"onUpdate:modelValue":t[0]||(t[0]=r=>y.value=r),placeholder:"Cari nomor order atau nama pelanggan...",class:"pl-9"},null,8,["modelValue"])]),s(e(K),{modelValue:f.value,"onUpdate:modelValue":t[1]||(t[1]=r=>f.value=r)},{default:l(()=>[s(e(U),{class:"w-[200px]"},{default:l(()=>[s(e(j),{placeholder:"Metode Pembayaran"})]),_:1}),s(e(L),null,{default:l(()=>[s(e(p),{value:"all"},{default:l(()=>[...t[7]||(t[7]=[u("Semua Metode",-1)])]),_:1}),(o(!0),b(h,null,w(d.paymentMethods,r=>(o(),c(e(p),{key:r.id,value:r.id.toString()},{default:l(()=>[u(V(r.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),s(e(K),{modelValue:g.value,"onUpdate:modelValue":t[2]||(t[2]=r=>g.value=r)},{default:l(()=>[s(e(U),{class:"w-[180px]"},{default:l(()=>[s(e(j),{placeholder:"Semua Status"})]),_:1}),s(e(L),null,{default:l(()=>[s(e(p),{value:"all"},{default:l(()=>[...t[8]||(t[8]=[u("Semua Status",-1)])]),_:1}),s(e(p),{value:"pending"},{default:l(()=>[...t[9]||(t[9]=[u("Pending",-1)])]),_:1}),s(e(p),{value:"processing"},{default:l(()=>[...t[10]||(t[10]=[u("Processing",-1)])]),_:1}),s(e(p),{value:"shipped"},{default:l(()=>[...t[11]||(t[11]=[u("Shipped",-1)])]),_:1}),s(e(p),{value:"delivered"},{default:l(()=>[...t[12]||(t[12]=[u("Delivered",-1)])]),_:1}),s(e(p),{value:"completed"},{default:l(()=>[...t[13]||(t[13]=[u("Completed",-1)])]),_:1}),s(e(p),{value:"cancelled"},{default:l(()=>[...t[14]||(t[14]=[u("Cancelled",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),s(e(Y),null,{default:l(()=>[s(e(ee),{"as-child":""},{default:l(()=>[s(e(S),{variant:"outline",class:"ml-auto"},{default:l(()=>[t[15]||(t[15]=u(" Kolom ",-1)),s(e(_e),{class:"ml-2 h-4 w-4"})]),_:1})]),_:1}),s(e(te),{align:"end"},{default:l(()=>[(o(!0),b(h,null,w(e(C).getAllColumns().filter(r=>r.getCanHide()),r=>(o(),c(e(ae),{key:r.id,class:"capitalize","model-value":r.getIsVisible(),"onUpdate:modelValue":m=>{r.toggleVisibility(!!m)}},{default:l(()=>[u(V(r.id),1)]),_:2},1032,["model-value","onUpdate:modelValue"]))),128))]),_:1})]),_:1})]),i("div",Me,[s(e(re),null,{default:l(()=>[s(e(ne),null,{default:l(()=>[(o(!0),b(h,null,w(e(C).getHeaderGroups(),r=>(o(),c(e(D),{key:r.id},{default:l(()=>[(o(!0),b(h,null,w(r.headers,m=>(o(),c(e(oe),{key:m.id},{default:l(()=>[m.isPlaceholder?H("",!0):(o(),c(e(G),{key:0,render:m.column.columnDef.header,props:m.getContext()},null,8,["render","props"]))]),_:2},1024))),128))]),_:2},1024))),128))]),_:1}),s(e(de),null,{default:l(()=>[e(C).getRowModel().rows?.length?(o(!0),b(h,{key:0},w(e(C).getRowModel().rows,r=>(o(),c(e(D),{key:r.id},{default:l(()=>[(o(!0),b(h,null,w(r.getVisibleCells(),m=>(o(),c(e(B),{key:m.id},{default:l(()=>[s(e(G),{render:m.column.columnDef.cell,props:m.getContext()},null,8,["render","props"])]),_:2},1024))),128))]),_:2},1024))),128)):(o(),c(e(D),{key:1},{default:l(()=>[s(e(B),{colspan:E.length,class:"h-24 text-center"},{default:l(()=>[...t[16]||(t[16]=[u(" Tidak ada data pesanan. ",-1)])]),_:1},8,["colspan"])]),_:1}))]),_:1})]),_:1})]),d.orders.last_page>1?(o(),c(le,{key:0,data:{current_page:d.orders.current_page,last_page:d.orders.last_page,per_page:d.orders.per_page,from:(d.orders.current_page-1)*d.orders.per_page+1,to:Math.min(d.orders.current_page*d.orders.per_page,d.orders.total),total:d.orders.total},url:"/admin/orders/pending",filters:{search:y.value||void 0,status:g.value!=="all"?g.value:void 0,payment_method:f.value!=="all"?f.value:void 0,sort_by:v.value[0]?.id||"created_at",sort_order:v.value[0]?.desc?"desc":"asc"}},null,8,["data","filters"])):H("",!0)])]),_:1}))}});export{We as default};
