import{d as w,aR as z,p as x,r as k,am as H,c as g,g as v,w as t,b as e,e as m,u as l,a1 as Q,s as u,L as Z,aP as q,t as G,v as S,F as j,x as c,K as s,Z as C,j as X}from"./vendor-ppbe-N6l.js";import{_ as ll}from"./AppLayout.vue_vue_type_script_setup_true_lang-CAMiCJvC.js";import{_ as al}from"./Pagination.vue_vue_type_script_setup_true_lang-DUSFRDmQ.js";import{_ as R}from"./index-BYj0gYCc.js";import{_ as el}from"./Input.vue_vue_type_script_setup_true_lang-DNj-uKug.js";import{_ as B,a as E,b as L,c as U,d as F}from"./SelectValue.vue_vue_type_script_setup_true_lang-CzK-upws.js";import{_ as tl,a as ul,b as V,c as d,d as nl,e as r}from"./TableHeader.vue_vue_type_script_setup_true_lang-CR2Mc2h7.js";import"./index-CSEUMRIG.js";import"./AvatarFallback.vue_vue_type_script_setup_true_lang-DiRTNO4J.js";import"./AvatarImage.vue_vue_type_script_setup_true_lang-BAAtcDkZ.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-DA3JUaxj.js";import"./index-BUE9bFsX.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CKDVFyjr.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-B3c6JmTR.js";const sl={class:"rounded-xl p-4 space-y-6 py-6"},rl={class:"flex items-center justify-between"},dl={class:"mb-4 space-y-4"},ol={class:"flex flex-wrap items-center gap-4"},il={class:"relative flex-1 max-w-md"},ml={class:"rounded-md border overflow-x-auto"},fl={class:"flex flex-col items-center justify-center gap-2"},Fl=w({__name:"TaxSummaryReport",props:{data:{},filters:{}},setup(D){const i=D,A=z(),y=x(()=>A.url.split("?")[0]),f=k(i.filters.year?String(i.filters.year):"all"),p=k(i.filters.month||"all"),_=k(i.filters.search||""),b=k(!1),I=x(()=>{const o=new Date().getFullYear(),a=Array.from({length:6},($,h)=>o-h),n=i.filters.year;return n&&!a.includes(n)&&a.unshift(n),a}),J=[{value:"all",label:"Semua Bulan"},{value:"01",label:"Januari"},{value:"02",label:"Februari"},{value:"03",label:"Maret"},{value:"04",label:"April"},{value:"05",label:"Mei"},{value:"06",label:"Juni"},{value:"07",label:"Juli"},{value:"08",label:"Agustus"},{value:"09",label:"September"},{value:"10",label:"Oktober"},{value:"11",label:"November"},{value:"12",label:"Desember"}],T=H(()=>{X.get(y.value,{year:f.value!=="all"?f.value:void 0,month:p.value!=="all"?p.value:void 0,search:_.value||void 0,per_page:i.data.per_page},{preserveState:!0,preserveScroll:!0})},300),P=()=>{T()},W=()=>{f.value="all",p.value="all",_.value="",T()},K=x(()=>f.value!=="all"||p.value!=="all"||_.value!==""),N=o=>new Intl.NumberFormat("id-ID",{minimumFractionDigits:0}).format(o||0),M=o=>{if(!o)return"-";const a=new Date(o);return Number.isNaN(a.getTime())?o:a.toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric"})},O=async()=>{b.value=!0;try{const o=new URLSearchParams;f.value!=="all"&&o.append("year",f.value),p.value!=="all"&&o.append("month",p.value),_.value&&o.append("search",_.value);const a=`${y.value}/export?${o.toString()}`,n=document.createElement("a");n.href=a,n.download="",document.body.appendChild(n),n.click(),document.body.removeChild(n)}catch(o){console.error("Export error:",o),alert("Terjadi kesalahan saat export data")}finally{b.value=!1}},Y=x(()=>({year:f.value!=="all"?f.value:void 0,month:p.value!=="all"?p.value:void 0,search:_.value||void 0,per_page:i.data.per_page}));return(o,a)=>(v(),g(ll,null,{default:t(()=>[e(l(Q),{title:"Laporan Pajak Ringkasan"}),m("div",sl,[m("div",rl,[a[4]||(a[4]=m("div",null,[m("h1",{class:"text-3xl font-bold tracking-tight"},"Laporan Pajak Ringkasan"),m("p",{class:"text-muted-foreground"}," Data lengkap laporan PPh21 dan bukti potong pajak. ")],-1)),e(l(R),{onClick:O,disabled:b.value,variant:"default",class:"gap-2"},{default:t(()=>[b.value?(v(),g(l(Z),{key:0,class:"h-4 w-4 animate-spin"})):(v(),g(l(q),{key:1,class:"h-4 w-4"})),a[3]||(a[3]=u(" Export Excel ",-1))]),_:1},8,["disabled"])]),m("div",dl,[m("div",ol,[e(l(B),{modelValue:f.value,"onUpdate:modelValue":[a[0]||(a[0]=n=>f.value=n),P]},{default:t(()=>[e(l(E),{class:"w-[160px]"},{default:t(()=>[e(l(L),{placeholder:"Semua Tahun"})]),_:1}),e(l(U),null,{default:t(()=>[e(l(F),{value:"all"},{default:t(()=>[...a[5]||(a[5]=[u("Semua Tahun",-1)])]),_:1}),(v(!0),S(j,null,c(I.value,n=>(v(),g(l(F),{key:n,value:String(n)},{default:t(()=>[u(s(n),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),e(l(B),{modelValue:p.value,"onUpdate:modelValue":[a[1]||(a[1]=n=>p.value=n),P]},{default:t(()=>[e(l(E),{class:"w-[160px]"},{default:t(()=>[e(l(L),{placeholder:"Semua Bulan"})]),_:1}),e(l(U),null,{default:t(()=>[(v(),S(j,null,c(J,n=>e(l(F),{key:n.value,value:n.value},{default:t(()=>[u(s(n.label),1)]),_:2},1032,["value"])),64))]),_:1})]),_:1},8,["modelValue"]),m("div",il,[e(l(C),{class:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e(l(el),{modelValue:_.value,"onUpdate:modelValue":a[2]||(a[2]=n=>_.value=n),type:"text",placeholder:"Cari nama, NPWP, email...",class:"pl-10",onInput:P},null,8,["modelValue"])]),K.value?(v(),g(l(R),{key:0,variant:"outline",size:"sm",onClick:W},{default:t(()=>[...a[6]||(a[6]=[u(" Reset Filter ",-1)])]),_:1})):G("",!0)])]),m("div",ml,[e(l(tl),null,{default:t(()=>[e(l(ul),null,{default:t(()=>[e(l(V),null,{default:t(()=>[e(l(d),{class:"w-[60px]"},{default:t(()=>[...a[7]||(a[7]=[u("No",-1)])]),_:1}),e(l(d),null,{default:t(()=>[...a[8]||(a[8]=[u("Tanggal",-1)])]),_:1}),e(l(d),null,{default:t(()=>[...a[9]||(a[9]=[u("Username",-1)])]),_:1}),e(l(d),null,{default:t(()=>[...a[10]||(a[10]=[u("Nama Member",-1)])]),_:1}),e(l(d),null,{default:t(()=>[...a[11]||(a[11]=[u("Email",-1)])]),_:1}),e(l(d),null,{default:t(()=>[...a[12]||(a[12]=[u("No Telepon",-1)])]),_:1}),e(l(d),null,{default:t(()=>[...a[13]||(a[13]=[u("Masa Pajak",-1)])]),_:1}),e(l(d),null,{default:t(()=>[...a[14]||(a[14]=[u("Tahun Pajak",-1)])]),_:1}),e(l(d),null,{default:t(()=>[...a[15]||(a[15]=[u("Pembetulan",-1)])]),_:1}),e(l(d),null,{default:t(()=>[...a[16]||(a[16]=[u("No. Bukti Potong",-1)])]),_:1}),e(l(d),null,{default:t(()=>[...a[17]||(a[17]=[u("NPWP",-1)])]),_:1}),e(l(d),null,{default:t(()=>[...a[18]||(a[18]=[u("NIK",-1)])]),_:1}),e(l(d),null,{default:t(()=>[...a[19]||(a[19]=[u("Nama",-1)])]),_:1}),e(l(d),null,{default:t(()=>[...a[20]||(a[20]=[u("Alamat",-1)])]),_:1}),e(l(d),null,{default:t(()=>[...a[21]||(a[21]=[u("WP Luar Negeri",-1)])]),_:1}),e(l(d),null,{default:t(()=>[...a[22]||(a[22]=[u("Kode Negara",-1)])]),_:1}),e(l(d),null,{default:t(()=>[...a[23]||(a[23]=[u("Kode Pajak",-1)])]),_:1}),e(l(d),{class:"text-right"},{default:t(()=>[...a[24]||(a[24]=[u("Jumlah Bruto (Rp)",-1)])]),_:1}),e(l(d),{class:"text-right"},{default:t(()=>[...a[25]||(a[25]=[u("Jumlah DPP (Rp)",-1)])]),_:1}),e(l(d),null,{default:t(()=>[...a[26]||(a[26]=[u("Tanpa NPWP (Rp)",-1)])]),_:1}),e(l(d),{class:"text-right"},{default:t(()=>[...a[27]||(a[27]=[u("Tarif (Rp)",-1)])]),_:1}),e(l(d),null,{default:t(()=>[...a[28]||(a[28]=[u("PPH21 (Rp)",-1)])]),_:1}),e(l(d),null,{default:t(()=>[...a[29]||(a[29]=[u("NPWP Pemotong",-1)])]),_:1}),e(l(d),null,{default:t(()=>[...a[30]||(a[30]=[u("Nama Pemotong",-1)])]),_:1})]),_:1})]),_:1}),e(l(nl),null,{default:t(()=>[i.data.data.length?(v(!0),S(j,{key:0},c(i.data.data,(n,$)=>(v(),g(l(V),{key:$},{default:t(()=>[e(l(r),{class:"font-medium"},{default:t(()=>[u(s($+1+(i.data.current_page-1)*i.data.per_page),1)]),_:2},1024),e(l(r),null,{default:t(()=>[u(s(M(n.tgl)),1)]),_:2},1024),e(l(r),null,{default:t(()=>[u(s(n.member?.username||"-"),1)]),_:2},1024),e(l(r),null,{default:t(()=>[u(s(n.member?.fullname||"-"),1)]),_:2},1024),e(l(r),null,{default:t(()=>[u(s(n.member?.email||"-"),1)]),_:2},1024),e(l(r),null,{default:t(()=>[u(s(n.member?.phone||"-"),1)]),_:2},1024),e(l(r),null,{default:t(()=>[u(s(n.masapajak||"-"),1)]),_:2},1024),e(l(r),null,{default:t(()=>[u(s(n.tahunpajak||"-"),1)]),_:2},1024),e(l(r),null,{default:t(()=>[u(s(n.pembetulan||"-"),1)]),_:2},1024),e(l(r),null,{default:t(()=>[u(s(n.nomorbuktipotong||"-"),1)]),_:2},1024),e(l(r),null,{default:t(()=>[u(s(n.npwp||"-"),1)]),_:2},1024),e(l(r),null,{default:t(()=>[u(s(n.fnik||"-"),1)]),_:2},1024),e(l(r),null,{default:t(()=>[u(s(n.nama||"-"),1)]),_:2},1024),e(l(r),{class:"max-w-[220px] truncate",title:n.alamat||"-"},{default:t(()=>[u(s(n.alamat||"-"),1)]),_:2},1032,["title"]),e(l(r),null,{default:t(()=>[u(s(n.wpluarnegri||"-"),1)]),_:2},1024),e(l(r),null,{default:t(()=>[u(s(n.kodenegara||"-"),1)]),_:2},1024),e(l(r),null,{default:t(()=>[u(s(n.kodepajak||"-"),1)]),_:2},1024),e(l(r),{class:"text-right font-medium"},{default:t(()=>[u(s(N(n.jumlahbruto)),1)]),_:2},1024),e(l(r),{class:"text-right font-medium"},{default:t(()=>[u(s(N(n.jumlahdpp)),1)]),_:2},1024),e(l(r),null,{default:t(()=>[u(s(n.tanpanpwp||"-"),1)]),_:2},1024),e(l(r),{class:"text-right font-medium"},{default:t(()=>[u(s(N(n.tarif)),1)]),_:2},1024),e(l(r),null,{default:t(()=>[u(s(n.pph21||"-"),1)]),_:2},1024),e(l(r),null,{default:t(()=>[u(s(n.npwppemotong||"-"),1)]),_:2},1024),e(l(r),null,{default:t(()=>[u(s(n.namapemotong||"-"),1)]),_:2},1024)]),_:2},1024))),128)):(v(),g(l(V),{key:1},{default:t(()=>[e(l(r),{colspan:"24",class:"h-32 text-center text-muted-foreground"},{default:t(()=>[m("div",fl,[e(l(C),{class:"h-8 w-8 opacity-40"}),a[31]||(a[31]=m("p",null,"Tidak ada data yang ditemukan",-1))])]),_:1})]),_:1}))]),_:1})]),_:1})]),e(al,{data:D.data,url:y.value,filters:Y.value,perPageOptions:[15,25,50,100,200]},null,8,["data","url","filters"])])]),_:1}))}});export{Fl as default};
