import{o as C,_ as te,q as re,v as ae}from"./AppLayout.vue_vue_type_script_setup_true_lang-BldiSP6C.js";import{_ as N}from"./ConfirmDialog.vue_vue_type_script_setup_true_lang-BcS36dg9.js";import{_ as se}from"./Pagination.vue_vue_type_script_setup_true_lang-DDSBjCI_.js";import{a as V,_ as D}from"./CardContent.vue_vue_type_script_setup_true_lang-C6T_ici3.js";import{_ as F}from"./CardHeader.vue_vue_type_script_setup_true_lang-CRP91wSD.js";import{_ as A}from"./CardTitle.vue_vue_type_script_setup_true_lang-516RZaNE.js";import{d as G,v as w,g as u,b as t,w as s,u as e,s as m,cw as le,e as i,K as S,cx as O,aM as X,r as y,q as ne,E as q,j as P,c as p,a0 as oe,t as z,Z as ue,a9 as ie,F as k,x as $,y as E,n as o,D as H,an as de,aG as ce,A as me,B as fe}from"./vendor-D8oi4p-n.js";import{_ as pe}from"./index-B-GP7Yui.js";import{_ as R,v as M}from"./index-D0F1m2iO.js";import{_ as _e,a as ge,b as ve}from"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-DIwj58eL.js";import{_ as xe}from"./DropdownMenuCheckboxItem.vue_vue_type_script_setup_true_lang-fKcU2LtC.js";import{_ as ye}from"./Input.vue_vue_type_script_setup_true_lang-DTUDRkJ-.js";import{_ as be,a as we,b as ke,c as $e,d as j}from"./SelectValue.vue_vue_type_script_setup_true_lang-CI1mGqPa.js";import{_ as he,a as Ce,b as T,c as Re,d as je,e as L}from"./TableHeader.vue_vue_type_script_setup_true_lang-DVvamDtf.js";import"./index-DaR_mHDg.js";import"./AvatarFallback.vue_vue_type_script_setup_true_lang-CKGKFyAW.js";import"./AvatarImage.vue_vue_type_script_setup_true_lang-Z0lQTrLO.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CRzWMqkE.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-DkSEZT8X.js";import"./AlertDialogTitle.vue_vue_type_script_setup_true_lang-oX1NJi3Y.js";const Se={class:"grid gap-4 md:grid-cols-3"},Ve={class:"text-2xl font-bold"},De={class:"text-2xl font-bold"},Fe={class:"text-2xl font-bold"},Ae=G({__name:"ReturnStatistics",props:{statistics:{}},setup(n){return(_,d)=>(u(),w("div",Se,[t(e(D),null,{default:s(()=>[t(e(F),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[t(e(A),{class:"text-sm font-medium"},{default:s(()=>[...d[0]||(d[0]=[m("Pending",-1)])]),_:1}),t(e(le),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(e(V),null,{default:s(()=>[i("div",Ve,S(n.statistics.total_pending),1),d[1]||(d[1]=i("p",{class:"text-xs text-muted-foreground"},"Menunggu persetujuan",-1))]),_:1})]),_:1}),t(e(D),null,{default:s(()=>[t(e(F),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[t(e(A),{class:"text-sm font-medium"},{default:s(()=>[...d[2]||(d[2]=[m("Disetujui",-1)])]),_:1}),t(e(O),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(e(V),null,{default:s(()=>[i("div",De,S(n.statistics.total_approved),1),d[3]||(d[3]=i("p",{class:"text-xs text-muted-foreground"},"Retur disetujui",-1))]),_:1})]),_:1}),t(e(D),null,{default:s(()=>[t(e(F),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[t(e(A),{class:"text-sm font-medium"},{default:s(()=>[...d[4]||(d[4]=[m("Ditolak",-1)])]),_:1}),t(e(X),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(e(V),null,{default:s(()=>[i("div",Fe,S(n.statistics.total_rejected),1),d[5]||(d[5]=i("p",{class:"text-xs text-muted-foreground"},"Retur ditolak",-1))]),_:1})]),_:1})]))}}),Me={class:"rounded-xl p-4 space-y-6 py-6"},Te={class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},Ue={class:"flex flex-1 gap-4"},Be={class:"relative flex-1 max-w-sm"},Ke={class:"rounded-md border"},st=G({__name:"Index",props:{returns:{},statistics:{},filters:{}},setup(n){const _=n,d=[{title:"Retur & Refund",href:C.url()}],b=y(_.filters.search||""),f=y(_.filters.status||"all"),g=y([{id:_.filters.sort_by,desc:_.filters.sort_order==="desc"}]),U=y([]),B=y({}),v=y({open:!1,return:null}),x=y({open:!1,return:null}),Z=r=>r?new Date(r).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-",J=r=>({pending:"secondary",approved:"default",rejected:"destructive"})[r]||"secondary",Q=r=>{v.value={open:!0,return:r}},W=()=>{if(!v.value.return)return;H({}).post(re.url(v.value.return.id),{preserveScroll:!0,onSuccess:()=>{v.value={open:!1,return:null}}})},Y=r=>{x.value={open:!0,return:r}},ee=()=>{if(!x.value.return)return;H({}).post(ae.url(x.value.return.id),{preserveScroll:!0,onSuccess:()=>{x.value={open:!1,return:null}}})},K=[{id:"index",header:()=>o("div",{class:"w-12"},"No"),cell:({row:r})=>{const a=r.index+1+(_.returns.current_page-1)*_.returns.per_page;return o("div",{class:"font-medium"},a)}},{accessorKey:"order.order_number",header:({column:r})=>o(R,{variant:"ghost",onClick:()=>r.toggleSorting(r.getIsSorted()==="asc"),class:"-ml-4"},()=>["Order",o(de,{class:"ml-2 h-4 w-4"})]),cell:({row:r})=>{const a=r.original.order;return a?o("div",[o("div",{class:"font-medium"},a.order_number),o("div",{class:"text-xs text-muted-foreground"},a.customer?.name||"Unknown")]):o("div",{class:"text-muted-foreground"},"N/A")}},{accessorKey:"reason",header:()=>"Alasan",cell:({row:r})=>o("div",{class:"max-w-xs truncate"},r.getValue("reason"))},{accessorKey:"status",header:()=>"Status",cell:({row:r})=>{const a=r.getValue("status");return o(pe,{variant:J(a)},()=>a)}},{accessorKey:"requested_at",header:()=>"Tanggal Permintaan",cell:({row:r})=>Z(r.getValue("requested_at"))},{id:"actions",header:()=>o("div",{class:"text-right"},"Actions"),cell:({row:r})=>{const a=r.original;return a.status!=="pending"?null:o("div",{class:"flex justify-end gap-2"},[o(R,{variant:"default",size:"sm",onClick:()=>Q(a)},()=>o(O,{class:"h-4 w-4"})),o(R,{variant:"destructive",size:"sm",onClick:()=>Y(a)},()=>o(X,{class:"h-4 w-4"}))])}}],h=ne({get data(){return _.returns.data},columns:K,getCoreRowModel:fe(),getSortedRowModel:me(),getFilteredRowModel:ce(),onSortingChange:r=>M(r,g),onColumnFiltersChange:r=>M(r,U),onColumnVisibilityChange:r=>M(r,B),state:{get sorting(){return g.value},get columnFilters(){return U.value},get columnVisibility(){return B.value}},manualSorting:!0});q(g,r=>{r.length>0&&P.get(C.url(),{search:b.value||void 0,status:f.value!=="all"?f.value:void 0,sort_by:r[0].id,sort_order:r[0].desc?"desc":"asc"},{preserveState:!0,preserveScroll:!0})},{deep:!0});let I;return q([b,f],()=>{clearTimeout(I),I=setTimeout(()=>{P.get(C.url(),{search:b.value||void 0,status:f.value!=="all"?f.value:void 0,sort_by:g.value[0]?.id||"created_at",sort_order:g.value[0]?.desc?"desc":"asc"},{preserveState:!0,preserveScroll:!0})},300)}),(r,a)=>(u(),p(te,{breadcrumbs:d},{default:s(()=>[t(e(oe),{title:"Retur & Refund"}),i("div",Me,[a[10]||(a[10]=i("div",{class:"flex items-center justify-between"},[i("div",null,[i("h1",{class:"text-3xl font-bold tracking-tight"},"Retur & Refund"),i("p",{class:"text-muted-foreground"},"Kelola permintaan retur produk")])],-1)),t(Ae,{statistics:n.statistics},null,8,["statistics"]),i("div",Te,[i("div",Ue,[i("div",Be,[t(e(ue),{class:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),t(e(ye),{modelValue:b.value,"onUpdate:modelValue":a[0]||(a[0]=l=>b.value=l),placeholder:"Cari order atau customer...",class:"pl-9"},null,8,["modelValue"])]),t(e(be),{modelValue:f.value,"onUpdate:modelValue":a[1]||(a[1]=l=>f.value=l)},{default:s(()=>[t(e(we),{class:"w-[180px]"},{default:s(()=>[t(e(ke),{placeholder:"Semua Status"})]),_:1}),t(e($e),null,{default:s(()=>[t(e(j),{value:"all"},{default:s(()=>[...a[4]||(a[4]=[m("Semua Status",-1)])]),_:1}),t(e(j),{value:"pending"},{default:s(()=>[...a[5]||(a[5]=[m("Pending",-1)])]),_:1}),t(e(j),{value:"approved"},{default:s(()=>[...a[6]||(a[6]=[m("Approved",-1)])]),_:1}),t(e(j),{value:"rejected"},{default:s(()=>[...a[7]||(a[7]=[m("Rejected",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),t(e(_e),null,{default:s(()=>[t(e(ge),{"as-child":""},{default:s(()=>[t(e(R),{variant:"outline",class:"ml-auto"},{default:s(()=>[a[8]||(a[8]=m(" Kolom ",-1)),t(e(ie),{class:"ml-2 h-4 w-4"})]),_:1})]),_:1}),t(e(ve),{align:"end"},{default:s(()=>[(u(!0),w(k,null,$(e(h).getAllColumns().filter(l=>l.getCanHide()),l=>(u(),p(e(xe),{key:l.id,class:"capitalize","model-value":l.getIsVisible(),"onUpdate:modelValue":c=>{l.toggleVisibility(!!c)}},{default:s(()=>[m(S(l.id),1)]),_:2},1032,["model-value","onUpdate:modelValue"]))),128))]),_:1})]),_:1})]),i("div",Ke,[t(e(he),null,{default:s(()=>[t(e(Ce),null,{default:s(()=>[(u(!0),w(k,null,$(e(h).getHeaderGroups(),l=>(u(),p(e(T),{key:l.id},{default:s(()=>[(u(!0),w(k,null,$(l.headers,c=>(u(),p(e(Re),{key:c.id},{default:s(()=>[c.isPlaceholder?z("",!0):(u(),p(e(E),{key:0,render:c.column.columnDef.header,props:c.getContext()},null,8,["render","props"]))]),_:2},1024))),128))]),_:2},1024))),128))]),_:1}),t(e(je),null,{default:s(()=>[e(h).getRowModel().rows?.length?(u(!0),w(k,{key:0},$(e(h).getRowModel().rows,l=>(u(),p(e(T),{key:l.id},{default:s(()=>[(u(!0),w(k,null,$(l.getVisibleCells(),c=>(u(),p(e(L),{key:c.id},{default:s(()=>[t(e(E),{render:c.column.columnDef.cell,props:c.getContext()},null,8,["render","props"])]),_:2},1024))),128))]),_:2},1024))),128)):(u(),p(e(T),{key:1},{default:s(()=>[t(e(L),{colspan:K.length,class:"h-24 text-center"},{default:s(()=>[...a[9]||(a[9]=[m(" Tidak ada data retur. ",-1)])]),_:1},8,["colspan"])]),_:1}))]),_:1})]),_:1})]),n.returns.last_page>1?(u(),p(se,{key:0,data:{current_page:n.returns.current_page,last_page:n.returns.last_page,per_page:n.returns.per_page,from:(n.returns.current_page-1)*n.returns.per_page+1,to:Math.min(n.returns.current_page*n.returns.per_page,n.returns.total),total:n.returns.total},url:e(C).url(),filters:{search:b.value||void 0,status:f.value!=="all"?f.value:void 0,sort_by:g.value[0]?.id||"created_at",sort_order:g.value[0]?.desc?"desc":"asc"}},null,8,["data","url","filters"])):z("",!0)]),t(N,{open:v.value.open,"onUpdate:open":a[2]||(a[2]=l=>v.value.open=l),title:"Setujui Retur?",description:`Apakah Anda yakin ingin menyetujui permintaan retur untuk order ${v.value.return?.order.order_number}?`,"confirm-text":"Setujui","cancel-text":"Batal",onConfirm:W},null,8,["open","description"]),t(N,{open:x.value.open,"onUpdate:open":a[3]||(a[3]=l=>x.value.open=l),title:"Tolak Retur?",description:`Apakah Anda yakin ingin menolak permintaan retur untuk order ${x.value.return?.order.order_number}?`,"confirm-text":"Tolak","cancel-text":"Batal",variant:"destructive",onConfirm:ee},null,8,["open","description"])]),_:1}))}});export{st as default};
