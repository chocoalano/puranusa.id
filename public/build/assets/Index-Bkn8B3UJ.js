import{d as K,r as b,p as x,q as j,c as o,g as r,w as l,e as A,b as n,u as s,s as C,M as z,t as w,v as m,F as f,x as _,y as S,n as t,z as L,j as h,A as q,B as E}from"./vendor-ppbe-N6l.js";import{u as H}from"./usePermissions-ooJviFw8.js";import{_ as I}from"./AppLayout.vue_vue_type_script_setup_true_lang-CAMiCJvC.js";import{_ as Q}from"./StatisticsCards.vue_vue_type_script_setup_true_lang-CVwBZZAL.js";import{_ as U,a as G}from"./TablePagination.vue_vue_type_script_setup_true_lang-Ba7rLZLR.js";import{_ as J,a as W}from"./CardContent.vue_vue_type_script_setup_true_lang-vqvbNoPF.js";import{_ as X}from"./CardHeader.vue_vue_type_script_setup_true_lang-_r3YWix0.js";import{_ as Y}from"./CardTitle.vue_vue_type_script_setup_true_lang-CuQE-qUU.js";import{_ as Z}from"./index-uV4J0ulh.js";import{_ as O}from"./index-BYj0gYCc.js";import{_ as ee,a as ae,b as y,c as se,d as te,e as T}from"./TableHeader.vue_vue_type_script_setup_true_lang-CR2Mc2h7.js";import"./index-CSEUMRIG.js";import"./AvatarFallback.vue_vue_type_script_setup_true_lang-DiRTNO4J.js";import"./AvatarImage.vue_vue_type_script_setup_true_lang-BAAtcDkZ.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-DA3JUaxj.js";import"./index-BUE9bFsX.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CKDVFyjr.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-B3c6JmTR.js";import"./CardDescription.vue_vue_type_script_setup_true_lang-DlqFqAdi.js";import"./Input.vue_vue_type_script_setup_true_lang-DNj-uKug.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-CzK-upws.js";const le={class:"space-y-6"},re={class:"rounded-md border"},Se=K({__name:"Index",props:{addresses:{},statistics:{},filters:{}},setup(p){const{isSuperAdmin:P,isAdmin:M}=H(),d=p,u=b(d.filters?.search||""),g=b([]);let $;const R=x(()=>[{label:"Total Alamat",value:d.statistics.total_addresses},{label:"Alamat Default",value:d.statistics.total_default},{label:"Total Pelanggan",value:d.statistics.total_customers}]),V=x(()=>[{type:"search",placeholder:"Cari pelanggan atau kota...",modelValue:u.value}]),D=()=>{clearTimeout($),$=setTimeout(()=>{h.get("/admin/settings/addresses",{search:u.value},{preserveState:!0,preserveScroll:!0})},300)},N=(e,a)=>{const c=a?.toString()||"";e===0&&(u.value=c,D())},B=e=>{confirm("Apakah Anda yakin ingin menghapus alamat ini?")&&h.delete(`/admin/settings/addresses/${e}`,{preserveScroll:!0})},k=[{id:"index",header:()=>t("div",{class:"w-12"},"No"),cell:({row:e})=>{const a=e.index+1+(d.addresses.current_page-1)*d.addresses.per_page;return t("div",{class:"font-medium"},a)}},{accessorKey:"customer",header:"Pelanggan",cell:({row:e})=>{const a=e.original.customer;return a?t("div",{class:"space-y-1"},[t("div",{class:"font-medium"},a.name),t("div",{class:"text-xs text-muted-foreground"},a.email)]):t("div",{class:"text-muted-foreground"},"N/A")}},{accessorKey:"label",header:"Label",cell:({row:e})=>{const a=e.original.is_default;return t("div",{class:"flex items-center gap-2"},[t("span",e.getValue("label")),a?t(Z,{variant:"default",class:"text-xs"},()=>"Default"):null])}},{accessorKey:"recipient_name",header:"Penerima",cell:({row:e})=>t("div",{class:"space-y-1"},[t("div",{class:"font-medium"},e.getValue("recipient_name")),t("div",{class:"text-xs text-muted-foreground"},e.original.recipient_phone)])},{accessorKey:"address_line1",header:"Alamat",cell:({row:e})=>{const a=e.original;return t("div",{class:"max-w-xs"},[t("div",{class:"text-sm"},a.address_line1),t("div",{class:"text-xs text-muted-foreground"},`${a.city_label}, ${a.province_label} ${a.postal_code}`)])}},{id:"actions",header:()=>t("div",{class:"text-right"},"Aksi"),cell:({row:e})=>{const a=e.original;return t("div",{class:"flex justify-end gap-2"},[P.value||M.value?t(O,{variant:"ghost",size:"sm",onClick:()=>B(a.id)},()=>t(L,{class:"h-4 w-4 text-destructive"})):null])}}],v=j({data:x(()=>d.addresses.data),columns:k,getCoreRowModel:E(),getSortedRowModel:q(),state:{get sorting(){return g.value}},onSortingChange:e=>{g.value=typeof e=="function"?e(g.value):e}}),F=e=>{h.get("/admin/settings/addresses",{page:e,search:u.value},{preserveState:!0,preserveScroll:!0})};return(e,a)=>(r(),o(I,{title:"Alamat Pelanggan"},{default:l(()=>[A("div",le,[n(Q,{stats:R.value,columns:3},null,8,["stats"]),n(s(J),null,{default:l(()=>[n(s(X),null,{default:l(()=>[n(s(Y),{class:"flex items-center gap-2"},{default:l(()=>[n(s(z),{class:"h-5 w-5"}),a[0]||(a[0]=C(" Alamat Pelanggan ",-1))]),_:1})]),_:1}),n(s(W),{class:"space-y-4"},{default:l(()=>[n(U,{filters:V.value,"on-update":N},null,8,["filters"]),A("div",re,[n(s(ee),null,{default:l(()=>[n(s(ae),null,{default:l(()=>[(r(!0),m(f,null,_(s(v).getHeaderGroups(),c=>(r(),o(s(y),{key:c.id},{default:l(()=>[(r(!0),m(f,null,_(c.headers,i=>(r(),o(s(se),{key:i.id},{default:l(()=>[i.isPlaceholder?w("",!0):(r(),o(s(S),{key:0,render:i.column.columnDef.header,props:i.getContext()},null,8,["render","props"]))]),_:2},1024))),128))]),_:2},1024))),128))]),_:1}),n(s(te),null,{default:l(()=>[s(v).getRowModel().rows?.length?(r(!0),m(f,{key:0},_(s(v).getRowModel().rows,c=>(r(),o(s(y),{key:c.id},{default:l(()=>[(r(!0),m(f,null,_(c.getVisibleCells(),i=>(r(),o(s(T),{key:i.id},{default:l(()=>[n(s(S),{render:i.column.columnDef.cell,props:i.getContext()},null,8,["render","props"])]),_:2},1024))),128))]),_:2},1024))),128)):(r(),o(s(y),{key:1},{default:l(()=>[n(s(T),{colspan:k.length,class:"h-24 text-center"},{default:l(()=>[...a[1]||(a[1]=[C(" Tidak ada data alamat. ",-1)])]),_:1},8,["colspan"])]),_:1}))]),_:1})]),_:1})]),p.addresses.last_page>1?(r(),o(G,{key:0,data:p.addresses,"on-page-change":F,"item-label":"alamat"},null,8,["data"])):w("",!0)]),_:1})]),_:1})])]),_:1}))}});export{Se as default};
