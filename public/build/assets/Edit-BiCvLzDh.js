import{d as x,r as h,p as d,D as F,v as S,g as w,b as r,u as i,a1 as D,w as o,e as n,a4 as u,G as k,s as g,K as E,F as $,Q as f}from"./vendor-DUvsJjJb.js";import{_ as B}from"./AppLayout.vue_vue_type_script_setup_true_lang-35H6kF2Q.js";import{_ as c}from"./index-DOPQVStN.js";import{_ as C}from"./CategoryForm.vue_vue_type_script_setup_true_lang-BIzFt3rF.js";import"./index-CMWG4mbA.js";import"./AvatarFallback.vue_vue_type_script_setup_true_lang-BsVHnDIv.js";import"./AvatarImage.vue_vue_type_script_setup_true_lang-C2b1rchR.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-DZMMg15k.js";import"./index-B_n2dl-_.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-WS0Mkk1r.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-wUHj3qHV.js";import"./Input.vue_vue_type_script_setup_true_lang-CEbduRS7.js";import"./Label.vue_vue_type_script_setup_true_lang-DSiRGPcj.js";import"./Textarea.vue_vue_type_script_setup_true_lang-5qNB9fVe.js";import"./CardContent.vue_vue_type_script_setup_true_lang-BV46Qjf6.js";import"./CardDescription.vue_vue_type_script_setup_true_lang-CKmj_gjz.js";import"./CardHeader.vue_vue_type_script_setup_true_lang-DX_68Rs3.js";import"./CardTitle.vue_vue_type_script_setup_true_lang-6MEUvz4F.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-DBmRzu0f.js";const K={class:"rounded-xl p-4 space-y-6 py-6"},N={class:"flex items-center gap-4"},P={class:"max-w-4xl"},Z=x({__name:"Edit",props:{category:{},parentCategories:{}},setup(p){const t=p,e=h({parent_id:t.category.parent_id,slug:t.category.slug,name:t.category.name,description:t.category.description||"",sort_order:t.category.sort_order,is_active:t.category.is_active,image:null}),_=d(()=>t.category.image),l=F({}),v=d(()=>l.errors),y=d(()=>l.processing),b=()=>{const a=new FormData;a.append("_method","PUT"),a.append("name",e.value.name),a.append("slug",e.value.slug),a.append("description",e.value.description||""),a.append("sort_order",String(e.value.sort_order)),a.append("is_active",e.value.is_active?"1":"0"),e.value.parent_id&&a.append("parent_id",String(e.value.parent_id)),e.value.image instanceof File?a.append("image",e.value.image):e.value.image===null&&t.category.image&&a.append("remove_image","1"),l.transform(()=>a).post(`/admin/categories/${t.category.id}`,{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{f.success("Kategori berhasil diperbarui")},onError:()=>{f.error("Gagal memperbarui kategori")}})};return(a,s)=>(w(),S($,null,[r(i(D),{title:`Edit ${p.category.name}`},null,8,["title"]),r(B,null,{default:o(()=>[n("div",K,[n("div",N,[r(i(u),{href:"/admin/categories"},{default:o(()=>[r(i(c),{variant:"outline",size:"icon"},{default:o(()=>[r(i(k),{class:"h-4 w-4"})]),_:1})]),_:1}),s[1]||(s[1]=n("div",null,[n("h1",{class:"text-3xl font-bold"},"Edit Kategori"),n("p",{class:"text-muted-foreground"},"Perbarui informasi kategori")],-1))]),n("div",P,[r(C,{"form-data":e.value,"onUpdate:formData":s[0]||(s[0]=m=>e.value=m),"parent-categories":p.parentCategories,errors:v.value,processing:y.value,"existing-image":_.value,onSubmit:b},{actions:o(({processing:m})=>[r(i(u),{href:"/admin/categories"},{default:o(()=>[r(i(c),{type:"button",variant:"outline"},{default:o(()=>[...s[2]||(s[2]=[g("Batal",-1)])]),_:1})]),_:1}),r(i(c),{type:"submit",disabled:m},{default:o(()=>[g(E(m?"Menyimpan...":"Simpan Perubahan"),1)]),_:2},1032,["disabled"])]),_:1},8,["form-data","parent-categories","errors","processing","existing-image"])])])]),_:1})],64))}});export{Z as default};
