import{d as T,r as z,v as x,g as n,b as a,u as e,a1 as j,w as l,e as r,s,as as q,K as d,a4 as M,G as E,at as y,c as o,F as k,x as B,J as D,au as P,L as A,av as h,j as J,Q as C}from"./vendor-DfMbnFaR.js";import{a as Q,_ as Y}from"./AppLayout.vue_vue_type_script_setup_true_lang-3Xwj2Srj.js";import{_ as S}from"./index-BhPH699V.js";import{_ as K}from"./index-Qe8U7avD.js";import{_ as p,a as v}from"./CardContent.vue_vue_type_script_setup_true_lang-NxxB_dAy.js";import{_ as w}from"./CardDescription.vue_vue_type_script_setup_true_lang-DW_PX5BW.js";import{_ as R}from"./CardHeader.vue_vue_type_script_setup_true_lang-Kdg7L6IL.js";import{_ as $}from"./CardTitle.vue_vue_type_script_setup_true_lang-Cj4ck2dV.js";import{_ as L,a as G,b,c as f,d as I,e as g}from"./TableHeader.vue_vue_type_script_setup_true_lang-PuAkTm4y.js";import"./index-CSEUMRIG.js";import"./AvatarFallback.vue_vue_type_script_setup_true_lang-Bqij1zEj.js";import"./AvatarImage.vue_vue_type_script_setup_true_lang-BOYUcfDs.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-NxThyEhC.js";import"./index-DnSHhU6t.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DrG-1awo.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-CpOM3BUc.js";const H={class:"rounded-xl p-4 space-y-6 py-6"},U={class:"flex items-center justify-between"},W={class:"text-3xl font-bold flex items-center gap-2"},X={class:"mt-2 text-muted-foreground"},Z={class:"grid gap-4 md:grid-cols-2"},ee={class:"p-4 rounded-lg bg-blue-50 dark:bg-blue-950 border border-blue-200 dark:border-blue-800"},te={class:"text-2xl font-bold text-blue-700 dark:text-blue-300"},ae={class:"p-4 rounded-lg bg-green-50 dark:bg-green-950 border border-green-200 dark:border-green-800"},le={class:"text-2xl font-bold text-green-700 dark:text-green-300"},se={class:"flex items-center gap-2"},ie={key:0,class:"text-center py-8 text-muted-foreground"},re={class:"flex items-center gap-2"},ne={key:0,class:"text-center py-8 text-muted-foreground"},Be=T({__name:"LifetimeRewards",props:{customer:{},activeRewards:{},claimedRewards:{}},setup(u){const O=u,_=z(null),c=m=>new Intl.NumberFormat("id-ID").format(m),V=m=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(m),F=m=>new Date(m).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}),N=m=>{_.value===null&&(_.value=m.id,J.post(`/manage/customers/${O.customer.id}/lifetime-rewards/${m.id}/claim`,{},{preserveScroll:!0,onSuccess:()=>{C.success("Berhasil",{description:`Reward "${m.name}" berhasil diklaim!`})},onError:t=>{const i=Object.values(t)[0];C.error("Gagal",{description:i||"Terjadi kesalahan saat mengklaim reward."})},onFinish:()=>{_.value=null}}))};return(m,t)=>(n(),x(k,null,[a(e(j),{title:`Lifetime Cash Rewards - ${u.customer.name}`},null,8,["title"]),a(Y,null,{default:l(()=>[r("div",H,[r("div",U,[r("div",null,[r("h1",W,[a(e(q),{class:"h-8 w-8"}),t[0]||(t[0]=s(" Lifetime Cash Rewards ",-1))]),r("p",X,[t[1]||(t[1]=s(" Reward lifetime untuk ",-1)),r("strong",null,d(u.customer.name),1),s(" ("+d(u.customer.ewallet_id)+") ",1)])]),a(e(M),{href:e(Q).url(u.customer.id)},{default:l(()=>[a(e(S),{variant:"outline"},{default:l(()=>[a(e(E),{class:"mr-2 h-4 w-4"}),t[2]||(t[2]=s(" Kembali ke Detail ",-1))]),_:1})]),_:1},8,["href"])]),a(e(p),null,{default:l(()=>[a(e(R),null,{default:l(()=>[a(e($),{class:"text-lg"},{default:l(()=>[...t[3]||(t[3]=[s("Omset Retail Member",-1)])]),_:1}),a(e(w),null,{default:l(()=>[...t[4]||(t[4]=[s(" Omset retail yang digunakan untuk syarat klaim lifetime reward ",-1)])]),_:1})]),_:1}),a(e(v),null,{default:l(()=>[r("div",Z,[r("div",ee,[t[5]||(t[5]=r("p",{class:"text-sm text-blue-600 dark:text-blue-400 font-medium"},"Omset Grup Kiri (Plan B)",-1)),r("p",te,d(c(u.customer.omzet_left))+" BV ",1)]),r("div",ae,[t[6]||(t[6]=r("p",{class:"text-sm text-green-600 dark:text-green-400 font-medium"},"Omset Grup Kanan (Plan B)",-1)),r("p",le,d(c(u.customer.omzet_right))+" BV ",1)])])]),_:1})]),_:1}),a(e(p),null,{default:l(()=>[a(e(R),null,{default:l(()=>[r("div",se,[a(e(y),{class:"h-5 w-5 text-primary"}),a(e($),null,{default:l(()=>[...t[7]||(t[7]=[s("Reward Lifetime Tersedia",-1)])]),_:1})]),a(e(w),null,{default:l(()=>[...t[8]||(t[8]=[s(" Daftar reward lifetime yang dapat diklaim jika omset memenuhi syarat ",-1)])]),_:1})]),_:1}),a(e(v),null,{default:l(()=>[u.activeRewards.length===0?(n(),x("div",ie,[a(e(y),{class:"h-12 w-12 mx-auto mb-3 opacity-50"}),t[9]||(t[9]=r("p",null,"Tidak ada reward lifetime aktif saat ini",-1))])):(n(),o(e(L),{key:1},{default:l(()=>[a(e(G),null,{default:l(()=>[a(e(b),null,{default:l(()=>[a(e(f),null,{default:l(()=>[...t[10]||(t[10]=[s("Nama",-1)])]),_:1}),a(e(f),null,{default:l(()=>[...t[11]||(t[11]=[s("Reward",-1)])]),_:1}),a(e(f),{class:"text-right"},{default:l(()=>[...t[12]||(t[12]=[s("Syarat Omset Grup Kiri (BV)",-1)])]),_:1}),a(e(f),{class:"text-right"},{default:l(()=>[...t[13]||(t[13]=[s("Syarat Omset Grup Kanan (BV)",-1)])]),_:1}),a(e(f),{class:"text-center"},{default:l(()=>[...t[14]||(t[14]=[s("Klaim",-1)])]),_:1})]),_:1})]),_:1}),a(e(I),null,{default:l(()=>[(n(!0),x(k,null,B(u.activeRewards,i=>(n(),o(e(b),{key:i.id},{default:l(()=>[a(e(g),{class:"font-medium"},{default:l(()=>[s(d(i.name),1)]),_:2},1024),a(e(g),null,{default:l(()=>[s(d(i.reward?V(i.value):"-"),1)]),_:2},1024),a(e(g),{class:"text-right"},{default:l(()=>[r("span",{class:D(u.customer.omzet_left>=i.bv_required?"text-green-600 font-semibold":"")},d(c(i.bv_required)),3)]),_:2},1024),a(e(g),{class:"text-right"},{default:l(()=>[r("span",{class:D(u.customer.omzet_right>=i.bv_required?"text-green-600 font-semibold":"")},d(c(i.bv_required)),3)]),_:2},1024),a(e(g),{class:"text-center"},{default:l(()=>[i.already_claimed?(n(),o(e(K),{key:0,variant:"secondary",class:"bg-gray-100 text-gray-600"},{default:l(()=>[a(e(P),{class:"h-3 w-3 mr-1"}),t[15]||(t[15]=s(" Sudah Diklaim ",-1))]),_:1})):i.can_claim?(n(),o(e(S),{key:1,size:"sm",onClick:ue=>N(i),disabled:_.value!==null},{default:l(()=>[_.value===i.id?(n(),o(e(A),{key:0,class:"h-4 w-4 mr-1 animate-spin"})):(n(),o(e(y),{key:1,class:"h-4 w-4 mr-1"})),s(" "+d(_.value===i.id?"Mengklaim...":"Klaim"),1)]),_:2},1032,["onClick","disabled"])):(n(),o(e(K),{key:2,variant:"outline",class:"text-muted-foreground"},{default:l(()=>[...t[16]||(t[16]=[s(" Belum Memenuhi Syarat ",-1)])]),_:1}))]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}))]),_:1})]),_:1}),a(e(p),null,{default:l(()=>[a(e(R),null,{default:l(()=>[r("div",re,[a(e(h),{class:"h-5 w-5 text-yellow-500"}),a(e($),null,{default:l(()=>[...t[17]||(t[17]=[s("Reward Yang Sudah Diklaim",-1)])]),_:1})]),a(e(w),null,{default:l(()=>[...t[18]||(t[18]=[s(" Riwayat reward lifetime yang telah berhasil diklaim oleh member ini ",-1)])]),_:1})]),_:1}),a(e(v),null,{default:l(()=>[u.claimedRewards.length===0?(n(),x("div",ne,[a(e(h),{class:"h-12 w-12 mx-auto mb-3 opacity-50"}),t[19]||(t[19]=r("p",null,"Belum ada reward yang diklaim",-1))])):(n(),o(e(L),{key:1},{default:l(()=>[a(e(G),null,{default:l(()=>[a(e(b),null,{default:l(()=>[a(e(f),null,{default:l(()=>[...t[20]||(t[20]=[s("Reward",-1)])]),_:1}),a(e(f),{class:"text-right"},{default:l(()=>[...t[21]||(t[21]=[s("Syarat Omset Group (BV)",-1)])]),_:1}),a(e(f),null,{default:l(()=>[...t[22]||(t[22]=[s("Tanggal Klaim",-1)])]),_:1})]),_:1})]),_:1}),a(e(I),null,{default:l(()=>[(n(!0),x(k,null,B(u.claimedRewards,i=>(n(),o(e(b),{key:i.id},{default:l(()=>[a(e(g),{class:"font-medium"},{default:l(()=>[s(d(i.reward),1)]),_:2},1024),a(e(g),{class:"text-right"},{default:l(()=>[s(d(c(i.bv)),1)]),_:2},1024),a(e(g),null,{default:l(()=>[s(d(F(i.claimed_at)),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}))]),_:1})]),_:1})])]),_:1})],64))}});export{Be as default};
