import{d as B,r as b,p as x,q as F,c as i,g as r,w as l,e as C,b as n,u as s,s as w,M as K,t as A,v as m,F as f,x as _,y as S,n as t,z as j,j as h,A as z,B as L}from"./vendor-zBKKL15G.js";import{_ as q}from"./AppLayout.vue_vue_type_script_setup_true_lang-FntsTJOn.js";import{_ as E}from"./StatisticsCards.vue_vue_type_script_setup_true_lang-9WzVdCCY.js";import{_ as H,a as I}from"./TablePagination.vue_vue_type_script_setup_true_lang-CtJ8ivnB.js";import{_ as Q,a as U}from"./CardContent.vue_vue_type_script_setup_true_lang-DMEXwOYw.js";import{_ as G}from"./CardHeader.vue_vue_type_script_setup_true_lang-DAmVrl_s.js";import{_ as J}from"./CardTitle.vue_vue_type_script_setup_true_lang-BNxuRtlf.js";import{_ as W}from"./index-Bgaf6fPq.js";import{_ as X}from"./index-D-ZDeNW7.js";import{_ as Y,a as Z,b as y,c as O,d as ee,e as T}from"./TableHeader.vue_vue_type_script_setup_true_lang-B4pjwwGU.js";import"./index-B7Ms5jW_.js";import"./AvatarFallback.vue_vue_type_script_setup_true_lang-kKofCkkG.js";import"./AvatarImage.vue_vue_type_script_setup_true_lang-CzoF4v2h.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-CJL3Y8wp.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-5qqdoF-N.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-DSZTc71l.js";import"./CardDescription.vue_vue_type_script_setup_true_lang-D-xxhgKX.js";import"./Input.vue_vue_type_script_setup_true_lang-B8h33Tay.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-DhBu_Vgs.js";const ae={class:"space-y-6"},se={class:"rounded-md border"},ke=B({__name:"Index",props:{addresses:{},statistics:{},filters:{}},setup(p){const d=p,u=b(d.filters?.search||""),g=b([]);let $;const M=x(()=>[{label:"Total Alamat",value:d.statistics.total_addresses},{label:"Alamat Default",value:d.statistics.total_default},{label:"Total Pelanggan",value:d.statistics.total_customers}]),P=x(()=>[{type:"search",placeholder:"Cari pelanggan atau kota...",modelValue:u.value}]),R=()=>{clearTimeout($),$=setTimeout(()=>{h.get("/admin/settings/addresses",{search:u.value},{preserveState:!0,preserveScroll:!0})},300)},V=(e,a)=>{const c=a?.toString()||"";e===0&&(u.value=c,R())},D=e=>{confirm("Apakah Anda yakin ingin menghapus alamat ini?")&&h.delete(`/admin/settings/addresses/${e}`,{preserveScroll:!0})},k=[{id:"index",header:()=>t("div",{class:"w-12"},"No"),cell:({row:e})=>{const a=e.index+1+(d.addresses.current_page-1)*d.addresses.per_page;return t("div",{class:"font-medium"},a)}},{accessorKey:"customer",header:"Pelanggan",cell:({row:e})=>{const a=e.original.customer;return a?t("div",{class:"space-y-1"},[t("div",{class:"font-medium"},a.name),t("div",{class:"text-xs text-muted-foreground"},a.email)]):t("div",{class:"text-muted-foreground"},"N/A")}},{accessorKey:"label",header:"Label",cell:({row:e})=>{const a=e.original.is_default;return t("div",{class:"flex items-center gap-2"},[t("span",e.getValue("label")),a?t(W,{variant:"default",class:"text-xs"},()=>"Default"):null])}},{accessorKey:"recipient_name",header:"Penerima",cell:({row:e})=>t("div",{class:"space-y-1"},[t("div",{class:"font-medium"},e.getValue("recipient_name")),t("div",{class:"text-xs text-muted-foreground"},e.original.recipient_phone)])},{accessorKey:"address_line1",header:"Alamat",cell:({row:e})=>{const a=e.original;return t("div",{class:"max-w-xs"},[t("div",{class:"text-sm"},a.address_line1),t("div",{class:"text-xs text-muted-foreground"},`${a.city_label}, ${a.province_label} ${a.postal_code}`)])}},{id:"actions",header:()=>t("div",{class:"text-right"},"Aksi"),cell:({row:e})=>{const a=e.original;return t("div",{class:"flex justify-end gap-2"},[t(X,{variant:"ghost",size:"sm",onClick:()=>D(a.id)},()=>t(j,{class:"h-4 w-4 text-destructive"}))])}}],v=F({data:x(()=>d.addresses.data),columns:k,getCoreRowModel:L(),getSortedRowModel:z(),state:{get sorting(){return g.value}},onSortingChange:e=>{g.value=typeof e=="function"?e(g.value):e}}),N=e=>{h.get("/admin/settings/addresses",{page:e,search:u.value},{preserveState:!0,preserveScroll:!0})};return(e,a)=>(r(),i(q,{title:"Alamat Pelanggan"},{default:l(()=>[C("div",ae,[n(E,{stats:M.value,columns:3},null,8,["stats"]),n(s(Q),null,{default:l(()=>[n(s(G),null,{default:l(()=>[n(s(J),{class:"flex items-center gap-2"},{default:l(()=>[n(s(K),{class:"h-5 w-5"}),a[0]||(a[0]=w(" Alamat Pelanggan ",-1))]),_:1})]),_:1}),n(s(U),{class:"space-y-4"},{default:l(()=>[n(H,{filters:P.value,"on-update":V},null,8,["filters"]),C("div",se,[n(s(Y),null,{default:l(()=>[n(s(Z),null,{default:l(()=>[(r(!0),m(f,null,_(s(v).getHeaderGroups(),c=>(r(),i(s(y),{key:c.id},{default:l(()=>[(r(!0),m(f,null,_(c.headers,o=>(r(),i(s(O),{key:o.id},{default:l(()=>[o.isPlaceholder?A("",!0):(r(),i(s(S),{key:0,render:o.column.columnDef.header,props:o.getContext()},null,8,["render","props"]))]),_:2},1024))),128))]),_:2},1024))),128))]),_:1}),n(s(ee),null,{default:l(()=>[s(v).getRowModel().rows?.length?(r(!0),m(f,{key:0},_(s(v).getRowModel().rows,c=>(r(),i(s(y),{key:c.id},{default:l(()=>[(r(!0),m(f,null,_(c.getVisibleCells(),o=>(r(),i(s(T),{key:o.id},{default:l(()=>[n(s(S),{render:o.column.columnDef.cell,props:o.getContext()},null,8,["render","props"])]),_:2},1024))),128))]),_:2},1024))),128)):(r(),i(s(y),{key:1},{default:l(()=>[n(s(T),{colspan:k.length,class:"h-24 text-center"},{default:l(()=>[...a[1]||(a[1]=[w(" Tidak ada data alamat. ",-1)])]),_:1},8,["colspan"])]),_:1}))]),_:1})]),_:1})]),p.addresses.last_page>1?(r(),i(I,{key:0,data:p.addresses,"on-page-change":N,"item-label":"alamat"},null,8,["data"])):A("",!0)]),_:1})]),_:1})])]),_:1}))}});export{ke as default};
