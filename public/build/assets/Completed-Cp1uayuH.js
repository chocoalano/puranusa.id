import{_ as N}from"./index-qWBV6i01.js";import{_ as C,v as P}from"./index-C_d1QX2L.js";import{_ as $,a as k}from"./CardContent.vue_vue_type_script_setup_true_lang-CqrB5hxD.js";import{_ as M}from"./CardHeader.vue_vue_type_script_setup_true_lang-CAU7O7lt.js";import{_ as D}from"./CardTitle.vue_vue_type_script_setup_true_lang-CXovuBmY.js";import{_ as Y,a as ee,b as te}from"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-B92NEDT-.js";import{_ as ae}from"./DropdownMenuCheckboxItem.vue_vue_type_script_setup_true_lang-BUzbctbx.js";import{_ as se}from"./Input.vue_vue_type_script_setup_true_lang-BCOvYMLd.js";import{_ as le}from"./Pagination.vue_vue_type_script_setup_true_lang-R3MZEea8.js";import{_ as U,a as A,b as B,c as E,d as g}from"./SelectValue.vue_vue_type_script_setup_true_lang-uung8Eko.js";import{_ as re,a as oe,b as F,c as de,d as ne,e as L}from"./TableHeader.vue_vue_type_script_setup_true_lang-BhipakAw.js";import{_ as ue}from"./AppLayout.vue_vue_type_script_setup_true_lang-4ba7MJZZ.js";import{d as ie,r as y,q as me,E as q,j as z,c as f,g as u,w as s,b as a,e as d,u as e,a1 as fe,t as H,s as i,a2 as ce,K as b,aB as ge,a3 as pe,aL as _e,Z as ve,v as w,F as h,x as S,aa as xe,y as O,n as o,ao as Z,aq as ye,a4 as be,aM as we,A as he,B as Se}from"./vendor-4-BZYpFr.js";import{u as Ve}from"./usePermissions-DDUSam5l.js";import"./index-CSEUMRIG.js";import"./AvatarFallback.vue_vue_type_script_setup_true_lang-CQ0bN-pz.js";import"./AvatarImage.vue_vue_type_script_setup_true_lang-DAlPCySi.js";import"./index-BUE9bFsX.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DLcPllPw.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-CdMXDPSC.js";const Ce={class:"rounded-xl p-4 space-y-6 py-6"},$e={class:"grid gap-4 md:grid-cols-4"},ke={class:"text-2xl font-bold"},Me={class:"text-2xl font-bold"},De={class:"text-2xl font-bold"},Pe={class:"text-2xl font-bold"},Fe={class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},Re={class:"flex flex-1 gap-4"},Te={class:"relative flex-1 max-w-sm"},je={class:"rounded-md border"},tt=ie({__name:"Completed",props:{orders:{},statistics:{},paymentMethods:{},filters:{}},setup(n){const{isSuperAdmin:G,isAdmin:J}=Ve(),p=n,Q=[{title:"Pesanan Selesai",href:"/admin/orders/completed"}],x=y(p.filters.search||""),c=y(p.filters.status||"all"),_=y(p.filters.payment_method||"all"),v=y([{id:p.filters.sort_by,desc:p.filters.sort_order==="desc"}]),R=y([]),T=y({}),j=l=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(l),W=l=>new Date(l).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),X=l=>({pending:"secondary",processing:"outline",shipped:"default",delivered:"default",cancelled:"destructive",completed:"default"})[l]||"secondary",I=[{id:"index",header:()=>o("div",{class:"w-12"},"No"),cell:({row:l})=>{const t=l.index+1+(p.orders.current_page-1)*p.orders.per_page;return o("div",{class:"font-medium"},t)}},{accessorKey:"order_number",header:({column:l})=>o(C,{variant:"ghost",onClick:()=>l.toggleSorting(l.getIsSorted()==="asc"),class:"-ml-4"},()=>["Order Number",o(Z,{class:"ml-2 h-4 w-4"})]),cell:({row:l})=>o("div",[o("div",{class:"font-medium font-mono"},l.original.order_number),o("div",{class:"text-xs text-muted-foreground"},l.original.customer.name)])},{accessorKey:"total_amount",header:()=>o("div",{class:"text-right"},"Total"),cell:({row:l})=>o("div",{class:"text-right font-medium"},()=>j(l.getValue("total_amount")))},{accessorKey:"payment_status",header:()=>"Payment",cell:({row:l})=>{const t=l.getValue("payment_status");return o(N,{variant:t==="paid"?"default":"secondary"},()=>t)}},{id:"payment_method",header:()=>"Metode",cell:({row:l})=>{const r=l.original.payments?.[0]?.method?.name;return o("div",{class:"text-sm"},{default:()=>r||"-"})}},{accessorKey:"status",header:()=>"Status",cell:({row:l})=>{const t=l.getValue("status");return o(N,{variant:X(t)},()=>t)}},{accessorKey:"created_at",header:({column:l})=>o(C,{variant:"ghost",onClick:()=>l.toggleSorting(l.getIsSorted()==="asc"),class:"-ml-4"},()=>["Tanggal",o(Z,{class:"ml-2 h-4 w-4"})]),cell:({row:l})=>W(l.getValue("created_at"))},{id:"actions",header:()=>o("div",{class:"text-right"},"Actions"),cell:({row:l})=>{const t=l.original,r=[];return(G||J)&&r.push(o(be,{href:`/admin/orders/${t.id}`},()=>o(C,{variant:"outline",size:"sm"},()=>o(ye,{class:"h-4 w-4"})))),o("div",{class:"flex justify-end gap-2"},r)}}],V=me({get data(){return p.orders.data},columns:I,getCoreRowModel:Se(),getSortedRowModel:he(),getFilteredRowModel:we(),onSortingChange:l=>P(l,v),onColumnFiltersChange:l=>P(l,R),onColumnVisibilityChange:l=>P(l,T),state:{get sorting(){return v.value},get columnFilters(){return R.value},get columnVisibility(){return T.value}},manualSorting:!0});q(v,l=>{l.length>0&&z.get("/admin/orders",{search:x.value||void 0,status:c.value!=="all"?c.value:void 0,sort_by:l[0].id,sort_order:l[0].desc?"desc":"asc"},{preserveState:!0,preserveScroll:!0})},{deep:!0});let K;return q([x,c,_],()=>{clearTimeout(K),K=setTimeout(()=>{z.get("/admin/orders/completed",{search:x.value||void 0,status:c.value!=="all"?c.value:void 0,payment_method:_.value!=="all"?_.value:void 0,sort_by:v.value[0]?.id||"created_at",sort_order:v.value[0]?.desc?"desc":"asc"},{preserveState:!0,preserveScroll:!0})},300)}),(l,t)=>(u(),f(ue,{breadcrumbs:Q},{default:s(()=>[a(e(fe),{title:"Pesanan Selesai"}),d("div",Ce,[t[21]||(t[21]=d("div",{class:"flex items-center justify-between"},[d("div",null,[d("h1",{class:"text-3xl font-bold tracking-tight"},"Pesanan Selesai"),d("p",{class:"text-muted-foreground"},"Kelola pesanan yang sudah selesai")])],-1)),d("div",$e,[a(e($),null,{default:s(()=>[a(e(M),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[a(e(D),{class:"text-sm font-medium"},{default:s(()=>[...t[3]||(t[3]=[i("Total Pesanan",-1)])]),_:1}),a(e(ce),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),a(e(k),null,{default:s(()=>[d("div",ke,b(n.statistics.total_orders),1),t[4]||(t[4]=d("p",{class:"text-xs text-muted-foreground"},"Semua pesanan",-1))]),_:1})]),_:1}),a(e($),null,{default:s(()=>[a(e(M),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[a(e(D),{class:"text-sm font-medium"},{default:s(()=>[...t[5]||(t[5]=[i("Total Pendapatan",-1)])]),_:1}),a(e(ge),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),a(e(k),null,{default:s(()=>[d("div",Me,b(j(n.statistics.total_revenue)),1),t[6]||(t[6]=d("p",{class:"text-xs text-muted-foreground"},"Revenue keseluruhan",-1))]),_:1})]),_:1}),a(e($),null,{default:s(()=>[a(e(M),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[a(e(D),{class:"text-sm font-medium"},{default:s(()=>[...t[7]||(t[7]=[i("Pending",-1)])]),_:1}),a(e(pe),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),a(e(k),null,{default:s(()=>[d("div",De,b(n.statistics.total_pending),1),t[8]||(t[8]=d("p",{class:"text-xs text-muted-foreground"},"Menunggu pembayaran",-1))]),_:1})]),_:1}),a(e($),null,{default:s(()=>[a(e(M),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[a(e(D),{class:"text-sm font-medium"},{default:s(()=>[...t[9]||(t[9]=[i("Selesai",-1)])]),_:1}),a(e(_e),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),a(e(k),null,{default:s(()=>[d("div",Pe,b(n.statistics.total_completed),1),t[10]||(t[10]=d("p",{class:"text-xs text-muted-foreground"},"Order selesai",-1))]),_:1})]),_:1})]),d("div",Fe,[d("div",Re,[d("div",Te,[a(e(ve),{class:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),a(e(se),{modelValue:x.value,"onUpdate:modelValue":t[0]||(t[0]=r=>x.value=r),placeholder:"Cari nomor order atau nama pelanggan...",class:"pl-9"},null,8,["modelValue"])]),a(e(U),{modelValue:c.value,"onUpdate:modelValue":t[1]||(t[1]=r=>c.value=r)},{default:s(()=>[a(e(A),{class:"w-[180px]"},{default:s(()=>[a(e(B),{placeholder:"Semua Status"})]),_:1}),a(e(E),null,{default:s(()=>[a(e(g),{value:"all"},{default:s(()=>[...t[11]||(t[11]=[i("Semua Status",-1)])]),_:1}),a(e(g),{value:"pending"},{default:s(()=>[...t[12]||(t[12]=[i("Pending",-1)])]),_:1}),a(e(g),{value:"processing"},{default:s(()=>[...t[13]||(t[13]=[i("Processing",-1)])]),_:1}),a(e(g),{value:"shipped"},{default:s(()=>[...t[14]||(t[14]=[i("Shipped",-1)])]),_:1}),a(e(g),{value:"delivered"},{default:s(()=>[...t[15]||(t[15]=[i("Delivered",-1)])]),_:1}),a(e(g),{value:"completed"},{default:s(()=>[...t[16]||(t[16]=[i("Completed",-1)])]),_:1}),a(e(g),{value:"cancelled"},{default:s(()=>[...t[17]||(t[17]=[i("Cancelled",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(e(U),{modelValue:_.value,"onUpdate:modelValue":t[2]||(t[2]=r=>_.value=r)},{default:s(()=>[a(e(A),{class:"w-[200px]"},{default:s(()=>[a(e(B),{placeholder:"Metode Pembayaran"})]),_:1}),a(e(E),null,{default:s(()=>[a(e(g),{value:"all"},{default:s(()=>[...t[18]||(t[18]=[i("Semua Metode",-1)])]),_:1}),(u(!0),w(h,null,S(n.paymentMethods,r=>(u(),f(e(g),{key:r.id,value:r.id.toString()},{default:s(()=>[i(b(r.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),a(e(Y),null,{default:s(()=>[a(e(ee),{"as-child":""},{default:s(()=>[a(e(C),{variant:"outline",class:"ml-auto"},{default:s(()=>[t[19]||(t[19]=i(" Kolom ",-1)),a(e(xe),{class:"ml-2 h-4 w-4"})]),_:1})]),_:1}),a(e(te),{align:"end"},{default:s(()=>[(u(!0),w(h,null,S(e(V).getAllColumns().filter(r=>r.getCanHide()),r=>(u(),f(e(ae),{key:r.id,class:"capitalize","model-value":r.getIsVisible(),"onUpdate:modelValue":m=>{r.toggleVisibility(!!m)}},{default:s(()=>[i(b(r.id),1)]),_:2},1032,["model-value","onUpdate:modelValue"]))),128))]),_:1})]),_:1})]),d("div",je,[a(e(re),null,{default:s(()=>[a(e(oe),null,{default:s(()=>[(u(!0),w(h,null,S(e(V).getHeaderGroups(),r=>(u(),f(e(F),{key:r.id},{default:s(()=>[(u(!0),w(h,null,S(r.headers,m=>(u(),f(e(de),{key:m.id},{default:s(()=>[m.isPlaceholder?H("",!0):(u(),f(e(O),{key:0,render:m.column.columnDef.header,props:m.getContext()},null,8,["render","props"]))]),_:2},1024))),128))]),_:2},1024))),128))]),_:1}),a(e(ne),null,{default:s(()=>[e(V).getRowModel().rows?.length?(u(!0),w(h,{key:0},S(e(V).getRowModel().rows,r=>(u(),f(e(F),{key:r.id},{default:s(()=>[(u(!0),w(h,null,S(r.getVisibleCells(),m=>(u(),f(e(L),{key:m.id},{default:s(()=>[a(e(O),{render:m.column.columnDef.cell,props:m.getContext()},null,8,["render","props"])]),_:2},1024))),128))]),_:2},1024))),128)):(u(),f(e(F),{key:1},{default:s(()=>[a(e(L),{colspan:I.length,class:"h-24 text-center"},{default:s(()=>[...t[20]||(t[20]=[i(" Tidak ada data pesanan. ",-1)])]),_:1},8,["colspan"])]),_:1}))]),_:1})]),_:1})]),n.orders.last_page>1?(u(),f(le,{key:0,data:{current_page:n.orders.current_page,last_page:n.orders.last_page,per_page:n.orders.per_page,from:(n.orders.current_page-1)*n.orders.per_page+1,to:Math.min(n.orders.current_page*n.orders.per_page,n.orders.total),total:n.orders.total},url:"/admin/orders/completed",filters:{search:x.value||void 0,status:c.value!=="all"?c.value:void 0,payment_method:_.value!=="all"?_.value:void 0,sort_by:v.value[0]?.id||"created_at",sort_order:v.value[0]?.desc?"desc":"asc"}},null,8,["data","filters"])):H("",!0)])]),_:1}))}});export{tt as default};
