import{d as Q,r as y,q as X,E as j,j as N,v as w,g as u,b as a,u as t,a0 as Y,w as s,e as n,c as g,t as A,s as r,as as R,K as V,ap as ee,Z as te,a9 as ae,F as b,x as k,y as E,n as i,am as L,aF as se,A as le,B as oe}from"./vendor-DGO3ezSh.js";import{_ as re}from"./AppLayout.vue_vue_type_script_setup_true_lang-C887HeWN.js";import{_ as ne}from"./Pagination.vue_vue_type_script_setup_true_lang-DUAmSFek.js";import{_ as D,v as U}from"./index-p1XqrTaB.js";import{_ as $,a as S}from"./CardContent.vue_vue_type_script_setup_true_lang-Bn_j05SD.js";import{_ as T}from"./CardHeader.vue_vue_type_script_setup_true_lang-CXiZUsYP.js";import{_ as F}from"./CardTitle.vue_vue_type_script_setup_true_lang-C8sdAIK-.js";import{_ as ue}from"./index-Dh_LIAYg.js";import{_ as ie,a as de,b as me}from"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-CBMnmEAQ.js";import{_ as fe}from"./DropdownMenuCheckboxItem.vue_vue_type_script_setup_true_lang-CtCt8S81.js";import{_ as ce}from"./Input.vue_vue_type_script_setup_true_lang-BOQ98pUO.js";import{_ as W,a as z,b as H,c as O,d as m}from"./SelectValue.vue_vue_type_script_setup_true_lang-Dp0JlaKf.js";import{_ as pe,a as ge,b as K,c as _e,d as ve,e as q}from"./TableHeader.vue_vue_type_script_setup_true_lang-_JM2htXg.js";import"./index-DaR_mHDg.js";import"./AvatarFallback.vue_vue_type_script_setup_true_lang-BCTRkhoz.js";import"./AvatarImage.vue_vue_type_script_setup_true_lang-IyrdkPzY.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-aUuRqzXG.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-B0H8bar2.js";const xe={class:"rounded-xl p-4 space-y-6 py-6"},ye={class:"grid gap-4 md:grid-cols-4"},we={class:"text-2xl font-bold"},be={class:"text-2xl font-bold"},Ve={class:"text-2xl font-bold"},ke={class:"text-2xl font-bold"},Ce={class:"flex flex-col gap-4"},$e={class:"flex flex-col gap-4 sm:flex-row sm:items-center"},Se={class:"relative flex-1 max-w-sm"},Te={class:"rounded-md border"},Oe=Q({__name:"Transactions",props:{transactions:{},statistics:{},filters:{}},setup(d){const v=d,x=y(v.filters?.search||""),c=y(v.filters?.type||"all"),p=y(v.filters?.status||"all"),_=y([]),M=y([]),h=y({});let B;const I=l=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(l),J=l=>new Date(l).toLocaleDateString("id-ID",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}),Z=l=>({pending:"secondary",completed:"default",failed:"destructive",cancelled:"outline"})[l]||"outline",G=l=>({topup:"Top Up",withdrawal:"Penarikan",order_payment:"Pembayaran Order",refund:"Refund",commission:"Komisi",bonus:"Bonus"})[l]||l,P=[{id:"index",header:()=>i("div",{class:"w-12"},"No"),cell:({row:l})=>{const e=l.index+1+(v.transactions.current_page-1)*v.transactions.per_page;return i("div",{class:"font-medium"},e)}},{accessorKey:"transaction_ref",header:"Ref. Transaksi",cell:({row:l})=>i("div",{class:"font-mono text-xs"},l.getValue("transaction_ref"))},{accessorKey:"customer",header:"Customer",cell:({row:l})=>{const e=l.original.customer;return i("div",[i("div",{class:"font-medium"},e.name),i("div",{class:"text-xs text-muted-foreground"},e.email)])}},{accessorKey:"type",header:"Tipe",cell:({row:l})=>{const e=l.getValue("type");return i("div",{class:"capitalize"},G(e))}},{accessorKey:"amount",header:({column:l})=>i(D,{variant:"ghost",onClick:()=>l.toggleSorting(l.getIsSorted()==="asc"),class:"-ml-4"},()=>["Jumlah",i(L,{class:"ml-2 h-4 w-4"})]),cell:({row:l})=>{const e=parseFloat(l.getValue("amount")),o=l.original.type;return i("div",{class:`font-bold ${o==="topup"||o==="refund"||o==="commission"||o==="bonus"?"text-green-600":"text-red-600"}`},I(e))}},{accessorKey:"status",header:"Status",cell:({row:l})=>{const e=l.getValue("status");return i(ue,{variant:Z(e)},()=>e.toUpperCase())}},{accessorKey:"created_at",header:({column:l})=>i(D,{variant:"ghost",onClick:()=>l.toggleSorting(l.getIsSorted()==="asc"),class:"-ml-4"},()=>["Tanggal",i(L,{class:"ml-2 h-4 w-4"})]),cell:({row:l})=>i("div",{class:"text-sm"},J(l.getValue("created_at")))}],C=X({get data(){return v.transactions.data},columns:P,getCoreRowModel:oe(),getSortedRowModel:le(),getFilteredRowModel:se(),onSortingChange:l=>U(l,_),onColumnFiltersChange:l=>U(l,M),onColumnVisibilityChange:l=>U(l,h),state:{get sorting(){return _.value},get columnFilters(){return M.value},get columnVisibility(){return h.value}},manualSorting:!0});return j(_,l=>{l.length>0&&N.get("/admin/wallet-transactions",{search:x.value||void 0,type:c.value!=="all"?c.value:void 0,status:p.value!=="all"?p.value:void 0,sort_by:l[0].id,sort_order:l[0].desc?"desc":"asc"},{preserveState:!0,preserveScroll:!0})},{deep:!0}),j([x,c,p],()=>{clearTimeout(B),B=setTimeout(()=>{N.get("/admin/wallet-transactions",{search:x.value||void 0,type:c.value!=="all"?c.value:void 0,status:p.value!=="all"?p.value:void 0,sort_by:_.value[0]?.id||"created_at",sort_order:_.value[0]?.desc?"desc":"asc"},{preserveState:!0,preserveScroll:!0})},300)}),(l,e)=>(u(),w(b,null,[a(t(Y),{title:"Transaksi E-Wallet"}),a(re,null,{default:s(()=>[n("div",xe,[e[25]||(e[25]=n("div",null,[n("h2",{class:"text-3xl font-bold tracking-tight"},"Transaksi E-Wallet"),n("p",{class:"text-muted-foreground"},"Monitoring semua transaksi e-wallet customer")],-1)),n("div",ye,[a(t($),null,{default:s(()=>[a(t(T),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[a(t(F),{class:"text-sm font-medium"},{default:s(()=>[...e[3]||(e[3]=[r("Total Transaksi",-1)])]),_:1}),a(t(R),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),a(t(S),null,{default:s(()=>[n("div",we,V(d.statistics.total_transactions),1),e[4]||(e[4]=n("p",{class:"text-xs text-muted-foreground"},"Semua transaksi",-1))]),_:1})]),_:1}),a(t($),null,{default:s(()=>[a(t(T),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[a(t(F),{class:"text-sm font-medium"},{default:s(()=>[...e[5]||(e[5]=[r("Total Amount",-1)])]),_:1}),a(t(ee),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),a(t(S),null,{default:s(()=>[n("div",be,V(I(d.statistics.total_amount)),1),e[6]||(e[6]=n("p",{class:"text-xs text-muted-foreground"},"Completed",-1))]),_:1})]),_:1}),a(t($),null,{default:s(()=>[a(t(T),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[a(t(F),{class:"text-sm font-medium"},{default:s(()=>[...e[7]||(e[7]=[r("Pending",-1)])]),_:1}),a(t(R),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),a(t(S),null,{default:s(()=>[n("div",Ve,V(d.statistics.total_pending),1),e[8]||(e[8]=n("p",{class:"text-xs text-muted-foreground"},"Menunggu proses",-1))]),_:1})]),_:1}),a(t($),null,{default:s(()=>[a(t(T),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[a(t(F),{class:"text-sm font-medium"},{default:s(()=>[...e[9]||(e[9]=[r("Completed",-1)])]),_:1}),a(t(R),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),a(t(S),null,{default:s(()=>[n("div",ke,V(d.statistics.total_completed),1),e[10]||(e[10]=n("p",{class:"text-xs text-muted-foreground"},"Selesai",-1))]),_:1})]),_:1})]),n("div",Ce,[n("div",$e,[n("div",Se,[a(t(te),{class:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),a(t(ce),{modelValue:x.value,"onUpdate:modelValue":e[0]||(e[0]=o=>x.value=o),placeholder:"Cari customer atau ref...",class:"pl-9"},null,8,["modelValue"])]),a(t(W),{modelValue:c.value,"onUpdate:modelValue":e[1]||(e[1]=o=>c.value=o)},{default:s(()=>[a(t(z),{class:"w-[180px]"},{default:s(()=>[a(t(H),{placeholder:"Semua Tipe"})]),_:1}),a(t(O),null,{default:s(()=>[a(t(m),{value:"all"},{default:s(()=>[...e[11]||(e[11]=[r("Semua Tipe",-1)])]),_:1}),a(t(m),{value:"topup"},{default:s(()=>[...e[12]||(e[12]=[r("Top Up",-1)])]),_:1}),a(t(m),{value:"withdrawal"},{default:s(()=>[...e[13]||(e[13]=[r("Penarikan",-1)])]),_:1}),a(t(m),{value:"order_payment"},{default:s(()=>[...e[14]||(e[14]=[r("Pembayaran Order",-1)])]),_:1}),a(t(m),{value:"refund"},{default:s(()=>[...e[15]||(e[15]=[r("Refund",-1)])]),_:1}),a(t(m),{value:"commission"},{default:s(()=>[...e[16]||(e[16]=[r("Komisi",-1)])]),_:1}),a(t(m),{value:"bonus"},{default:s(()=>[...e[17]||(e[17]=[r("Bonus",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(t(W),{modelValue:p.value,"onUpdate:modelValue":e[2]||(e[2]=o=>p.value=o)},{default:s(()=>[a(t(z),{class:"w-[180px]"},{default:s(()=>[a(t(H),{placeholder:"Semua Status"})]),_:1}),a(t(O),null,{default:s(()=>[a(t(m),{value:"all"},{default:s(()=>[...e[18]||(e[18]=[r("Semua Status",-1)])]),_:1}),a(t(m),{value:"pending"},{default:s(()=>[...e[19]||(e[19]=[r("Pending",-1)])]),_:1}),a(t(m),{value:"completed"},{default:s(()=>[...e[20]||(e[20]=[r("Completed",-1)])]),_:1}),a(t(m),{value:"failed"},{default:s(()=>[...e[21]||(e[21]=[r("Failed",-1)])]),_:1}),a(t(m),{value:"cancelled"},{default:s(()=>[...e[22]||(e[22]=[r("Cancelled",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(t(ie),null,{default:s(()=>[a(t(de),{"as-child":""},{default:s(()=>[a(t(D),{variant:"outline",class:"ml-auto"},{default:s(()=>[e[23]||(e[23]=r(" Kolom ",-1)),a(t(ae),{class:"ml-2 h-4 w-4"})]),_:1})]),_:1}),a(t(me),{align:"end"},{default:s(()=>[(u(!0),w(b,null,k(t(C).getAllColumns().filter(o=>o.getCanHide()),o=>(u(),g(t(fe),{key:o.id,class:"capitalize","model-value":o.getIsVisible(),"onUpdate:modelValue":f=>{o.toggleVisibility(!!f)}},{default:s(()=>[r(V(o.id),1)]),_:2},1032,["model-value","onUpdate:modelValue"]))),128))]),_:1})]),_:1})])]),n("div",Te,[a(t(pe),null,{default:s(()=>[a(t(ge),null,{default:s(()=>[(u(!0),w(b,null,k(t(C).getHeaderGroups(),o=>(u(),g(t(K),{key:o.id},{default:s(()=>[(u(!0),w(b,null,k(o.headers,f=>(u(),g(t(_e),{key:f.id},{default:s(()=>[f.isPlaceholder?A("",!0):(u(),g(t(E),{key:0,render:f.column.columnDef.header,props:f.getContext()},null,8,["render","props"]))]),_:2},1024))),128))]),_:2},1024))),128))]),_:1}),a(t(ve),null,{default:s(()=>[t(C).getRowModel().rows?.length?(u(!0),w(b,{key:0},k(t(C).getRowModel().rows,o=>(u(),g(t(K),{key:o.id},{default:s(()=>[(u(!0),w(b,null,k(o.getVisibleCells(),f=>(u(),g(t(q),{key:f.id},{default:s(()=>[a(t(E),{render:f.column.columnDef.cell,props:f.getContext()},null,8,["render","props"])]),_:2},1024))),128))]),_:2},1024))),128)):(u(),g(t(K),{key:1},{default:s(()=>[a(t(q),{colspan:P.length,class:"h-24 text-center"},{default:s(()=>[...e[24]||(e[24]=[r(" Tidak ada data transaksi. ",-1)])]),_:1},8,["colspan"])]),_:1}))]),_:1})]),_:1})]),d.transactions.last_page>1?(u(),g(ne,{key:0,data:{current_page:d.transactions.current_page,last_page:d.transactions.last_page,per_page:d.transactions.per_page,from:d.transactions.from,to:d.transactions.to,total:d.transactions.total},url:"/admin/wallet-transactions",filters:{search:x.value||void 0,type:c.value!=="all"?c.value:void 0,status:p.value!=="all"?p.value:void 0,sort_by:_.value[0]?.id||"created_at",sort_order:_.value[0]?.desc?"desc":"asc"}},null,8,["data","filters"])):A("",!0)])]),_:1})],64))}});export{Oe as default};
