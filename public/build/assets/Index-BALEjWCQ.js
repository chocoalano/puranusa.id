import{_ as J,w as O,x as Q,y as X}from"./AppLayout.vue_vue_type_script_setup_true_lang-Hu_mZ1eB.js";import{d as S,ac as R,v as x,g as m,e as n,b as e,u as t,Z,w as s,s as o,t as y,F as B,x as q,aT as K,J as G,K as c,c as w,cC as W,bz as Y,X as ee,z as te,cD as ae,as as se,aw as le,r as C,p as re,E as ie,j as ne,a0 as oe,D as V}from"./vendor-flWeloHs.js";import{_ as ue}from"./ConfirmDialog.vue_vue_type_script_setup_true_lang-Cl2-SULB.js";import{_ as de}from"./Input.vue_vue_type_script_setup_true_lang-BI8FpPnw.js";import{_ as z,a as N,b as U,c as A,d as _}from"./SelectValue.vue_vue_type_script_setup_true_lang-CnNjP2es.js";import{_ as M}from"./index-BonpZqDt.js";import{_ as F}from"./index-D9Hie8NE.js";import{a as $,_ as k}from"./CardContent.vue_vue_type_script_setup_true_lang-DFr8PgO7.js";import{_ as me}from"./CardDescription.vue_vue_type_script_setup_true_lang-DE7w0u2_.js";import{_ as b}from"./CardHeader.vue_vue_type_script_setup_true_lang-Cgov_qDz.js";import{_ as j}from"./CardTitle.vue_vue_type_script_setup_true_lang-BdUxjhrU.js";import{_ as fe}from"./Pagination.vue_vue_type_script_setup_true_lang-D5lnraLN.js";import"./index-CMWG4mbA.js";import"./AvatarFallback.vue_vue_type_script_setup_true_lang-D5yDigSh.js";import"./AvatarImage.vue_vue_type_script_setup_true_lang-Dv6VzhWI.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-BLeUwnH4.js";import"./index-DqFeuJ-n.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BC4ik9Oa.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-BsQpZQb0.js";import"./AlertDialogTitle.vue_vue_type_script_setup_true_lang-CL8LVL2o.js";const pe={class:"flex items-center gap-4"},ve={class:"relative flex-1"},ce=S({__name:"ReviewFilters",props:{search:{required:!0},searchModifiers:{},rating:{required:!0},ratingModifiers:{},approved:{required:!0},approvedModifiers:{}},emits:["update:search","update:rating","update:approved"],setup(i){const u=R(i,"search"),l=R(i,"rating"),p=R(i,"approved");return(f,a)=>(m(),x("div",pe,[n("div",ve,[e(t(Z),{class:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e(t(de),{modelValue:u.value,"onUpdate:modelValue":a[0]||(a[0]=r=>u.value=r),placeholder:"Cari produk atau pelanggan...",class:"pl-9"},null,8,["modelValue"])]),e(t(z),{modelValue:l.value,"onUpdate:modelValue":a[1]||(a[1]=r=>l.value=r)},{default:s(()=>[e(t(N),{class:"w-32"},{default:s(()=>[e(t(U),{placeholder:"Rating"})]),_:1}),e(t(A),null,{default:s(()=>[e(t(_),{value:"all"},{default:s(()=>[...a[3]||(a[3]=[o("Semua Rating",-1)])]),_:1}),e(t(_),{value:"5"},{default:s(()=>[...a[4]||(a[4]=[o("5 Bintang",-1)])]),_:1}),e(t(_),{value:"4"},{default:s(()=>[...a[5]||(a[5]=[o("4 Bintang",-1)])]),_:1}),e(t(_),{value:"3"},{default:s(()=>[...a[6]||(a[6]=[o("3 Bintang",-1)])]),_:1}),e(t(_),{value:"2"},{default:s(()=>[...a[7]||(a[7]=[o("2 Bintang",-1)])]),_:1}),e(t(_),{value:"1"},{default:s(()=>[...a[8]||(a[8]=[o("1 Bintang",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(t(z),{modelValue:p.value,"onUpdate:modelValue":a[2]||(a[2]=r=>p.value=r)},{default:s(()=>[e(t(N),{class:"w-40"},{default:s(()=>[e(t(U),{placeholder:"Status"})]),_:1}),e(t(A),null,{default:s(()=>[e(t(_),{value:"all"},{default:s(()=>[...a[9]||(a[9]=[o("Semua Status",-1)])]),_:1}),e(t(_),{value:"1"},{default:s(()=>[...a[10]||(a[10]=[o("Disetujui",-1)])]),_:1}),e(t(_),{value:"0"},{default:s(()=>[...a[11]||(a[11]=[o("Pending",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}}),ge={class:"flex items-center gap-1"},_e={key:0,class:"ml-1 text-sm text-muted-foreground"},xe=S({__name:"StarRating",props:{rating:{},size:{default:"md"},showNumber:{type:Boolean,default:!1}},setup(i){const u={sm:"h-3 w-3",md:"h-4 w-4",lg:"h-5 w-5"};return(l,p)=>(m(),x("div",ge,[(m(),x(B,null,q(5,f=>e(t(K),{key:f,class:G([u[i.size],f<=i.rating?"fill-yellow-400 text-yellow-400":"fill-gray-200 text-gray-300"])},null,8,["class"])),64)),i.showNumber?(m(),x("span",_e,c(i.rating)+"/5 ",1)):y("",!0)]))}}),we={class:"space-y-4"},ye={class:"flex items-start justify-between"},$e={class:"space-y-1"},ke={class:"flex items-center gap-2"},be={class:"font-semibold"},Se={class:"space-y-2"},he={class:"font-medium"},Ce={class:"text-sm text-muted-foreground"},je={class:"flex gap-2 pt-2 border-t"},De=S({__name:"ReviewCard",props:{reviews:{}},emits:["approve","reject","delete"],setup(i,{emit:u}){const l=u,p=f=>new Date(f).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric"});return(f,a)=>(m(),x("div",we,[i.reviews.length===0?(m(),w(t(k),{key:0},{default:s(()=>[e(t($),{class:"py-12 text-center text-muted-foreground"},{default:s(()=>[...a[0]||(a[0]=[o(" Tidak ada review ditemukan ",-1)])]),_:1})]),_:1})):y("",!0),(m(!0),x(B,null,q(i.reviews,r=>(m(),w(t(k),{key:r.id},{default:s(()=>[e(t(b),null,{default:s(()=>[n("div",ye,[n("div",$e,[n("div",ke,[n("h3",be,c(r.product?.name||"N/A"),1),r.is_verified_purchase?(m(),w(t(M),{key:0,variant:"secondary",class:"gap-1"},{default:s(()=>[e(t(W),{class:"h-3 w-3"}),a[1]||(a[1]=o(" Verified ",-1))]),_:1})):y("",!0)]),e(t(me),null,{default:s(()=>[o(" Oleh "+c(r.customer?.name||"N/A")+" Â· "+c(p(r.created_at)),1)]),_:2},1024)]),e(t(M),{variant:r.is_approved?"default":"secondary"},{default:s(()=>[o(c(r.is_approved?"Disetujui":"Pending"),1)]),_:2},1032,["variant"])])]),_:2},1024),e(t($),{class:"space-y-4"},{default:s(()=>[n("div",Se,[e(xe,{rating:r.rating,"show-number":!0},null,8,["rating"]),n("h4",he,c(r.title),1),n("p",Ce,c(r.comment),1)]),n("div",je,[r.is_approved?y("",!0):(m(),w(t(F),{key:0,size:"sm",onClick:h=>l("approve",r.id)},{default:s(()=>[e(t(Y),{class:"mr-2 h-4 w-4"}),a[2]||(a[2]=o(" Setujui ",-1))]),_:1},8,["onClick"])),r.is_approved?(m(),w(t(F),{key:1,size:"sm",variant:"outline",onClick:h=>l("reject",r.id)},{default:s(()=>[e(t(ee),{class:"mr-2 h-4 w-4"}),a[3]||(a[3]=o(" Tolak ",-1))]),_:1},8,["onClick"])):y("",!0),e(t(F),{size:"sm",variant:"destructive",onClick:h=>l("delete",r.id)},{default:s(()=>[e(t(te),{class:"mr-2 h-4 w-4"}),a[4]||(a[4]=o(" Hapus ",-1))]),_:1},8,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]))}}),Re={class:"grid gap-4 md:grid-cols-4"},Ve={class:"text-2xl font-bold"},Fe={class:"text-2xl font-bold"},Be={class:"text-2xl font-bold"},Te={class:"text-2xl font-bold"},ze=S({__name:"ReviewStatistics",props:{statistics:{}},setup(i){return(u,l)=>(m(),x("div",Re,[e(t(k),null,{default:s(()=>[e(t(b),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[e(t(j),{class:"text-sm font-medium"},{default:s(()=>[...l[0]||(l[0]=[o("Total Review",-1)])]),_:1}),e(t(ae),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),e(t($),null,{default:s(()=>[n("div",Ve,c(i.statistics.total),1),l[1]||(l[1]=n("p",{class:"text-xs text-muted-foreground"},"Semua review",-1))]),_:1})]),_:1}),e(t(k),null,{default:s(()=>[e(t(b),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[e(t(j),{class:"text-sm font-medium"},{default:s(()=>[...l[2]||(l[2]=[o("Disetujui",-1)])]),_:1}),e(t(se),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),e(t($),null,{default:s(()=>[n("div",Fe,c(i.statistics.approved),1),l[3]||(l[3]=n("p",{class:"text-xs text-muted-foreground"},"Review disetujui",-1))]),_:1})]),_:1}),e(t(k),null,{default:s(()=>[e(t(b),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[e(t(j),{class:"text-sm font-medium"},{default:s(()=>[...l[4]||(l[4]=[o("Pending",-1)])]),_:1}),e(t(le),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),e(t($),null,{default:s(()=>[n("div",Be,c(i.statistics.pending),1),l[5]||(l[5]=n("p",{class:"text-xs text-muted-foreground"},"Menunggu moderasi",-1))]),_:1})]),_:1}),e(t(k),null,{default:s(()=>[e(t(b),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[e(t(j),{class:"text-sm font-medium"},{default:s(()=>[...l[6]||(l[6]=[o("Rating Rata-rata",-1)])]),_:1}),e(t(K),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),e(t($),null,{default:s(()=>[n("div",Te,c(i.statistics.average_rating.toFixed(1)),1),l[7]||(l[7]=n("p",{class:"text-xs text-muted-foreground"},"Dari 5.0",-1))]),_:1})]),_:1})]))}}),Ne={class:"rounded-xl p-4 space-y-6 py-6"},at=S({__name:"Index",props:{reviews:{},filters:{}},setup(i){const u=i,l=C(u.filters.search||""),p=C(u.filters.rating?.toString()||"all"),f=C(u.filters.approved===!0?"1":u.filters.approved===!1?"0":"all"),a=C({open:!1,review:null}),r=re(()=>{const g=u.reviews.data.filter(D=>D.is_approved).length,d=u.reviews.total,v=d-g,I=u.reviews.data.reduce((D,L)=>D+L.rating,0)/u.reviews.data.length||0;return{total:d,approved:g,pending:v,average_rating:I}}),h=g=>{V({}).post(O.url(g),{preserveScroll:!0})},P=g=>{V({}).post(Q.url(g),{preserveScroll:!0})},H=g=>{const d=u.reviews.data.find(v=>v.id===g);a.value={open:!0,review:d||null}},E=()=>{if(!a.value.review)return;V({}).delete(X.url(a.value.review.id),{preserveScroll:!0,onSuccess:()=>{a.value={open:!1,review:null}}})};let T;return ie([l,p,f],()=>{clearTimeout(T),T=setTimeout(()=>{ne.get("/admin/reviews",{search:l.value||void 0,rating:p.value!=="all"?p.value:void 0,approved:f.value!=="all"?f.value==="1":void 0},{preserveState:!0,preserveScroll:!0})},300)}),(g,d)=>(m(),x(B,null,[e(t(oe),{title:"Kelola Review"}),e(J,null,{default:s(()=>[n("div",Ne,[d[4]||(d[4]=n("div",null,[n("h2",{class:"text-3xl font-bold tracking-tight"},"Kelola Review Produk"),n("p",{class:"text-muted-foreground"},"Kelola dan moderasi review dari pelanggan")],-1)),e(ze,{statistics:r.value},null,8,["statistics"]),e(ce,{search:l.value,"onUpdate:search":d[0]||(d[0]=v=>l.value=v),rating:p.value,"onUpdate:rating":d[1]||(d[1]=v=>p.value=v),approved:f.value,"onUpdate:approved":d[2]||(d[2]=v=>f.value=v)},null,8,["search","rating","approved"]),e(De,{reviews:i.reviews.data,onApprove:h,onReject:P,onDelete:H},null,8,["reviews"]),i.reviews.last_page>1?(m(),w(fe,{key:0,data:i.reviews,url:"/admin/reviews",filters:i.filters},null,8,["data","filters"])):y("",!0)]),e(ue,{open:a.value.open,"onUpdate:open":d[3]||(d[3]=v=>a.value.open=v),title:"Hapus Review?",description:`Apakah Anda yakin ingin menghapus review '${a.value.review?.title}'? Tindakan ini tidak dapat dibatalkan.`,"confirm-text":"Hapus","cancel-text":"Batal",variant:"destructive",onConfirm:E},null,8,["open","description"])]),_:1})],64))}});export{at as default};
