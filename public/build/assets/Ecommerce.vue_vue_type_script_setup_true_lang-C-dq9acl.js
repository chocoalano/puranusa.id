import{d as re,v as d,g as i,J as ae,u as e,W as we,c as g,cY as hs,U as gs,V as _s,w as l,a as ss,aR as ys,cZ as xs,m as ts,bq as ks,c_ as bs,b as t,c$ as ws,d0 as $s,p as h,aH as as,r as P,d1 as Cs,d2 as Ss,E as Me,Q as _,h as ie,e as s,s as f,t as C,C as js,K as c,aN as Ps,a2 as W,F as j,x as z,M as Vs,aj as Ms,L as Ie,aq as Le,aF as Ge,d3 as Fe,d4 as Be,d5 as Bs,d6 as qs,d7 as zs,a3 as x,Z as qe,P as ge,d8 as Ts,d9 as As,bc as Ke,ad as te,z as Ue,a1 as ze,da as Is,Y as Ls,aI as De,db as Ee,cN as Gs,I as Fs,b7 as Ks,dc as Us,aX as Te,aL as Ds,cM as Es,D as Oe,j as _e}from"./vendor-MSza8NbP.js";import{_ as Re,a as Ne,b as We}from"./index-BYlPvJKd.js";import{c as Ae,_ as $}from"./index-DPBmQVLp.js";import{_ as ee}from"./Input.vue_vue_type_script_setup_true_lang-bXD-JnOr.js";import{_ as J}from"./Label.vue_vue_type_script_setup_true_lang-FUY4t6RG.js";import{_ as He,a as Je,b as Ye,c as Xe,d as Ze}from"./SelectValue.vue_vue_type_script_setup_true_lang-C9D_fxoj.js";import{_ as Q}from"./Separator.vue_vue_type_script_setup_true_lang-B6lrViAz.js";import{f as ls,g as os,h as ns,i as is,j as Os,a as ye,b as xe,d as ke,e as ne,_ as be,c as Z}from"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-VUM4Jj0u.js";import{_ as pe}from"./index-DWwRQAkq.js";import{_ as Qe}from"./Checkbox.vue_vue_type_script_setup_true_lang-Do0EFLDR.js";import{u as Rs}from"./app-4mTHBM3k.js";const Ns=re({__name:"SheetFooter",props:{class:{}},setup(U){const b=U;return(k,L)=>(i(),d("div",{class:ae(e(Ae)("flex flex-col-reverse sm:flex-row sm:justify-end sm:gap-x-2",b.class))},[we(k.$slots,"default")],2))}}),Ws=re({__name:"SheetTrigger",props:{asChild:{type:Boolean},as:{}},setup(U){const b=U;return(k,L)=>(i(),g(e(hs),gs(_s(b)),{default:l(()=>[we(k.$slots,"default")]),_:3},16))}}),Hs=re({__name:"RadioGroup",props:{modelValue:{},defaultValue:{},disabled:{type:Boolean},orientation:{},dir:{},loop:{type:Boolean},asChild:{type:Boolean},as:{},name:{},required:{type:Boolean},class:{}},emits:["update:modelValue"],setup(U,{emit:b}){const k=U,L=b,M=ss(k,"class"),G=ys(M,L);return(F,H)=>(i(),g(e(xs),ts({class:e(Ae)("grid gap-2",k.class)},e(G)),{default:l(()=>[we(F.$slots,"default")]),_:3},16,["class"]))}}),es=re({__name:"RadioGroupItem",props:{id:{},value:{},disabled:{type:Boolean},asChild:{type:Boolean},as:{},name:{},required:{type:Boolean},class:{}},setup(U){const b=U,k=ss(b,"class"),L=ks(k);return(M,G)=>(i(),g(e(bs),ts(e(L),{class:e(Ae)("peer aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",b.class)}),{default:l(()=>[t(e($s),{class:"flex items-center justify-center"},{default:l(()=>[t(e(ws),{class:"h-2.5 w-2.5 fill-current text-current"})]),_:1})]),_:1},16,["class"]))}}),Js={class:"space-y-6 py-6"},Ys={class:"space-y-3"},Xs={class:"flex items-center gap-2 text-sm font-medium"},Zs={key:0,class:"ml-auto text-xs text-muted-foreground"},Qs={class:"space-y-3"},et=["src","alt"],st={class:"flex-1"},tt={class:"font-medium"},at={class:"text-sm text-muted-foreground"},lt={class:"text-sm text-muted-foreground"},ot={class:"text-right"},nt={class:"font-semibold"},it={class:"space-y-2 rounded-lg bg-muted/50 p-3 text-sm"},rt={class:"flex items-center justify-between"},ut={class:"font-semibold"},dt={key:0,class:"flex items-center justify-between text-xs text-muted-foreground"},ct={class:"space-y-4"},pt={class:"flex items-center gap-2 text-sm font-medium"},mt={class:"space-y-4"},ft={class:"grid grid-cols-2 gap-4"},vt={class:"space-y-2"},ht={class:"space-y-2"},gt={class:"space-y-2"},_t={class:"grid grid-cols-2 gap-4"},yt={class:"space-y-2"},xt={class:"space-y-2"},kt={class:"space-y-2"},bt={class:"space-y-4"},wt={class:"flex items-center gap-2 text-sm font-medium"},$t={key:0,class:"flex items-center justify-center py-8"},Ct={key:1,class:"space-y-3"},St={class:"text-sm font-medium uppercase"},jt=["onClick"],Pt={class:"flex-shrink-0"},Vt={key:0,class:"h-2 w-2 rounded-full bg-primary-foreground"},Mt={class:"flex-1"},Bt={class:"flex items-start justify-between"},qt={class:"font-medium"},zt={class:"text-sm text-muted-foreground"},Tt={class:"text-sm text-muted-foreground"},At={class:"font-semibold"},It={key:2,class:"py-8 text-center text-muted-foreground"},Lt={key:3,class:"py-8 text-center text-muted-foreground"},Gt={class:"space-y-4"},Ft={class:"flex items-center gap-2 text-sm font-medium"},Kt={class:"flex items-start justify-between"},Ut={class:"flex items-center gap-2 font-medium"},Dt={class:"text-sm text-muted-foreground"},Et={key:0,class:"mt-1 text-xs text-destructive"},Ot={class:"flex items-start justify-between"},Rt={class:"flex items-center gap-2 font-medium"},Nt={class:"space-y-2"},Wt={class:"space-y-3"},Ht={class:"flex items-center gap-2 text-sm font-medium"},Jt={class:"space-y-2 text-sm"},Yt={class:"flex justify-between"},Xt={class:"flex justify-between"},Zt={class:"flex justify-between text-base font-semibold"},Qt={key:1},ea={key:2},sa=re({__name:"CheckoutSheet",props:{open:{type:Boolean},item:{},items:{}},emits:["update:open"],setup(U,{emit:b}){const k=U,L=b,M=h(()=>k.items&&k.items.length>0?k.items:k.item?[k.item]:[]),G=h(()=>M.value.length>1),F=h(()=>M.value.reduce((m,n)=>m+n.weight*n.quantity,0)),H=h(()=>M.value.reduce((m,n)=>m+n.price*n.quantity,0)),me=as(),ue=h(()=>me.props.auth?.user?.ewallet_saldo??0),V=P(null),S=P([]),K=P([]),D=P([]),B=P(!1),R=P(!1),Y=P(!1),T=P(!1),q=P(!1),$e=m=>{!m&&(q.value||T.value)||L("update:open",m)},fe=m=>{(q.value||T.value)&&m.preventDefault()},X=m=>{(q.value||T.value)&&m.preventDefault()};Cs(()=>{typeof document<"u"&&(q.value?document.body.classList.add("midtrans-popup-active"):document.body.classList.remove("midtrans-popup-active"))}),Ss(()=>{typeof document<"u"&&document.body.classList.remove("midtrans-popup-active")});const r=P({recipient_name:"",recipient_phone:"",address_line1:"",province_id:"",city_id:"",postal_code:"",shipping_courier:"",shipping_service:"",shipping_cost:0,shipping_etd:"",notes:"",payment_method:"midtrans"}),de=h(()=>S.value.filter(m=>m.id)),A=h(()=>K.value.filter(m=>m.id)),le=h(()=>S.value.find(m=>String(m.id)===r.value.province_id)),ve=h(()=>K.value.find(m=>String(m.id)===r.value.city_id)),E=h(()=>H.value+r.value.shipping_cost),N=h(()=>ue.value>=E.value),ce=h(()=>{const m=r.value.recipient_name&&r.value.recipient_phone&&r.value.address_line1&&r.value.province_id&&r.value.city_id&&r.value.postal_code&&r.value.shipping_courier&&r.value.shipping_service&&r.value.shipping_cost>0&&r.value.payment_method;return r.value.payment_method==="wallet"&&!N.value?!1:m}),I=m=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(m),Ce=async()=>{B.value=!0;try{const n=await(await fetch("/api/shipping/provinces")).json();n.success?(S.value=n.data,console.log("Provinces loaded successfully:",S.value.length)):(console.error("gagal load provinces: success=false"),_.error("Gagal memuat provinsi: success=false"))}catch(m){console.error("Gagal memuat provinsi:",m),_.error("Gagal memuat provinsi")}finally{B.value=!1}};Me(()=>r.value.province_id,async m=>{if(console.log("Province changed:",m),!!m){r.value.city_id="",r.value.shipping_courier="",r.value.shipping_service="",r.value.shipping_cost=0,K.value=[],D.value=[],R.value=!0;try{console.log("Fetching cities for province:",m);const u=await(await fetch(`/api/shipping/cities?province_id=${m}`)).json();console.log("Cities response:",u),u.success?K.value=u.data:_.error("Gagal memuat kota: success=false")}catch(n){console.error("Gagal memuat kota:",n),_.error("Gagal memuat kota")}finally{R.value=!1}}}),Me(()=>r.value.city_id,async m=>{if(console.log("City changed:",m),!m)return;const n=K.value.find(u=>String(u.id)===m);n&&n.postal_code&&(r.value.postal_code=n.postal_code),r.value.shipping_courier="",r.value.shipping_service="",r.value.shipping_cost=0,D.value=[],Y.value=!0;try{const y=(await ie.post("/api/shipping/calculate",{destination_city_id:parseInt(m),weight:F.value})).data;y.success&&(D.value=y.data)}catch(u){_.error("Gagal menghitung ongkos kirim:"),console.log(u)}finally{Y.value=!1}});const he=(m,n)=>{r.value.shipping_courier=m.code,r.value.shipping_service=n.service,r.value.shipping_cost=n.cost[0].value,r.value.shipping_etd=n.cost[0].etd},Se=async()=>{if(!ce.value){V.value={type:"error",message:"Mohon lengkapi semua data pengiriman"};return}if(M.value.length===0){V.value={type:"error",message:"Tidak ada produk untuk di-checkout"},_.error("Tidak ada produk untuk di-checkout");return}if(r.value.payment_method==="midtrans"&&!window.snap){V.value={type:"error",message:"Sistem pembayaran belum siap. Mohon refresh halaman."};return}if(r.value.payment_method==="wallet"&&!N.value){V.value={type:"error",message:"Saldo e-wallet Anda tidak mencukupi"};return}T.value=!0,V.value=null;try{const m=M.value.map(O=>({product_id:O.product_id,product_name:O.name,product_price:O.price,quantity:O.quantity,weight:O.weight,product_image:O.image}));console.log("Sending checkout data:",{items:m,allItems:M.value});const n={items:m,shipping:{recipient_name:r.value.recipient_name,recipient_phone:r.value.recipient_phone,address_line1:r.value.address_line1,province_label:le.value?.name,province_id:r.value.province_id,city_label:`${ve.value?.type} ${ve.value?.name}`,city_id:r.value.city_id,postal_code:r.value.postal_code,courier:r.value.shipping_courier,service:r.value.shipping_service,cost:r.value.shipping_cost,etd:r.value.shipping_etd},notes:r.value.notes,subtotal:H.value,shipping_cost:r.value.shipping_cost,total:E.value,payment_method:r.value.payment_method};console.log("Full payload:",JSON.stringify(n,null,2));const y=(await ie.post("/checkout/process",n)).data;if(y.success){if(V.value={type:"success",message:y.message||"Pesanan berhasil dibuat!"},_.success(y.message||"Pesanan berhasil dibuat!"),r.value.payment_method==="wallet"){typeof window<"u"&&(window.location.href=`/checkout/finish?order_no=${y.order_no}`);return}if(typeof window<"u"&&y.snap_token){const O=window.snap;q.value=!0,O.pay(y.snap_token,{onSuccess:function(se){q.value=!1,_.success("Pembayaran berhasil "+se.order_id),typeof window<"u"&&(window.location.href=`/checkout/finish?order_no=${y.order_no}`)},onPending:function(se){q.value=!1,_.info("Pembayaran tertunda "+se.order_id),typeof window<"u"&&(window.location.href=`/checkout/finish?order_no=${y.order_no}`)},onError:function(se){q.value=!1,T.value=!1,_.error("Pembayaran gagal. Silakan coba lagi. "+se.order_id),V.value={type:"error",message:"Pembayaran gagal. Silakan coba lagi."},setTimeout(()=>{document.body.classList.remove("midtrans-popup-active")},100)},onClose:function(){q.value=!1,T.value=!1,_.info("Pembayaran dibatalkan."),setTimeout(()=>{document.body.classList.remove("midtrans-popup-active")},100)}}),r.value={recipient_name:"",recipient_phone:"",address_line1:"",province_id:"",city_id:"",postal_code:"",shipping_courier:"",shipping_service:"",shipping_cost:0,shipping_etd:"",notes:"",payment_method:"midtrans"}}}else V.value={type:"error",message:y.message||"Gagal memproses checkout. Silakan coba lagi."},_.error(y.message||"Gagal memproses checkout. Silakan coba lagi.")}catch(m){if(m.response?.status===401){const n=m.response?.data?.message||"Anda harus login terlebih dahulu.";V.value={type:"error",message:n},_.error(n),setTimeout(()=>{if(L("update:open",!1),typeof window<"u"){const u=m.response?.data?.redirect||"/client/login";window.location.href=u}},2e3);return}V.value={type:"error",message:m.response?.data?.message||"Gagal memproses checkout. Silakan coba lagi."},_.error(m.response?.data?.message||"Gagal memproses checkout. Silakan coba lagi.")}finally{T.value=!1}};return Me(()=>k.open,m=>{m&&(S.value.length===0?Ce():console.log("Provinces already loaded:",S.value.length))},{immediate:!0}),(m,n)=>(i(),g(e(ls),{open:U.open,"onUpdate:open":$e},{default:l(()=>[t(e(os),{side:"right",class:"w-full overflow-y-auto sm:max-w-2xl","trap-focus":!1,onPointerDownOutside:fe,onInteractOutside:fe,onEscapeKeyDown:X},{default:l(()=>[t(e(ns),null,{default:l(()=>[t(e(is),null,{default:l(()=>[...n[10]||(n[10]=[f("Checkout",-1)])]),_:1}),t(e(Os),null,{default:l(()=>[...n[11]||(n[11]=[f(" Lengkapi data pengiriman untuk melanjutkan pembelian ",-1)])]),_:1})]),_:1}),s("div",Js,[V.value?.type==="success"?(i(),g(e(Re),{key:0,variant:"default"},{default:l(()=>[t(e(js),{class:"h-4 w-4"}),t(e(Ne),null,{default:l(()=>[...n[12]||(n[12]=[f("Berhasil!",-1)])]),_:1}),t(e(We),null,{default:l(()=>[f(c(V.value.message),1)]),_:1})]),_:1})):C("",!0),V.value?.type==="error"?(i(),g(e(Re),{key:1,variant:"destructive"},{default:l(()=>[t(e(Ps),{class:"h-4 w-4"}),t(e(Ne),null,{default:l(()=>[...n[13]||(n[13]=[f("Terjadi Kesalahan",-1)])]),_:1}),t(e(We),null,{default:l(()=>[f(c(V.value.message),1)]),_:1})]),_:1})):C("",!0),s("div",Ys,[s("div",Xs,[t(e(W),{class:"h-4 w-4"}),n[14]||(n[14]=s("span",null,"Ringkasan Produk",-1)),G.value?(i(),d("span",Zs,c(M.value.length)+" Produk ",1)):C("",!0)]),s("div",Qs,[(i(!0),d(j,null,z(M.value,u=>(i(),d("div",{key:u.id,class:"flex gap-4 rounded-lg bg-muted p-4"},[s("img",{src:u.image,alt:u.name,class:"h-20 w-20 rounded-md object-cover"},null,8,et),s("div",st,[s("h4",tt,c(u.name),1),s("p",at,c(u.quantity)+"x "+c(I(u.price)),1),s("p",lt," Berat: "+c(u.weight*u.quantity)+"g ",1)]),s("div",ot,[s("p",nt,c(I(u.price*u.quantity)),1)])]))),128)),s("div",it,[s("div",rt,[n[15]||(n[15]=s("span",{class:"text-muted-foreground"},"Subtotal Produk:",-1)),s("span",ut,c(I(H.value)),1)]),G.value?(i(),d("div",dt,[n[16]||(n[16]=s("span",null,"Total Berat:",-1)),s("span",null,c(F.value)+"g",1)])):C("",!0)])])]),t(e(Q)),s("div",ct,[s("div",pt,[t(e(Vs),{class:"h-4 w-4"}),n[17]||(n[17]=s("span",null,"Alamat Pengiriman",-1))]),s("div",mt,[s("div",ft,[s("div",vt,[t(e(J),{for:"recipient_name"},{default:l(()=>[...n[18]||(n[18]=[f("Nama Penerima",-1)])]),_:1}),t(e(ee),{id:"recipient_name",modelValue:r.value.recipient_name,"onUpdate:modelValue":n[0]||(n[0]=u=>r.value.recipient_name=u),placeholder:"Nama lengkap"},null,8,["modelValue"])]),s("div",ht,[t(e(J),{for:"recipient_phone"},{default:l(()=>[...n[19]||(n[19]=[f("No. Telepon",-1)])]),_:1}),t(e(ee),{id:"recipient_phone",modelValue:r.value.recipient_phone,"onUpdate:modelValue":n[1]||(n[1]=u=>r.value.recipient_phone=u),placeholder:"08xxxxxxxxxx"},null,8,["modelValue"])])]),s("div",gt,[t(e(J),{for:"address_line1"},{default:l(()=>[...n[20]||(n[20]=[f("Alamat Lengkap",-1)])]),_:1}),t(e(ee),{id:"address_line1",modelValue:r.value.address_line1,"onUpdate:modelValue":n[2]||(n[2]=u=>r.value.address_line1=u),placeholder:"Jalan, nomor rumah, RT/RW"},null,8,["modelValue"])]),s("div",_t,[s("div",yt,[t(e(J),{for:"province"},{default:l(()=>[...n[21]||(n[21]=[f("Provinsi",-1)])]),_:1}),t(e(He),{modelValue:r.value.province_id,"onUpdate:modelValue":n[3]||(n[3]=u=>r.value.province_id=u),disabled:B.value},{default:l(()=>[t(e(Je),{id:"province"},{default:l(()=>[t(e(Ye),{placeholder:B.value?"Memuat provinsi...":"Pilih provinsi"},null,8,["placeholder"])]),_:1}),t(e(Xe),null,{default:l(()=>[(i(!0),d(j,null,z(de.value,u=>(i(),g(e(Ze),{key:u.id,value:String(u.id)},{default:l(()=>[f(c(u.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue","disabled"])]),s("div",xt,[t(e(J),{for:"city"},{default:l(()=>[...n[22]||(n[22]=[f("Kota/Kabupaten",-1)])]),_:1}),t(e(He),{modelValue:r.value.city_id,"onUpdate:modelValue":n[4]||(n[4]=u=>r.value.city_id=u),disabled:R.value||!r.value.province_id},{default:l(()=>[t(e(Je),{id:"city"},{default:l(()=>[t(e(Ye),{placeholder:R.value?"Memuat kota...":r.value.province_id?"Pilih kota":"Pilih provinsi terlebih dahulu"},null,8,["placeholder"])]),_:1}),t(e(Xe),null,{default:l(()=>[(i(!0),d(j,null,z(A.value,u=>(i(),g(e(Ze),{key:u.id,value:String(u.id)},{default:l(()=>[f(c(u.type)+" "+c(u.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue","disabled"])])]),s("div",kt,[t(e(J),{for:"postal_code"},{default:l(()=>[...n[23]||(n[23]=[f("Kode Pos",-1)])]),_:1}),t(e(ee),{id:"postal_code",modelValue:r.value.postal_code,"onUpdate:modelValue":n[5]||(n[5]=u=>r.value.postal_code=u),placeholder:"12345"},null,8,["modelValue"])])])]),t(e(Q)),s("div",bt,[s("div",wt,[t(e(Ms),{class:"h-4 w-4"}),n[24]||(n[24]=s("span",null,"Metode Pengiriman",-1))]),Y.value?(i(),d("div",$t,[t(e(Ie),{class:"h-6 w-6 animate-spin text-muted-foreground"})])):D.value.length>0?(i(),d("div",Ct,[(i(!0),d(j,null,z(D.value,u=>(i(),d("div",{key:u.code,class:"space-y-2"},[s("div",St,c(u.name),1),(i(!0),d(j,null,z(u.costs,y=>(i(),d("div",{key:`${u.code}-${y.service}`,class:ae(["flex cursor-pointer items-center space-x-3 rounded-lg border p-3 transition-colors",{"border-primary bg-primary/10":r.value.shipping_service===y.service&&r.value.shipping_courier===u.code,"hover:bg-muted":!(r.value.shipping_service===y.service&&r.value.shipping_courier===u.code)}]),onClick:O=>he(u,y)},[s("div",Pt,[s("div",{class:ae(["flex h-5 w-5 items-center justify-center rounded-full border-2 transition-colors",{"border-primary bg-primary":r.value.shipping_service===y.service&&r.value.shipping_courier===u.code,"border-muted-foreground":!(r.value.shipping_service===y.service&&r.value.shipping_courier===u.code)}])},[r.value.shipping_service===y.service&&r.value.shipping_courier===u.code?(i(),d("div",Vt)):C("",!0)],2)]),s("div",Mt,[s("div",Bt,[s("div",null,[s("div",qt,c(y.service),1),s("div",zt,c(y.description),1),s("div",Tt," Estimasi: "+c(y.cost[0].etd)+" hari ",1)]),s("div",At,c(I(y.cost[0].value)),1)])])],10,jt))),128))]))),128))])):r.value.city_id?(i(),d("div",It," Tidak ada metode pengiriman tersedia ")):(i(),d("div",Lt," Pilih alamat pengiriman untuk melihat metode pengiriman "))]),t(e(Q)),s("div",Gt,[s("div",Ft,[t(e(Le),{class:"h-4 w-4"}),n[25]||(n[25]=s("span",null,"Metode Pembayaran",-1))]),t(e(Hs),{modelValue:r.value.payment_method,"onUpdate:modelValue":n[8]||(n[8]=u=>r.value.payment_method=u),class:"space-y-3"},{default:l(()=>[s("div",{class:ae(["flex cursor-pointer items-center space-x-3 rounded-lg border p-4 transition-colors",{"border-primary bg-primary/10":r.value.payment_method==="wallet","hover:bg-muted":r.value.payment_method!=="wallet","cursor-not-allowed opacity-50":!N.value}]),onClick:n[6]||(n[6]=u=>N.value&&(r.value.payment_method="wallet"))},[t(e(es),{value:"wallet",id:"payment-wallet",disabled:!N.value},null,8,["disabled"]),t(e(J),{for:"payment-wallet",class:ae(["flex-1 cursor-pointer",{"cursor-not-allowed":!N.value}])},{default:l(()=>[s("div",Kt,[s("div",null,[s("div",Ut,[t(e(Le),{class:"h-4 w-4"}),n[26]||(n[26]=f(" E-Wallet ",-1))]),s("div",Dt," Saldo: "+c(I(ue.value)),1),N.value?C("",!0):(i(),d("div",Et," Saldo tidak mencukupi (kurang "+c(I(E.value-ue.value))+") ",1))])])]),_:1},8,["class"])],2),s("div",{class:ae(["flex cursor-pointer items-center space-x-3 rounded-lg border p-4 transition-colors",{"border-primary bg-primary/10":r.value.payment_method==="midtrans","hover:bg-muted":r.value.payment_method!=="midtrans"}]),onClick:n[7]||(n[7]=u=>r.value.payment_method="midtrans")},[t(e(es),{value:"midtrans",id:"payment-midtrans"}),t(e(J),{for:"payment-midtrans",class:"flex-1 cursor-pointer"},{default:l(()=>[s("div",Ot,[s("div",null,[s("div",Rt,[t(e(Ge),{class:"h-4 w-4"}),n[27]||(n[27]=f(" Payment Gateway ",-1))]),n[28]||(n[28]=s("div",{class:"text-sm text-muted-foreground"}," Transfer Bank, E-wallet, Kartu Kredit ",-1))])])]),_:1})],2)]),_:1},8,["modelValue"])]),t(e(Q)),s("div",Nt,[t(e(J),{for:"notes"},{default:l(()=>[...n[29]||(n[29]=[f("Catatan (Opsional)",-1)])]),_:1}),t(e(ee),{id:"notes",modelValue:r.value.notes,"onUpdate:modelValue":n[9]||(n[9]=u=>r.value.notes=u),placeholder:"Catatan untuk penjual"},null,8,["modelValue"])]),t(e(Q)),s("div",Wt,[s("div",Ht,[t(e(Ge),{class:"h-4 w-4"}),n[30]||(n[30]=s("span",null,"Ringkasan Pembayaran",-1))]),s("div",Jt,[s("div",Yt,[n[31]||(n[31]=s("span",{class:"text-muted-foreground"},"Subtotal",-1)),s("span",null,c(I(H.value)),1)]),s("div",Xt,[n[32]||(n[32]=s("span",{class:"text-muted-foreground"},"Ongkos Kirim",-1)),s("span",null,c(I(r.value.shipping_cost)),1)]),t(e(Q)),s("div",Zt,[n[33]||(n[33]=s("span",null,"Total",-1)),s("span",null,c(I(E.value)),1)])])])]),t(e(Ns),null,{default:l(()=>[t(e($),{onClick:Se,disabled:!ce.value||T.value||q.value,class:"w-full",size:"lg"},{default:l(()=>[T.value?(i(),g(e(Ie),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):C("",!0),r.value.payment_method==="wallet"?(i(),d("span",Qt," Bayar dengan E-Wallet "+c(I(E.value)),1)):(i(),d("span",ea," Bayar "+c(I(E.value)),1))]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"]))}}),ta={class:"min-h-screen"},aa={key:0,class:"bg-primary dark:bg-zinc-100 text-white dark:text-black py-2 px-4 text-center text-sm font-medium sticky top-0 z-[60] flex items-center justify-center gap-4"},la={class:"container mx-auto px-4 lg:px-6"},oa={class:"flex h-16 items-center justify-between gap-4"},na=["src","alt"],ia={class:"truncate bg-gradient-to-r from-primary to-primary/60 bg-clip-text text-base font-bold tracking-tight whitespace-nowrap text-transparent sm:text-lg md:text-xl md:whitespace-normal lg:text-2xl xl:text-3xl"},ra={class:"mx-4 hidden max-w-2xl flex-1 lg:flex"},ua={class:"relative w-full"},da={class:"flex flex-shrink-0 items-center gap-1"},ca={class:"max-h-96 overflow-y-auto"},pa={key:0,class:"space-y-1"},ma={class:"flex items-center gap-3"},fa=["src","alt"],va={class:"min-w-0 flex-1"},ha={class:"mt-1 text-sm font-bold text-primary"},ga={key:1,class:"p-8 text-center text-sm text-muted-foreground"},_a={key:1,class:"p-2"},ya={class:"flex items-center gap-2"},xa={class:"max-h-96 overflow-y-auto"},ka={key:0,class:"space-y-1"},ba={class:"flex items-center gap-3"},wa=["src","alt"],$a={class:"min-w-0 flex-1"},Ca={class:"mt-1 text-sm font-bold text-primary"},Sa={class:"mt-2 flex items-center justify-between"},ja={class:"flex items-center gap-2"},Pa={class:"w-8 text-center text-sm font-medium"},Va={key:1,class:"p-8 text-center text-sm text-muted-foreground"},Ma={key:1,class:"space-y-3 p-3"},Ba={class:"space-y-2"},qa={class:"flex items-center justify-between text-sm"},za={class:"text-muted-foreground"},Ta={class:"text-sm"},Aa={key:0,class:"flex items-center justify-between text-sm"},Ia={class:"font-medium"},La={class:"text-lg font-bold"},Ga={class:"flex flex-col space-y-1"},Fa={class:"text-sm font-medium"},Ka={class:"text-xs text-muted-foreground"},Ua=["src","alt"],Da={class:"overflow-y-auto p-6"},Ea={class:"space-y-6"},Oa={class:"mb-3 flex items-center gap-2"},Ra={class:"text-base font-bold"},Na={key:0,class:"ml-7 space-y-2"},Wa={class:"hidden border-t lg:block dark:border-gray-800"},Ha={class:"container mx-auto px-6"},Ja={class:"flex h-12 items-center gap-6"},Ya={class:"grid grid-cols-4 gap-6"},Xa={class:"mb-3 flex items-center gap-2 text-sm font-semibold transition-colors hover:text-primary"},Za={class:"space-y-1.5"},Qa={key:0,class:"border-t bg-white shadow-lg dark:border-gray-800 dark:bg-gray-950"},el={class:"container mx-auto px-6 py-6"},sl={class:"mx-auto w-full"},tl={class:"relative"},al={class:"mt-4"},ll={class:"mb-3 text-sm font-medium"},ol={class:"flex flex-wrap gap-2"},nl={class:"border-t bg-gradient-to-b from-background to-muted/20"},il={class:"container mx-auto px-6"},rl={class:"border-b py-12"},ul={class:"mx-auto max-w-3xl text-center"},dl={class:"mx-auto flex max-w-md flex-col gap-3 sm:flex-row"},cl={class:"relative flex-1"},pl={key:0},ml={key:1,class:"flex items-center gap-2"},fl={key:2,class:"flex items-center gap-2"},vl={class:"mt-4 text-xs text-muted-foreground"},hl={class:"py-12"},gl={class:"grid grid-cols-1 gap-8 lg:grid-cols-12 lg:gap-12"},_l={class:"lg:col-span-4"},yl=["src","alt"],xl={class:"text-2xl font-bold"},kl={class:"mb-6 text-sm leading-relaxed text-muted-foreground"},bl={class:"flex items-center gap-3"},wl={class:"flex gap-2"},$l=["href","aria-label"],Cl={class:"h-4 w-4",fill:"currentColor",viewBox:"0 0 24 24"},Sl=["d"],jl={class:"lg:col-span-8"},Pl={class:"grid grid-cols-2 gap-8 md:grid-cols-3 lg:grid-cols-4"},Vl={class:"mb-4 text-sm font-bold text-foreground"},Ml={class:"space-y-3 text-sm"},Bl={class:"border-t py-6"},ql={class:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between"},zl={class:"flex w-full flex-col gap-3 text-xs text-muted-foreground sm:text-sm"},Tl={class:"text-center md:text-left"},Al={class:"flex flex-wrap justify-center gap-x-4 gap-y-2 md:justify-start"},Il={class:"flex w-full flex-col items-center gap-2 md:w-auto md:items-end"},Ll={class:"flex flex-wrap justify-center gap-2 md:justify-end"},Jl=re({__name:"Ecommerce",props:{title:{},description:{}},setup(U){const b=as(),k=P(""),L=P(!1),M=P(!1),G=P(""),F=P(!1),H=P(!1),{appearance:me,updateAppearance:ue}=Rs(),V=P(!1),S=P([]),K=P([]),D=h(()=>b.props.ecommerce||{categories:[]}),B=h(()=>D.value.cart),R=h(()=>D.value.wishlist),Y=h(()=>D.value.categories||[]),T=h(()=>b.props.settings||{}),q=h(()=>T.value.site_name||"PURANUSA"),$e=h(()=>T.value.site_description||"Puranusa adalah destinasi belanja online terpercaya"),fe=h(()=>T.value.payment_methods||["VISA","Mastercard","GoPay","OVO"]),X=h(()=>T.value.site_logo),r=h(()=>B.value?.items?.length||0),de=h(()=>R.value?.items?.length||0),A=h(()=>B.value?.items||[]),le=h(()=>R.value?.items||[]),ve=h(()=>B.value?.total||0),E=p=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(p),N=h(()=>{const p=b.props.auth?.user;return!!p&&"ewallet_saldo"in p}),ce=h(()=>me.value==="system"?typeof window<"u"?window.matchMedia("(prefers-color-scheme: dark)").matches:!1:me.value==="dark"),I=()=>{const p=ce.value?"light":"dark";ue(p)},Ce=()=>{Oe({}).post("/client/logout",{onSuccess:()=>{_e.flushAll(),_.success("Berhasil logout")},onError:()=>{_.error("Gagal logout, silakan coba lagi")}})},he=async()=>{if(!(!G.value||F.value)){F.value=!0;try{const a=await(await fetch("/newsletter/subscribe",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":typeof document<"u"&&document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},body:JSON.stringify({email:G.value})})).json();a.success?(H.value=!0,G.value="",_.success("Berhasil!",{description:"Anda telah berlangganan newsletter kami."}),setTimeout(()=>{H.value=!1},3e3)):_.error("Gagal Berlangganan",{description:a.message||"Terjadi kesalahan saat berlangganan"})}catch(p){console.error("Newsletter subscription failed:",p),_.error("Terjadi Kesalahan",{description:"Terjadi kesalahan saat berlangganan. Silakan coba lagi."})}finally{F.value=!1}}},Se=()=>{Oe({}).post("/manage/customers/stop-impersonating",{onSuccess:()=>{_.success("Kembali ke akun admin")},onError:()=>{_.error("Gagal kembali ke akun admin")}})},m=async p=>{try{(await ie.post("/cart/add",{product_id:p.product_id,quantity:1})).data.success&&(_.success("Berhasil",{description:"Produk berhasil ditambahkan ke keranjang."}),_e.reload({only:["ecommerce"]}))}catch(a){console.error("Failed to add to cart:",a);const o=a.response?.data?.message||"Gagal menambahkan ke keranjang";_.error("Gagal",{description:o})}},n=async(p,a)=>{try{if((await ie.post("/wishlist/remove",{product_id:a})).data.success){if(R.value?.items){const v=R.value.items.findIndex(w=>w.id===p);v>-1&&R.value.items.splice(v,1)}_.success("Berhasil",{description:"Produk berhasil dihapus dari wishlist."}),_e.reload({only:["ecommerce"]})}}catch(o){console.error("Failed to remove from wishlist:",o);const v=o.response?.data?.message||"Gagal menghapus dari wishlist";_.error("Gagal",{description:v})}},u=async(p,a)=>{if(!(a<1))try{const o=await ie.post("/cart/update",{cart_id:p,quantity:a});if(o.data.success){const v=A.value.find(w=>w.id===p);v&&(v.quantity=a),B.value&&o.data.cart&&(B.value.subtotal=o.data.cart.subtotal,B.value.total=o.data.cart.total)}}catch(o){console.error("Failed to update cart quantity:",o),_.error("Gagal",{description:"Gagal memperbarui jumlah produk"})}},y=async p=>{try{const a=await ie.post("/cart/remove",{cart_id:p});if(a.data.success){if(B.value?.items){const v=B.value.items.findIndex(w=>w.id===p);v>-1&&B.value.items.splice(v,1)}B.value&&a.data.cart&&(B.value.subtotal=a.data.cart.subtotal,B.value.total=a.data.cart.total);const o=S.value.indexOf(p);o>-1&&S.value.splice(o,1),_.success("Berhasil",{description:"Produk berhasil dihapus dari keranjang."}),_e.reload({only:["ecommerce"]})}}catch(a){console.error("Failed to remove from cart:",a),_.error("Gagal",{description:"Gagal menghapus dari keranjang"})}},O=(p,a)=>{const o=S.value.indexOf(p);a?o===-1&&S.value.push(p):o>-1&&S.value.splice(o,1)},se=p=>{p?S.value=A.value.map(a=>a.id):S.value=[]},rs=h(()=>A.value.length>0&&S.value.length===A.value.length),us=h(()=>A.value.filter(p=>S.value.includes(p.id)).reduce((p,a)=>p+a.price*a.quantity,0)),je=h(()=>S.value.length),ds=()=>{const p=A.value.filter(a=>S.value.includes(a.id));if(p.length===0){_.warning("Perhatian",{description:"Pilih minimal satu produk untuk checkout"});return}K.value=p,V.value=!0},cs=h(()=>D.value.footerMenus||[]),ps=h(()=>D.value.socialLinks||[]),ms={facebook:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z",twitter:"M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z",instagram:"M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.218 2.427.465a4.902 4.902 0 011.772 1.153 4.902 4.902 0 011.153 1.772c.247.636.416 1.363.465 2.427.048 1.067.06 1.407.06 4.123v.08c0 2.643-.012 2.987-.06 4.043-.049 1.064-.218 1.791-.465 2.427a4.902 4.902 0 01-1.153 1.772 4.902 4.902 0 01-1.772 1.153c-.636.247-1.363.416-2.427.465-1.067.048-1.407.06-4.123.06h-.08c-2.643 0-2.987-.012-4.043-.06-1.064-.049-1.791-.218-2.427-.465a4.902 4.902 0 01-1.772-1.153 4.902 4.902 0 01-1.153-1.772c-.247-.636-.416-1.363-.465-2.427-.047-1.024-.06-1.379-.06-3.808v-.63c0-2.43.013-2.784.06-3.808.049-1.064.218-1.791.465-2.427a4.902 4.902 0 011.153-1.772A4.902 4.902 0 015.45 2.525c.636-.247 1.363-.416 2.427-.465C8.901 2.013 9.256 2 11.685 2h.63zm-.081 1.802h-.468c-2.456 0-2.784.011-3.807.058-.975.045-1.504.207-1.857.344-.467.182-.8.398-1.15.748-.35.35-.566.683-.748 1.15-.137.353-.3.882-.344 1.857-.047 1.023-.058 1.351-.058 3.807v.468c0 2.456.011 2.784.058 3.807.045.975.207 1.504.344 1.857.182.466.399.8.748 1.15.35.35.683.566 1.15.748.353.137.882.3 1.857.344 1.054.048 1.37.058 4.041.058h.08c2.597 0 2.917-.01 3.96-.058.976-.045 1.505-.207 1.858-.344.466-.182.8-.398 1.15-.748.35-.35.566-.683.748-1.15.137-.353.3-.882.344-1.857.048-1.055.058-1.37.058-4.041v-.08c0-2.597-.01-2.917-.058-3.96-.045-.976-.207-1.505-.344-1.858a3.097 3.097 0 00-.748-1.15 3.098 3.098 0 00-1.15-.748c-.353-.137-.882-.3-1.857-.344-1.023-.047-1.351-.058-3.807-.058zM12 6.865a5.135 5.135 0 110 10.27 5.135 5.135 0 010-10.27zm0 1.802a3.333 3.333 0 100 6.666 3.333 3.333 0 000-6.666zm5.338-3.205a1.2 1.2 0 110 2.4 1.2 1.2 0 010-2.4z",youtube:"M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"},Pe=h(()=>Y.value.map(p=>{const a={Mobile:Be,"TV & AV":qs,Appliances:Fe,Computing:Bs,Smartphone:Be,Tablet:Be,Electronics:W,Fashion:W,Home:Fe,Beauty:W};return{name:p.name,slug:p.slug,icon:a[p.name]||W,items:p.items.map(o=>({...o,href:`/toko?category=${p.slug}&subcategory=${o.slug}`}))}})),Ve=()=>{typeof window<"u"&&k.value.trim()&&(window.location.href=`/toko?search=${encodeURIComponent(k.value.trim())}`)},fs=h(()=>{const p=k.value.toLowerCase().trim();if(!p){const v=[];return Y.value.slice(0,3).forEach(w=>{v.push({label:w.name,query:w.name.toLowerCase()})}),Y.value.slice(0,2).forEach(w=>{w.items.slice(0,1).forEach(oe=>{v.push({label:oe.name,query:oe.name.toLowerCase()})})}),v.slice(0,5)}const a=[];return Y.value.forEach(v=>{v.name.toLowerCase().includes(p)&&a.push({label:v.name,query:v.name.toLowerCase()}),v.items.forEach(w=>{w.name.toLowerCase().includes(p)&&a.push({label:w.name,query:w.name.toLowerCase()})})}),p.length>=2&&[{label:`${p}`,query:p},{label:`${p} terbaru`,query:`${p} terbaru`},{label:`${p} murah`,query:`${p} murah`}].forEach(w=>{a.find(oe=>oe.query===w.query)||a.push(w)}),a.filter((v,w,oe)=>w===oe.findIndex(vs=>vs.query===v.query)).slice(0,5)});return(p,a)=>(i(),d("div",ta,[e(b).props.impersonating?(i(),d("div",aa,[s("span",null,[t(e(zs),{class:"inline-block mr-1 h-4 w-4"}),a[11]||(a[11]=f(" Anda login sebagai ",-1)),s("strong",null,c(e(b).props.impersonating?.customer_name),1),f(" (Admin: "+c(e(b).props.impersonating?.admin_name)+") ",1)]),t(e($),{size:"sm",variant:"secondary",onClick:Se,class:"h-7 text-xs"},{default:l(()=>[...a[12]||(a[12]=[f(" Kembali ke Admin ",-1)])]),_:1})])):C("",!0),s("header",{class:ae(["sticky z-50 border-b bg-white shadow-sm dark:border-gray-800 dark:bg-gray-950",e(b).props.impersonating?"top-10":"top-0"])},[s("div",la,[s("div",oa,[t(e(x),{href:"/",class:"flex min-w-0 flex-shrink-0 items-center gap-2"},{default:l(()=>[X.value?(i(),d("img",{key:0,src:X.value,alt:q.value,class:"h-8 w-8 shrink-0 object-contain md:h-10 md:w-10"},null,8,na)):(i(),g(e(W),{key:1,class:"h-6 w-6 shrink-0 text-primary md:h-7 md:w-7"})),s("span",ia,c(q.value),1)]),_:1}),s("div",ra,[s("div",ua,[t(e(qe),{class:"absolute top-1/2 left-4 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),t(e(ee),{modelValue:k.value,"onUpdate:modelValue":a[0]||(a[0]=o=>k.value=o),placeholder:"Cari produk, kategori, atau brand...",class:"h-11 w-full pr-24 pl-11",onKeydown:ge(Ve,["enter"])},null,8,["modelValue"]),t(e($),{onClick:Ve,size:"sm",class:"absolute top-1/2 right-1 h-9 -translate-y-1/2"},{default:l(()=>[...a[13]||(a[13]=[f(" Cari ",-1)])]),_:1})])]),s("div",da,[t(e($),{variant:"ghost",size:"icon",onClick:a[1]||(a[1]=o=>M.value=!M.value),class:"rounded-full lg:hidden","aria-label":"Search"},{default:l(()=>[t(e(qe),{class:"h-5 w-5"})]),_:1}),t(e($),{variant:"ghost",size:"icon",onClick:I,class:"hidden items-center justify-center rounded-full sm:flex","aria-label":"Toggle theme"},{default:l(()=>[ce.value?(i(),g(e(Ts),{key:0,class:"h-5 w-5"})):(i(),g(e(As),{key:1,class:"h-5 w-5"}))]),_:1}),t(e(be),null,{default:l(()=>[t(e(ye),{"as-child":""},{default:l(()=>[t(e($),{variant:"ghost",size:"icon",class:"relative rounded-full","aria-label":"Wishlist"},{default:l(()=>[t(e(Ke),{class:"h-5 w-5"}),de.value>0?(i(),g(e(pe),{key:0,class:"absolute -top-1 -right-1 flex h-5 w-5 items-center justify-center rounded-full p-0 text-[10px]"},{default:l(()=>[f(c(de.value),1)]),_:1})):C("",!0)]),_:1})]),_:1}),t(e(xe),{align:"end",class:"w-150"},{default:l(()=>[t(e(ke),{class:"flex items-center justify-between"},{default:l(()=>[a[14]||(a[14]=s("span",null,"Wishlist Saya",-1)),t(e(pe),{variant:"secondary"},{default:l(()=>[f(c(de.value)+" item",1)]),_:1})]),_:1}),t(e(ne)),s("div",ca,[le.value.length>0?(i(),d("div",pa,[(i(!0),d(j,null,z(le.value,o=>(i(),d("div",{key:o.id,class:"group rounded-md p-3 transition-colors hover:bg-accent"},[s("div",ma,[t(e(x),{href:`/produk/${o.slug}`,class:"flex-shrink-0"},{default:l(()=>[s("img",{src:o.image,alt:o.name,class:"h-16 w-16 rounded object-cover"},null,8,fa)]),_:2},1032,["href"]),s("div",va,[t(e(x),{href:`/produk/${o.slug}`,class:"line-clamp-2 block text-sm font-medium hover:underline"},{default:l(()=>[f(c(o.name),1)]),_:2},1032,["href"]),s("p",ha,c(E(o.price)),1)]),t(e($),{variant:"ghost",size:"icon",class:"flex-shrink-0 opacity-0 transition-opacity group-hover:opacity-100",onClick:te(v=>n(o.id,o.product_id),["stop"]),"aria-label":"Remove from wishlist"},{default:l(()=>[t(e(Ue),{class:"h-4 w-4 text-destructive"})]),_:1},8,["onClick"]),t(e($),{size:"sm",onClick:te(v=>m(o),["stop"])},{default:l(()=>[a[15]||(a[15]=f(" + ",-1)),t(e(ze),{class:"h-3.5 w-3.5"})]),_:1},8,["onClick"])])]))),128))])):(i(),d("div",ga,[t(e(Ke),{class:"mx-auto mb-2 h-12 w-12 opacity-20"}),a[16]||(a[16]=s("p",null,"Wishlist masih kosong",-1))]))]),le.value.length>0?(i(),g(e(ne),{key:0})):C("",!0),le.value.length>0?(i(),d("div",_a,[t(e(x),{href:"/wishlist"},{default:l(()=>[t(e($),{class:"w-full",variant:"outline"},{default:l(()=>[...a[17]||(a[17]=[f(" Lihat Semua Wishlist ",-1)])]),_:1})]),_:1})])):C("",!0)]),_:1})]),_:1}),t(e(be),null,{default:l(()=>[t(e(ye),{"as-child":""},{default:l(()=>[t(e($),{variant:"ghost",size:"icon",class:"relative rounded-full","aria-label":"Cart"},{default:l(()=>[t(e(ze),{class:"h-5 w-5"}),r.value>0?(i(),g(e(pe),{key:0,class:"absolute -top-1 -right-1 flex h-5 w-5 items-center justify-center rounded-full p-0 text-[10px]"},{default:l(()=>[f(c(r.value),1)]),_:1})):C("",!0)]),_:1})]),_:1}),t(e(xe),{align:"end",class:"w-96"},{default:l(()=>[t(e(ke),{class:"flex items-center justify-between"},{default:l(()=>[s("div",ya,[A.value.length>0?(i(),g(e(Qe),{key:0,"model-value":rs.value,"onUpdate:modelValue":a[2]||(a[2]=o=>se(o===!0))},null,8,["model-value"])):C("",!0),a[18]||(a[18]=s("span",null,"Keranjang Belanja",-1))]),t(e(pe),{variant:"secondary"},{default:l(()=>[f(c(r.value)+" item",1)]),_:1})]),_:1}),t(e(ne)),s("div",xa,[A.value.length>0?(i(),d("div",ka,[(i(!0),d(j,null,z(A.value,o=>(i(),d("div",{key:o.id,class:"group rounded-md p-3 transition-colors hover:bg-accent"},[s("div",ba,[t(e(Qe),{"model-value":S.value.includes(o.id),"onUpdate:modelValue":v=>O(o.id,v===!0),onClick:a[3]||(a[3]=te(()=>{},["stop"]))},null,8,["model-value","onUpdate:modelValue"]),t(e(x),{href:`/produk/${o.slug}`,class:"flex-shrink-0"},{default:l(()=>[s("img",{src:o.image,alt:o.name,class:"h-16 w-16 rounded object-cover"},null,8,wa)]),_:2},1032,["href"]),s("div",$a,[t(e(x),{href:`/produk/${o.slug}`,class:"line-clamp-2 block text-sm font-medium hover:underline"},{default:l(()=>[f(c(o.name),1)]),_:2},1032,["href"]),s("p",Ca,c(E(o.price)),1)]),t(e($),{variant:"ghost",size:"icon",class:"flex-shrink-0 opacity-0 transition-opacity group-hover:opacity-100",onClick:te(v=>y(o.id),["stop"]),"aria-label":"Remove from cart"},{default:l(()=>[t(e(Ue),{class:"h-4 w-4 text-destructive"})]),_:1},8,["onClick"])]),s("div",Sa,[a[19]||(a[19]=s("span",{class:"text-xs text-muted-foreground"},"Jumlah:",-1)),s("div",ja,[t(e($),{variant:"outline",size:"icon",class:"h-7 w-7",onClick:te(v=>u(o.id,o.quantity-1),["stop"]),disabled:o.quantity<=1},{default:l(()=>[t(e(Is),{class:"h-3 w-3"})]),_:1},8,["onClick","disabled"]),s("span",Pa,c(o.quantity),1),t(e($),{variant:"outline",size:"icon",class:"h-7 w-7",onClick:te(v=>u(o.id,o.quantity+1),["stop"])},{default:l(()=>[t(e(Ls),{class:"h-3 w-3"})]),_:1},8,["onClick"])])])]))),128))])):(i(),d("div",Va,[t(e(ze),{class:"mx-auto mb-2 h-12 w-12 opacity-20"}),a[20]||(a[20]=s("p",null,"Keranjang masih kosong",-1))]))]),A.value.length>0?(i(),g(e(ne),{key:0})):C("",!0),A.value.length>0?(i(),d("div",Ma,[s("div",Ba,[s("div",qa,[s("span",za,"Total ("+c(r.value)+" item):",1),s("span",Ta,c(E(ve.value)),1)]),je.value>0?(i(),d("div",Aa,[s("span",Ia,"Dipilih ("+c(je.value)+" item):",1),s("span",La,c(E(us.value)),1)])):C("",!0)]),s("div",null,[t(e($),{class:"w-full",size:"sm",disabled:je.value===0,onClick:te(ds,["stop"])},{default:l(()=>[...a[21]||(a[21]=[f(" Checkout ",-1)])]),_:1},8,["disabled"])])])):C("",!0)]),_:1})]),_:1}),t(e(be),null,{default:l(()=>[t(e(ye),{"as-child":""},{default:l(()=>[t(e($),{variant:"ghost",size:"icon",class:"rounded-full","aria-label":"Account"},{default:l(()=>[t(e(De),{class:"h-5 w-5"})]),_:1})]),_:1}),t(e(xe),{align:"end",class:"w-56"},{default:l(()=>[N.value?(i(),g(e(ke),{key:0},{default:l(()=>[s("div",Ga,[s("p",Fa,c(e(b).props.auth?.user?.name||"Customer"),1),s("p",Ka,c(e(b).props.auth?.user?.email),1)])]),_:1})):(i(),g(e(ke),{key:1},{default:l(()=>[...a[22]||(a[22]=[f("Akun Saya",-1)])]),_:1})),t(e(ne)),N.value?(i(),d(j,{key:2},[t(e(x),{href:"/client/profile"},{default:l(()=>[t(e(Z),null,{default:l(()=>[t(e(Ee),{class:"mr-2 h-4 w-4"}),a[23]||(a[23]=s("span",null,"Profil",-1))]),_:1})]),_:1}),t(e(x),{href:"/client/profile?tab=orders"},{default:l(()=>[t(e(Z),null,{default:l(()=>[t(e(W),{class:"mr-2 h-4 w-4"}),a[24]||(a[24]=s("span",null,"Pesanan Saya",-1))]),_:1})]),_:1}),t(e(x),{href:"/client/profile?tab=wallet"},{default:l(()=>[t(e(Z),null,{default:l(()=>[t(e(W),{class:"mr-2 h-4 w-4"}),a[25]||(a[25]=s("span",null,"Dompet Saya",-1))]),_:1})]),_:1}),t(e(x),{href:"/client/profile?tab=security"},{default:l(()=>[t(e(Z),null,{default:l(()=>[t(e(Gs),{class:"mr-2 h-4 w-4"}),a[26]||(a[26]=s("span",null,"Keamanan",-1))]),_:1})]),_:1}),t(e(x),{href:"/client/profile?tab=danger"},{default:l(()=>[t(e(Z),null,{default:l(()=>[t(e(Fs),{class:"mr-2 h-4 w-4"}),a[27]||(a[27]=s("span",null,"Hapus Akun",-1))]),_:1})]),_:1}),t(e(ne)),s("button",{type:"button",class:"w-full",onClick:Ce},[t(e(Z),null,{default:l(()=>[t(e(Ks),{class:"mr-2 h-4 w-4"}),a[28]||(a[28]=s("span",null,"Keluar",-1))]),_:1})])],64)):(i(),d(j,{key:3},[t(e(x),{href:"/client/login"},{default:l(()=>[t(e(Z),null,{default:l(()=>[t(e(De),{class:"mr-2 h-4 w-4"}),a[29]||(a[29]=s("span",null,"Masuk",-1))]),_:1})]),_:1}),t(e(x),{href:"/client/register"},{default:l(()=>[t(e(Z),null,{default:l(()=>[t(e(Ee),{class:"mr-2 h-4 w-4"}),a[30]||(a[30]=s("span",null,"Daftar",-1))]),_:1})]),_:1})],64))]),_:1})]),_:1}),t(e(ls),{open:L.value,"onUpdate:open":a[5]||(a[5]=o=>L.value=o)},{default:l(()=>[t(e(Ws),{"as-child":""},{default:l(()=>[t(e($),{variant:"ghost",size:"icon",class:"rounded-full lg:hidden","aria-label":"Menu"},{default:l(()=>[t(e(Us),{class:"h-5 w-5"})]),_:1})]),_:1}),t(e(os),{side:"left",class:"w-full p-0 sm:w-96"},{default:l(()=>[t(e(ns),{class:"border-b px-6 py-4"},{default:l(()=>[t(e(is),{class:"flex items-center gap-2 text-xl font-bold"},{default:l(()=>[X.value?(i(),d("img",{key:0,src:X.value,alt:q.value,class:"h-6 w-6 object-contain"},null,8,Ua)):(i(),g(e(W),{key:1,class:"h-6 w-6"})),f(" "+c(q.value),1)]),_:1})]),_:1}),s("div",Da,[s("nav",Ea,[(i(!0),d(j,null,z(Pe.value,o=>(i(),d("div",{key:o.name},[s("div",Oa,[(i(),g(Te(o.icon),{class:"h-5 w-5"})),s("h3",Ra,c(o.name),1)]),t(e(Q),{class:"my-3"}),o.items.length>0?(i(),d("ul",Na,[(i(!0),d(j,null,z(o.items,v=>(i(),d("li",{key:v.name},[t(e(x),{href:v.href,class:"block py-1 text-sm text-gray-600 transition-colors hover:text-black dark:text-gray-400 dark:hover:text-white",onClick:a[4]||(a[4]=w=>L.value=!1)},{default:l(()=>[f(c(v.name),1)]),_:2},1032,["href"])]))),128))])):C("",!0)]))),128))])])]),_:1})]),_:1},8,["open"])])])]),s("div",Wa,[s("div",Ha,[s("div",Ja,[t(e(be),null,{default:l(()=>[t(e(ye),{"as-child":""},{default:l(()=>[t(e($),{variant:"ghost",class:"h-auto px-3 py-2 text-sm font-medium"},{default:l(()=>[...a[31]||(a[31]=[f(" Semua Kategori ",-1),s("svg",{class:"ml-1 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1)])]),_:1})]),_:1}),t(e(xe),{align:"start",class:"w-[800px] p-6"},{default:l(()=>[s("div",Ya,[(i(!0),d(j,null,z(Pe.value,o=>(i(),d("div",{key:o.name,class:"space-y-3"},[t(e(x),{href:`/toko?category=${o.slug}`,class:"group"},{default:l(()=>[s("div",Xa,[(i(),g(Te(o.icon),{class:"h-4 w-4 text-primary"})),s("span",null,c(o.name),1)])]),_:2},1032,["href"]),s("div",Za,[(i(!0),d(j,null,z(o.items.slice(0,5),v=>(i(),g(e(x),{key:v.name,href:v.href,class:"block py-1 text-xs text-muted-foreground transition-colors hover:text-primary hover:underline"},{default:l(()=>[f(c(v.name),1)]),_:2},1032,["href"]))),128)),o.items.length>5?(i(),g(e(x),{key:0,href:`/toko?category=${o.slug}`,class:"block py-1 text-xs font-medium text-primary hover:underline"},{default:l(()=>[...a[32]||(a[32]=[f(" Lihat Semua → ",-1)])]),_:1},8,["href"])):C("",!0)])]))),128))])]),_:1})]),_:1}),(i(!0),d(j,null,z(Pe.value.slice(0,5),o=>(i(),g(e(x),{key:o.name,href:`/toko?category=${o.slug}`,class:"flex items-center gap-1.5 rounded-md px-3 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-primary"},{default:l(()=>[(i(),g(Te(o.icon),{class:"h-4 w-4"})),f(" "+c(o.name),1)]),_:2},1032,["href"]))),128)),a[34]||(a[34]=s("div",{class:"flex-1"},null,-1)),t(e(x),{href:"/artikel",class:"flex items-center gap-2 text-sm font-semibold text-primary hover:underline dark:text-primary"},{default:l(()=>[...a[33]||(a[33]=[s("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"})],-1),f(" Artikel & Blog ",-1)])]),_:1})])])]),t(Ds,{"enter-active-class":"transition-all duration-200 ease-out","enter-from-class":"opacity-0 -translate-y-2","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition-all duration-150 ease-in","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 -translate-y-2"},{default:l(()=>[M.value?(i(),d("div",Qa,[s("div",el,[s("div",sl,[s("div",tl,[t(e(qe),{class:"absolute top-1/2 left-4 h-5 w-5 -translate-y-1/2 text-muted-foreground"}),t(e(ee),{modelValue:k.value,"onUpdate:modelValue":a[6]||(a[6]=o=>k.value=o),placeholder:"Cari produk, model, atau kata kunci...",class:"h-12 w-full pr-12 pl-12 text-base",onKeydown:[a[7]||(a[7]=ge(o=>M.value=!1,["escape"])),ge(Ve,["enter"])],autofocus:""},null,8,["modelValue"]),t(e($),{variant:"ghost",size:"icon",onClick:a[8]||(a[8]=o=>M.value=!1),class:"absolute top-1/2 right-2 -translate-y-1/2 rounded-full"},{default:l(()=>[...a[35]||(a[35]=[f(" ✕ ",-1)])]),_:1})]),s("div",al,[t(e(Q),{class:"my-4"}),s("p",ll,c(k.value.trim()?"Saran Pencarian:":"Pencarian Populer:"),1),s("div",ol,[(i(!0),d(j,null,z(fs.value,o=>(i(),g(e(x),{key:o.query,href:`/toko?search=${encodeURIComponent(o.query)}`},{default:l(()=>[t(e(pe),{variant:"secondary",class:"cursor-pointer hover:bg-accent"},{default:l(()=>[f(c(o.label),1)]),_:2},1024)]),_:2},1032,["href"]))),128))])])])])])):C("",!0)]),_:1})],2),s("main",null,[we(p.$slots,"default")]),s("footer",nl,[s("div",il,[s("div",rl,[s("div",ul,[a[41]||(a[41]=Es('<div class="mb-6 inline-flex h-16 w-16 items-center justify-center rounded-full bg-primary/10"><svg class="h-8 w-8 text-primary" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg></div><h3 class="mb-3 text-2xl font-bold md:text-3xl"> Dapatkan Penawaran Eksklusif </h3><p class="mb-6 text-sm text-muted-foreground md:text-base"> Berlangganan newsletter kami dan dapatkan diskon hingga 20% untuk pembelian pertama Anda </p>',3)),s("div",dl,[s("div",cl,[t(e(ee),{modelValue:G.value,"onUpdate:modelValue":a[9]||(a[9]=o=>G.value=o),type:"email",placeholder:"Masukkan email Anda",class:"h-12 pr-4",disabled:F.value,onKeydown:ge(he,["enter"])},null,8,["modelValue","disabled"])]),t(e($),{onClick:he,class:"h-12 px-8 font-semibold",disabled:F.value||!G.value},{default:l(()=>[!F.value&&!H.value?(i(),d("span",pl,"Berlangganan")):F.value?(i(),d("span",ml,[...a[36]||(a[36]=[s("svg",{class:"h-4 w-4 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),f(" Memproses... ",-1)])])):(i(),d("span",fl,[...a[37]||(a[37]=[s("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),f(" Berhasil! ",-1)])]))]),_:1},8,["disabled"])]),s("p",vl,[a[39]||(a[39]=f(" Dengan berlangganan, Anda menyetujui ",-1)),t(e(x),{href:"/page/privacy",class:"underline hover:text-foreground"},{default:l(()=>[...a[38]||(a[38]=[f("Kebijakan Privasi",-1)])]),_:1}),a[40]||(a[40]=f(" kami ",-1))])])]),s("div",hl,[s("div",gl,[s("div",_l,[t(e(x),{href:"/",class:"mb-4 flex items-center gap-2"},{default:l(()=>[X.value?(i(),d("img",{key:0,src:X.value,alt:q.value,class:"h-15 w-15 object-contain"},null,8,yl)):(i(),g(e(W),{key:1,class:"h-8 w-8 text-primary"})),s("span",xl,c(q.value),1)]),_:1}),s("p",kl,c($e.value),1),s("div",bl,[a[42]||(a[42]=s("span",{class:"text-sm font-semibold"},"Ikuti Kami:",-1)),s("div",wl,[(i(!0),d(j,null,z(ps.value,o=>(i(),g(e($),{key:o.icon,variant:"outline",size:"icon","as-child":"",class:"rounded-full transition-all hover:border-primary hover:bg-primary hover:text-primary-foreground"},{default:l(()=>[s("a",{href:o.href,"aria-label":o.name,target:"_blank",rel:"noopener noreferrer"},[(i(),d("svg",Cl,[s("path",{d:ms[o.icon]},null,8,Sl)]))],8,$l)]),_:2},1024))),128))])])]),s("div",jl,[s("div",Pl,[(i(!0),d(j,null,z(cs.value.slice(0,4),o=>(i(),d("div",{key:o.title},[s("h4",Vl,c(o.title),1),s("ul",Ml,[(i(!0),d(j,null,z(o.links,v=>(i(),d("li",{key:v.href},[t(e(x),{href:v.href,class:"group inline-flex items-center text-muted-foreground transition-colors hover:text-primary"},{default:l(()=>[s("span",null,c(v.name),1),a[43]||(a[43]=s("svg",{class:"ml-1 h-3 w-3 -translate-x-2 opacity-0 transition-all group-hover:translate-x-0 group-hover:opacity-100",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))]),_:2},1032,["href"])]))),128))])]))),128))])])])]),s("div",Bl,[s("div",ql,[s("div",zl,[s("p",Tl," © "+c(new Date().getFullYear())+" Puranusa. All rights reserved. ",1),s("div",Al,[t(e(x),{href:"/page/privacy",class:"transition-colors hover:text-foreground"},{default:l(()=>[...a[44]||(a[44]=[f(" Privasi ",-1)])]),_:1}),a[47]||(a[47]=s("span",{class:"hidden text-muted-foreground/50 sm:inline"},"•",-1)),t(e(x),{href:"/page/terms",class:"transition-colors hover:text-foreground"},{default:l(()=>[...a[45]||(a[45]=[f(" Syarat & Ketentuan ",-1)])]),_:1}),a[48]||(a[48]=s("span",{class:"hidden text-muted-foreground/50 sm:inline"},"•",-1)),t(e(x),{href:"/page/about",class:"transition-colors hover:text-foreground"},{default:l(()=>[...a[46]||(a[46]=[f(" Tentang Kami ",-1)])]),_:1})])]),s("div",Il,[a[49]||(a[49]=s("span",{class:"text-center text-xs text-muted-foreground md:text-right"}," Metode Pembayaran: ",-1)),s("div",Ll,[(i(!0),d(j,null,z(fe.value,o=>(i(),d("div",{key:o,class:"rounded border bg-background px-3 py-1.5 text-xs font-medium whitespace-nowrap"},c(o),1))),128))])])])])])]),K.value.length>0?(i(),g(sa,{key:1,open:V.value,"onUpdate:open":a[10]||(a[10]=o=>V.value=o),item:K.value.length===1?K.value[0]:void 0,items:K.value.length>1?K.value:void 0},null,8,["open","item","items"])):C("",!0)]))}});export{Jl as _,sa as a};
