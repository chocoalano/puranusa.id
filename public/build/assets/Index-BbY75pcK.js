import{d as A,r as y,q as H,E as N,j as E,v as g,g as o,b as t,u as e,a0 as P,w as s,e as n,c as i,t as j,s as _,am as C,K as b,Z as q,a9 as z,F as p,x,y as B,n as m,an as U,aF as L,A as Z,B as G}from"./vendor-BgSYH69o.js";import{_ as J}from"./AppLayout.vue_vue_type_script_setup_true_lang-BLQAiOgB.js";import{_ as O}from"./Pagination.vue_vue_type_script_setup_true_lang-BEOQ6vqn.js";import{_ as V,v as $}from"./index-C6h2rSEx.js";import{_ as k,a as S}from"./CardContent.vue_vue_type_script_setup_true_lang-DMT_NDq0.js";import{_ as F}from"./CardHeader.vue_vue_type_script_setup_true_lang-CGqIWGeD.js";import{_ as R}from"./CardTitle.vue_vue_type_script_setup_true_lang-DLaLEZPb.js";import{_ as Q,a as X,b as Y}from"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-C9WGGbb6.js";import{_ as ee}from"./DropdownMenuCheckboxItem.vue_vue_type_script_setup_true_lang-RzxLYeQt.js";import{_ as te}from"./Input.vue_vue_type_script_setup_true_lang-CucwjuSa.js";import{_ as se,a as ae,b as M,c as le,d as re,e as W}from"./TableHeader.vue_vue_type_script_setup_true_lang-Cbaht4ar.js";import"./index-CMWG4mbA.js";import"./AvatarFallback.vue_vue_type_script_setup_true_lang-DU4k6tzW.js";import"./AvatarImage.vue_vue_type_script_setup_true_lang-BasOtxZI.js";import"./index-DqFeuJ-n.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CKeFYOA5.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-sGxRETQ-.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-CM9Iafca.js";const oe={class:"rounded-xl p-4 space-y-6 py-6"},ne={class:"grid gap-4 md:grid-cols-3"},ue={class:"text-2xl font-bold"},de={class:"text-2xl font-bold"},ie={class:"text-2xl font-bold"},me={class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},ce={class:"relative flex-1 max-w-sm"},fe={class:"rounded-md border"},Te=A({__name:"Index",props:{customers:{},statistics:{},search:{}},setup(u){const v=u,f=y(v.search||""),c=y([]),D=y([]),T=y({});let I;const h=a=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(a),K=[{id:"index",header:()=>m("div",{class:"w-12"},"No"),cell:({row:a})=>{const l=a.index+1+(v.customers.current_page-1)*v.customers.per_page;return m("div",{class:"font-medium"},l)}},{accessorKey:"name",header:({column:a})=>m(V,{variant:"ghost",onClick:()=>a.toggleSorting(a.getIsSorted()==="asc"),class:"-ml-4"},()=>["Nama Customer",m(U,{class:"ml-2 h-4 w-4"})])},{accessorKey:"email",header:"Email",cell:({row:a})=>m("div",{class:"text-sm text-muted-foreground"},a.getValue("email"))},{accessorKey:"ewallet_saldo",header:({column:a})=>m(V,{variant:"ghost",onClick:()=>a.toggleSorting(a.getIsSorted()==="asc"),class:"-ml-4"},()=>["Saldo E-Wallet",m(U,{class:"ml-2 h-4 w-4"})]),cell:({row:a})=>{const l=parseFloat(a.getValue("ewallet_saldo"));return m("div",{class:"font-bold text-green-600"},h(l))}}],w=H({get data(){return v.customers.data},columns:K,getCoreRowModel:G(),getSortedRowModel:Z(),getFilteredRowModel:L(),onSortingChange:a=>$(a,c),onColumnFiltersChange:a=>$(a,D),onColumnVisibilityChange:a=>$(a,T),state:{get sorting(){return c.value},get columnFilters(){return D.value},get columnVisibility(){return T.value}},manualSorting:!0});return N(c,a=>{a.length>0&&E.get("/admin/wallets",{search:f.value||void 0,sort_by:a[0].id,sort_order:a[0].desc?"desc":"asc"},{preserveState:!0,preserveScroll:!0})},{deep:!0}),N(f,()=>{clearTimeout(I),I=setTimeout(()=>{E.get("/admin/wallets",{search:f.value||void 0,sort_by:c.value[0]?.id||"name",sort_order:c.value[0]?.desc?"desc":"asc"},{preserveState:!0,preserveScroll:!0})},300)}),(a,l)=>(o(),g(p,null,[t(e(P),{title:"Kelola E-Wallet"}),t(J,null,{default:s(()=>[n("div",oe,[l[9]||(l[9]=n("div",null,[n("h2",{class:"text-3xl font-bold tracking-tight"},"Kelola E-Wallet"),n("p",{class:"text-muted-foreground"},"Monitoring saldo e-wallet seluruh customer")],-1)),n("div",ne,[t(e(k),null,{default:s(()=>[t(e(F),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[t(e(R),{class:"text-sm font-medium"},{default:s(()=>[...l[1]||(l[1]=[_("Total Customer",-1)])]),_:1}),t(e(C),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(e(S),null,{default:s(()=>[n("div",ue,b(u.statistics.total_customers),1),l[2]||(l[2]=n("p",{class:"text-xs text-muted-foreground"},"Customer terdaftar",-1))]),_:1})]),_:1}),t(e(k),null,{default:s(()=>[t(e(F),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[t(e(R),{class:"text-sm font-medium"},{default:s(()=>[...l[3]||(l[3]=[_("Total Saldo",-1)])]),_:1}),t(e(C),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(e(S),null,{default:s(()=>[n("div",de,b(h(u.statistics.total_balance)),1),l[4]||(l[4]=n("p",{class:"text-xs text-muted-foreground"},"Saldo keseluruhan",-1))]),_:1})]),_:1}),t(e(k),null,{default:s(()=>[t(e(F),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[t(e(R),{class:"text-sm font-medium"},{default:s(()=>[...l[5]||(l[5]=[_("Rata-rata Saldo",-1)])]),_:1}),t(e(C),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(e(S),null,{default:s(()=>[n("div",ie,b(h(u.statistics.avg_balance)),1),l[6]||(l[6]=n("p",{class:"text-xs text-muted-foreground"},"Per customer",-1))]),_:1})]),_:1})]),n("div",me,[n("div",ce,[t(e(q),{class:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),t(e(te),{modelValue:f.value,"onUpdate:modelValue":l[0]||(l[0]=r=>f.value=r),placeholder:"Cari customer...",class:"pl-9"},null,8,["modelValue"])]),t(e(Q),null,{default:s(()=>[t(e(X),{"as-child":""},{default:s(()=>[t(e(V),{variant:"outline",class:"ml-auto"},{default:s(()=>[l[7]||(l[7]=_(" Kolom ",-1)),t(e(z),{class:"ml-2 h-4 w-4"})]),_:1})]),_:1}),t(e(Y),{align:"end"},{default:s(()=>[(o(!0),g(p,null,x(e(w).getAllColumns().filter(r=>r.getCanHide()),r=>(o(),i(e(ee),{key:r.id,class:"capitalize","model-value":r.getIsVisible(),"onUpdate:modelValue":d=>{r.toggleVisibility(!!d)}},{default:s(()=>[_(b(r.id),1)]),_:2},1032,["model-value","onUpdate:modelValue"]))),128))]),_:1})]),_:1})]),n("div",fe,[t(e(se),null,{default:s(()=>[t(e(ae),null,{default:s(()=>[(o(!0),g(p,null,x(e(w).getHeaderGroups(),r=>(o(),i(e(M),{key:r.id},{default:s(()=>[(o(!0),g(p,null,x(r.headers,d=>(o(),i(e(le),{key:d.id},{default:s(()=>[d.isPlaceholder?j("",!0):(o(),i(e(B),{key:0,render:d.column.columnDef.header,props:d.getContext()},null,8,["render","props"]))]),_:2},1024))),128))]),_:2},1024))),128))]),_:1}),t(e(re),null,{default:s(()=>[e(w).getRowModel().rows?.length?(o(!0),g(p,{key:0},x(e(w).getRowModel().rows,r=>(o(),i(e(M),{key:r.id},{default:s(()=>[(o(!0),g(p,null,x(r.getVisibleCells(),d=>(o(),i(e(W),{key:d.id},{default:s(()=>[t(e(B),{render:d.column.columnDef.cell,props:d.getContext()},null,8,["render","props"])]),_:2},1024))),128))]),_:2},1024))),128)):(o(),i(e(M),{key:1},{default:s(()=>[t(e(W),{colspan:K.length,class:"h-24 text-center"},{default:s(()=>[...l[8]||(l[8]=[_(" Tidak ada data customer. ",-1)])]),_:1},8,["colspan"])]),_:1}))]),_:1})]),_:1})]),u.customers.last_page>1?(o(),i(O,{key:0,data:{current_page:u.customers.current_page,last_page:u.customers.last_page,per_page:u.customers.per_page,from:u.customers.from,to:u.customers.to,total:u.customers.total},url:"/admin/wallets",filters:{search:f.value||void 0,sort_by:c.value[0]?.id||"name",sort_order:c.value[0]?.desc?"desc":"asc"}},null,8,["data","filters"])):j("",!0)])]),_:1})],64))}});export{Te as default};
