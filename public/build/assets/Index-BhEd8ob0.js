import{d as H,r as y,q,E,j,v as f,g as r,b as t,u as e,a1 as z,w as s,e as n,t as C,c as i,s as _,ao as k,K as b,Z as L,aa as O,F as p,x,y as A,n as m,ap as B,aO as Z,A as G,B as J}from"./vendor-DfMbnFaR.js";import{_ as Q}from"./AppLayout.vue_vue_type_script_setup_true_lang-3Xwj2Srj.js";import{_ as X}from"./Pagination.vue_vue_type_script_setup_true_lang-C64O0K5A.js";import{_ as V,v as $}from"./index-BhPH699V.js";import{_ as S,a as F}from"./CardContent.vue_vue_type_script_setup_true_lang-NxxB_dAy.js";import{_ as R}from"./CardHeader.vue_vue_type_script_setup_true_lang-Kdg7L6IL.js";import{_ as M}from"./CardTitle.vue_vue_type_script_setup_true_lang-Cj4ck2dV.js";import{_ as Y,a as ee,b as te}from"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-NxThyEhC.js";import{_ as se}from"./DropdownMenuCheckboxItem.vue_vue_type_script_setup_true_lang-hxH_Oz-B.js";import{_ as ae}from"./Input.vue_vue_type_script_setup_true_lang-Bi8Aupzl.js";import{_ as le,a as re,b as D,c as oe,d as ne,e as U}from"./TableHeader.vue_vue_type_script_setup_true_lang-PuAkTm4y.js";import{u as ue}from"./usePermissions-Bdkvyget.js";import"./index-CSEUMRIG.js";import"./AvatarFallback.vue_vue_type_script_setup_true_lang-Bqij1zEj.js";import"./AvatarImage.vue_vue_type_script_setup_true_lang-BOYUcfDs.js";import"./index-DnSHhU6t.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DrG-1awo.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-CpOM3BUc.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-VBwlv4qP.js";const de={class:"rounded-xl p-4 space-y-6 py-6"},ie={key:0,class:"grid gap-4 md:grid-cols-3"},me={class:"text-2xl font-bold"},ce={class:"text-2xl font-bold"},fe={class:"text-2xl font-bold"},ge={class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},_e={class:"relative flex-1 max-w-sm"},pe={class:"rounded-md border"},Ee=H({__name:"Index",props:{customers:{},statistics:{},search:{}},setup(u){const v=u,g=y(v.search||""),c=y([]),T=y([]),I=y({});let K;const h=a=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(a),{isSuperAdmin:W,isAdmin:P}=ue(),N=[{id:"index",header:()=>m("div",{class:"w-12"},"No"),cell:({row:a})=>{const l=a.index+1+(v.customers.current_page-1)*v.customers.per_page;return m("div",{class:"font-medium"},l)}},{accessorKey:"name",header:({column:a})=>m(V,{variant:"ghost",onClick:()=>a.toggleSorting(a.getIsSorted()==="asc"),class:"-ml-4"},()=>["Nama Customer",m(B,{class:"ml-2 h-4 w-4"})])},{accessorKey:"email",header:"Email",cell:({row:a})=>m("div",{class:"text-sm text-muted-foreground"},a.getValue("email"))},{accessorKey:"ewallet_saldo",header:({column:a})=>m(V,{variant:"ghost",onClick:()=>a.toggleSorting(a.getIsSorted()==="asc"),class:"-ml-4"},()=>["Saldo E-Wallet",m(B,{class:"ml-2 h-4 w-4"})]),cell:({row:a})=>{const l=parseFloat(a.getValue("ewallet_saldo"));return m("div",{class:"font-bold text-green-600"},h(l))}}],w=q({get data(){return v.customers.data},columns:N,getCoreRowModel:J(),getSortedRowModel:G(),getFilteredRowModel:Z(),onSortingChange:a=>$(a,c),onColumnFiltersChange:a=>$(a,T),onColumnVisibilityChange:a=>$(a,I),state:{get sorting(){return c.value},get columnFilters(){return T.value},get columnVisibility(){return I.value}},manualSorting:!0});return E(c,a=>{a.length>0&&j.get("/admin/wallets",{search:g.value||void 0,sort_by:a[0].id,sort_order:a[0].desc?"desc":"asc"},{preserveState:!0,preserveScroll:!0})},{deep:!0}),E(g,()=>{clearTimeout(K),K=setTimeout(()=>{j.get("/admin/wallets",{search:g.value||void 0,sort_by:c.value[0]?.id||"name",sort_order:c.value[0]?.desc?"desc":"asc"},{preserveState:!0,preserveScroll:!0})},300)}),(a,l)=>(r(),f(p,null,[t(e(z),{title:"Kelola E-Wallet"}),t(Q,null,{default:s(()=>[n("div",de,[l[9]||(l[9]=n("div",null,[n("h2",{class:"text-3xl font-bold tracking-tight"},"Kelola E-Wallet"),n("p",{class:"text-muted-foreground"},"Monitoring saldo e-wallet seluruh customer")],-1)),e(W)||e(P)?(r(),f("div",ie,[t(e(S),null,{default:s(()=>[t(e(R),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[t(e(M),{class:"text-sm font-medium"},{default:s(()=>[...l[1]||(l[1]=[_("Total Customer",-1)])]),_:1}),t(e(k),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(e(F),null,{default:s(()=>[n("div",me,b(u.statistics.total_customers),1),l[2]||(l[2]=n("p",{class:"text-xs text-muted-foreground"},"Customer terdaftar",-1))]),_:1})]),_:1}),t(e(S),null,{default:s(()=>[t(e(R),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[t(e(M),{class:"text-sm font-medium"},{default:s(()=>[...l[3]||(l[3]=[_("Total Saldo",-1)])]),_:1}),t(e(k),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(e(F),null,{default:s(()=>[n("div",ce,b(h(u.statistics.total_balance)),1),l[4]||(l[4]=n("p",{class:"text-xs text-muted-foreground"},"Saldo keseluruhan",-1))]),_:1})]),_:1}),t(e(S),null,{default:s(()=>[t(e(R),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[t(e(M),{class:"text-sm font-medium"},{default:s(()=>[...l[5]||(l[5]=[_("Rata-rata Saldo",-1)])]),_:1}),t(e(k),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(e(F),null,{default:s(()=>[n("div",fe,b(h(u.statistics.avg_balance)),1),l[6]||(l[6]=n("p",{class:"text-xs text-muted-foreground"},"Per customer",-1))]),_:1})]),_:1})])):C("",!0),n("div",ge,[n("div",_e,[t(e(L),{class:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),t(e(ae),{modelValue:g.value,"onUpdate:modelValue":l[0]||(l[0]=o=>g.value=o),placeholder:"Cari customer...",class:"pl-9"},null,8,["modelValue"])]),t(e(Y),null,{default:s(()=>[t(e(ee),{"as-child":""},{default:s(()=>[t(e(V),{variant:"outline",class:"ml-auto"},{default:s(()=>[l[7]||(l[7]=_(" Kolom ",-1)),t(e(O),{class:"ml-2 h-4 w-4"})]),_:1})]),_:1}),t(e(te),{align:"end"},{default:s(()=>[(r(!0),f(p,null,x(e(w).getAllColumns().filter(o=>o.getCanHide()),o=>(r(),i(e(se),{key:o.id,class:"capitalize","model-value":o.getIsVisible(),"onUpdate:modelValue":d=>{o.toggleVisibility(!!d)}},{default:s(()=>[_(b(o.id),1)]),_:2},1032,["model-value","onUpdate:modelValue"]))),128))]),_:1})]),_:1})]),n("div",pe,[t(e(le),null,{default:s(()=>[t(e(re),null,{default:s(()=>[(r(!0),f(p,null,x(e(w).getHeaderGroups(),o=>(r(),i(e(D),{key:o.id},{default:s(()=>[(r(!0),f(p,null,x(o.headers,d=>(r(),i(e(oe),{key:d.id},{default:s(()=>[d.isPlaceholder?C("",!0):(r(),i(e(A),{key:0,render:d.column.columnDef.header,props:d.getContext()},null,8,["render","props"]))]),_:2},1024))),128))]),_:2},1024))),128))]),_:1}),t(e(ne),null,{default:s(()=>[e(w).getRowModel().rows?.length?(r(!0),f(p,{key:0},x(e(w).getRowModel().rows,o=>(r(),i(e(D),{key:o.id},{default:s(()=>[(r(!0),f(p,null,x(o.getVisibleCells(),d=>(r(),i(e(U),{key:d.id},{default:s(()=>[t(e(A),{render:d.column.columnDef.cell,props:d.getContext()},null,8,["render","props"])]),_:2},1024))),128))]),_:2},1024))),128)):(r(),i(e(D),{key:1},{default:s(()=>[t(e(U),{colspan:N.length,class:"h-24 text-center"},{default:s(()=>[...l[8]||(l[8]=[_(" Tidak ada data customer. ",-1)])]),_:1},8,["colspan"])]),_:1}))]),_:1})]),_:1})]),u.customers.last_page>1?(r(),i(X,{key:1,data:{current_page:u.customers.current_page,last_page:u.customers.last_page,per_page:u.customers.per_page,from:u.customers.from,to:u.customers.to,total:u.customers.total},url:"/admin/wallets",filters:{search:g.value||void 0,sort_by:c.value[0]?.id||"name",sort_order:c.value[0]?.desc?"desc":"asc"}},null,8,["data","filters"])):C("",!0)])]),_:1})],64))}});export{Ee as default};
