const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/vendor-BgSYH69o.js","assets/vendor-UvtswsZk.css"])))=>i.map(i=>d[i]);
import{_ as it,a as dt,b as ae,c as le}from"./TabsTrigger.vue_vue_type_script_setup_true_lang-DyXOuW6j.js";import{b as Ot,c as yt,_ as qt}from"./Ecommerce.vue_vue_type_script_setup_true_lang-BOIPG17i.js";import{d as Y,r as B,p as F,c as j,g as r,u as e,w as l,b as s,e as t,t as h,s as o,K as n,cy as he,aM as $e,bv as Qt,d1 as Gt,dx as Wt,Q as R,E as Ye,v as f,M as Ce,Y as Ht,F as G,x as se,J as H,aX as Jt,$ as Zt,z as et,h as re,j as ue,D as we,dm as Xt,dH as Yt,dI as kt,cv as es,dv as ts,aH as tt,aE as ke,aD as ss,dJ as as,ad as De,aG as ut,dk as ls,cQ as mt,L as Se,a2 as Me,aj as ns,am as Te,C as rs,aN as ct,dK as wt,dL as os,a3 as is,dM as $t,dN as Pt,o as ze,dr as st,ap as Ge,dG as We,cz as bt,cx as He,dd as Fe,dO as je,_ as ds,aq as at,as as _t,G as ht,Z as Ke,dP as us,dA as ms,dQ as cs,dR as ps,at as fs,dS as xs,a1 as gs,ar as Ct,dT as St,a0 as vs}from"./vendor-BgSYH69o.js";import{_ as ys,a as bs}from"./AvatarFallback.vue_vue_type_script_setup_true_lang-DU4k6tzW.js";import{_ as _s}from"./AvatarImage.vue_vue_type_script_setup_true_lang-BasOtxZI.js";import{_ as I}from"./index-N1u60vhI.js";import{_ as O,a as q}from"./CardContent.vue_vue_type_script_setup_true_lang-DMT_NDq0.js";import{_ as K}from"./index-C6h2rSEx.js";import{_ as Z}from"./CardHeader.vue_vue_type_script_setup_true_lang-CGqIWGeD.js";import{_ as X}from"./CardTitle.vue_vue_type_script_setup_true_lang-DLaLEZPb.js";import{a as Ae,b as Le,c as Be,d as Ve,_ as Ie}from"./DialogTitle.vue_vue_type_script_setup_true_lang-DjrEYwN9.js";import{_ as Ee}from"./DialogFooter.vue_vue_type_script_setup_true_lang-BOMxWa5W.js";import{_ as te}from"./Input.vue_vue_type_script_setup_true_lang-CucwjuSa.js";import{_ as z}from"./Label.vue_vue_type_script_setup_true_lang-rNa1VbjU.js";import{_ as Re}from"./Textarea.vue_vue_type_script_setup_true_lang-8GCGPdxB.js";import{_ as hs}from"./Switch.vue_vue_type_script_setup_true_lang-C-kvS4bJ.js";import{_ as ne}from"./Separator.vue_vue_type_script_setup_true_lang-BI92_z_a.js";import{_ as lt,a as nt,b as rt,c as ot,d as Ne}from"./SelectValue.vue_vue_type_script_setup_true_lang-CM9Iafca.js";import{_ as pe}from"./CardDescription.vue_vue_type_script_setup_true_lang-BxkDfeDR.js";import{f as ks,g as ws,h as $s,i as Ps,j as Cs}from"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-C9WGGbb6.js";import{_ as Je,a as Ze,b as Xe}from"./index-C4lWIB5v.js";import{q as me,a as Oe}from"./index-CMWG4mbA.js";import"./Checkbox.vue_vue_type_script_setup_true_lang-DCdtw4zv.js";import"./app-BT8AuIar.js";function Pe(){return{formatCurrency:c=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(c),formatDate:c=>new Intl.DateTimeFormat("id-ID",{year:"numeric",month:"long",day:"numeric"}).format(new Date(c)),getStatusLabel:c=>({pending:"Menunggu",processing:"Diproses",shipped:"Dikirim",delivered:"Selesai",cancelled:"Dibatalkan"})[c]||c,getTransactionTypeLabel:c=>({topup:"Top Up",top_up:"Top Up",withdrawal:"Penarikan",bonus:"Bonus",purchase:"Pembelian",refund:"Refund",deduct:"Potongan Admin"})[c]||c,getTransactionStatusLabel:c=>({pending:"Menunggu",completed:"Selesai",failed:"Gagal",cancelled:"Dibatalkan"})[c]||c}}const Ss={class:"flex flex-col items-center text-center"},Ts={class:"text-xl font-bold text-gray-900 dark:text-gray-100"},js={class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},Ms={class:"mt-4 w-full space-y-2 text-sm"},Rs={class:"space-y-1.5"},Ds={class:"flex items-center justify-between"},As={class:"flex gap-1"},Ls={class:"p-2 bg-gray-50 dark:bg-gray-800 rounded-lg"},Bs={class:"flex items-center justify-between"},Vs={class:"font-mono font-semibold"},Is={class:"text-[10px] text-gray-500 dark:text-gray-400 mt-1 break-all"},Es={class:"flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-800 rounded-lg"},Us={class:"font-mono font-semibold"},Ks={class:"flex items-center justify-between p-2 bg-emerald-50 dark:bg-emerald-900/20 rounded-lg"},Fs={class:"font-semibold text-emerald-700 dark:text-emerald-400"},Ns=Y({__name:"ProfileCard",props:{customer:{}},setup(a){const i=a,{formatCurrency:u}=Pe(),m=B(!1),_=F(()=>i.customer.name.split(" ").map(D=>D[0]).join("").toUpperCase().slice(0,2)),c=F(()=>typeof window>"u"?"":`${window.location.origin}/client/register?ref=${i.customer.ref_code}`),p=async()=>{if(typeof window>"u"||!navigator.clipboard){R.error("Tidak dapat menyalin link ke clipboard");return}try{await navigator.clipboard.writeText(c.value),m.value=!0,R.success("Link referral telah disalin ke clipboard"),setTimeout(()=>{m.value=!1},2e3)}catch{R.error("Tidak dapat menyalin link ke clipboard")}},w=async()=>{if(typeof window>"u")return;const D={title:"Bergabung dengan Referral Saya",text:`Gunakan kode referral saya: ${i.customer.ref_code}`,url:c.value};if(navigator.share)try{await navigator.share(D),R.success("Link referral berhasil dibagikan")}catch(x){x.name!=="AbortError"&&console.error("Error sharing:",x)}else await p()};return(D,x)=>(r(),j(e(O),null,{default:l(()=>[s(e(q),{class:"pt-6"},{default:l(()=>[t("div",Ss,[s(e(ys),{class:"h-24 w-24 mb-4"},{default:l(()=>[s(e(_s),{src:`https://api.dicebear.com/7.x/initials/svg?seed=${a.customer.name}`},null,8,["src"]),s(e(bs),null,{default:l(()=>[o(n(_.value),1)]),_:1})]),_:1}),t("h2",Ts,n(a.customer.name),1),t("p",js,n(a.customer.username),1),a.customer.level?(r(),j(e(I),{key:0,variant:"outline",class:"mt-2 bg-amber-50 text-amber-700 border-amber-300 dark:bg-amber-900/20 dark:text-amber-400 dark:border-amber-700"},{default:l(()=>[o(n(a.customer.level),1)]),_:1})):h("",!0),a.customer.email_verified_at?(r(),j(e(I),{key:1,class:"mt-3 bg-emerald-100 text-emerald-700 hover:bg-emerald-200 dark:bg-emerald-900 dark:text-emerald-100"},{default:l(()=>[s(e(he),{class:"w-3 h-3 mr-1"}),x[0]||(x[0]=o(" Email Terverifikasi ",-1))]),_:1})):(r(),j(e(I),{key:2,variant:"secondary",class:"mt-3"},{default:l(()=>[s(e($e),{class:"w-3 h-3 mr-1"}),x[1]||(x[1]=o(" Email Belum Terverifikasi ",-1))]),_:1})),t("div",Ms,[t("div",Rs,[t("div",Ds,[x[3]||(x[3]=t("span",{class:"text-xs text-gray-600 dark:text-gray-400"},"Referral Link",-1)),t("div",As,[s(e(K),{size:"sm",variant:"outline",class:"h-6 px-2 text-[10px]",onClick:p},{default:l(()=>[m.value?(r(),j(e(Qt),{key:0,class:"w-3 h-3 mr-1"})):(r(),j(e(Gt),{key:1,class:"w-3 h-3 mr-1"})),o(" "+n(m.value?"Tersalin":"Salin"),1)]),_:1}),s(e(K),{size:"sm",variant:"outline",class:"h-6 px-2 text-[10px]",onClick:w},{default:l(()=>[s(e(Wt),{class:"w-3 h-3 mr-1"}),x[2]||(x[2]=o(" Bagikan ",-1))]),_:1})])]),t("div",Ls,[t("div",Bs,[x[4]||(x[4]=t("span",{class:"text-gray-600 dark:text-gray-400"},"Kode Referral",-1)),t("span",Vs,n(a.customer.ref_code),1)]),t("p",Is,n(c.value),1)])]),t("div",Es,[x[5]||(x[5]=t("span",{class:"text-gray-600 dark:text-gray-400"},"E-Wallet ID",-1)),t("span",Us,n(a.customer.ewallet_id),1)]),t("div",Ks,[x[6]||(x[6]=t("span",{class:"text-emerald-700 dark:text-emerald-400"},"Saldo",-1)),t("span",Fs,n(e(u)(a.customer.ewallet_saldo)),1)])])])]),_:1})]),_:1}))}}),zs={class:"flex items-center justify-between"},Os={key:0,class:"text-center py-12 text-muted-foreground"},qs={key:1,class:"space-y-4"},Qs={class:"flex items-start gap-3 mb-3"},Gs={class:"flex-1 min-w-0"},Ws={class:"flex items-center gap-2 mb-1"},Hs={class:"font-semibold text-sm"},Js={class:"text-sm font-medium"},Zs={class:"text-xs text-muted-foreground"},Xs={class:"space-y-1 mb-3"},Ys={class:"text-sm"},ea={key:0,class:"text-sm text-muted-foreground"},ta={class:"text-sm text-muted-foreground"},sa={key:0},aa={class:"text-xs text-muted-foreground"},la={key:1,class:"text-xs text-muted-foreground italic mt-2"},na={class:"flex items-center gap-2"},ra={class:"space-y-4 py-4"},oa={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},ia={class:"space-y-2"},da={class:"flex items-center space-x-2 pt-8"},ua={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},ma={class:"space-y-2"},ca={class:"space-y-2"},pa={class:"space-y-2"},fa={class:"space-y-2"},xa={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},ga={class:"space-y-2"},va={class:"space-y-2"},ya={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},ba={class:"space-y-2"},_a={class:"space-y-2"},ha={class:"space-y-2"},ka=Y({__name:"AddressManagement",props:{addresses:{}},setup(a){const i=B(!1),u=B(!1),m=B(!1),_=B(!1),c=B([]),p=B([]),w=B(!1),D=B(!1),x=B(""),$=B(""),g=B({label:"",is_default:!1,recipient_name:"",recipient_phone:"",address_line1:"",address_line2:"",province_label:"",province_id:0,city_label:"",city_id:0,postal_code:"",country:"Indonesia",description:""}),b=B(null),d=async()=>{w.value=!0;try{const A=await re.get("/api/shipping/provinces");c.value=A.data.data}catch(A){R.error("Gagal memuat data provinsi"),console.error("Error loading provinces:",A)}finally{w.value=!1}},C=async A=>{if(A){D.value=!0,p.value=[],$.value="";try{const k=await re.get("/api/shipping/cities",{params:{province_id:A}});p.value=k.data.data}catch(k){R.error("Gagal memuat data kota"),console.error("Error loading cities:",k)}finally{D.value=!1}}};Ye(x,A=>{if(!A)return;const k=c.value.find(v=>v.id.toString()===A);k&&(g.value.province_id=parseInt(A),g.value.province_label=k.name,C(A))}),Ye($,A=>{if(!A)return;const k=p.value.find(v=>v.id.toString()===A);k&&(g.value.city_id=parseInt(A),g.value.city_label=k.name)});const M=()=>{u.value=!1,g.value={label:"",is_default:!1,recipient_name:"",recipient_phone:"",address_line1:"",address_line2:"",province_label:"",province_id:0,city_label:"",city_id:0,postal_code:"",country:"Indonesia",description:""},x.value="",$.value="",p.value=[],d(),i.value=!0},E=A=>{u.value=!0,b.value=A.id,g.value={...A},d().then(()=>{A.province_id&&(x.value=A.province_id.toString(),C(A.province_id.toString()).then(()=>{A.city_id&&($.value=A.city_id.toString())}))}),i.value=!0},N=()=>{i.value=!1,b.value=null},U=()=>{if(!g.value.recipient_name||!g.value.recipient_phone||!g.value.address_line1){R.error("Mohon lengkapi nama penerima, telepon, dan alamat");return}if(!g.value.province_id||!g.value.city_id){R.error("Mohon pilih provinsi dan kota/kabupaten");return}_.value=!0;const A=u.value&&b.value?`/client/profile/addresses/${b.value}`:"/client/profile/addresses",k=u.value?"put":"post";ue[k](A,g.value,{preserveScroll:!0,onSuccess:()=>{R.success(`Alamat berhasil ${u.value?"diperbarui":"ditambahkan"}`),N()},onError:v=>{if(console.error("Address save error:",v),typeof v=="object"&&v!==null){const P=Object.values(v)[0],y=Array.isArray(P)?P[0]:P;R.error(y||"Gagal menyimpan alamat")}else R.error("Gagal menyimpan alamat. Silakan coba lagi.")},onFinish:()=>{_.value=!1}})},Q=A=>{confirm("Apakah Anda yakin ingin menghapus alamat ini?")&&(m.value=!0,ue.delete(`/client/profile/addresses/${A}`,{preserveScroll:!0,onSuccess:()=>{R.success("Alamat berhasil dihapus")},onError:k=>{if(console.error("Address delete error:",k),typeof k=="object"&&k!==null){const v=Object.values(k)[0],P=Array.isArray(v)?v[0]:v;R.error(P||"Gagal menghapus alamat")}else R.error("Gagal menghapus alamat. Silakan coba lagi.")},onFinish:()=>{m.value=!1}}))},V=A=>{we({}).post(`/client/profile/addresses/${A}/set-default`,{preserveScroll:!0,onSuccess:()=>{R.success("Alamat utama berhasil diubah")},onError:v=>{if(console.error("Set default address error:",v),typeof v=="object"&&v!==null){const P=Object.values(v)[0],y=Array.isArray(P)?P[0]:P;R.error(y||"Gagal mengubah alamat utama")}else R.error("Gagal mengubah alamat utama. Silakan coba lagi.")}})},W=A=>A?A.toLowerCase().includes("rumah")||A.toLowerCase().includes("home")?Xt:A.toLowerCase().includes("kantor")||A.toLowerCase().includes("office")?Yt:Ce:Ce;return(A,k)=>(r(),f(G,null,[s(e(O),null,{default:l(()=>[s(e(Z),null,{default:l(()=>[t("div",zs,[s(e(X),{class:"flex items-center gap-2"},{default:l(()=>[s(e(Ce),{class:"w-5 h-5"}),k[11]||(k[11]=o(" Kelola Alamat ",-1))]),_:1}),s(e(K),{size:"sm",onClick:M},{default:l(()=>[s(e(Ht),{class:"w-4 h-4 mr-2"}),k[12]||(k[12]=o(" Tambah Alamat ",-1))]),_:1})])]),_:1}),s(e(q),null,{default:l(()=>[a.addresses.length===0?(r(),f("div",Os,[s(e(Ce),{class:"w-12 h-12 mx-auto mb-4 opacity-20"}),k[13]||(k[13]=t("p",{class:"mb-2"},"Belum ada alamat tersimpan",-1)),k[14]||(k[14]=t("p",{class:"text-sm"},"Tambahkan alamat untuk mempermudah proses pengiriman",-1))])):(r(),f("div",qs,[(r(!0),f(G,null,se(a.addresses,v=>(r(),f("div",{key:v.id,class:H(["relative p-4 rounded-lg border transition-all",v.is_default?"border-primary bg-primary/5":"border-gray-200 dark:border-gray-700"])},[v.is_default?(r(),j(e(I),{key:0,variant:"default",class:"absolute top-2 right-2 text-xs"},{default:l(()=>[...k[15]||(k[15]=[o(" Utama ",-1)])]),_:1})):h("",!0),t("div",Qs,[(r(),j(Jt(W(v.label)),{class:H(["w-5 h-5 mt-1 flex-shrink-0",v.is_default?"text-primary":"text-muted-foreground"])},null,8,["class"])),t("div",Gs,[t("div",Ws,[t("h4",Hs,n(v.label||"Alamat"),1)]),t("p",Js,n(v.recipient_name),1),t("p",Zs,n(v.recipient_phone),1)])]),t("div",Xs,[t("p",Ys,n(v.address_line1),1),v.address_line2?(r(),f("p",ea,n(v.address_line2),1)):h("",!0),t("p",ta,[o(n(v.city_label)+", "+n(v.province_label)+" ",1),v.postal_code?(r(),f("span",sa,n(v.postal_code),1)):h("",!0)]),t("p",aa,n(v.country),1),v.description?(r(),f("p",la,n(v.description),1)):h("",!0)]),s(e(ne),{class:"my-3"}),t("div",na,[v.is_default?h("",!0):(r(),j(e(K),{key:0,variant:"outline",size:"sm",onClick:P=>V(v.id)},{default:l(()=>[...k[16]||(k[16]=[o(" Jadikan Utama ",-1)])]),_:1},8,["onClick"])),s(e(K),{variant:"outline",size:"sm",onClick:P=>E(v)},{default:l(()=>[s(e(Zt),{class:"w-3 h-3 mr-1"}),k[17]||(k[17]=o(" Edit ",-1))]),_:1},8,["onClick"]),s(e(K),{variant:"destructive",size:"sm",disabled:m.value,onClick:P=>Q(v.id)},{default:l(()=>[s(e(et),{class:"w-3 h-3 mr-1"}),k[18]||(k[18]=o(" Hapus ",-1))]),_:1},8,["disabled","onClick"])])],2))),128))]))]),_:1})]),_:1}),s(e(Ie),{open:i.value,"onUpdate:open":N},{default:l(()=>[s(e(Ae),{class:"sm:max-w-2xl max-h-[90vh] overflow-y-auto"},{default:l(()=>[s(e(Le),null,{default:l(()=>[s(e(Be),null,{default:l(()=>[o(n(u.value?"Edit Alamat":"Tambah Alamat Baru"),1)]),_:1}),s(e(Ve),null,{default:l(()=>[o(n(u.value?"Perbarui informasi alamat Anda":"Tambahkan alamat pengiriman baru"),1)]),_:1})]),_:1}),t("div",ra,[t("div",oa,[t("div",ia,[s(e(z),{for:"label"},{default:l(()=>[...k[19]||(k[19]=[o("Label Alamat",-1)])]),_:1}),s(e(te),{id:"label",modelValue:g.value.label,"onUpdate:modelValue":k[0]||(k[0]=v=>g.value.label=v),placeholder:"Rumah, Kantor, dll"},null,8,["modelValue"])]),t("div",da,[s(e(hs),{id:"is_default",checked:g.value.is_default,"onUpdate:checked":k[1]||(k[1]=v=>g.value.is_default=v)},null,8,["checked"]),s(e(z),{for:"is_default",class:"cursor-pointer"},{default:l(()=>[...k[20]||(k[20]=[o("Jadikan alamat utama",-1)])]),_:1})])]),t("div",ua,[t("div",ma,[s(e(z),{for:"recipient_name"},{default:l(()=>[...k[21]||(k[21]=[o("Nama Penerima ",-1),t("span",{class:"text-red-500"},"*",-1)])]),_:1}),s(e(te),{id:"recipient_name",modelValue:g.value.recipient_name,"onUpdate:modelValue":k[2]||(k[2]=v=>g.value.recipient_name=v),placeholder:"Nama lengkap penerima",required:""},null,8,["modelValue"])]),t("div",ca,[s(e(z),{for:"recipient_phone"},{default:l(()=>[...k[22]||(k[22]=[o("No. Telepon Penerima ",-1),t("span",{class:"text-red-500"},"*",-1)])]),_:1}),s(e(te),{id:"recipient_phone",modelValue:g.value.recipient_phone,"onUpdate:modelValue":k[3]||(k[3]=v=>g.value.recipient_phone=v),placeholder:"08xxxxxxxxxx",required:""},null,8,["modelValue"])])]),t("div",pa,[s(e(z),{for:"address_line1"},{default:l(()=>[...k[23]||(k[23]=[o("Alamat Lengkap ",-1),t("span",{class:"text-red-500"},"*",-1)])]),_:1}),s(e(Re),{id:"address_line1",modelValue:g.value.address_line1,"onUpdate:modelValue":k[4]||(k[4]=v=>g.value.address_line1=v),placeholder:"Jalan, nomor rumah, RT/RW, blok",rows:"3",required:""},null,8,["modelValue"])]),t("div",fa,[s(e(z),{for:"address_line2"},{default:l(()=>[...k[24]||(k[24]=[o("Detail Tambahan (Opsional)",-1)])]),_:1}),s(e(te),{id:"address_line2",modelValue:g.value.address_line2,"onUpdate:modelValue":k[5]||(k[5]=v=>g.value.address_line2=v),placeholder:"Patokan, gedung, unit, warna rumah, dll"},null,8,["modelValue"])]),t("div",xa,[t("div",ga,[s(e(z),{for:"province"},{default:l(()=>[...k[25]||(k[25]=[o("Provinsi ",-1),t("span",{class:"text-red-500"},"*",-1)])]),_:1}),s(e(lt),{modelValue:x.value,"onUpdate:modelValue":k[6]||(k[6]=v=>x.value=v),disabled:w.value},{default:l(()=>[s(e(nt),{id:"province"},{default:l(()=>[s(e(rt),{placeholder:w.value?"Memuat provinsi...":"Pilih provinsi"},null,8,["placeholder"])]),_:1}),s(e(ot),null,{default:l(()=>[(r(!0),f(G,null,se(c.value,v=>(r(),j(e(Ne),{key:v.id,value:v.id.toString()},{default:l(()=>[o(n(v.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue","disabled"])]),t("div",va,[s(e(z),{for:"city"},{default:l(()=>[...k[26]||(k[26]=[o("Kota/Kabupaten ",-1),t("span",{class:"text-red-500"},"*",-1)])]),_:1}),s(e(lt),{modelValue:$.value,"onUpdate:modelValue":k[7]||(k[7]=v=>$.value=v),disabled:!x.value||D.value},{default:l(()=>[s(e(nt),{id:"city"},{default:l(()=>[s(e(rt),{placeholder:D.value?"Memuat kota...":x.value?"Pilih kota/kabupaten":"Pilih provinsi terlebih dahulu"},null,8,["placeholder"])]),_:1}),s(e(ot),null,{default:l(()=>[(r(!0),f(G,null,se(p.value,v=>(r(),j(e(Ne),{key:v.id,value:v.id.toString()},{default:l(()=>[o(n(v.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue","disabled"])])]),t("div",ya,[t("div",ba,[s(e(z),{for:"postal_code"},{default:l(()=>[...k[27]||(k[27]=[o("Kode Pos",-1)])]),_:1}),s(e(te),{id:"postal_code",modelValue:g.value.postal_code,"onUpdate:modelValue":k[8]||(k[8]=v=>g.value.postal_code=v),placeholder:"12345"},null,8,["modelValue"])]),t("div",_a,[s(e(z),{for:"country"},{default:l(()=>[...k[28]||(k[28]=[o("Negara",-1)])]),_:1}),s(e(te),{id:"country",modelValue:g.value.country,"onUpdate:modelValue":k[9]||(k[9]=v=>g.value.country=v),placeholder:"Indonesia"},null,8,["modelValue"])])]),t("div",ha,[s(e(z),{for:"description"},{default:l(()=>[...k[29]||(k[29]=[o("Catatan (Opsional)",-1)])]),_:1}),s(e(Re),{id:"description",modelValue:g.value.description,"onUpdate:modelValue":k[10]||(k[10]=v=>g.value.description=v),placeholder:"Catatan khusus untuk alamat ini",rows:"2"},null,8,["modelValue"])])]),s(e(Ee),null,{default:l(()=>[s(e(K),{variant:"outline",onClick:N,disabled:_.value},{default:l(()=>[...k[30]||(k[30]=[o(" Batal ",-1)])]),_:1},8,["disabled"]),s(e(K),{onClick:U,disabled:_.value},{default:l(()=>[o(n(_.value?"Menyimpan...":u.value?"Perbarui":"Simpan"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])],64))}}),wa={class:"p-3 bg-emerald-50 dark:bg-emerald-900/20 rounded-lg"},$a={class:"text-xl font-bold text-emerald-700 dark:text-emerald-400"},Pa={class:"p-3 bg-amber-50 dark:bg-amber-900/20 rounded-lg"},Ca={class:"text-xl font-bold text-amber-700 dark:text-amber-400"},Sa=Y({__name:"BonusStatsCard",props:{customer:{}},setup(a){const{formatCurrency:i}=Pe();return(u,m)=>(r(),j(e(O),null,{default:l(()=>[s(e(Z),null,{default:l(()=>[s(e(X),{class:"flex items-center gap-2"},{default:l(()=>[s(e(kt),{class:"w-5 h-5"}),m[0]||(m[0]=o(" Statistik Bonus ",-1))]),_:1})]),_:1}),s(e(q),{class:"space-y-3"},{default:l(()=>[t("div",wa,[m[1]||(m[1]=t("p",{class:"text-xs text-emerald-700 dark:text-emerald-400 mb-1"},"Total Dirilis",-1)),t("p",$a,n(e(i)(a.customer.bonus_stats.total_released)),1)]),t("div",Pa,[m[2]||(m[2]=t("p",{class:"text-xs text-amber-700 dark:text-amber-400 mb-1"},"Total Pending",-1)),t("p",Ca,n(e(i)(a.customer.bonus_stats.total_pending)),1)])]),_:1})]),_:1}))}}),Ta={class:"flex items-center gap-3"},ja={class:"p-2 bg-blue-100 dark:bg-blue-900/20 rounded-lg"},Ma={class:"font-semibold"},Ra=Y({__name:"MemberSinceCard",props:{createdAt:{}},setup(a){const{formatDate:i}=Pe();return(u,m)=>(r(),j(e(O),null,{default:l(()=>[s(e(q),{class:"pt-6"},{default:l(()=>[t("div",Ta,[t("div",ja,[s(e(es),{class:"w-5 h-5 text-blue-600 dark:text-blue-400"})]),t("div",null,[m[0]||(m[0]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Member Sejak",-1)),t("p",Ma,n(e(i)(a.createdAt)),1)])])]),_:1})]),_:1}))}}),Da={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Aa={class:"space-y-2"},La={class:"relative"},Ba={key:0,class:"text-sm text-red-500"},Va={class:"space-y-2"},Ia={class:"relative"},Ea={key:0,class:"text-sm text-red-500"},Ua={class:"space-y-2"},Ka={class:"relative"},Fa={key:0,class:"text-sm text-red-500"},Na={class:"space-y-2"},za={key:0,class:"text-sm text-red-500"},Oa={class:"space-y-2"},qa={class:"relative"},Qa={key:0,class:"text-sm text-red-500"},Ga={class:"space-y-2"},Wa={class:"relative"},Ha={key:0,class:"text-sm text-red-500"},Ja={class:"space-y-2"},Za={class:"relative"},Xa={key:0,class:"text-sm text-red-500"},Ya={class:"space-y-2"},el={key:0,class:"text-sm text-red-500"},tl={class:"flex items-center justify-end gap-3"},sl=Y({__name:"ProfileInformationTab",props:{customer:{}},setup(a){const i=a,u=we({name:i.customer.name,username:i.customer.username||"",nik:i.customer.nik||"",gender:i.customer.gender||"",alamat:i.customer.alamat||"",email:i.customer.email,phone:i.customer.phone,description:i.customer.description||""}),m=()=>{u.patch("/client/profile",{preserveScroll:!0,onSuccess:()=>{R.success("Informasi profil berhasil diperbarui")}})};return(_,c)=>(r(),j(e(O),null,{default:l(()=>[s(e(Z),null,{default:l(()=>[s(e(X),null,{default:l(()=>[...c[9]||(c[9]=[o("Informasi Profile",-1)])]),_:1}),s(e(pe),null,{default:l(()=>[...c[10]||(c[10]=[o(" Update informasi profil Anda di sini ",-1)])]),_:1})]),_:1}),s(e(q),null,{default:l(()=>[t("form",{onSubmit:De(m,["prevent"]),class:"space-y-6"},[t("div",Da,[t("div",Aa,[s(e(z),{for:"username"},{default:l(()=>[...c[11]||(c[11]=[o(" Username ",-1),t("span",{class:"text-red-500"},"*",-1)])]),_:1}),t("div",La,[s(e(ts),{class:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s(e(te),{id:"username",modelValue:e(u).username,"onUpdate:modelValue":c[0]||(c[0]=p=>e(u).username=p),type:"text",placeholder:"username",class:"pl-10",required:""},null,8,["modelValue"])]),e(u).errors.username?(r(),f("p",Ba,n(e(u).errors.username),1)):h("",!0)]),t("div",Va,[s(e(z),{for:"name"},{default:l(()=>[...c[12]||(c[12]=[o(" Nama Lengkap ",-1),t("span",{class:"text-red-500"},"*",-1)])]),_:1}),t("div",Ia,[s(e(tt),{class:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s(e(te),{id:"name",modelValue:e(u).name,"onUpdate:modelValue":c[1]||(c[1]=p=>e(u).name=p),type:"text",placeholder:"Masukkan nama lengkap",class:"pl-10",required:""},null,8,["modelValue"])]),e(u).errors.name?(r(),f("p",Ea,n(e(u).errors.name),1)):h("",!0)]),t("div",Ua,[s(e(z),{for:"nik"},{default:l(()=>[...c[13]||(c[13]=[o("NIK (Nomor Induk Kependudukan)",-1)])]),_:1}),t("div",Ka,[s(e(ke),{class:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s(e(te),{id:"nik",modelValue:e(u).nik,"onUpdate:modelValue":c[2]||(c[2]=p=>e(u).nik=p),type:"text",placeholder:"16 digit NIK",class:"pl-10",maxlength:"16"},null,8,["modelValue"])]),e(u).errors.nik?(r(),f("p",Fa,n(e(u).errors.nik),1)):h("",!0)]),t("div",Na,[s(e(z),{for:"gender"},{default:l(()=>[...c[14]||(c[14]=[o("Jenis Kelamin",-1)])]),_:1}),s(e(lt),{modelValue:e(u).gender,"onUpdate:modelValue":c[3]||(c[3]=p=>e(u).gender=p)},{default:l(()=>[s(e(nt),null,{default:l(()=>[s(e(rt),{placeholder:"Pilih jenis kelamin"})]),_:1}),s(e(ot),null,{default:l(()=>[s(e(Ne),{value:"male"},{default:l(()=>[...c[15]||(c[15]=[o("Laki-laki",-1)])]),_:1}),s(e(Ne),{value:"female"},{default:l(()=>[...c[16]||(c[16]=[o("Perempuan",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(u).errors.gender?(r(),f("p",za,n(e(u).errors.gender),1)):h("",!0)]),t("div",Oa,[s(e(z),{for:"email"},{default:l(()=>[...c[17]||(c[17]=[o(" Email ",-1),t("span",{class:"text-red-500"},"*",-1)])]),_:1}),t("div",qa,[s(e(ss),{class:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s(e(te),{id:"email",modelValue:e(u).email,"onUpdate:modelValue":c[4]||(c[4]=p=>e(u).email=p),type:"email",placeholder:"email@example.com",class:"pl-10",required:""},null,8,["modelValue"])]),e(u).errors.email?(r(),f("p",Qa,n(e(u).errors.email),1)):h("",!0)]),t("div",Ga,[s(e(z),{for:"phone"},{default:l(()=>[...c[18]||(c[18]=[o(" Nomor Telepon ",-1),t("span",{class:"text-red-500"},"*",-1)])]),_:1}),t("div",Wa,[s(e(as),{class:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s(e(te),{id:"phone",modelValue:e(u).phone,"onUpdate:modelValue":c[5]||(c[5]=p=>e(u).phone=p),type:"tel",placeholder:"08123456789",class:"pl-10",required:""},null,8,["modelValue"])]),e(u).errors.phone?(r(),f("p",Ha,n(e(u).errors.phone),1)):h("",!0)])]),t("div",Ja,[s(e(z),{for:"alamat"},{default:l(()=>[...c[19]||(c[19]=[o("Alamat",-1)])]),_:1}),t("div",Za,[s(e(Ce),{class:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s(e(Re),{id:"alamat",modelValue:e(u).alamat,"onUpdate:modelValue":c[6]||(c[6]=p=>e(u).alamat=p),placeholder:"Masukkan alamat lengkap...",rows:"3",class:"pl-10"},null,8,["modelValue"])]),e(u).errors.alamat?(r(),f("p",Xa,n(e(u).errors.alamat),1)):h("",!0)]),t("div",Ya,[s(e(z),{for:"description"},{default:l(()=>[...c[20]||(c[20]=[o("Deskripsi",-1)])]),_:1}),s(e(Re),{id:"description",modelValue:e(u).description,"onUpdate:modelValue":c[7]||(c[7]=p=>e(u).description=p),placeholder:"Ceritakan tentang diri Anda...",rows:"4"},null,8,["modelValue"]),c[21]||(c[21]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"}," Maksimal 1000 karakter ",-1)),e(u).errors.description?(r(),f("p",el,n(e(u).errors.description),1)):h("",!0)]),t("div",tl,[s(e(K),{type:"button",variant:"outline",onClick:c[8]||(c[8]=p=>e(u).reset()),disabled:e(u).processing},{default:l(()=>[...c[22]||(c[22]=[o(" Reset ",-1)])]),_:1},8,["disabled"]),s(e(K),{type:"submit",disabled:e(u).processing},{default:l(()=>[e(u).processing?h("",!0):(r(),j(e(he),{key:0,class:"w-4 h-4 mr-2"})),o(" "+n(e(u).processing?"Menyimpan...":"Simpan Perubahan"),1)]),_:1},8,["disabled"])])],32)]),_:1})]),_:1}))}}),al={key:0,class:"flex items-center justify-center py-12"},ll={key:1,class:"space-y-6 py-6"},nl={class:"space-y-3"},rl={class:"flex items-center gap-2 text-sm font-medium"},ol={class:"space-y-2"},il={class:"flex justify-between"},dl={class:"text-sm font-medium"},ul={class:"flex justify-between items-center"},ml={key:0,class:"flex justify-between"},cl={class:"text-sm font-medium"},pl={key:1,class:"flex justify-between items-center"},fl={class:"space-y-3"},xl={class:"flex items-center gap-2 text-sm font-medium"},gl={class:"space-y-3"},vl=["src","alt"],yl={class:"flex-1"},bl={class:"font-medium text-sm"},_l={class:"text-xs text-muted-foreground"},hl={class:"text-xs text-muted-foreground"},kl={class:"text-right"},wl={class:"font-semibold text-sm"},$l={key:0,class:"space-y-3"},Pl={class:"flex items-center gap-2 text-sm font-medium"},Cl={class:"p-3 bg-muted/30 rounded-lg space-y-1"},Sl={class:"font-medium text-sm"},Tl={class:"text-sm text-muted-foreground"},jl={class:"text-sm text-muted-foreground"},Ml={class:"text-sm text-muted-foreground"},Rl={key:1,class:"space-y-3"},Dl={class:"flex items-center gap-2 text-sm font-medium"},Al={class:"p-3 bg-muted/30 rounded-lg space-y-2"},Ll={class:"flex justify-between"},Bl={class:"text-sm font-medium"},Vl={class:"flex justify-between"},Il={class:"text-sm font-medium"},El={class:"flex justify-between"},Ul={class:"text-sm font-medium"},Kl={class:"space-y-3"},Fl={class:"flex items-center gap-2 text-sm font-medium"},Nl={class:"space-y-2 text-sm"},zl={class:"flex justify-between"},Ol={key:0,class:"flex justify-between"},ql={class:"text-red-600"},Ql={class:"flex justify-between"},Gl={key:1,class:"flex justify-between"},Wl={class:"flex justify-between font-semibold text-base"},Hl={class:"text-primary"},Jl={key:2,class:"space-y-2"},Zl={class:"space-y-1"},Xl={class:"text-sm text-muted-foreground"},Yl={key:3,class:"space-y-4 pt-4"},en={class:"space-y-3"},tn={class:"flex items-center gap-2 text-sm font-medium"},sn={class:"flex items-start justify-between"},an={class:"flex items-center gap-2 font-medium text-sm"},ln={class:"text-xs text-muted-foreground"},nn={key:0,class:"mt-1 text-xs text-destructive"},rn={class:"flex items-start justify-between"},on={class:"flex items-center gap-2 font-medium text-sm"},dn={key:3},un={key:4},mn={key:4,class:"pt-4"},cn={key:2,class:"flex items-center justify-center py-12 text-muted-foreground"},pn=Y({__name:"OrderDetailSheet",props:{open:{type:Boolean},orderId:{}},emits:["update:open"],setup(a,{emit:i}){const u=a,m=i,{formatCurrency:_,formatDate:c,getStatusLabel:p}=Pe(),w=ut(),D=F(()=>w.props.auth?.user?.ewallet_saldo??0),x=B(!1),$=B(!1),g=B(!1),b=B(!1),d=B(null),C=B("midtrans"),M=F(()=>d.value?.status?.toUpperCase()==="SHIPPED"),E=F(()=>d.value?.status?.toUpperCase()==="PENDING"&&!d.value?.paid_at),N=F(()=>d.value?D.value>=d.value.grand_total:!1);ls(()=>{typeof document<"u"&&(b.value?document.body.classList.add("midtrans-popup-active"):document.body.classList.remove("midtrans-popup-active"))}),mt(()=>{typeof document<"u"&&document.body.classList.remove("midtrans-popup-active")});const U=F(()=>{const v=d.value?.status?.toLowerCase();return{"bg-yellow-100 text-yellow-700 hover:bg-yellow-200 dark:bg-yellow-900 dark:text-yellow-100":v==="pending","bg-blue-100 text-blue-700 hover:bg-blue-200 dark:bg-blue-900 dark:text-blue-100":v==="processing"||v==="paid","bg-purple-100 text-purple-700 hover:bg-purple-200 dark:bg-purple-900 dark:text-purple-100":v==="shipped","bg-emerald-100 text-emerald-700 hover:bg-emerald-200 dark:bg-emerald-900 dark:text-emerald-100":v==="delivered"||v==="completed","bg-red-100 text-red-700 hover:bg-red-200 dark:bg-red-900 dark:text-red-100":v==="cancelled"}}),Q=async()=>{if(u.orderId){x.value=!0;try{const v=await re.get(`/api/client/orders/${u.orderId}`);d.value=v.data.data}catch(v){console.error("Failed to load order:",v),R.error("Gagal memuat detail pesanan")}finally{x.value=!1}}},V=async()=>{if(!(!d.value||!M.value||$.value)){$.value=!0;try{await re.post(`/api/client/orders/${d.value.id}/complete`),await Q(),ue.reload({only:["orders"]}),R.success('Status pesanan berhasil diperbarui menjadi "Selesai".')}catch(v){console.error("Failed to update order status:",v),R.error(v.response?.data?.message||"Gagal memperbarui status pesanan")}finally{$.value=!1}}},W=async()=>{if(!d.value||!E.value||g.value)return;const v=window.snap;if(!v){R.error("Sistem pembayaran belum siap. Mohon refresh halaman.");return}g.value=!0;try{const y=(await re.post(`/api/client/orders/${d.value.id}/pay`)).data;y.success&&y.snap_token?(b.value=!0,v.pay(y.snap_token,{onSuccess:function(){b.value=!1,g.value=!1,R.success("Pembayaran berhasil!"),Q(),ue.reload({only:["orders"]})},onPending:function(){b.value=!1,g.value=!1,R.info("Pembayaran tertunda. Silakan selesaikan pembayaran."),Q(),ue.reload({only:["orders"]})},onError:function(){b.value=!1,g.value=!1,R.error("Pembayaran gagal. Silakan coba lagi."),setTimeout(()=>{document.body.classList.remove("midtrans-popup-active")},100)},onClose:function(){b.value=!1,g.value=!1,R.info("Pembayaran dibatalkan."),setTimeout(()=>{document.body.classList.remove("midtrans-popup-active")},100)}})):R.error(y.message||"Gagal memproses pembayaran")}catch(P){console.error("Failed to initiate payment:",P),R.error(P.response?.data?.message||"Gagal memproses pembayaran")}finally{b.value||(g.value=!1)}},A=async()=>{if(!(!d.value||!E.value||g.value)){if(!N.value){R.error("Saldo e-wallet Anda tidak mencukupi");return}g.value=!0;try{const P=(await re.post(`/api/client/orders/${d.value.id}/pay-wallet`)).data;P.success?(R.success(P.message||"Pembayaran berhasil!"),await Q(),ue.reload({only:["orders","auth"]})):R.error(P.message||"Gagal memproses pembayaran")}catch(v){console.error("Failed to pay with wallet:",v),R.error(v.response?.data?.message||"Gagal memproses pembayaran")}finally{g.value=!1}}},k=()=>{C.value==="wallet"?A():W()};return Ye(()=>[u.open,u.orderId],([v,P])=>{v&&P&&Q()}),(v,P)=>(r(),j(e(ks),{open:a.open,"onUpdate:open":P[3]||(P[3]=y=>m("update:open",y))},{default:l(()=>[s(e(ws),{side:"right",class:"sm:max-w-2xl w-full overflow-y-auto"},{default:l(()=>[s(e($s),null,{default:l(()=>[s(e(Ps),null,{default:l(()=>[...P[4]||(P[4]=[o("Detail Pesanan",-1)])]),_:1}),s(e(Cs),null,{default:l(()=>[...P[5]||(P[5]=[o(" Informasi lengkap pesanan Anda ",-1)])]),_:1})]),_:1}),x.value?(r(),f("div",al,[s(e(Se),{class:"h-8 w-8 animate-spin text-muted-foreground"})])):d.value?(r(),f("div",ll,[t("div",nl,[t("div",rl,[s(e(Me),{class:"h-4 w-4"}),P[6]||(P[6]=t("span",null,"Ringkasan Pesanan",-1))]),t("div",ol,[t("div",il,[P[7]||(P[7]=t("span",{class:"text-sm text-muted-foreground"},"Nomor Pesanan",-1)),t("span",dl,n(d.value.order_no),1)]),t("div",ul,[P[8]||(P[8]=t("span",{class:"text-sm text-muted-foreground"},"Status",-1)),s(e(I),{class:H(U.value)},{default:l(()=>[o(n(e(p)(d.value.status)),1)]),_:1},8,["class"])]),d.value.placed_at?(r(),f("div",ml,[P[9]||(P[9]=t("span",{class:"text-sm text-muted-foreground"},"Tanggal Pesan",-1)),t("span",cl,n(e(c)(d.value.placed_at)),1)])):h("",!0),d.value.paid_at?(r(),f("div",pl,[P[10]||(P[10]=t("span",{class:"text-sm text-muted-foreground"},"Status Pembayaran",-1)),s(e(I),{variant:"secondary"},{default:l(()=>[s(e(he),{class:"w-3 h-3 mr-1"}),o(" Dibayar "+n(e(c)(d.value.paid_at)),1)]),_:1})])):h("",!0)])]),s(e(ne)),t("div",fl,[t("div",xl,[s(e(Me),{class:"h-4 w-4"}),P[11]||(P[11]=t("span",null,"Produk Pesanan",-1))]),t("div",gl,[(r(!0),f(G,null,se(d.value.items,y=>(r(),f("div",{key:y.id,class:"flex gap-4 p-3 bg-muted/30 rounded-lg"},[y.meta_json?.image?(r(),f("img",{key:0,src:y.meta_json.image,alt:y.name,class:"w-16 h-16 object-cover rounded-md"},null,8,vl)):h("",!0),t("div",yl,[t("h4",bl,n(y.name),1),t("p",_l,"SKU: "+n(y.sku),1),t("p",hl,n(y.qty)+"x "+n(e(_)(y.unit_price)),1)]),t("div",kl,[t("p",wl,n(e(_)(y.row_total)),1)])]))),128))])]),s(e(ne)),d.value.shipping_address?(r(),f("div",$l,[t("div",Pl,[s(e(Ce),{class:"h-4 w-4"}),P[12]||(P[12]=t("span",null,"Alamat Pengiriman",-1))]),t("div",Cl,[t("p",Sl,n(d.value.shipping_address.recipient_name),1),t("p",Tl,n(d.value.shipping_address.recipient_phone),1),t("p",jl,n(d.value.shipping_address.address_line1),1),t("p",Ml,n(d.value.shipping_address.city_label)+", "+n(d.value.shipping_address.province_label)+" "+n(d.value.shipping_address.postal_code),1)])])):h("",!0),s(e(ne)),d.value.applied_promos?.shipping?(r(),f("div",Rl,[t("div",Dl,[s(e(ns),{class:"h-4 w-4"}),P[13]||(P[13]=t("span",null,"Informasi Pengiriman",-1))]),t("div",Al,[t("div",Ll,[P[14]||(P[14]=t("span",{class:"text-sm text-muted-foreground"},"Kurir",-1)),t("span",Bl,n(d.value.applied_promos.shipping.courier),1)]),t("div",Vl,[P[15]||(P[15]=t("span",{class:"text-sm text-muted-foreground"},"Layanan",-1)),t("span",Il,n(d.value.applied_promos.shipping.service),1)]),t("div",El,[P[16]||(P[16]=t("span",{class:"text-sm text-muted-foreground"},"Estimasi",-1)),t("span",Ul,n(d.value.applied_promos.shipping.etd)+" hari",1)])])])):h("",!0),s(e(ne)),t("div",Kl,[t("div",Fl,[s(e(ke),{class:"h-4 w-4"}),P[17]||(P[17]=t("span",null,"Ringkasan Pembayaran",-1))]),t("div",Nl,[t("div",zl,[P[18]||(P[18]=t("span",{class:"text-muted-foreground"},"Subtotal",-1)),t("span",null,n(e(_)(d.value.subtotal_amount)),1)]),d.value.discount_amount>0?(r(),f("div",Ol,[P[19]||(P[19]=t("span",{class:"text-muted-foreground"},"Diskon",-1)),t("span",ql,"-"+n(e(_)(d.value.discount_amount)),1)])):h("",!0),t("div",Ql,[P[20]||(P[20]=t("span",{class:"text-muted-foreground"},"Ongkos Kirim",-1)),t("span",null,n(e(_)(d.value.shipping_amount)),1)]),d.value.tax_amount>0?(r(),f("div",Gl,[P[21]||(P[21]=t("span",{class:"text-muted-foreground"},"Pajak",-1)),t("span",null,n(e(_)(d.value.tax_amount)),1)])):h("",!0),s(e(ne)),t("div",Wl,[P[22]||(P[22]=t("span",null,"Total",-1)),t("span",Hl,n(e(_)(d.value.grand_total)),1)])])]),d.value.notes?(r(),f("div",Jl,[s(e(ne)),t("div",Zl,[P[23]||(P[23]=t("p",{class:"text-sm font-medium"},"Catatan",-1)),t("p",Xl,n(d.value.notes),1)])])):h("",!0),E.value?(r(),f("div",Yl,[s(e(ne)),t("div",en,[t("div",tn,[s(e(Te),{class:"h-4 w-4"}),P[24]||(P[24]=t("span",null,"Metode Pembayaran",-1))]),s(e(Ot),{modelValue:C.value,"onUpdate:modelValue":P[2]||(P[2]=y=>C.value=y),class:"space-y-3"},{default:l(()=>[t("div",{class:H(["flex cursor-pointer items-center space-x-3 rounded-lg border p-3 transition-colors",{"border-primary bg-primary/10":C.value==="wallet","hover:bg-muted":C.value!=="wallet","cursor-not-allowed opacity-50":!N.value}]),onClick:P[0]||(P[0]=y=>N.value&&(C.value="wallet"))},[s(e(yt),{value:"wallet",id:"payment-wallet-detail",disabled:!N.value},null,8,["disabled"]),s(e(z),{for:"payment-wallet-detail",class:H(["flex-1 cursor-pointer",{"cursor-not-allowed":!N.value}])},{default:l(()=>[t("div",sn,[t("div",null,[t("div",an,[s(e(Te),{class:"h-4 w-4"}),P[25]||(P[25]=o(" E-Wallet ",-1))]),t("div",ln," Saldo: "+n(e(_)(D.value)),1),N.value?h("",!0):(r(),f("div",nn," Saldo tidak mencukupi (kurang "+n(e(_)(d.value.grand_total-D.value))+") ",1))])])]),_:1},8,["class"])],2),t("div",{class:H(["flex cursor-pointer items-center space-x-3 rounded-lg border p-3 transition-colors",{"border-primary bg-primary/10":C.value==="midtrans","hover:bg-muted":C.value!=="midtrans"}]),onClick:P[1]||(P[1]=y=>C.value="midtrans")},[s(e(yt),{value:"midtrans",id:"payment-midtrans-detail"}),s(e(z),{for:"payment-midtrans-detail",class:"flex-1 cursor-pointer"},{default:l(()=>[t("div",rn,[t("div",null,[t("div",on,[s(e(ke),{class:"h-4 w-4"}),P[26]||(P[26]=o(" Payment Gateway ",-1))]),P[27]||(P[27]=t("div",{class:"text-xs text-muted-foreground"}," Transfer Bank, E-wallet, Kartu Kredit ",-1))])])]),_:1})],2)]),_:1},8,["modelValue"])]),s(e(K),{onClick:k,disabled:g.value||b.value||C.value==="wallet"&&!N.value,class:"w-full",size:"lg"},{default:l(()=>[g.value?(r(),j(e(Se),{key:0,class:"h-4 w-4 mr-2 animate-spin"})):C.value==="wallet"?(r(),j(e(Te),{key:1,class:"h-4 w-4 mr-2"})):(r(),j(e(ke),{key:2,class:"h-4 w-4 mr-2"})),C.value==="wallet"?(r(),f("span",dn," Bayar dengan E-Wallet "+n(e(_)(d.value.grand_total)),1)):(r(),f("span",un," Bayar "+n(e(_)(d.value.grand_total)),1))]),_:1},8,["disabled"])])):h("",!0),M.value?(r(),f("div",mn,[s(e(K),{onClick:V,disabled:$.value,class:"w-full",size:"lg"},{default:l(()=>[$.value?(r(),j(e(Se),{key:0,class:"h-4 w-4 mr-2 animate-spin"})):(r(),j(e(he),{key:1,class:"h-4 w-4 mr-2"})),P[28]||(P[28]=o(" Tandai Pesanan Selesai ",-1))]),_:1},8,["disabled"])])):h("",!0)])):(r(),f("div",cn," Tidak ada data pesanan "))]),_:1})]),_:1},8,["open"]))}}),fn={class:"space-y-6 py-4"},xn={key:2,class:"flex gap-4 rounded-lg bg-muted p-4"},gn=["src","alt"],vn={class:"flex-1"},yn={class:"font-medium"},bn={class:"space-y-2"},_n={class:"flex items-center gap-2"},hn=["onClick","onMouseenter"],kn={class:"ml-2 text-sm text-muted-foreground"},wn={class:"space-y-2"},$n={key:0,class:"text-sm text-destructive"},Pn={class:"space-y-2"},Cn={class:"text-right text-xs text-muted-foreground"},Sn={key:0,class:"text-sm text-destructive"},Tn=Y({__name:"ProductReviewDialog",props:{open:{type:Boolean},orderId:{},orderItems:{}},emits:["update:open","review-submitted"],setup(a,{emit:i}){const u=a,m=i,_=B(0),c=B(null),p=B(!1),w=B({}),D=F(()=>u.orderItems[_.value]),x=F(()=>_.value<u.orderItems.length-1),$=F(()=>_.value===u.orderItems.length-1),g=B({order_item_id:0,product_id:0,rating:5,title:"",comment:""}),b=B(0),d=Q=>{g.value.rating=Q},C=async()=>{if(D.value){g.value.order_item_id=D.value.id,g.value.product_id=D.value.product_id,c.value=null,w.value={},p.value=!0;try{const Q=await re.post(`/api/client/orders/${u.orderId}/reviews`,g.value);if(Q.data.success){const V=Q.data.message||"Review berhasil dikirim dan menunggu persetujuan!";c.value={type:"success",message:V},R.success(V),x.value?setTimeout(()=>{_.value++,E(),c.value=null},1500):setTimeout(()=>{m("update:open",!1),m("review-submitted"),N()},2e3)}}catch(Q){console.error("Submit review error:",Q);let V="Gagal mengirim review. Silakan coba lagi.";if(Q.response?.data){const W=Q.response.data;if(W.message&&(V=W.message),W.errors){w.value=W.errors;const A=Object.values(W.errors)[0];Array.isArray(A)&&A.length>0?V=A[0]:typeof A=="string"&&(V=A)}}c.value={type:"error",message:V},R.error(V)}finally{p.value=!1}}},M=()=>{x.value?(_.value++,E(),c.value=null):(m("update:open",!1),m("review-submitted"),N())},E=()=>{g.value={order_item_id:0,product_id:0,rating:5,title:"",comment:""},w.value={}},N=()=>{_.value=0,E(),c.value=null},U=Q=>{m("update:open",Q),Q||N()};return(Q,V)=>(r(),j(e(Ie),{open:a.open,"onUpdate:open":U},{default:l(()=>[s(e(Ae),{class:"sm:max-w-[500px]"},{default:l(()=>[s(e(Le),null,{default:l(()=>[s(e(Be),null,{default:l(()=>[...V[4]||(V[4]=[o("Beri Rating & Review",-1)])]),_:1}),s(e(Ve),null,{default:l(()=>[o(" Bagikan pengalaman Anda dengan produk ini ("+n(_.value+1)+" dari "+n(a.orderItems.length)+") ",1)]),_:1})]),_:1}),t("div",fn,[!D.value||a.orderItems.length===0?(r(),j(e(Je),{key:0,variant:"default"},{default:l(()=>[s(e($e),{class:"h-4 w-4"}),s(e(Ze),null,{default:l(()=>[...V[5]||(V[5]=[o("Tidak Ada Item",-1)])]),_:1}),s(e(Xe),null,{default:l(()=>[...V[6]||(V[6]=[o(" Tidak ada produk yang dapat direview dari pesanan ini. ",-1)])]),_:1})]),_:1})):(r(),f(G,{key:1},[c.value?.type==="success"?(r(),j(e(Je),{key:0,variant:"default"},{default:l(()=>[s(e(rs),{class:"h-4 w-4"}),s(e(Ze),null,{default:l(()=>[...V[7]||(V[7]=[o("Berhasil!",-1)])]),_:1}),s(e(Xe),null,{default:l(()=>[o(n(c.value.message),1)]),_:1})]),_:1})):h("",!0),c.value?.type==="error"?(r(),j(e(Je),{key:1,variant:"destructive"},{default:l(()=>[s(e($e),{class:"h-4 w-4"}),s(e(Ze),null,{default:l(()=>[...V[8]||(V[8]=[o("Terjadi Kesalahan",-1)])]),_:1}),s(e(Xe),null,{default:l(()=>[o(n(c.value.message),1)]),_:1})]),_:1})):h("",!0),D.value?(r(),f("div",xn,[D.value.product_image?(r(),f("img",{key:0,src:D.value.product_image,alt:D.value.product_name,class:"h-20 w-20 rounded-md object-cover"},null,8,gn)):h("",!0),t("div",vn,[t("h4",yn,n(D.value.product_name),1)])])):h("",!0),t("div",bn,[s(e(z),null,{default:l(()=>[...V[9]||(V[9]=[o("Rating Produk",-1)])]),_:1}),t("div",_n,[(r(),f(G,null,se(5,W=>t("button",{key:W,type:"button",onClick:A=>d(W),onMouseenter:A=>b.value=W,onMouseleave:V[0]||(V[0]=A=>b.value=0),class:"transition-transform hover:scale-110 focus:outline-none"},[s(e(ct),{class:H(["h-8 w-8 transition-colors",(b.value||g.value.rating)>=W?"fill-yellow-400 text-yellow-400":"text-gray-300"])},null,8,["class"])],40,hn)),64)),t("span",kn,n(g.value.rating)+" / 5 ",1)])]),t("div",wn,[s(e(z),{for:"title"},{default:l(()=>[...V[10]||(V[10]=[o("Judul Review (Opsional)",-1)])]),_:1}),s(e(te),{id:"title",modelValue:g.value.title,"onUpdate:modelValue":V[1]||(V[1]=W=>g.value.title=W),placeholder:"Ringkasan singkat pengalaman Anda",maxlength:"100"},null,8,["modelValue"]),w.value.title?(r(),f("p",$n,n(w.value.title),1)):h("",!0)]),t("div",Pn,[s(e(z),{for:"comment"},{default:l(()=>[...V[11]||(V[11]=[o("Komentar (Opsional)",-1)])]),_:1}),s(e(Re),{id:"comment",modelValue:g.value.comment,"onUpdate:modelValue":V[2]||(V[2]=W=>g.value.comment=W),placeholder:"Ceritakan pengalaman Anda dengan produk ini...",rows:"4",maxlength:"500"},null,8,["modelValue"]),t("p",Cn,n(g.value.comment?.length||0)+" / 500 karakter ",1),w.value.comment?(r(),f("p",Sn,n(w.value.comment),1)):h("",!0)])],64))]),s(e(Ee),{class:"flex-col gap-2 sm:flex-row"},{default:l(()=>[D.value&&a.orderItems.length>0?(r(),f(G,{key:0},[x.value||$.value?(r(),j(e(K),{key:0,type:"button",variant:"outline",onClick:M,disabled:p.value},{default:l(()=>[o(n(x.value?"Lewati":"Tutup"),1)]),_:1},8,["disabled"])):h("",!0),s(e(K),{type:"button",onClick:C,disabled:p.value||g.value.rating===0,class:"w-full sm:w-auto"},{default:l(()=>[p.value?(r(),j(e(Se),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):h("",!0),o(" "+n(x.value?"Kirim & Lanjut":"Kirim Review"),1)]),_:1},8,["disabled"])],64)):(r(),j(e(K),{key:1,type:"button",variant:"outline",onClick:V[3]||(V[3]=W=>U(!1))},{default:l(()=>[...V[12]||(V[12]=[o(" Tutup ",-1)])]),_:1}))]),_:1})]),_:1})]),_:1},8,["open"]))}}),jn={class:"rounded-lg border p-4 transition-colors hover:border-primary"},Mn={class:"flex flex-col justify-between gap-4 md:flex-row md:items-center"},Rn={class:"flex-1"},Dn={class:"mb-2 flex items-center gap-3"},An={class:"text-sm font-semibold"},Ln={class:"text-xs text-muted-foreground"},Bn={class:"mt-2 flex items-center gap-2"},Vn={class:"flex flex-col gap-2 md:items-end"},In={class:"text-lg font-bold text-primary"},En={class:"flex flex-wrap gap-2"},Un=Y({__name:"OrderCard",props:{order:{}},setup(a){const i=a,{formatCurrency:u,formatDate:m,getStatusLabel:_}=Pe(),c=B(!1),p=B(!1),w=B(!1),D=B(!1),x=B(i.order.status),$=B(i.order.paid_at),g=async()=>{if(!w.value){w.value=!0;try{const M=await re.post(`/api/client/orders/${i.order.id}/check-payment-status`);M.data.success?(x.value=M.data.status,M.data.paid_at&&($.value=M.data.paid_at),R.success(M.data.message),setTimeout(()=>{ue.reload({only:["orders"]})},500)):R.error(M.data.message)}catch(M){console.error("Check payment status error:",M),R.error(M.response?.data?.message||"Gagal memeriksa status pembayaran")}finally{w.value=!1}}},b=async()=>{if(!D.value){D.value=!0;try{const M=await re.post(`/api/client/orders/${i.order.id}/complete`);M.data.success&&(x.value="COMPLETED",R.success(M.data.message||"Pesanan berhasil diselesaikan"),M.data.items&&M.data.items.length>0?(i.order.items=M.data.items,p.value=!0):setTimeout(()=>{ue.reload({only:["orders"]})},500))}catch(M){console.error("Complete order error:",M),R.error(M.response?.data?.message||"Gagal menandai pesanan sebagai diterima")}finally{D.value=!1}}},d=()=>{ue.reload({only:["orders"]})},C=()=>{const M=(i.order.items||[]).filter(E=>!E.has_review);M.length>0?(i.order.items=M,p.value=!0):R.info("Semua produk sudah direview")};return(M,E)=>(r(),f("div",jn,[t("div",Mn,[t("div",Rn,[t("div",Dn,[s(e(Me),{class:"h-5 w-5 text-muted-foreground"}),t("div",null,[t("p",An,n(a.order.order_no),1),t("p",Ln,n(a.order.placed_at?e(m)(a.order.placed_at):"Belum ditempatkan"),1),a.order.type?(r(),f("p",{key:0,class:H(["text-xs font-medium",{"text-blue-600 dark:text-blue-400":a.order.type==="planA","text-amber-600 dark:text-amber-400":a.order.type==="planB"}])},n(a.order.type==="planA"?"Network Builder":"Retail"),3)):h("",!0)])]),t("div",Bn,[s(e(I),{class:H({"bg-yellow-100 text-yellow-700 hover:bg-yellow-200 dark:bg-yellow-900 dark:text-yellow-100":x.value.toUpperCase()==="PENDING","bg-blue-100 text-blue-700 hover:bg-blue-200 dark:bg-blue-900 dark:text-blue-100":x.value.toUpperCase()==="PROCESSING"||x.value.toUpperCase()==="PAID","bg-purple-100 text-purple-700 hover:bg-purple-200 dark:bg-purple-900 dark:text-purple-100":x.value.toUpperCase()==="SHIPPED","bg-emerald-100 text-emerald-700 hover:bg-emerald-200 dark:bg-emerald-900 dark:text-emerald-100":x.value.toUpperCase()==="DELIVERED"||x.value.toUpperCase()==="COMPLETED","bg-red-100 text-red-700 hover:bg-red-200 dark:bg-red-900 dark:text-red-100":x.value.toUpperCase()==="CANCELLED"})},{default:l(()=>[o(n(e(_)(x.value)),1)]),_:1},8,["class"]),$.value?(r(),j(e(I),{key:0,variant:"secondary"},{default:l(()=>[s(e(he),{class:"mr-1 h-3 w-3"}),E[3]||(E[3]=o(" Dibayar ",-1))]),_:1})):h("",!0)])]),t("div",Vn,[t("p",In,n(e(u)(a.order.grand_total)),1),t("div",En,[x.value.toUpperCase()==="PENDING"&&!$.value?(r(),j(e(K),{key:0,variant:"outline",size:"sm",disabled:w.value,onClick:g},{default:l(()=>[s(e(wt),{class:H(["mr-1 h-3 w-3",{"animate-spin":w.value}])},null,8,["class"]),E[4]||(E[4]=o(" Cek Status ",-1))]),_:1},8,["disabled"])):h("",!0),x.value.toUpperCase()==="SHIPPED"?(r(),j(e(K),{key:1,variant:"default",size:"sm",disabled:D.value,onClick:b},{default:l(()=>[s(e(os),{class:"mr-1 h-3 w-3"}),E[5]||(E[5]=o(" Pesanan Diterima ",-1))]),_:1},8,["disabled"])):h("",!0),x.value.toUpperCase()==="COMPLETED"&&a.order.has_unreviewed_items?(r(),j(e(K),{key:2,variant:"outline",size:"sm",onClick:C},{default:l(()=>[s(e(ct),{class:"mr-1 h-3 w-3"}),E[6]||(E[6]=o(" Tambah Review ",-1))]),_:1})):h("",!0),s(e(K),{variant:"outline",size:"sm",onClick:E[0]||(E[0]=N=>c.value=!0)},{default:l(()=>[...E[7]||(E[7]=[o(" Lihat Detail ",-1)])]),_:1})])])]),s(pn,{open:c.value,"onUpdate:open":E[1]||(E[1]=N=>c.value=N),"order-id":a.order.id},null,8,["open","order-id"]),s(Tn,{open:p.value,"onUpdate:open":E[2]||(E[2]=N=>p.value=N),"order-id":a.order.id,"order-items":a.order.items||[],onReviewSubmitted:d},null,8,["open","order-id","order-items"])]))}}),Kn={key:0,class:"space-y-4"},Fn={key:1,class:"py-12 text-center"},Nn=Y({__name:"OrdersTab",props:{orders:{}},setup(a){return(i,u)=>(r(),j(e(O),null,{default:l(()=>[s(e(Z),null,{default:l(()=>[s(e(X),null,{default:l(()=>[...u[0]||(u[0]=[o("Pesanan Saya",-1)])]),_:1}),s(e(pe),null,{default:l(()=>[...u[1]||(u[1]=[o(" Riwayat pesanan dan status pengiriman ",-1)])]),_:1})]),_:1}),s(e(q),null,{default:l(()=>[a.orders.length>0?(r(),f("div",Kn,[(r(!0),f(G,null,se(a.orders,m=>(r(),j(Un,{key:m.id,order:m},null,8,["order"]))),128))])):(r(),f("div",Fn,[s(e(Me),{class:"h-16 w-16 mx-auto mb-4 text-muted-foreground opacity-20"}),u[3]||(u[3]=t("p",{class:"text-muted-foreground mb-4"},"Belum ada pesanan",-1)),s(e(is),{href:"/beranda"},{default:l(()=>[s(e(K),null,{default:l(()=>[...u[2]||(u[2]=[o(" Mulai Belanja ",-1)])]),_:1})]),_:1})]))]),_:1})]),_:1}))}}),zn={class:"text-center"},On={class:"text-4xl font-bold text-primary mb-4"},qn={class:"flex gap-3 justify-center"},Qn=Y({__name:"WalletBalance",props:{balance:{}},emits:["topup","withdrawal"],setup(a,{emit:i}){const u=i,{formatCurrency:m}=Pe();return(_,c)=>(r(),j(e(O),null,{default:l(()=>[s(e(q),{class:"pt-6"},{default:l(()=>[t("div",zn,[c[4]||(c[4]=t("p",{class:"text-sm text-muted-foreground mb-2"},"Saldo E-Wallet",-1)),t("p",On,n(e(m)(a.balance)),1),t("div",qn,[s(e(K),{onClick:c[0]||(c[0]=p=>u("topup")),size:"sm"},{default:l(()=>[s(e($t),{class:"w-4 h-4 mr-2"}),c[2]||(c[2]=o(" Top Up ",-1))]),_:1}),s(e(K),{onClick:c[1]||(c[1]=p=>u("withdrawal")),variant:"outline",size:"sm"},{default:l(()=>[s(e(Pt),{class:"w-4 h-4 mr-2"}),c[3]||(c[3]=o(" Tarik Dana ",-1))]),_:1})])])]),_:1})]),_:1}))}}),Gn={class:"space-y-2"},Wn={class:"relative"},Hn={key:0,class:"text-sm text-red-500"},Jn={class:"p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-900 rounded-lg"},Zn={class:"flex items-start gap-3"},Xn={key:0,class:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-900 rounded-lg"},Yn={class:"flex items-start gap-3"},er={class:"flex items-center justify-end gap-3"},tr={key:0},sr={key:1},ar={key:2},lr={key:3},nr=Y({__name:"WalletTopupForm",emits:["cancel"],setup(a,{emit:i}){const u=i,m=we({amount:"",payment_method:"midtrans"}),_=B(!1),c=B(!1);ze(()=>{if(window.snap){_.value=!0;return}if(typeof window>"u")return;const x=()=>{window.snap&&(_.value=!0,c.value=!1,console.log("Midtrans Snap loaded (event)."))};window.addEventListener("midtrans:snap:loaded",x,{once:!0}),setTimeout(()=>{_.value||(window.snap?(_.value=!0,console.log("Midtrans Snap loaded (fallback).")):(c.value=!0,console.error("Failed to load Midtrans Snap (timeout).")))},5e3)});const p=x=>{if(!window.snap){console.error("Snap not available"),alert("Pembayaran tidak dapat diproses. Silakan refresh halaman dan coba lagi."),u("cancel");return}try{window.snap.pay(x,{onSuccess:function($){console.log("Payment success:",$),R.success("Pembayaran berhasil."),typeof window<"u"&&(window.location.href="/client/profile?tab=wallet")},onPending:function($){console.log("Payment pending:",$),R.info("Pembayaran sedang diproses."),typeof window<"u"&&(window.location.href="/client/profile?tab=wallet")},onError:function($){console.error("Payment error (Midtrans):",$),R.error("Pembayaran gagal.");try{console.log("Midtrans raw error JSON:",JSON.stringify($,null,2))}catch{}const g=$?.status_message||$?.status_code||"Terjadi kesalahan pembayaran.",b=$?.status_code==="505"?`
Catatan: Sandbox sering menolak VA dengan nominal rendah (coba >= 15000 atau metode lain).`:"";if($?.status_code==="505"){alert("Midtrans Error: "+g+b+`
Sandbox akan otomatis mencoba QRIS.`),D("qris");return}alert("Midtrans Error: "+g+`
Silakan coba metode lain atau refresh.`),u("cancel")},onClose:function(){console.log("Payment modal closed"),R("Pembayaran ditutup sebelum selesai."),u("cancel")}})}catch($){console.error("Error opening Snap modal:",$),alert("Terjadi kesalahan saat membuka pembayaran. Silakan coba lagi."),R.error("Terjadi kesalahan saat membuka pembayaran. Silakan coba lagi."),u("cancel")}},w=async()=>{if(!m.processing){if(!_.value||!window.snap){R.error("Sistem pembayaran belum siap. Silakan tunggu beberapa saat atau refresh halaman.");return}try{m.processing=!0;const $=(await re.post("/client/wallet/topup",{amount:m.amount,payment_method:m.payment_method})).data,g=$.snap_token;if($.success===!1&&$.message){R.error($.message),m.processing=!1;return}g&&typeof g=="string"&&g.trim()!==""?(m.reset(),m.processing=!1,setTimeout(()=>{p(g)},100)):(m.processing=!1,console.error("Invalid snap token:",g),console.error("Full response:",$),R.error("Gagal mendapatkan token pembayaran. Silakan coba lagi."),m.reset(),u("cancel"))}catch(x){if(m.processing=!1,console.error("Form submission error:",x),R.error("Terjadi kesalahan saat mengirim formulir."),x.response?.status===422&&x.response?.data?.errors){const $=x.response.data.errors,g=Object.values($)[0],b=Array.isArray(g)?g[0]:g;R.error(b)}else{const $=x.response?.data?.message||x.message||"Terjadi kesalahan. Silakan coba lagi.";R.error($)}m.reset()}}},D=async x=>{if(!m.processing){if(!_.value||!window.snap){alert("Sistem pembayaran belum siap untuk retry.");return}try{m.processing=!0;const g=(await re.post("/client/wallet/topup",{amount:m.amount||"20000",payment_method:m.payment_method,force_payment:x})).data,b=g.snap_token;if(!g.success||!b){R.error(g.message||"Retry gagal mendapatkan token."),m.processing=!1;return}m.processing=!1,R.success("Metode dialihkan ke "+x.toUpperCase()+". Silakan lanjutkan pembayaran."),p(b)}catch($){m.processing=!1,R.error($?.response?.data?.message||$.message||"Retry gagal.")}}};return(x,$)=>(r(),j(e(O),null,{default:l(()=>[s(e(Z),null,{default:l(()=>[s(e(X),null,{default:l(()=>[...$[2]||($[2]=[o("Top Up E-Wallet",-1)])]),_:1}),s(e(pe),null,{default:l(()=>[...$[3]||($[3]=[o(" Isi saldo e-wallet Anda melalui Midtrans ",-1)])]),_:1})]),_:1}),s(e(q),null,{default:l(()=>[t("form",{onSubmit:De(w,["prevent"]),class:"space-y-6"},[t("div",Gn,[s(e(z),{for:"topup_amount"},{default:l(()=>[...$[4]||($[4]=[o(" Jumlah Top Up ",-1),t("span",{class:"text-red-500"},"*",-1)])]),_:1}),t("div",Wn,[s(e(ke),{class:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s(e(te),{id:"topup_amount",modelValue:e(m).amount,"onUpdate:modelValue":$[0]||($[0]=g=>e(m).amount=g),type:"number",placeholder:"Minimal Rp 10.000",class:"pl-10",min:"10000",max:"10000000",required:""},null,8,["modelValue"])]),$[5]||($[5]=t("p",{class:"text-xs text-muted-foreground"}," Minimum Rp 10.000 - Maximum Rp 10.000.000. Disarankan >= Rp 15.000 untuk Virtual Account agar tidak ditolak (505). ",-1)),e(m).errors.amount?(r(),f("p",Hn,n(e(m).errors.amount),1)):h("",!0)]),t("div",Jn,[t("div",Zn,[s(e(ke),{class:"w-5 h-5 text-blue-600 dark:text-blue-400 mt-0.5"}),$[6]||($[6]=t("div",null,[t("p",{class:"text-sm font-semibold text-blue-900 dark:text-blue-100"}," Pembayaran via Midtrans "),t("p",{class:"text-xs text-blue-700 dark:text-blue-300 mt-1"}," Anda akan diarahkan ke halaman pembayaran Midtrans untuk menyelesaikan transaksi ")],-1))])]),c.value?(r(),f("div",Xn,[t("div",Yn,[s(e($e),{class:"w-5 h-5 text-red-600 dark:text-red-400 mt-0.5"}),$[7]||($[7]=t("div",null,[t("p",{class:"text-sm font-semibold text-red-900 dark:text-red-100"}," Sistem Pembayaran Belum Siap "),t("p",{class:"text-xs text-red-700 dark:text-red-300 mt-1"}," Silakan refresh halaman untuk memuat ulang sistem pembayaran. ")],-1))])])):h("",!0),t("div",er,[s(e(K),{type:"button",variant:"outline",onClick:$[1]||($[1]=g=>{e(m).reset(),u("cancel")}),disabled:e(m).processing},{default:l(()=>[...$[8]||($[8]=[o(" Batal ",-1)])]),_:1},8,["disabled"]),s(e(K),{type:"submit",disabled:e(m).processing||c.value||!_.value},{default:l(()=>[e(m).processing?(r(),f("span",tr,"Memproses...")):!_.value&&!c.value?(r(),f("span",sr,"Memuat sistem pembayaran...")):c.value?(r(),f("span",ar,"Sistem pembayaran error")):(r(),f("span",lr,"Lanjut ke Pembayaran"))]),_:1},8,["disabled"])])],32)]),_:1})]),_:1}))}}),rr={class:"space-y-2"},or={class:"relative"},ir={class:"text-xs text-muted-foreground"},dr={key:0,class:"text-sm text-red-500"},ur={class:"space-y-4"},mr={class:"space-y-2"},cr={key:0,class:"text-sm text-red-500"},pr={class:"space-y-2"},fr={key:0,class:"text-sm text-red-500"},xr={class:"space-y-2"},gr={key:0,class:"text-sm text-red-500"},vr={class:"flex items-center justify-end gap-3"},yr=Y({__name:"WalletWithdrawalForm",props:{maxAmount:{}},emits:["cancel"],setup(a,{emit:i}){const u=i,m=we({amount:"",bank_name:"",bank_account:"",bank_holder:""}),_=()=>{m.post("/client/wallet/withdrawal",{preserveScroll:!0,onSuccess:()=>{m.reset(),u("cancel"),R.success("Permintaan penarikan berhasil diajukan.")}})};return(c,p)=>(r(),j(e(O),null,{default:l(()=>[s(e(Z),null,{default:l(()=>[s(e(X),null,{default:l(()=>[...p[5]||(p[5]=[o("Tarik Dana E-Wallet",-1)])]),_:1}),s(e(pe),null,{default:l(()=>[...p[6]||(p[6]=[o(" Tarik saldo ke rekening bank Anda ",-1)])]),_:1})]),_:1}),s(e(q),null,{default:l(()=>[t("form",{onSubmit:De(_,["prevent"]),class:"space-y-6"},[t("div",rr,[s(e(z),{for:"withdrawal_amount"},{default:l(()=>[...p[7]||(p[7]=[o(" Jumlah Penarikan ",-1),t("span",{class:"text-red-500"},"*",-1)])]),_:1}),t("div",or,[s(e(ke),{class:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s(e(te),{id:"withdrawal_amount",modelValue:e(m).amount,"onUpdate:modelValue":p[0]||(p[0]=w=>e(m).amount=w),type:"number",placeholder:"Minimal Rp 50.000",class:"pl-10",min:"50000",max:a.maxAmount,required:""},null,8,["modelValue","max"])]),t("p",ir," Minimum Rp 50.000 - Maksimal Rp "+n(a.maxAmount.toLocaleString("id-ID")),1),e(m).errors.amount?(r(),f("p",dr,n(e(m).errors.amount),1)):h("",!0)]),s(e(ne)),t("div",ur,[p[11]||(p[11]=t("h4",{class:"font-semibold"},"Informasi Rekening",-1)),t("div",mr,[s(e(z),{for:"bank_name"},{default:l(()=>[...p[8]||(p[8]=[o(" Nama Bank ",-1),t("span",{class:"text-red-500"},"*",-1)])]),_:1}),s(e(te),{id:"bank_name",modelValue:e(m).bank_name,"onUpdate:modelValue":p[1]||(p[1]=w=>e(m).bank_name=w),type:"text",placeholder:"e.g., BCA, Mandiri, BNI",required:""},null,8,["modelValue"]),e(m).errors.bank_name?(r(),f("p",cr,n(e(m).errors.bank_name),1)):h("",!0)]),t("div",pr,[s(e(z),{for:"bank_account"},{default:l(()=>[...p[9]||(p[9]=[o(" Nomor Rekening ",-1),t("span",{class:"text-red-500"},"*",-1)])]),_:1}),s(e(te),{id:"bank_account",modelValue:e(m).bank_account,"onUpdate:modelValue":p[2]||(p[2]=w=>e(m).bank_account=w),type:"text",placeholder:"Nomor rekening bank",required:""},null,8,["modelValue"]),e(m).errors.bank_account?(r(),f("p",fr,n(e(m).errors.bank_account),1)):h("",!0)]),t("div",xr,[s(e(z),{for:"bank_holder"},{default:l(()=>[...p[10]||(p[10]=[o(" Nama Pemilik Rekening ",-1),t("span",{class:"text-red-500"},"*",-1)])]),_:1}),s(e(te),{id:"bank_holder",modelValue:e(m).bank_holder,"onUpdate:modelValue":p[3]||(p[3]=w=>e(m).bank_holder=w),type:"text",placeholder:"Nama sesuai rekening bank",required:""},null,8,["modelValue"]),e(m).errors.bank_holder?(r(),f("p",gr,n(e(m).errors.bank_holder),1)):h("",!0)])]),p[13]||(p[13]=t("div",{class:"p-4 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-900 rounded-lg"},[t("p",{class:"text-sm text-amber-700 dark:text-amber-300"},[t("strong",null,"Catatan:"),o(" Penarikan akan diproses dalam 1-3 hari kerja. Pastikan data rekening sudah benar. ")])],-1)),t("div",vr,[s(e(K),{type:"button",variant:"outline",onClick:p[4]||(p[4]=w=>{e(m).reset(),u("cancel")}),disabled:e(m).processing},{default:l(()=>[...p[12]||(p[12]=[o(" Batal ",-1)])]),_:1},8,["disabled"]),s(e(K),{type:"submit",disabled:e(m).processing},{default:l(()=>[o(n(e(m).processing?"Memproses...":"Ajukan Penarikan"),1)]),_:1},8,["disabled"])])],32)]),_:1})]),_:1}))}}),br={class:"p-3 border rounded-lg"},_r={class:"flex items-start justify-between gap-2 mb-2"},hr={class:"flex items-center gap-2"},kr={class:"font-semibold text-sm"},wr={class:"text-xs text-muted-foreground"},$r={class:"mb-2 text-xs text-muted-foreground"},Pr={key:0,class:"line-clamp-2"},Cr={class:"grid grid-cols-3 gap-2 text-xs border-t pt-2"},Sr={class:"text-center"},Tr={class:"font-semibold text-red-600 dark:text-red-400"},jr={class:"text-center border-x"},Mr={class:"font-semibold text-emerald-600 dark:text-emerald-400"},Rr={class:"text-center"},Dr={class:"font-semibold"},Ar={key:0,class:"mt-3 pt-3 border-t"},Lr={class:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2"},Br={class:"flex gap-2"},Vr=Y({__name:"WalletTransactionCard",props:{transaction:{}},emits:["continue-payment","status-updated"],setup(a,{emit:i}){const u=a,m=i,{formatCurrency:_,formatDate:c,getTransactionTypeLabel:p,getTransactionStatusLabel:w}=Pe(),D=B(!1),x=B(u.transaction.status),$=["topup","top_up","bonus","refund"],g=F(()=>$.includes(u.transaction.type)),b=async d=>{if(!D.value){D.value=!0;try{const C=await re.post("/client/wallet/check-status",{transaction_ref:d});C.data.success?(x.value=C.data.status,m("status-updated",{transactionRef:d,status:C.data.status,newBalance:C.data.new_balance}),R.success(C.data.message),setTimeout(()=>{ue.reload({only:["customer","transactions"]})},500)):R.error(C.data.message)}catch(C){console.error("Check status error:",C),R.error(C.response?.data?.message||"Gagal memeriksa status pembayaran")}finally{D.value=!1}}};return(d,C)=>(r(),f("div",br,[t("div",_r,[t("div",hr,[t("div",{class:H(["p-1.5 rounded-full shrink-0",{"bg-emerald-100 dark:bg-emerald-900/20":g.value,"bg-red-100 dark:bg-red-900/20":!g.value}])},[g.value?(r(),j(e($t),{key:0,class:"w-3.5 h-3.5 text-emerald-600 dark:text-emerald-400"})):(r(),j(e(Pt),{key:1,class:"w-3.5 h-3.5 text-red-600 dark:text-red-400"}))],2),t("div",null,[t("p",kr,n(e(p)(a.transaction.type)),1),t("p",wr,n(e(c)(a.transaction.created_at)),1)])]),s(e(I),{variant:"secondary",class:H(["shrink-0",{"bg-yellow-100 text-yellow-700 dark:bg-yellow-900 dark:text-yellow-100":x.value==="pending","bg-emerald-100 text-emerald-700 dark:bg-emerald-900 dark:text-emerald-100":x.value==="completed","bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-100":x.value==="failed"||x.value==="cancelled"}])},{default:l(()=>[o(n(e(w)(x.value)),1)]),_:1},8,["class"])]),t("div",$r,[a.transaction.notes?(r(),f("p",Pr,n(a.transaction.notes),1)):h("",!0),t("p",null,"Ref: "+n(a.transaction.transaction_ref),1)]),t("div",Cr,[t("div",Sr,[C[2]||(C[2]=t("p",{class:"text-muted-foreground mb-0.5"},"Debit",-1)),t("p",Tr,n(!g.value&&x.value==="completed"?e(_)(a.transaction.amount):"-"),1)]),t("div",jr,[C[3]||(C[3]=t("p",{class:"text-muted-foreground mb-0.5"},"Kredit",-1)),t("p",Mr,n(g.value&&x.value==="completed"?e(_)(a.transaction.amount):"-"),1)]),t("div",Rr,[C[4]||(C[4]=t("p",{class:"text-muted-foreground mb-0.5"},"Saldo",-1)),t("p",Dr,n(a.transaction.balance_after!==null&&a.transaction.balance_after!==void 0?e(_)(a.transaction.balance_after):"-"),1)])]),a.transaction.type==="topup"&&x.value==="pending"&&a.transaction.midtrans_transaction_id?(r(),f("div",Ar,[t("div",Lr,[C[7]||(C[7]=t("p",{class:"text-xs text-muted-foreground"}," Pembayaran menunggu konfirmasi ",-1)),t("div",Br,[s(e(K),{size:"sm",variant:"outline",disabled:D.value,onClick:C[0]||(C[0]=M=>b(a.transaction.transaction_ref)),class:"shrink-0"},{default:l(()=>[s(e(wt),{class:H(["w-3 h-3 mr-1",{"animate-spin":D.value}])},null,8,["class"]),C[5]||(C[5]=o(" Cek Status ",-1))]),_:1},8,["disabled"]),s(e(K),{size:"sm",onClick:C[1]||(C[1]=M=>m("continue-payment",a.transaction.midtrans_transaction_id)),class:"shrink-0"},{default:l(()=>[s(e(ke),{class:"w-3 h-3 mr-1"}),C[6]||(C[6]=o(" Lanjutkan Pembayaran ",-1))]),_:1})])])])):h("",!0)]))}}),Ir={key:0,class:"space-y-3"},Er={key:1,class:"py-12 text-center"},Ur=Y({__name:"WalletTransactionList",props:{transactions:{}},setup(a){const i=ut(),u=F(()=>i.props.customer),m=c=>{typeof window>"u"||(window.snap?window.snap.pay(c,{onSuccess:function(p){console.log("Payment success:",p),R.success("Pembayaran berhasil."),typeof window<"u"&&(window.location.href="/client/profile?tab=wallet")},onPending:function(p){console.log("Payment pending:",p),R.info("Pembayaran sedang diproses."),typeof window<"u"&&(window.location.href="/client/profile?tab=wallet")},onError:function(p){R.error("Pembayaran gagal."),console.error("Payment error:",p)},onClose:function(){R("Pembayaran ditutup sebelum selesai."),console.log("Payment modal closed")}}):alert("Midtrans Snap belum siap. Silakan refresh halaman."))},_=c=>{c.newBalance!==void 0&&u.value&&(u.value.ewallet_saldo=c.newBalance)};return(c,p)=>(r(),j(e(O),null,{default:l(()=>[s(e(Z),null,{default:l(()=>[s(e(X),null,{default:l(()=>[...p[0]||(p[0]=[o("Riwayat Transaksi",-1)])]),_:1}),s(e(pe),null,{default:l(()=>[o(n(a.transactions.length)+" transaksi e-wallet terbaru ",1)]),_:1})]),_:1}),s(e(q),null,{default:l(()=>[a.transactions.length>0?(r(),f("div",Ir,[(r(!0),f(G,null,se(a.transactions,w=>(r(),j(Vr,{key:w.id,transaction:w,onContinuePayment:m,onStatusUpdated:_},null,8,["transaction"]))),128))])):(r(),f("div",Er,[s(e(Te),{class:"h-16 w-16 mx-auto mb-4 text-muted-foreground opacity-20"}),p[1]||(p[1]=t("p",{class:"text-muted-foreground"},"Belum ada transaksi",-1))]))]),_:1})]),_:1}))}}),Kr={class:"flex-1"},Fr={key:0,class:"text-xs mt-1 text-gray-700 dark:text-gray-300"},Nr={class:"font-mono"},zr={class:"uppercase"},Or=["disabled"],qr={key:1,class:"border border-amber-200 dark:border-amber-900 bg-amber-50 dark:bg-amber-900/20 rounded-lg p-4 text-xs text-amber-800 dark:text-amber-200"},Qr=Y({__name:"WalletStatusBanner",props:{initialTransactions:{}},setup(a){const i=a,u=B(!1),m=B(null),_=B(null),c=F(()=>{const x=_.value?.status||"";return x==="completed"||x==="success"?{tone:"success",title:"Top up berhasil",bg:"bg-green-50 dark:bg-green-900/20",border:"border-green-200 dark:border-green-900",text:"text-green-800 dark:text-green-200"}:x==="pending"?{tone:"pending",title:"Menunggu pembayaran",bg:"bg-yellow-50 dark:bg-yellow-900/20",border:"border-yellow-200 dark:border-yellow-900",text:"text-yellow-800 dark:text-yellow-200"}:x==="cancelled"||x==="failed"||x==="expire"||x==="denied"||x==="deny"?{tone:"failed",title:"Pembayaran gagal / dibatalkan",bg:"bg-red-50 dark:bg-red-900/20",border:"border-red-200 dark:border-red-900",text:"text-red-800 dark:text-red-200"}:{tone:"info",title:"Status transaksi",bg:"bg-blue-50 dark:bg-blue-900/20",border:"border-blue-200 dark:border-blue-900",text:"text-blue-800 dark:text-blue-200"}});function p(x,$=2){const g=new Date(x).getTime();return(Date.now()-g)/36e5<=$}const w=F(()=>{if(!_.value)return!1;const x=_.value.status;return x==="pending"?!0:x==="completed"||x==="success"?p(_.value.created_at,2):p(_.value.created_at,6)});async function D(){try{u.value=!0,m.value=null;const{data:x}=await re.get("/client/wallet/history",{params:{type:"topup"}}),$=Array.isArray(x?.data)?x.data:Array.isArray(x)?x:[];$.length>0&&(_.value=$[0])}catch(x){m.value=x?.response?.data?.message||x?.message||"Gagal memuat status transaksi."}finally{u.value=!1}}return ze(()=>{i.initialTransactions&&i.initialTransactions.length>0&&(_.value=i.initialTransactions[0]),D()}),(x,$)=>w.value?(r(),f("div",{key:0,class:H(["border rounded-lg p-4 flex items-start gap-3",c.value.border,c.value.bg])},[t("div",Kr,[t("p",{class:H(["text-sm font-semibold",c.value.text])},n(c.value.title),3),_.value?(r(),f("p",Fr,[$[0]||($[0]=o(" Ref: ",-1)),t("span",Nr,n(_.value.transaction_ref),1),o("  Jumlah: Rp "+n(new Intl.NumberFormat("id-ID").format(_.value.amount))+"  Status: ",1),t("span",zr,n(_.value.status),1)])):h("",!0)]),t("button",{type:"button",class:"text-xs underline text-gray-700 dark:text-gray-300",onClick:D,disabled:u.value},n(u.value?"Menyegarkan...":"Segarkan"),9,Or)],2)):m.value?(r(),f("div",qr,n(m.value),1)):h("",!0)}}),Gr={class:"space-y-6"},Wr=Y({__name:"WalletTab",props:{customer:{},transactions:{}},setup(a){const i=B("wallet");return(u,m)=>(r(),f("div",Gr,[s(Qn,{balance:Number(a.customer.ewallet_saldo)||0,onTopup:m[0]||(m[0]=_=>i.value="wallet-topup"),onWithdrawal:m[1]||(m[1]=_=>i.value="wallet-withdrawal")},null,8,["balance"]),i.value==="wallet"?(r(),j(Qr,{key:0,"initial-transactions":a.transactions},null,8,["initial-transactions"])):h("",!0),i.value==="wallet-topup"?(r(),j(nr,{key:1,onCancel:m[2]||(m[2]=_=>i.value="wallet")})):h("",!0),i.value==="wallet-withdrawal"?(r(),j(yr,{key:2,"max-amount":Number(a.customer.ewallet_saldo)||0,onCancel:m[3]||(m[3]=_=>i.value="wallet")},null,8,["max-amount"])):h("",!0),i.value==="wallet"?(r(),j(Ur,{key:3,transactions:a.transactions},null,8,["transactions"])):h("",!0)]))}}),Hr={class:"space-y-2"},Jr={class:"relative"},Zr={key:0,class:"text-sm text-red-500"},Xr={class:"space-y-2"},Yr={class:"relative"},eo={key:0,class:"text-sm text-red-500"},to={class:"space-y-2"},so={class:"relative"},ao={class:"flex items-center justify-end gap-3"},lo=Y({__name:"SecurityTab",setup(a){const i=we({current_password:"",password:"",password_confirmation:""}),u=B(!1),m=B(!1),_=B(!1),c=()=>{i.patch("/client/profile/password",{preserveScroll:!0,onSuccess:()=>{i.reset(),u.value=!1,m.value=!1,_.value=!1,R.success("Password berhasil diubah")}})};return(p,w)=>(r(),j(e(O),null,{default:l(()=>[s(e(Z),null,{default:l(()=>[s(e(X),null,{default:l(()=>[...w[7]||(w[7]=[o("Ubah Password",-1)])]),_:1}),s(e(pe),null,{default:l(()=>[...w[8]||(w[8]=[o(" Pastikan akun Anda menggunakan password yang kuat ",-1)])]),_:1})]),_:1}),s(e(q),null,{default:l(()=>[t("form",{onSubmit:De(c,["prevent"]),class:"space-y-6"},[t("div",Hr,[s(e(z),{for:"current_password"},{default:l(()=>[...w[9]||(w[9]=[o(" Password Saat Ini ",-1),t("span",{class:"text-red-500"},"*",-1)])]),_:1}),t("div",Jr,[s(e(st),{class:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s(e(te),{id:"current_password",modelValue:e(i).current_password,"onUpdate:modelValue":w[0]||(w[0]=D=>e(i).current_password=D),type:u.value?"text":"password",placeholder:"Masukkan password saat ini",class:"pl-10 pr-10",required:""},null,8,["modelValue","type"]),t("button",{type:"button",onClick:w[1]||(w[1]=D=>u.value=!u.value),class:"absolute right-3 top-3 text-gray-400 hover:text-gray-600"},[u.value?(r(),j(e(We),{key:1,class:"h-4 w-4"})):(r(),j(e(Ge),{key:0,class:"h-4 w-4"}))])]),e(i).errors.current_password?(r(),f("p",Zr,n(e(i).errors.current_password),1)):h("",!0)]),s(e(ne)),t("div",Xr,[s(e(z),{for:"password"},{default:l(()=>[...w[10]||(w[10]=[o(" Password Baru ",-1),t("span",{class:"text-red-500"},"*",-1)])]),_:1}),t("div",Yr,[s(e(bt),{class:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s(e(te),{id:"password",modelValue:e(i).password,"onUpdate:modelValue":w[2]||(w[2]=D=>e(i).password=D),type:m.value?"text":"password",placeholder:"Masukkan password baru",class:"pl-10 pr-10",required:""},null,8,["modelValue","type"]),t("button",{type:"button",onClick:w[3]||(w[3]=D=>m.value=!m.value),class:"absolute right-3 top-3 text-gray-400 hover:text-gray-600"},[m.value?(r(),j(e(We),{key:1,class:"h-4 w-4"})):(r(),j(e(Ge),{key:0,class:"h-4 w-4"}))])]),w[11]||(w[11]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"}," Minimal 8 karakter ",-1)),e(i).errors.password?(r(),f("p",eo,n(e(i).errors.password),1)):h("",!0)]),t("div",to,[s(e(z),{for:"password_confirmation"},{default:l(()=>[...w[12]||(w[12]=[o(" Konfirmasi Password Baru ",-1),t("span",{class:"text-red-500"},"*",-1)])]),_:1}),t("div",so,[s(e(bt),{class:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s(e(te),{id:"password_confirmation",modelValue:e(i).password_confirmation,"onUpdate:modelValue":w[4]||(w[4]=D=>e(i).password_confirmation=D),type:_.value?"text":"password",placeholder:"Konfirmasi password baru",class:"pl-10 pr-10",required:""},null,8,["modelValue","type"]),t("button",{type:"button",onClick:w[5]||(w[5]=D=>_.value=!_.value),class:"absolute right-3 top-3 text-gray-400 hover:text-gray-600"},[_.value?(r(),j(e(We),{key:1,class:"h-4 w-4"})):(r(),j(e(Ge),{key:0,class:"h-4 w-4"}))])])]),t("div",ao,[s(e(K),{type:"button",variant:"outline",onClick:w[6]||(w[6]=D=>e(i).reset()),disabled:e(i).processing},{default:l(()=>[...w[13]||(w[13]=[o(" Reset ",-1)])]),_:1},8,["disabled"]),s(e(K),{type:"submit",disabled:e(i).processing},{default:l(()=>[e(i).processing?h("",!0):(r(),j(e(st),{key:0,class:"w-4 h-4 mr-2"})),o(" "+n(e(i).processing?"Mengupdate...":"Update Password"),1)]),_:1},8,["disabled"])])],32)]),_:1})]),_:1}))}}),no={class:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-900 rounded-lg"},ro={class:"flex items-start gap-3"},oo={class:"flex-1"},io=Y({__name:"DangerZoneTab",setup(a){const i=B(!1),u=we({}),m=()=>{u.delete("/client/profile",{onFinish:()=>{i.value=!1}})};return(_,c)=>(r(),f(G,null,[s(e(O),{class:"border-red-200 dark:border-red-900"},{default:l(()=>[s(e(Z),null,{default:l(()=>[s(e(X),{class:"text-red-600 dark:text-red-400"},{default:l(()=>[...c[3]||(c[3]=[o("Zona Bahaya",-1)])]),_:1}),s(e(pe),null,{default:l(()=>[...c[4]||(c[4]=[o(" Tindakan di bawah ini bersifat permanen dan tidak dapat dibatalkan ",-1)])]),_:1})]),_:1}),s(e(q),{class:"space-y-6"},{default:l(()=>[t("div",no,[t("div",ro,[s(e($e),{class:"w-5 h-5 text-red-600 dark:text-red-400 mt-0.5"}),t("div",oo,[c[6]||(c[6]=t("h3",{class:"font-semibold text-red-900 dark:text-red-100"}," Hapus Akun ",-1)),c[7]||(c[7]=t("p",{class:"text-sm text-red-700 dark:text-red-300 mt-1"}," Setelah akun Anda dihapus, semua data akan dihapus secara permanen. Tindakan ini tidak dapat dibatalkan. ",-1)),s(e(K),{type:"button",variant:"destructive",class:"mt-4",onClick:c[0]||(c[0]=p=>i.value=!0)},{default:l(()=>[s(e(et),{class:"w-4 h-4 mr-2"}),c[5]||(c[5]=o(" Hapus Akun Saya ",-1))]),_:1})])])])]),_:1})]),_:1}),s(e(Ie),{open:i.value,"onUpdate:open":c[2]||(c[2]=p=>i.value=p)},{default:l(()=>[s(e(Ae),null,{default:l(()=>[s(e(Le),null,{default:l(()=>[s(e(Be),{class:"flex items-center gap-2 text-red-600"},{default:l(()=>[s(e($e),{class:"w-5 h-5"}),c[8]||(c[8]=o(" Konfirmasi Hapus Akun ",-1))]),_:1}),s(e(Ve),null,{default:l(()=>[...c[9]||(c[9]=[o(" Apakah Anda yakin ingin menghapus akun Anda? Tindakan ini tidak dapat dibatalkan dan semua data Anda akan dihapus secara permanen. ",-1)])]),_:1})]),_:1}),c[11]||(c[11]=t("div",{class:"py-4"},[t("div",{class:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-900 rounded-lg"},[t("p",{class:"text-sm text-red-700 dark:text-red-300"},[t("strong",null,"Data yang akan dihapus:")]),t("ul",{class:"mt-2 text-sm text-red-700 dark:text-red-300 list-disc list-inside space-y-1"},[t("li",null,"Informasi profil dan akun"),t("li",null,"Riwayat transaksi"),t("li",null,"E-wallet dan saldo"),t("li",null,"Jaringan dan bonus")])])],-1)),s(e(Ee),null,{default:l(()=>[s(e(K),{type:"button",variant:"outline",onClick:c[1]||(c[1]=p=>i.value=!1),disabled:e(u).processing},{default:l(()=>[...c[10]||(c[10]=[o(" Batal ",-1)])]),_:1},8,["disabled"]),s(e(K),{type:"button",variant:"destructive",onClick:m,disabled:e(u).processing},{default:l(()=>[s(e(et),{class:"w-4 h-4 mr-2"}),o(" "+n(e(u).processing?"Menghapus...":"Ya, Hapus Akun"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])],64))}}),uo={key:0,class:"text-center py-12 text-muted-foreground"},mo={class:"flex items-start justify-between"},co={class:"flex-1"},po={class:"flex items-center gap-2 mb-2"},fo={class:"font-semibold text-lg"},xo={class:"text-sm font-normal text-muted-foreground"},go={class:"space-y-1 text-sm text-muted-foreground"},vo={key:0},yo={key:1,class:"text-xs font-medium text-primary"},bo={key:2,class:"text-xs"},_o={class:"text-blue-600 dark:text-blue-400"},ho={class:"text-green-600 dark:text-green-400"},ko={class:"text-xs"},wo={class:"text-xs font-medium text-green-600 dark:text-green-400"},$o={class:"flex flex-col items-end gap-2"},Po={key:0,class:"text-center py-12 text-muted-foreground"},Co={class:"flex items-start justify-between"},So={class:"flex-1"},To={class:"flex items-center gap-2 mb-2"},jo={class:"font-semibold text-lg"},Mo={class:"text-sm font-normal text-muted-foreground"},Ro={class:"space-y-1 text-sm text-muted-foreground"},Do={key:0},Ao={key:1,class:"text-xs font-medium text-primary"},Lo={key:2,class:"text-xs"},Bo={class:"text-blue-600 dark:text-blue-400"},Vo={class:"text-green-600 dark:text-green-400"},Io={class:"text-xs"},Eo={class:"text-xs font-medium text-orange-600 dark:text-orange-400"},Uo={class:"flex flex-col items-end gap-2"},Ko={key:0,class:"text-center py-12 text-muted-foreground"},Fo={class:"flex items-start justify-between"},No={class:"flex-1"},zo={class:"flex items-center gap-2 mb-2"},Oo={class:"font-semibold text-lg"},qo={class:"text-sm font-normal text-muted-foreground"},Qo={class:"space-y-1 text-sm text-muted-foreground"},Go={key:0},Wo={key:1,class:"text-xs font-medium text-primary"},Ho={key:2,class:"text-xs"},Jo={class:"text-blue-600 dark:text-blue-400"},Zo={class:"text-green-600 dark:text-green-400"},Xo={class:"text-xs"},Yo={class:"text-xs font-medium text-gray-500 dark:text-gray-400"},ei={class:"flex flex-col items-end gap-2"},ti={class:"font-semibold"},si={class:"grid grid-cols-2 gap-4 py-4"},ai=["disabled"],li={class:"text-xs text-muted-foreground mt-1"},ni=["disabled"],ri={class:"text-xs text-muted-foreground mt-1"},oi=Y({__name:"NetworkMembersTab",props:{activeMembers:{},passiveMembers:{},prospectMembers:{},hasLeft:{type:Boolean},hasRight:{type:Boolean}},setup(a){const i=B(!1),u=B(null),m=B(null),_=we({member_id:0,position:""}),c=g=>{u.value=g,m.value=null,_.member_id=g.id,_.position="",i.value=!0},p=()=>{i.value=!1,u.value=null,m.value=null,_.reset()},w=()=>{if(!u.value||!m.value){R.error("Pilih posisi terlebih dahulu");return}_.position=m.value,_.post("/client/profile/place-member",{onSuccess:()=>{R.success(`${u.value?.name} berhasil ditempatkan di posisi ${m.value}`),p()},onError:g=>{const b=g.error||"Gagal menempatkan member ke binary tree";R.error(b)}})},D=g=>new Date(g).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"}),x=g=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(g),$=g=>g?{variant:g==="left"?"default":"secondary",text:g==="left"?"Kiri":"Kanan"}:{variant:"outline",text:"Belum Ditempatkan"};return(g,b)=>(r(),f(G,null,[s(e(O),null,{default:l(()=>[s(e(Z),null,{default:l(()=>[s(e(X),null,{default:l(()=>[...b[2]||(b[2]=[o("Jaringan Member",-1)])]),_:1}),s(e(pe),null,{default:l(()=>[...b[3]||(b[3]=[o("Kelola dan lihat member dalam jaringan Anda",-1)])]),_:1})]),_:1}),s(e(q),null,{default:l(()=>[s(e(it),{"default-value":"active",class:"w-full"},{default:l(()=>[s(e(dt),{class:"grid w-full grid-cols-3"},{default:l(()=>[s(e(ae),{value:"active"},{default:l(()=>[s(e(he),{class:"w-4 h-4 mr-2"}),o(" Aktif ("+n(a.activeMembers.length)+") ",1)]),_:1}),s(e(ae),{value:"passive"},{default:l(()=>[s(e(He),{class:"w-4 h-4 mr-2"}),o(" Pasif ("+n(a.passiveMembers.length)+") ",1)]),_:1}),s(e(ae),{value:"prospect"},{default:l(()=>[s(e(Fe),{class:"w-4 h-4 mr-2"}),o(" Prospek ("+n(a.prospectMembers.length)+") ",1)]),_:1})]),_:1}),s(e(le),{value:"active",class:"space-y-4"},{default:l(()=>[a.activeMembers.length===0?(r(),f("div",uo,[s(e(he),{class:"w-12 h-12 mx-auto mb-4 opacity-20"}),b[4]||(b[4]=t("p",null,"Belum ada member aktif",-1)),b[5]||(b[5]=t("p",{class:"text-sm mt-2"},"Member aktif adalah member yang sudah ditempatkan di binary tree",-1))])):h("",!0),(r(!0),f(G,null,se(a.activeMembers,d=>(r(),j(e(O),{key:d.id,class:"hover:shadow-md transition-shadow"},{default:l(()=>[s(e(q),{class:"p-4"},{default:l(()=>[t("div",mo,[t("div",co,[t("div",po,[t("h4",fo,[o(n(d.name)+" ",1),t("span",xo,"(@"+n(d.username)+")",1)]),s(e(I),{variant:$(d.position).variant},{default:l(()=>[o(n($(d.position).text),1)]),_:2},1032,["variant"]),d.level?(r(),j(e(I),{key:0,variant:"outline"},{default:l(()=>[o(" Level "+n(d.level),1)]),_:2},1024)):h("",!0)]),t("div",go,[t("p",null,n(d.email),1),d.phone?(r(),f("p",vo,n(d.phone),1)):h("",!0),d.package_name?(r(),f("p",yo," Paket: "+n(d.package_name),1)):h("",!0),(d.total_left??0)>0||(d.total_right??0)>0?(r(),f("p",bo,[t("span",_o,"Kiri: "+n(d.total_left??0),1),b[6]||(b[6]=t("span",{class:"mx-1"},"|",-1)),t("span",ho,"Kanan: "+n(d.total_right??0),1)])):h("",!0),t("p",ko,"Bergabung: "+n(D(d.joined_at)),1),t("p",wo," Omzet: "+n(x(d.omzet)),1)])]),t("div",$o,[s(e(I),{variant:"default"},{default:l(()=>[s(e(he),{class:"w-3 h-3 mr-1"}),b[7]||(b[7]=o(" Aktif ",-1))]),_:1})])])]),_:2},1024)]),_:2},1024))),128))]),_:1}),s(e(le),{value:"passive",class:"space-y-4"},{default:l(()=>[a.passiveMembers.length===0?(r(),f("div",Po,[s(e(He),{class:"w-12 h-12 mx-auto mb-4 opacity-20"}),b[8]||(b[8]=t("p",null,"Belum ada member pasif",-1)),b[9]||(b[9]=t("p",{class:"text-sm mt-2"},"Member pasif adalah member yang belum ditempatkan di binary tree tapi sudah memiliki pembelian/order",-1))])):h("",!0),(r(!0),f(G,null,se(a.passiveMembers,d=>(r(),j(e(O),{key:d.id,class:"hover:shadow-md transition-shadow"},{default:l(()=>[s(e(q),{class:"p-4"},{default:l(()=>[t("div",Co,[t("div",So,[t("div",To,[t("h4",jo,[o(n(d.name)+" ",1),t("span",Mo,"(@"+n(d.username)+")",1)]),s(e(I),{variant:"secondary"},{default:l(()=>[...b[10]||(b[10]=[o("Belum Ditempatkan",-1)])]),_:1})]),t("div",Ro,[t("p",null,n(d.email),1),d.phone?(r(),f("p",Do,n(d.phone),1)):h("",!0),d.package_name?(r(),f("p",Ao," Paket: "+n(d.package_name),1)):h("",!0),(d.total_left??0)>0||(d.total_right??0)>0?(r(),f("p",Lo,[t("span",Bo,"Kiri: "+n(d.total_left??0),1),b[11]||(b[11]=t("span",{class:"mx-1"},"|",-1)),t("span",Vo,"Kanan: "+n(d.total_right??0),1)])):h("",!0),t("p",Io,"Bergabung: "+n(D(d.joined_at)),1),t("p",Eo," Omzet: "+n(x(d.omzet)),1)])]),t("div",Uo,[s(e(I),{variant:"outline"},{default:l(()=>[s(e(He),{class:"w-3 h-3 mr-1"}),b[12]||(b[12]=o(" Pasif ",-1))]),_:1}),s(e(I),{variant:"default"},{default:l(()=>[...b[13]||(b[13]=[o(" Sudah Belanja ",-1)])]),_:1}),!a.hasLeft||!a.hasRight?(r(),j(e(K),{key:0,size:"sm",variant:"default",class:"mt-2",onClick:C=>c(d)},{default:l(()=>[s(e(je),{class:"w-3 h-3 mr-1"}),b[14]||(b[14]=o(" Tempatkan ke Binary ",-1))]),_:1},8,["onClick"])):h("",!0)])])]),_:2},1024)]),_:2},1024))),128))]),_:1}),s(e(le),{value:"prospect",class:"space-y-4"},{default:l(()=>[a.prospectMembers.length===0?(r(),f("div",Ko,[s(e(Fe),{class:"w-12 h-12 mx-auto mb-4 opacity-20"}),b[15]||(b[15]=t("p",null,"Belum ada member prospek",-1)),b[16]||(b[16]=t("p",{class:"text-sm mt-2"},"Member prospek adalah member yang baru mendaftar, belum ditempatkan di binary tree dan belum memiliki pembelian/order",-1))])):h("",!0),(r(!0),f(G,null,se(a.prospectMembers,d=>(r(),j(e(O),{key:d.id,class:"hover:shadow-md transition-shadow"},{default:l(()=>[s(e(q),{class:"p-4"},{default:l(()=>[t("div",Fo,[t("div",No,[t("div",zo,[t("h4",Oo,[o(n(d.name)+" ",1),t("span",qo,"(@"+n(d.username)+")",1)]),s(e(I),{variant:"outline"},{default:l(()=>[...b[17]||(b[17]=[o("Baru Bergabung",-1)])]),_:1})]),t("div",Qo,[t("p",null,n(d.email),1),d.phone?(r(),f("p",Go,n(d.phone),1)):h("",!0),d.package_name?(r(),f("p",Wo," Paket: "+n(d.package_name),1)):h("",!0),(d.total_left??0)>0||(d.total_right??0)>0?(r(),f("p",Ho,[t("span",Jo,"Kiri: "+n(d.total_left??0),1),b[18]||(b[18]=t("span",{class:"mx-1"},"|",-1)),t("span",Zo,"Kanan: "+n(d.total_right??0),1)])):h("",!0),t("p",Xo,"Bergabung: "+n(D(d.joined_at)),1),t("p",Yo," Omzet: "+n(x(d.omzet)),1)])]),t("div",ei,[s(e(I),{variant:"secondary"},{default:l(()=>[s(e(Fe),{class:"w-3 h-3 mr-1"}),b[19]||(b[19]=o(" Prospek ",-1))]),_:1}),s(e(I),{variant:"secondary"},{default:l(()=>[...b[20]||(b[20]=[o(" Belum Belanja ",-1)])]),_:1})])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1}),s(e(Ie),{open:i.value,"onUpdate:open":p},{default:l(()=>[s(e(Ae),{class:"sm:max-w-md"},{default:l(()=>[s(e(Le),null,{default:l(()=>[s(e(Be),null,{default:l(()=>[...b[21]||(b[21]=[o("Tempatkan Member ke Binary Tree",-1)])]),_:1}),s(e(Ve),null,{default:l(()=>[b[22]||(b[22]=o(" Pilih posisi untuk menempatkan ",-1)),t("span",ti,n(u.value?.name),1),b[23]||(b[23]=o(" di jaringan binary tree Anda. ",-1))]),_:1})]),_:1}),t("div",si,[t("button",{type:"button",disabled:a.hasLeft,class:H(["flex flex-col items-center justify-center p-6 rounded-lg border-2 transition-all",a.hasLeft?"border-gray-200 bg-gray-100 opacity-50 cursor-not-allowed":m.value==="left"?"border-primary bg-primary/10":"border-gray-200 hover:border-gray-300"]),onClick:b[0]||(b[0]=d=>!a.hasLeft&&(m.value="left"))},[s(e(je),{class:"w-8 h-8 mb-2 rotate-90"}),b[24]||(b[24]=t("span",{class:"font-semibold"},"Posisi Kiri",-1)),t("span",li,n(a.hasLeft?"Sudah Terisi":"Left Position"),1)],10,ai),t("button",{type:"button",disabled:a.hasRight,class:H(["flex flex-col items-center justify-center p-6 rounded-lg border-2 transition-all",a.hasRight?"border-gray-200 bg-gray-100 opacity-50 cursor-not-allowed":m.value==="right"?"border-primary bg-primary/10":"border-gray-200 hover:border-gray-300"]),onClick:b[1]||(b[1]=d=>!a.hasRight&&(m.value="right"))},[s(e(je),{class:"w-8 h-8 mb-2 -rotate-90"}),b[25]||(b[25]=t("span",{class:"font-semibold"},"Posisi Kanan",-1)),t("span",ri,n(a.hasRight?"Sudah Terisi":"Right Position"),1)],10,ni)]),s(e(Ee),null,{default:l(()=>[s(e(K),{variant:"outline",onClick:p,disabled:e(_).processing},{default:l(()=>[...b[26]||(b[26]=[o(" Batal ",-1)])]),_:1},8,["disabled"]),s(e(K),{onClick:w,disabled:!m.value||e(_).processing},{default:l(()=>[o(n(e(_).processing?"Memproses...":"Tempatkan"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])],64))}}),ii=Y({__name:"GoJSBinaryTree",props:{binaryTree:{},isDialog:{type:Boolean,default:!1}},setup(a,{expose:i}){let u=null;const m=a,_=B(null),c=B(!1);let p=null;const w=(d,C=null)=>{if(!d)return{nodes:[],links:[]};const M=[],E=[],N=(U,Q,V)=>{const W=U.level<5,A={key:U.id,name:U.name,username:U.username,package:U.package_name||"Tidak ada paket",totalLeft:U.total_left||0,totalRight:U.total_right||0,position:V,isActive:U.status,hasLeft:!!U.left,hasRight:!!U.right,level:U.level,order:V==="left"?0:V==="right"?1:0};if(M.push(A),Q!==null&&E.push({from:Q,to:U.id,order:V==="left"?0:1}),!U.left&&U.status&&W){const k=-U.id*2;M.push({key:k,name:"+ Kiri",username:"",package:"",isPlaceholder:!0,parentId:U.id,placeholderPosition:"left",order:0}),E.push({from:U.id,to:k,order:0})}if(!U.right&&U.status&&W){const k=-U.id*2-1;M.push({key:k,name:"+ Kanan",username:"",package:"",isPlaceholder:!0,parentId:U.id,placeholderPosition:"right",order:1}),E.push({from:U.id,to:k,order:1})}U.left&&N(U.left,U.id,"left"),U.right&&N(U.right,U.id,"right")};return N(d,C,null),{nodes:M,links:E}},D=()=>{if(!_.value||!u)return;const d=u,C=d.GraphObject.make;p=C(d.Diagram,_.value,{"undoManager.isEnabled":!1,"animationManager.isEnabled":!0,initialAutoScale:d.AutoScale.Uniform,contentAlignment:d.Spot.Top,layout:C(d.TreeLayout,{angle:90,layerSpacing:50,nodeSpacing:20,arrangement:d.TreeArrangement.Horizontal,sorting:d.TreeSorting.Ascending,comparer:(M,E)=>{const N=M.node?.data?.order??0,U=E.node?.data?.order??0;return N-U}}),maxSelectionCount:1}),p.addDiagramListener("ObjectSingleClicked",M=>{const E=M.subject.part;if(E instanceof d.Node){const N=E.data;N?.isPlaceholder&&N?.parentId&&N?.placeholderPosition?window.dispatchEvent(new CustomEvent("gojs-open-placement",{detail:{uplineId:N.parentId,position:N.placeholderPosition}})):!N?.isPlaceholder&&N?.key&&window.dispatchEvent(new CustomEvent("gojs-member-click",{detail:{memberId:N.key}}))}}),p.nodeTemplate=C(d.Node,"Auto",{cursor:"pointer",selectionAdorned:!1},C(d.Shape,"RoundedRectangle",{fill:"white",stroke:"#e2e8f0",strokeWidth:2,parameter1:8},new d.Binding("fill","",M=>M.isPlaceholder?"#f8fafc":M.isActive?"#ffffff":"#fef3c7"),new d.Binding("stroke","",M=>M.isPlaceholder?"#cbd5e1":M.position==="left"?"#3b82f6":M.position==="right"?"#22c55e":"#6366f1"),new d.Binding("strokeWidth","",M=>M.isPlaceholder?1:2),new d.Binding("strokeDashArray","isPlaceholder",M=>M?[4,4]:null)),C(d.Panel,"Vertical",{margin:8,defaultAlignment:d.Spot.Left},C(d.TextBlock,{font:"bold 13px Inter, sans-serif",stroke:"#1e293b",maxSize:new d.Size(140,NaN),wrap:d.Wrap.Fit,textAlign:"center",alignment:d.Spot.Center},new d.Binding("text","name"),new d.Binding("stroke","isPlaceholder",M=>M?"#64748b":"#1e293b"),new d.Binding("font","isPlaceholder",M=>M?"12px Inter, sans-serif":"bold 13px Inter, sans-serif")),C(d.TextBlock,{font:"11px Inter, sans-serif",stroke:"#64748b",maxSize:new d.Size(140,NaN),wrap:d.Wrap.Fit,margin:new d.Margin(2,0,0,0),alignment:d.Spot.Center},new d.Binding("text","username"),new d.Binding("visible","isPlaceholder",M=>!M)),C(d.Panel,"Auto",{margin:new d.Margin(4,0,0,0),alignment:d.Spot.Center},new d.Binding("visible","isPlaceholder",M=>!M),C(d.Shape,"RoundedRectangle",{fill:"#eff6ff",stroke:"#bfdbfe",strokeWidth:1,parameter1:4}),C(d.TextBlock,{font:"10px Inter, sans-serif",stroke:"#1d4ed8",margin:new d.Margin(2,6,2,6)},new d.Binding("text","package"))),C(d.Panel,"Horizontal",{margin:new d.Margin(6,0,0,0),alignment:d.Spot.Center},new d.Binding("visible","isPlaceholder",M=>!M),C(d.Panel,"Horizontal",C(d.Shape,"Circle",{width:8,height:8,fill:"#3b82f6",stroke:null,margin:new d.Margin(0,4,0,0)}),C(d.TextBlock,{font:"10px Inter, sans-serif",stroke:"#64748b"},new d.Binding("text","totalLeft",M=>`L: ${M}`))),C(d.TextBlock," | ",{font:"10px Inter, sans-serif",stroke:"#cbd5e1"}),C(d.Panel,"Horizontal",C(d.Shape,"Circle",{width:8,height:8,fill:"#22c55e",stroke:null,margin:new d.Margin(0,4,0,0)}),C(d.TextBlock,{font:"10px Inter, sans-serif",stroke:"#64748b"},new d.Binding("text","totalRight",M=>`R: ${M}`)))))),p.linkTemplate=C(d.Link,{routing:d.Routing.Orthogonal,corner:10,selectable:!1},C(d.Shape,{strokeWidth:2,stroke:"#cbd5e1"})),x()},x=()=>{if(!p||!m.binaryTree||!u)return;const d=u,{nodes:C,links:M}=w(m.binaryTree);p.model=new d.GraphLinksModel(C,M),requestAnimationFrame(()=>{p&&p.zoomToFit()})},$=()=>{p&&p.commandHandler.increaseZoom()},g=()=>{p&&p.commandHandler.decreaseZoom()},b=()=>{p&&p.zoomToFit()};return ze(async()=>{typeof window<"u"&&(u=await ds(()=>import("./vendor-BgSYH69o.js").then(d=>d.e6),__vite__mapDeps([0,1])),c.value=!0,setTimeout(()=>{D()},0))}),mt(()=>{p&&(p.removeDiagramListener("ObjectSingleClicked",()=>{}),p.clear(),p.div=null,p=null)}),i({zoomIn:$,zoomOut:g,resetZoom:b}),(d,C)=>c.value?(r(),f("div",{key:1,ref_key:"diagramDiv",ref:_,class:H(["w-full border rounded-lg bg-slate-50",a.isDialog?"h-[350px] sm:h-[400px]":"h-[500px] sm:h-[600px]"])},null,2)):(r(),f("div",{key:0,class:H(["w-full border rounded-lg bg-slate-50 flex items-center justify-center",a.isDialog?"h-[350px] sm:h-[400px]":"h-[500px] sm:h-[600px]"])},[...C[0]||(C[0]=[t("div",{class:"text-center text-muted-foreground"},[t("div",{class:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full mx-auto mb-2"}),t("p",{class:"text-sm"},"Memuat diagram...")],-1)])],2))}}),de=a=>({url:de.url(a),method:"get"});de.definition={methods:["get","head"],url:"/client/profile"};de.url=a=>de.definition.url+me(a);de.get=a=>({url:de.url(a),method:"get"});de.head=a=>({url:de.url(a),method:"head"});const pt=a=>({action:de.url(a),method:"get"});pt.get=a=>({action:de.url(a),method:"get"});pt.head=a=>({action:de.url({[a?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...a?.query??a?.mergeQuery??{}}}),method:"get"});de.form=pt;const fe=a=>({url:fe.url(a),method:"patch"});fe.definition={methods:["patch"],url:"/client/profile"};fe.url=a=>fe.definition.url+me(a);fe.patch=a=>({url:fe.url(a),method:"patch"});const Tt=a=>({action:fe.url({[a?.mergeQuery?"mergeQuery":"query"]:{_method:"PATCH",...a?.query??a?.mergeQuery??{}}}),method:"post"});Tt.patch=a=>({action:fe.url({[a?.mergeQuery?"mergeQuery":"query"]:{_method:"PATCH",...a?.query??a?.mergeQuery??{}}}),method:"post"});fe.form=Tt;const xe=a=>({url:xe.url(a),method:"patch"});xe.definition={methods:["patch"],url:"/client/profile/password"};xe.url=a=>xe.definition.url+me(a);xe.patch=a=>({url:xe.url(a),method:"patch"});const jt=a=>({action:xe.url({[a?.mergeQuery?"mergeQuery":"query"]:{_method:"PATCH",...a?.query??a?.mergeQuery??{}}}),method:"post"});jt.patch=a=>({action:xe.url({[a?.mergeQuery?"mergeQuery":"query"]:{_method:"PATCH",...a?.query??a?.mergeQuery??{}}}),method:"post"});xe.form=jt;const ge=a=>({url:ge.url(a),method:"delete"});ge.definition={methods:["delete"],url:"/client/profile"};ge.url=a=>ge.definition.url+me(a);ge.delete=a=>({url:ge.url(a),method:"delete"});const Mt=a=>({action:ge.url({[a?.mergeQuery?"mergeQuery":"query"]:{_method:"DELETE",...a?.query??a?.mergeQuery??{}}}),method:"post"});Mt.delete=a=>({action:ge.url({[a?.mergeQuery?"mergeQuery":"query"]:{_method:"DELETE",...a?.query??a?.mergeQuery??{}}}),method:"post"});ge.form=Mt;const ce=a=>({url:ce.url(a),method:"post"});ce.definition={methods:["post"],url:"/client/profile/place-member"};ce.url=a=>ce.definition.url+me(a);ce.post=a=>({url:ce.url(a),method:"post"});const Rt=a=>({action:ce.url(a),method:"post"});Rt.post=a=>({action:ce.url(a),method:"post"});ce.form=Rt;const oe=(a,i)=>({url:oe.url(a,i),method:"get"});oe.definition={methods:["get","head"],url:"/client/profile/member-tree/{memberId}"};oe.url=(a,i)=>{(typeof a=="string"||typeof a=="number")&&(a={memberId:a}),Array.isArray(a)&&(a={memberId:a[0]}),a=Oe(a);const u={memberId:a.memberId};return oe.definition.url.replace("{memberId}",u.memberId.toString()).replace(/\/+$/,"")+me(i)};oe.get=(a,i)=>({url:oe.url(a,i),method:"get"});oe.head=(a,i)=>({url:oe.url(a,i),method:"head"});const ft=(a,i)=>({action:oe.url(a,i),method:"get"});ft.get=(a,i)=>({action:oe.url(a,i),method:"get"});ft.head=(a,i)=>({action:oe.url(a,{[i?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...i?.query??i?.mergeQuery??{}}}),method:"get"});oe.form=ft;const ie=a=>({url:ie.url(a),method:"get"});ie.definition={methods:["get","head"],url:"/client/profile/search-member"};ie.url=a=>ie.definition.url+me(a);ie.get=a=>({url:ie.url(a),method:"get"});ie.head=a=>({url:ie.url(a),method:"head"});const xt=a=>({action:ie.url(a),method:"get"});xt.get=a=>({action:ie.url(a),method:"get"});xt.head=a=>({action:ie.url({[a?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...a?.query??a?.mergeQuery??{}}}),method:"get"});ie.form=xt;const ve=a=>({url:ve.url(a),method:"post"});ve.definition={methods:["post"],url:"/client/profile/addresses"};ve.url=a=>ve.definition.url+me(a);ve.post=a=>({url:ve.url(a),method:"post"});const Dt=a=>({action:ve.url(a),method:"post"});Dt.post=a=>({action:ve.url(a),method:"post"});ve.form=Dt;const ye=(a,i)=>({url:ye.url(a,i),method:"put"});ye.definition={methods:["put"],url:"/client/profile/addresses/{address}"};ye.url=(a,i)=>{(typeof a=="string"||typeof a=="number")&&(a={address:a}),Array.isArray(a)&&(a={address:a[0]}),a=Oe(a);const u={address:a.address};return ye.definition.url.replace("{address}",u.address.toString()).replace(/\/+$/,"")+me(i)};ye.put=(a,i)=>({url:ye.url(a,i),method:"put"});const At=(a,i)=>({action:ye.url(a,{[i?.mergeQuery?"mergeQuery":"query"]:{_method:"PUT",...i?.query??i?.mergeQuery??{}}}),method:"post"});At.put=(a,i)=>({action:ye.url(a,{[i?.mergeQuery?"mergeQuery":"query"]:{_method:"PUT",...i?.query??i?.mergeQuery??{}}}),method:"post"});ye.form=At;const be=(a,i)=>({url:be.url(a,i),method:"delete"});be.definition={methods:["delete"],url:"/client/profile/addresses/{address}"};be.url=(a,i)=>{(typeof a=="string"||typeof a=="number")&&(a={address:a}),Array.isArray(a)&&(a={address:a[0]}),a=Oe(a);const u={address:a.address};return be.definition.url.replace("{address}",u.address.toString()).replace(/\/+$/,"")+me(i)};be.delete=(a,i)=>({url:be.url(a,i),method:"delete"});const Lt=(a,i)=>({action:be.url(a,{[i?.mergeQuery?"mergeQuery":"query"]:{_method:"DELETE",...i?.query??i?.mergeQuery??{}}}),method:"post"});Lt.delete=(a,i)=>({action:be.url(a,{[i?.mergeQuery?"mergeQuery":"query"]:{_method:"DELETE",...i?.query??i?.mergeQuery??{}}}),method:"post"});be.form=Lt;const _e=(a,i)=>({url:_e.url(a,i),method:"post"});_e.definition={methods:["post"],url:"/client/profile/addresses/{address}/set-default"};_e.url=(a,i)=>{(typeof a=="string"||typeof a=="number")&&(a={address:a}),Array.isArray(a)&&(a={address:a[0]}),a=Oe(a);const u={address:a.address};return _e.definition.url.replace("{address}",u.address.toString()).replace(/\/+$/,"")+me(i)};_e.post=(a,i)=>({url:_e.url(a,i),method:"post"});const Bt=(a,i)=>({action:_e.url(a,i),method:"post"});Bt.post=(a,i)=>({action:_e.url(a,i),method:"post"});_e.form=Bt;const di={class:"space-y-4 sm:space-y-6"},ui={class:"grid grid-cols-3 gap-2 sm:gap-4"},mi={class:"text-lg sm:text-2xl font-bold"},ci={class:"text-lg sm:text-2xl font-bold text-blue-600"},pi={class:"text-lg sm:text-2xl font-bold text-green-600"},fi={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2"},xi={class:"flex items-center gap-2"},gi={class:"flex items-center gap-1 sm:gap-2"},vi={class:"relative"},yi={class:"relative"},bi={key:0,class:"absolute top-full right-0 mt-1 w-64 sm:w-72 bg-background border rounded-lg shadow-lg z-20 max-h-64 overflow-y-auto"},_i={key:0,class:"p-3 text-center text-sm text-muted-foreground"},hi=["onMousedown"],ki={class:"text-sm font-medium truncate"},wi={class:"text-xs text-muted-foreground truncate"},$i={key:0,class:"text-xs text-primary"},Pi={class:"relative"},Ci={key:0,class:"absolute inset-0 z-10 flex items-center justify-center bg-background/80 backdrop-blur-sm rounded-lg"},Si={class:"text-center"},Ti={key:2,class:"h-[400px] flex items-center justify-center text-muted-foreground"},ji={class:"text-center"},Mi={class:"font-semibold"},Ri={class:"flex-1 overflow-y-auto py-2 sm:py-4"},Di={class:"relative mb-3 sm:mb-4"},Ai={key:0,class:"text-center py-8 sm:py-12 text-muted-foreground"},Li={class:"text-sm sm:text-base"},Bi={key:1,class:"text-center py-8 sm:py-12 text-muted-foreground"},Vi={key:2,class:"space-y-2"},Ii=["onClick"],Ei={class:"flex items-start justify-between gap-2"},Ui={class:"flex-1 min-w-0"},Ki={class:"flex flex-wrap items-center gap-1 sm:gap-2 mb-1"},Fi={class:"font-semibold text-sm sm:text-base truncate"},Ni={class:"space-y-0.5 text-xs sm:text-sm text-muted-foreground"},zi={class:"truncate"},Oi={key:0,class:"truncate"},qi={class:"text-[10px] sm:text-xs"},Qi={key:0,class:"flex-shrink-0"},Gi=Y({__name:"BinaryTreeTab",props:{binaryTree:{},totalDownlines:{},totalLeft:{},totalRight:{},passiveMembers:{}},setup(a){const i=a,u=B(null),m=B(!1),_=B(null),c=B(null),p=B(null),w=B(""),D=B(""),x=B([]),$=B(!1),g=B(!1),b=B(!1),d=B(!1),C=B(null),M=B(null),E=B({totalDownlines:0,totalLeft:0,totalRight:0}),N=F(()=>b.value?M.value:i.binaryTree),U=F(()=>b.value?E.value:{totalDownlines:i.totalDownlines,totalLeft:i.totalLeft,totalRight:i.totalRight}),Q=B(0),V=F(()=>`tree-${Q.value}`),W=F(()=>{if(!w.value.trim())return i.passiveMembers;const J=w.value.toLowerCase().trim();return i.passiveMembers.filter(L=>{const ee=L.name?.toLowerCase().includes(J),Qe=L.email?.toLowerCase().includes(J),zt=L.phone?.toLowerCase().includes(J);return ee||Qe||zt})}),A=we({member_id:0,upline_id:null,position:""}),k=(J,L)=>{_.value=J,c.value=L,p.value=null,w.value="",m.value=!0},v=()=>{m.value=!1,_.value=null,c.value=null,p.value=null,w.value=""},P=J=>{p.value=J},y=()=>{if(!p.value||!c.value){R.error("Pilih member terlebih dahulu");return}A.member_id=p.value.id,A.upline_id=_.value,A.position=c.value,ue.post(ce().url,{member_id:A.member_id,upline_id:A.upline_id,position:A.position},{preserveScroll:!0,onStart:()=>{A.processing=!0},onFinish:()=>{A.processing=!1},onSuccess:()=>{R.success(`${p.value?.name} berhasil ditempatkan di posisi ${c.value}`),v()},onError:J=>{const L=J.error||"Gagal menempatkan member ke binary tree";R.error(L)}})},S=J=>new Date(J).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"}),T=async J=>{d.value=!0,b.value=!0;try{const L=await re.get(oe(J).url);L.data.success?(C.value=L.data.data.member,M.value=L.data.data.tree,E.value={totalDownlines:L.data.data.totalDownlines,totalLeft:L.data.data.totalLeft,totalRight:L.data.data.totalRight},Q.value++):(R.error("Gagal memuat data jaringan member"),Ue())}catch(L){R.error(L.response?.data?.message||"Gagal memuat data jaringan member"),Ue()}finally{d.value=!1}},Ue=()=>{b.value=!1,C.value=null,M.value=null,E.value={totalDownlines:0,totalLeft:0,totalRight:0},D.value="",x.value=[],g.value=!1};let qe=null;const Vt=async()=>{const J=D.value.trim();if(J.length<2){x.value=[],g.value=!1;return}qe&&clearTimeout(qe),qe=setTimeout(async()=>{$.value=!0,g.value=!0;try{const L=await re.get(ie({query:{query:J}}).url);L.data.success?x.value=L.data.data:x.value=[]}catch{x.value=[]}finally{$.value=!1}},300)},It=J=>{D.value="",x.value=[],g.value=!1,T(J.id)},Et=()=>{setTimeout(()=>{Ut()},200)},Ut=()=>{g.value=!1},Kt=()=>{u.value?.zoomIn()},Ft=()=>{u.value?.zoomOut()},Nt=()=>{u.value?.resetZoom()},gt=J=>{T(J.detail.memberId)},vt=J=>{k(J.detail.uplineId,J.detail.position)};return ze(()=>{window.addEventListener("gojs-member-click",gt),window.addEventListener("gojs-open-placement",vt)}),mt(()=>{window.removeEventListener("gojs-member-click",gt),window.removeEventListener("gojs-open-placement",vt)}),(J,L)=>(r(),f(G,null,[t("div",di,[t("div",ui,[s(e(O),{class:"p-0"},{default:l(()=>[s(e(Z),{class:"flex flex-row items-center justify-between space-y-0 p-2 sm:p-4 pb-1 sm:pb-2"},{default:l(()=>[s(e(X),{class:"text-[10px] sm:text-sm font-medium truncate"},{default:l(()=>[...L[2]||(L[2]=[o("Total Jaringan",-1)])]),_:1}),s(e(at),{class:"h-3 w-3 sm:h-4 sm:w-4 text-muted-foreground flex-shrink-0"})]),_:1}),s(e(q),{class:"p-2 sm:p-4 pt-0 sm:pt-0"},{default:l(()=>[t("div",mi,n(U.value.totalDownlines),1),L[3]||(L[3]=t("p",{class:"text-[8px] sm:text-xs text-muted-foreground hidden sm:block"},"Member aktif di jaringan Anda",-1))]),_:1})]),_:1}),s(e(O),{class:"p-0"},{default:l(()=>[s(e(Z),{class:"flex flex-row items-center justify-between space-y-0 p-2 sm:p-4 pb-1 sm:pb-2"},{default:l(()=>[s(e(X),{class:"text-[10px] sm:text-sm font-medium truncate"},{default:l(()=>[...L[4]||(L[4]=[o("Kaki Kiri",-1)])]),_:1}),s(e(_t),{class:"h-3 w-3 sm:h-4 sm:w-4 text-blue-600 flex-shrink-0"})]),_:1}),s(e(q),{class:"p-2 sm:p-4 pt-0 sm:pt-0"},{default:l(()=>[t("div",ci,n(U.value.totalLeft),1),L[5]||(L[5]=t("p",{class:"text-[8px] sm:text-xs text-muted-foreground hidden sm:block"},"Member di posisi kiri",-1))]),_:1})]),_:1}),s(e(O),{class:"p-0"},{default:l(()=>[s(e(Z),{class:"flex flex-row items-center justify-between space-y-0 p-2 sm:p-4 pb-1 sm:pb-2"},{default:l(()=>[s(e(X),{class:"text-[10px] sm:text-sm font-medium truncate"},{default:l(()=>[...L[6]||(L[6]=[o("Kaki Kanan",-1)])]),_:1}),s(e(_t),{class:"h-3 w-3 sm:h-4 sm:w-4 text-green-600 flex-shrink-0"})]),_:1}),s(e(q),{class:"p-2 sm:p-4 pt-0 sm:pt-0"},{default:l(()=>[t("div",pi,n(U.value.totalRight),1),L[7]||(L[7]=t("p",{class:"text-[8px] sm:text-xs text-muted-foreground hidden sm:block"},"Member di posisi kanan",-1))]),_:1})]),_:1})]),s(e(O),null,{default:l(()=>[s(e(Z),{class:"p-3 sm:p-6"},{default:l(()=>[t("div",fi,[t("div",xi,[b.value?(r(),j(e(K),{key:0,variant:"ghost",size:"icon",class:"h-7 w-7 sm:h-8 sm:w-8",onClick:Ue},{default:l(()=>[s(e(ht),{class:"h-4 w-4"})]),_:1})):h("",!0),t("div",null,[s(e(X),{class:"text-sm sm:text-base flex items-center gap-2"},{default:l(()=>[b.value&&C.value?(r(),f(G,{key:0},[o(" Jaringan "+n(C.value.name),1)],64)):(r(),f(G,{key:1},[o(" Struktur Binary Tree ")],64))]),_:1}),s(e(pe),{class:"text-xs sm:text-sm"},{default:l(()=>[b.value&&C.value?(r(),f(G,{key:0},[o(n(C.value.username),1)],64)):(r(),f(G,{key:1},[o(" Visualisasi jaringan MLM binary tree Anda ")],64))]),_:1})])]),t("div",gi,[t("div",vi,[t("div",yi,[s(e(Ke),{class:"absolute left-2.5 top-1/2 -translate-y-1/2 h-3.5 w-3.5 text-muted-foreground"}),s(e(te),{modelValue:D.value,"onUpdate:modelValue":L[0]||(L[0]=ee=>D.value=ee),type:"text",placeholder:"Cari member...",class:"h-7 sm:h-8 w-28 sm:w-40 pl-8 text-xs sm:text-sm",onInput:Vt,onBlur:Et},null,8,["modelValue"]),$.value?(r(),j(e(Se),{key:0,class:"absolute right-2.5 top-1/2 -translate-y-1/2 h-3.5 w-3.5 animate-spin text-muted-foreground"})):h("",!0)]),g.value&&(x.value.length>0||D.value.length>=2)?(r(),f("div",bi,[x.value.length===0?(r(),f("div",_i,[s(e(Ke),{class:"w-5 h-5 mx-auto mb-2 opacity-20"}),L[8]||(L[8]=t("p",null,"Tidak ditemukan",-1))])):h("",!0),(r(!0),f(G,null,se(x.value,ee=>(r(),f("button",{key:ee.id,type:"button",class:"w-full p-2.5 text-left hover:bg-muted/50 border-b last:border-b-0 transition-colors",onMousedown:De(Qe=>It(ee),["prevent"])},[t("p",ki,n(ee.name),1),t("p",wi,n(ee.email),1),ee.package_name?(r(),f("p",$i,n(ee.package_name),1)):h("",!0)],40,hi))),128))])):h("",!0)]),b.value?(r(),j(e(K),{key:0,variant:"outline",size:"sm",class:"h-7 sm:h-8 text-xs",onClick:Ue},{default:l(()=>[s(e(ht),{class:"h-3.5 w-3.5 mr-1"}),L[9]||(L[9]=t("span",{class:"hidden sm:inline"},"Kembali",-1))]),_:1})):h("",!0),s(e(K),{variant:"outline",size:"icon",class:"h-7 w-7 sm:h-8 sm:w-8",onClick:Ft},{default:l(()=>[s(e(us),{class:"h-3.5 w-3.5 sm:h-4 sm:w-4"})]),_:1}),s(e(K),{variant:"outline",size:"icon",class:"h-7 w-7 sm:h-8 sm:w-8",onClick:Kt},{default:l(()=>[s(e(ms),{class:"h-3.5 w-3.5 sm:h-4 sm:w-4"})]),_:1}),s(e(K),{variant:"ghost",size:"icon",class:"h-7 w-7 sm:h-8 sm:w-8",onClick:Nt,title:"Fit to Screen"},{default:l(()=>[s(e(cs),{class:"h-3.5 w-3.5 sm:h-4 sm:w-4"})]),_:1})])])]),_:1}),s(e(q),{class:"p-2 sm:p-6 pt-0"},{default:l(()=>[t("div",Pi,[d.value?(r(),f("div",Ci,[t("div",Si,[s(e(Se),{class:"w-8 h-8 mx-auto mb-4 animate-spin text-primary"}),L[10]||(L[10]=t("p",{class:"text-sm text-muted-foreground"},"Memuat data jaringan...",-1))])])):h("",!0),N.value?(r(),j(ii,{key:V.value,ref_key:"goJSTreeRef",ref:u,"binary-tree":N.value,"is-dialog":b.value},null,8,["binary-tree","is-dialog"])):(r(),f("div",Ti,[t("div",ji,[s(e(at),{class:"w-12 h-12 mx-auto mb-4 opacity-20"}),L[11]||(L[11]=t("p",null,"Belum ada jaringan binary tree",-1))])]))]),L[12]||(L[12]=t("div",{class:"mt-4 sm:mt-6 p-2 sm:p-4 rounded-lg bg-muted/50"},[t("div",{class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 text-center sm:text-left"},[t("p",{class:"text-[10px] sm:text-sm text-muted-foreground"},[o("  "),t("span",{class:"hidden sm:inline"},'Klik member untuk melihat jaringannya  Klik "+" untuk menambah member'),t("span",{class:"sm:hidden"},"Klik member untuk lihat jaringan")]),t("p",{class:"text-[10px] sm:text-sm text-muted-foreground"},[t("span",{class:"hidden sm:inline"},"Scroll/drag untuk navigasi  Mouse wheel untuk zoom"),t("span",{class:"sm:hidden"},"Drag & Pinch untuk navigasi")])])],-1))]),_:1})]),_:1})]),s(e(Ie),{open:m.value,"onUpdate:open":v},{default:l(()=>[s(e(Ae),{class:"w-[95vw] max-w-2xl max-h-[85vh] overflow-hidden flex flex-col p-4 sm:p-6"},{default:l(()=>[s(e(Le),{class:"space-y-1 sm:space-y-2"},{default:l(()=>[s(e(Be),{class:"text-base sm:text-lg"},{default:l(()=>[...L[13]||(L[13]=[o("Pilih Member untuk Ditempatkan",-1)])]),_:1}),s(e(Ve),{class:"text-xs sm:text-sm"},{default:l(()=>[L[14]||(L[14]=o(" Pilih member pasif untuk ditempatkan di posisi ",-1)),t("span",Mi,n(c.value==="left"?"Kiri":"Kanan"),1)]),_:1})]),_:1}),t("div",Ri,[t("div",Di,[s(e(Ke),{class:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s(e(te),{modelValue:w.value,"onUpdate:modelValue":L[1]||(L[1]=ee=>w.value=ee),type:"text",placeholder:"Cari nama, email, atau telepon...",class:"pl-9 text-sm"},null,8,["modelValue"])]),W.value.length===0&&w.value?(r(),f("div",Ai,[s(e(Ke),{class:"w-8 h-8 sm:w-12 sm:h-12 mx-auto mb-3 sm:mb-4 opacity-20"}),t("p",Li,'Tidak ditemukan member dengan "'+n(w.value)+'"',1),L[15]||(L[15]=t("p",{class:"text-xs sm:text-sm mt-1 sm:mt-2"},"Coba kata kunci lain",-1))])):a.passiveMembers.length===0?(r(),f("div",Bi,[s(e(Fe),{class:"w-8 h-8 sm:w-12 sm:h-12 mx-auto mb-3 sm:mb-4 opacity-20"}),L[16]||(L[16]=t("p",{class:"text-sm sm:text-base"},"Tidak ada member pasif",-1)),L[17]||(L[17]=t("p",{class:"text-xs sm:text-sm mt-1 sm:mt-2"},"Semua member sudah ditempatkan",-1))])):(r(),f("div",Vi,[(r(!0),f(G,null,se(W.value,ee=>(r(),f("button",{key:ee.id,type:"button",class:H(["w-full p-3 sm:p-4 rounded-lg border-2 text-left transition-all",p.value?.id===ee.id?"border-primary bg-primary/10":"border-gray-200 hover:border-gray-300 dark:border-gray-700 dark:hover:border-gray-600"]),onClick:Qe=>P(ee)},[t("div",Ei,[t("div",Ui,[t("div",Ki,[t("h4",Fi,n(ee.name),1),ee.has_purchase?(r(),j(e(I),{key:0,variant:"default",class:"text-[10px] sm:text-xs"},{default:l(()=>[...L[18]||(L[18]=[t("span",{class:"hidden sm:inline"},"Ada Pembelian",-1),t("span",{class:"sm:hidden"},"Beli",-1)])]),_:1})):(r(),j(e(I),{key:1,variant:"secondary",class:"text-[10px] sm:text-xs"},{default:l(()=>[...L[19]||(L[19]=[t("span",{class:"hidden sm:inline"},"Belum Belanja",-1),t("span",{class:"sm:hidden"},"Belum",-1)])]),_:1}))]),t("div",Ni,[t("p",zi,n(ee.email),1),ee.phone?(r(),f("p",Oi,n(ee.phone),1)):h("",!0),t("p",qi,"Bergabung: "+n(S(ee.joined_at)),1)])]),p.value?.id===ee.id?(r(),f("div",Qi,[...L[20]||(L[20]=[t("div",{class:"flex h-5 w-5 sm:h-6 sm:w-6 items-center justify-center rounded-full bg-primary text-primary-foreground"},[t("svg",{class:"w-3 h-3 sm:w-4 sm:h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1)])])):h("",!0)])],10,Ii))),128))]))]),s(e(Ee),{class:"flex-col-reverse sm:flex-row gap-2 sm:gap-0"},{default:l(()=>[s(e(K),{variant:"outline",onClick:v,disabled:e(A).processing,class:"w-full sm:w-auto"},{default:l(()=>[...L[21]||(L[21]=[o(" Batal ",-1)])]),_:1},8,["disabled"]),s(e(K),{onClick:y,disabled:!p.value||e(A).processing,class:"w-full sm:w-auto"},{default:l(()=>[o(n(e(A).processing?"Memproses...":"Tempatkan"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])],64))}}),Wi={class:"space-y-4 sm:space-y-6"},Hi={class:"grid gap-3 sm:gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3"},Ji={class:"text-xl sm:text-2xl font-bold truncate"},Zi={class:"text-[10px] sm:text-xs text-muted-foreground mt-1"},Xi={class:"flex flex-col sm:flex-row gap-1 sm:gap-2 mt-2"},Yi={class:"text-xl sm:text-2xl font-bold truncate"},ed={class:"text-[10px] sm:text-xs text-muted-foreground mt-1"},td={class:"flex flex-col sm:flex-row gap-1 sm:gap-2 mt-2"},sd={class:"text-xl sm:text-2xl font-bold truncate"},ad={class:"text-[10px] sm:text-xs text-muted-foreground mt-1"},ld={class:"flex flex-col sm:flex-row gap-1 sm:gap-2 mt-2"},nd={class:"text-xl sm:text-2xl font-bold truncate"},rd={class:"text-[10px] sm:text-xs text-muted-foreground mt-1"},od={class:"flex flex-col sm:flex-row gap-1 sm:gap-2 mt-2"},id={class:"text-xl sm:text-2xl font-bold truncate"},dd={class:"text-[10px] sm:text-xs text-muted-foreground mt-1"},ud={class:"flex flex-col sm:flex-row gap-1 sm:gap-2 mt-2"},md={class:"text-xl sm:text-2xl font-bold truncate"},cd={class:"text-[10px] sm:text-xs text-muted-foreground mt-1"},pd={class:"flex flex-col sm:flex-row gap-1 sm:gap-2 mt-2"},fd={class:"text-xl sm:text-2xl font-bold truncate"},xd={class:"text-[10px] sm:text-xs text-muted-foreground mt-1"},gd={class:"flex flex-col sm:flex-row gap-1 sm:gap-2 mt-2"},vd={class:"text-xl sm:text-2xl font-bold text-primary truncate"},yd={class:"w-full text-center overflow-x-auto [&::-webkit-scrollbar]:hidden [-ms-overflow-style:none] [scrollbar-width:none] -mx-2 px-2 sm:mx-0 sm:px-0",style:{"-webkit-overflow-scrolling":"touch"}},bd={key:0,class:"text-center py-4 sm:py-8 text-muted-foreground text-[10px] sm:text-sm"},_d={key:1,class:"space-y-1.5 sm:space-y-3"},hd={class:"flex-1 min-w-0"},kd={class:"flex flex-wrap items-center gap-1 sm:gap-2"},wd={class:"text-[10px] sm:text-xs md:text-sm font-medium break-words line-clamp-1"},$d={class:"text-[8px] sm:text-[10px] md:text-xs text-muted-foreground mt-0.5"},Pd={key:0,class:"block sm:inline"},Cd={class:"block sm:inline sm:ml-1"},Sd={class:"text-left sm:text-right flex-shrink-0"},Td={class:"text-xs sm:text-base md:text-lg font-bold text-green-600"},jd={key:0,class:"text-center py-4 sm:py-8 text-muted-foreground text-[10px] sm:text-sm"},Md={key:1,class:"space-y-1.5 sm:space-y-3"},Rd={class:"flex-1 min-w-0"},Dd={class:"flex flex-wrap items-center gap-1 sm:gap-2"},Ad={class:"text-[10px] sm:text-xs md:text-sm font-medium break-words line-clamp-1"},Ld={class:"text-[8px] sm:text-[10px] md:text-xs text-muted-foreground mt-0.5"},Bd={key:0,class:"block sm:inline"},Vd={class:"block sm:inline sm:ml-2"},Id={class:"text-left sm:text-right flex-shrink-0"},Ed={class:"text-xs sm:text-base md:text-lg font-bold text-green-600"},Ud={key:0,class:"text-center py-4 sm:py-8 text-muted-foreground text-[10px] sm:text-sm"},Kd={key:1,class:"space-y-3"},Fd={class:"flex-1 min-w-0"},Nd={class:"flex flex-wrap items-center gap-2"},zd={class:"text-xs sm:text-sm font-medium break-words"},Od={class:"text-[10px] sm:text-xs text-muted-foreground mt-1"},qd={class:"text-left sm:text-right flex-shrink-0"},Qd={class:"text-base sm:text-lg font-bold text-green-600"},Gd={key:0,class:"text-center py-4 sm:py-8 text-muted-foreground text-[10px] sm:text-sm"},Wd={key:1,class:"space-y-1.5 sm:space-y-3"},Hd={class:"flex-1 min-w-0"},Jd={class:"flex flex-wrap items-center gap-1 sm:gap-2"},Zd={class:"text-[10px] sm:text-xs md:text-sm font-medium break-words line-clamp-1"},Xd={class:"text-[8px] sm:text-[10px] md:text-xs text-muted-foreground mt-0.5"},Yd={key:0,class:"block sm:inline"},eu={class:"block sm:inline sm:ml-1"},tu={class:"text-left sm:text-right flex-shrink-0"},su={class:"text-xs sm:text-base md:text-lg font-bold text-green-600"},au={key:0,class:"text-center py-4 sm:py-8 text-muted-foreground text-[10px] sm:text-sm"},lu={key:1,class:"space-y-1.5 sm:space-y-3"},nu={class:"flex-1 min-w-0"},ru={class:"flex flex-wrap items-center gap-1 sm:gap-2"},ou={class:"text-[10px] sm:text-xs md:text-sm font-medium break-words line-clamp-1"},iu={class:"text-[8px] sm:text-[10px] md:text-xs text-muted-foreground mt-0.5"},du={class:"text-left sm:text-right flex-shrink-0"},uu={class:"text-xs sm:text-base md:text-lg font-bold text-green-600"},mu={key:0,class:"text-center py-4 sm:py-8 text-muted-foreground text-[10px] sm:text-sm"},cu={key:1,class:"space-y-1.5 sm:space-y-3"},pu={class:"flex-1 min-w-0"},fu={class:"flex flex-wrap items-center gap-1 sm:gap-2"},xu={class:"text-[10px] sm:text-xs md:text-sm font-medium break-words line-clamp-1"},gu={class:"text-[8px] sm:text-[10px] md:text-xs text-muted-foreground mt-0.5"},vu={key:0,class:"block sm:inline"},yu={class:"block sm:inline sm:ml-1"},bu={class:"text-left sm:text-right flex-shrink-0"},_u={class:"text-xs sm:text-base md:text-lg font-bold text-green-600"},hu={key:0,class:"text-center py-4 sm:py-8 text-muted-foreground text-[10px] sm:text-sm"},ku={key:1,class:"space-y-1.5 sm:space-y-3"},wu={class:"flex-1 min-w-0"},$u={class:"flex flex-wrap items-center gap-1 sm:gap-2"},Pu={class:"text-[10px] sm:text-xs md:text-sm font-medium break-words line-clamp-1"},Cu={class:"text-[8px] sm:text-[10px] md:text-xs text-muted-foreground mt-0.5"},Su={class:"block sm:inline"},Tu={class:"block sm:inline sm:ml-1"},ju={class:"text-left sm:text-right flex-shrink-0"},Mu={class:"text-xs sm:text-base md:text-lg font-bold text-green-600"},Ru=Y({__name:"BonusTab",props:{bonusSponsors:{},bonusMatchings:{},bonusPairings:{},bonusCashbacks:{},bonusRewards:{},bonusRetails:{},bonusLifetimeCashRewards:{}},setup(a){const i=a,u=y=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(y),m=y=>new Date(y).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"}),_=F(()=>i.bonusSponsors.reduce((y,S)=>y+S.amount,0)),c=F(()=>i.bonusMatchings.reduce((y,S)=>y+S.amount,0)),p=F(()=>i.bonusPairings.reduce((y,S)=>y+S.amount,0)),w=F(()=>i.bonusCashbacks.reduce((y,S)=>y+S.amount,0)),D=F(()=>i.bonusRewards.reduce((y,S)=>y+S.amount,0)),x=F(()=>i.bonusSponsors.filter(y=>y.status===0).reduce((y,S)=>y+S.amount,0)),$=F(()=>i.bonusSponsors.filter(y=>y.status===1).reduce((y,S)=>y+S.amount,0)),g=F(()=>i.bonusMatchings.filter(y=>y.status===0).reduce((y,S)=>y+S.amount,0)),b=F(()=>i.bonusMatchings.filter(y=>y.status===1).reduce((y,S)=>y+S.amount,0)),d=F(()=>i.bonusPairings.filter(y=>y.status===0).reduce((y,S)=>y+S.amount,0)),C=F(()=>i.bonusPairings.filter(y=>y.status===1).reduce((y,S)=>y+S.amount,0)),M=F(()=>i.bonusCashbacks.filter(y=>y.status===0).reduce((y,S)=>y+S.amount,0)),E=F(()=>i.bonusCashbacks.filter(y=>y.status===1).reduce((y,S)=>y+S.amount,0)),N=F(()=>i.bonusRewards.filter(y=>y.status===0).reduce((y,S)=>y+S.amount,0)),U=F(()=>i.bonusRewards.filter(y=>y.status===1).reduce((y,S)=>y+S.amount,0)),Q=F(()=>i.bonusRetails.reduce((y,S)=>y+S.amount,0)),V=F(()=>i.bonusRetails.filter(y=>y.status===0).reduce((y,S)=>y+S.amount,0)),W=F(()=>i.bonusRetails.filter(y=>y.status===1).reduce((y,S)=>y+S.amount,0)),A=F(()=>i.bonusLifetimeCashRewards.reduce((y,S)=>y+S.amount,0)),k=F(()=>i.bonusLifetimeCashRewards.filter(y=>y.status===0).reduce((y,S)=>y+S.amount,0)),v=F(()=>i.bonusLifetimeCashRewards.filter(y=>y.status===1).reduce((y,S)=>y+S.amount,0)),P=F(()=>_.value+c.value+p.value+w.value+D.value+Q.value+A.value);return(y,S)=>(r(),f("div",Wi,[t("div",Hi,[s(e(O),null,{default:l(()=>[s(e(Z),{class:"pb-2 sm:pb-3"},{default:l(()=>[s(e(X),{class:"text-xs sm:text-sm font-medium flex items-center gap-2"},{default:l(()=>[s(e(at),{class:"h-3 w-3 sm:h-4 sm:w-4 text-blue-500 flex-shrink-0"}),S[0]||(S[0]=t("span",{class:"truncate"},"Referral Incentive",-1))]),_:1})]),_:1}),s(e(q),null,{default:l(()=>[t("div",Ji,n(u(_.value)),1),t("p",Zi,n(a.bonusSponsors.length)+" transaksi ",1),t("div",Xi,[s(e(I),{variant:"outline",class:"text-[10px] sm:text-xs justify-center sm:justify-start"},{default:l(()=>[o(" Pending: "+n(u(x.value)),1)]),_:1}),s(e(I),{variant:"secondary",class:"text-[10px] sm:text-xs justify-center sm:justify-start"},{default:l(()=>[o(" Released: "+n(u($.value)),1)]),_:1})])]),_:1})]),_:1}),s(e(O),null,{default:l(()=>[s(e(Z),{class:"pb-2 sm:pb-3"},{default:l(()=>[s(e(X),{class:"text-xs sm:text-sm font-medium flex items-center gap-2"},{default:l(()=>[s(e(ps),{class:"h-3 w-3 sm:h-4 sm:w-4 text-green-500 flex-shrink-0"}),S[1]||(S[1]=t("span",{class:"truncate"},"Team Affiliate Commission",-1))]),_:1})]),_:1}),s(e(q),null,{default:l(()=>[t("div",Yi,n(u(c.value)),1),t("p",ed,n(a.bonusMatchings.length)+" transaksi ",1),t("div",td,[s(e(I),{variant:"outline",class:"text-[10px] sm:text-xs justify-center sm:justify-start"},{default:l(()=>[o(" Pending: "+n(u(g.value)),1)]),_:1}),s(e(I),{variant:"secondary",class:"text-[10px] sm:text-xs justify-center sm:justify-start"},{default:l(()=>[o(" Released: "+n(u(b.value)),1)]),_:1})])]),_:1})]),_:1}),s(e(O),null,{default:l(()=>[s(e(Z),{class:"pb-2 sm:pb-3"},{default:l(()=>[s(e(X),{class:"text-xs sm:text-sm font-medium flex items-center gap-2"},{default:l(()=>[s(e(fs),{class:"h-3 w-3 sm:h-4 sm:w-4 text-purple-500 flex-shrink-0"}),S[2]||(S[2]=t("span",{class:"truncate"},"Partner Team Commission",-1))]),_:1})]),_:1}),s(e(q),null,{default:l(()=>[t("div",sd,n(u(p.value)),1),t("p",ad,n(a.bonusPairings.length)+" transaksi ",1),t("div",ld,[s(e(I),{variant:"outline",class:"text-[10px] sm:text-xs justify-center sm:justify-start"},{default:l(()=>[o(" Pending: "+n(u(d.value)),1)]),_:1}),s(e(I),{variant:"secondary",class:"text-[10px] sm:text-xs justify-center sm:justify-start"},{default:l(()=>[o(" Released: "+n(u(C.value)),1)]),_:1})])]),_:1})]),_:1}),s(e(O),null,{default:l(()=>[s(e(Z),{class:"pb-2 sm:pb-3"},{default:l(()=>[s(e(X),{class:"text-xs sm:text-sm font-medium flex items-center gap-2"},{default:l(()=>[s(e(xs),{class:"h-3 w-3 sm:h-4 sm:w-4 text-orange-500 flex-shrink-0"}),S[3]||(S[3]=t("span",{class:"truncate"},"Cashback Commission",-1))]),_:1})]),_:1}),s(e(q),null,{default:l(()=>[t("div",nd,n(u(w.value)),1),t("p",rd,n(a.bonusCashbacks.length)+" transaksi ",1),t("div",od,[s(e(I),{variant:"outline",class:"text-[10px] sm:text-xs justify-center sm:justify-start"},{default:l(()=>[o(" Pending: "+n(u(M.value)),1)]),_:1}),s(e(I),{variant:"secondary",class:"text-[10px] sm:text-xs justify-center sm:justify-start"},{default:l(()=>[o(" Released: "+n(u(E.value)),1)]),_:1})])]),_:1})]),_:1}),s(e(O),null,{default:l(()=>[s(e(Z),{class:"pb-2 sm:pb-3"},{default:l(()=>[s(e(X),{class:"text-xs sm:text-sm font-medium flex items-center gap-2"},{default:l(()=>[s(e(kt),{class:"h-3 w-3 sm:h-4 sm:w-4 text-yellow-500 flex-shrink-0"}),S[4]||(S[4]=t("span",{class:"truncate"},"Promotions Rewards",-1))]),_:1})]),_:1}),s(e(q),null,{default:l(()=>[t("div",id,n(u(D.value)),1),t("p",dd,n(a.bonusRewards.length)+" transaksi ",1),t("div",ud,[s(e(I),{variant:"outline",class:"text-[10px] sm:text-xs justify-center sm:justify-start"},{default:l(()=>[o(" Pending: "+n(u(N.value)),1)]),_:1}),s(e(I),{variant:"secondary",class:"text-[10px] sm:text-xs justify-center sm:justify-start"},{default:l(()=>[o(" Released: "+n(u(U.value)),1)]),_:1})])]),_:1})]),_:1}),s(e(O),null,{default:l(()=>[s(e(Z),{class:"pb-2 sm:pb-3"},{default:l(()=>[s(e(X),{class:"text-xs sm:text-sm font-medium flex items-center gap-2"},{default:l(()=>[s(e(gs),{class:"h-3 w-3 sm:h-4 sm:w-4 text-cyan-500 flex-shrink-0"}),S[5]||(S[5]=t("span",{class:"truncate"},"Retail Commission",-1))]),_:1})]),_:1}),s(e(q),null,{default:l(()=>[t("div",md,n(u(Q.value)),1),t("p",cd,n(a.bonusRetails.length)+" transaksi ",1),t("div",pd,[s(e(I),{variant:"outline",class:"text-[10px] sm:text-xs justify-center sm:justify-start"},{default:l(()=>[o(" Pending: "+n(u(V.value)),1)]),_:1}),s(e(I),{variant:"secondary",class:"text-[10px] sm:text-xs justify-center sm:justify-start"},{default:l(()=>[o(" Released: "+n(u(W.value)),1)]),_:1})])]),_:1})]),_:1}),s(e(O),null,{default:l(()=>[s(e(Z),{class:"pb-2 sm:pb-3"},{default:l(()=>[s(e(X),{class:"text-xs sm:text-sm font-medium flex items-center gap-2"},{default:l(()=>[s(e(ct),{class:"h-3 w-3 sm:h-4 sm:w-4 text-amber-500 flex-shrink-0"}),S[6]||(S[6]=t("span",{class:"truncate"},"Lifetime Cash Rewards",-1))]),_:1})]),_:1}),s(e(q),null,{default:l(()=>[t("div",fd,n(u(A.value)),1),t("p",xd,n(a.bonusLifetimeCashRewards.length)+" transaksi ",1),t("div",gd,[s(e(I),{variant:"outline",class:"text-[10px] sm:text-xs justify-center sm:justify-start"},{default:l(()=>[o(" Pending: "+n(u(k.value)),1)]),_:1}),s(e(I),{variant:"secondary",class:"text-[10px] sm:text-xs justify-center sm:justify-start"},{default:l(()=>[o(" Released: "+n(u(v.value)),1)]),_:1})])]),_:1})]),_:1}),s(e(O),null,{default:l(()=>[s(e(Z),{class:"pb-2 sm:pb-3"},{default:l(()=>[s(e(X),{class:"text-xs sm:text-sm font-medium flex items-center gap-2"},{default:l(()=>[s(e(Ct),{class:"h-3 w-3 sm:h-4 sm:w-4 text-primary flex-shrink-0"}),S[7]||(S[7]=t("span",{class:"truncate"},"Total Bonus",-1))]),_:1})]),_:1}),s(e(q),null,{default:l(()=>[t("div",vd,n(u(P.value)),1),S[8]||(S[8]=t("p",{class:"text-[10px] sm:text-xs text-muted-foreground mt-1"}," Semua jenis bonus ",-1))]),_:1})]),_:1})]),s(e(O),null,{default:l(()=>[s(e(Z),{class:"p-2 sm:p-4 md:p-6 pb-2"},{default:l(()=>[s(e(X),{class:"text-xs sm:text-base md:text-lg"},{default:l(()=>[...S[9]||(S[9]=[o("Riwayat Bonus",-1)])]),_:1}),s(e(pe),{class:"text-[9px] sm:text-xs md:text-sm"},{default:l(()=>[...S[10]||(S[10]=[o(" Detail transaksi bonus ",-1)])]),_:1})]),_:1}),s(e(q),{class:"p-2 sm:p-4 md:p-6 pt-0"},{default:l(()=>[s(e(it),{"default-value":"sponsor",class:"w-full"},{default:l(()=>[t("div",yd,[s(e(dt),{class:"flex w-max sm:grid sm:w-full sm:grid-cols-7 gap-0.5 sm:gap-1 h-7 sm:h-auto bg-muted/30"},{default:l(()=>[s(e(ae),{value:"sponsor",class:"text-[12px] sm:text-xs md:text-sm whitespace-nowrap px-1.5 sm:px-3 md:px-4 py-1 sm:py-2 h-6 sm:h-auto"},{default:l(()=>[...S[11]||(S[11]=[o(" Referral ",-1)])]),_:1}),s(e(ae),{value:"matching",class:"text-[12px] sm:text-xs md:text-sm whitespace-nowrap px-1.5 sm:px-3 md:px-4 py-1 sm:py-2 h-6 sm:h-auto"},{default:l(()=>[...S[12]||(S[12]=[o(" Team Aff. ",-1)])]),_:1}),s(e(ae),{value:"pairing",class:"text-[12px] sm:text-xs md:text-sm whitespace-nowrap px-1.5 sm:px-3 md:px-4 py-1 sm:py-2 h-6 sm:h-auto"},{default:l(()=>[...S[13]||(S[13]=[o(" Partner ",-1)])]),_:1}),s(e(ae),{value:"cashback",class:"text-[12px] sm:text-xs md:text-sm whitespace-nowrap px-1.5 sm:px-3 md:px-4 py-1 sm:py-2 h-6 sm:h-auto"},{default:l(()=>[...S[14]||(S[14]=[o(" Cashback ",-1)])]),_:1}),s(e(ae),{value:"reward",class:"text-[12px] sm:text-xs md:text-sm whitespace-nowrap px-1.5 sm:px-3 md:px-4 py-1 sm:py-2 h-6 sm:h-auto"},{default:l(()=>[...S[15]||(S[15]=[o(" Rewards ",-1)])]),_:1}),s(e(ae),{value:"retail",class:"text-[12px] sm:text-xs md:text-sm whitespace-nowrap px-1.5 sm:px-3 md:px-4 py-1 sm:py-2 h-6 sm:h-auto"},{default:l(()=>[...S[16]||(S[16]=[o(" Retail ",-1)])]),_:1}),s(e(ae),{value:"lifetime",class:"text-[12px] sm:text-xs md:text-sm whitespace-nowrap px-1.5 sm:px-3 md:px-4 py-1 sm:py-2 h-6 sm:h-auto"},{default:l(()=>[...S[17]||(S[17]=[o(" Lifetime ",-1)])]),_:1})]),_:1})]),s(e(le),{value:"sponsor",class:"mt-2 sm:mt-4"},{default:l(()=>[a.bonusSponsors.length===0?(r(),f("div",bd," Belum ada bonus referral incentive ")):(r(),f("div",_d,[(r(!0),f(G,null,se(a.bonusSponsors,T=>(r(),f("div",{key:T.id,class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-1.5 sm:gap-3 p-2 sm:p-3 md:p-4 border rounded-lg hover:bg-muted/50 transition-colors"},[t("div",hd,[t("div",kd,[s(e(I),{variant:T.status===1?"secondary":"outline",class:"text-[8px] sm:text-xs px-1 sm:px-2 py-0"},{default:l(()=>[o(n(T.status===1?"R":"P"),1)]),_:2},1032,["variant"]),t("span",wd,n(T.description||"Bonus Sponsor"),1)]),t("p",$d,[T.from_member?(r(),f("span",Pd," Dari: "+n(T.from_member.name),1)):h("",!0),t("span",Cd,n(m(T.created_at)),1)])]),t("div",Sd,[t("div",Td,n(u(T.amount)),1),t("div",{class:H(["text-[8px] sm:text-xs",T.status===1?"text-green-600":"text-yellow-600"])},n(T.status===1?"Processed":"Pending"),3)])]))),128))]))]),_:1}),s(e(le),{value:"matching",class:"mt-2 sm:mt-4"},{default:l(()=>[a.bonusMatchings.length===0?(r(),f("div",jd," Belum ada bonus team affiliate commission ")):(r(),f("div",Md,[(r(!0),f(G,null,se(a.bonusMatchings,T=>(r(),f("div",{key:T.id,class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-1.5 sm:gap-3 p-2 sm:p-3 md:p-4 border rounded-lg hover:bg-muted/50 transition-colors"},[t("div",Rd,[t("div",Dd,[s(e(I),{variant:T.status===1?"secondary":"outline",class:"text-[8px] sm:text-xs px-1 sm:px-2 py-0"},{default:l(()=>[o(n(T.status===1?"R":"P"),1)]),_:2},1032,["variant"]),s(e(I),{variant:"outline",class:"text-[8px] sm:text-xs px-1 sm:px-2 py-0"},{default:l(()=>[o(" L"+n(T.level),1)]),_:2},1024),t("span",Ad,n(T.description||"Bonus Matching"),1)]),t("p",Ld,[T.from_member?(r(),f("span",Bd," Dari: "+n(T.from_member.name),1)):h("",!0),t("span",Vd,n(m(T.created_at)),1)])]),t("div",Id,[t("div",Ed,n(u(T.amount)),1),t("div",{class:H(["text-[8px] sm:text-xs",T.status===1?"text-green-600":"text-yellow-600"])},n(T.status===1?"Processed":"Pending"),3)])]))),128))]))]),_:1}),s(e(le),{value:"pairing",class:"mt-2 sm:mt-4"},{default:l(()=>[a.bonusPairings.length===0?(r(),f("div",Ud," Belum ada bonus partner team commission ")):(r(),f("div",Kd,[(r(!0),f(G,null,se(a.bonusPairings,T=>(r(),f("div",{key:T.id,class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 p-3 sm:p-4 border rounded-lg hover:bg-muted/50 transition-colors"},[t("div",Fd,[t("div",Nd,[s(e(I),{variant:T.status===1?"secondary":"outline",class:"text-xs"},{default:l(()=>[o(n(T.status===1?"Released":"Pending"),1)]),_:2},1032,["variant"]),s(e(I),{variant:"outline",class:"text-xs"},{default:l(()=>[o(n(T.pair)+" Pairs ",1)]),_:2},1024),t("span",zd,n(T.description||"Bonus Pairing"),1)]),t("p",Od,n(m(T.created_at)),1)]),t("div",qd,[t("div",Qd,n(u(T.amount)),1),t("div",{class:H(["text-[8px] sm:text-xs",T.status===1?"text-green-600":"text-yellow-600"])},n(T.status===1?"Processed":"Pending"),3)])]))),128))]))]),_:1}),s(e(le),{value:"cashback",class:"mt-2 sm:mt-4"},{default:l(()=>[a.bonusCashbacks.length===0?(r(),f("div",Gd," Belum ada bonus cashback commission ")):(r(),f("div",Wd,[(r(!0),f(G,null,se(a.bonusCashbacks,T=>(r(),f("div",{key:T.id,class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-1.5 sm:gap-3 p-2 sm:p-3 md:p-4 border rounded-lg hover:bg-muted/50 transition-colors"},[t("div",Hd,[t("div",Jd,[s(e(I),{variant:T.status===1?"secondary":"outline",class:"text-[8px] sm:text-xs px-1 sm:px-2 py-0"},{default:l(()=>[o(n(T.status===1?"R":"P"),1)]),_:2},1032,["variant"]),t("span",Zd,n(T.description||"Bonus Cashback"),1)]),t("p",Xd,[S[18]||(S[18]=o('eground mt-0.5"> ',-1)),T.order_id?(r(),f("span",Yd," #"+n(T.order_id),1)):h("",!0),t("span",eu,n(m(T.created_at)),1)])]),t("div",tu,[t("div",su,n(u(T.amount)),1),t("div",{class:H(["text-[8px] sm:text-xs",T.status===1?"text-green-600":"text-yellow-600"])},n(T.status===1?"Processed":"Pending"),3)])]))),128))]))]),_:1}),s(e(le),{value:"reward",class:"mt-2 sm:mt-4"},{default:l(()=>[a.bonusRewards.length===0?(r(),f("div",au," Belum ada promotions rewards ")):(r(),f("div",lu,[(r(!0),f(G,null,se(a.bonusRewards,T=>(r(),f("div",{key:T.id,class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-1.5 sm:gap-3 p-2 sm:p-3 md:p-4 border rounded-lg hover:bg-muted/50 transition-colors"},[t("div",nu,[t("div",ru,[s(e(I),{variant:T.status===1?"secondary":"outline",class:"text-[8px] sm:text-xs px-1 sm:px-2 py-0"},{default:l(()=>[o(n(T.status===1?"R":"P"),1)]),_:2},1032,["variant"]),T.reward_type?(r(),j(e(I),{key:0,variant:"outline",class:"text-[8px] sm:text-xs px-1 sm:px-2 py-0"},{default:l(()=>[o(n(T.reward_type),1)]),_:2},1024)):h("",!0),t("span",ou,n(T.description||"Promotions Reward"),1)]),t("p",iu,n(m(T.created_at)),1)]),t("div",du,[t("div",uu,n(u(T.amount)),1),t("div",{class:H(["text-[8px] sm:text-xs",T.status===1?"text-green-600":"text-yellow-600"])},n(T.status===1?"Processed":"Pending"),3)])]))),128))]))]),_:1}),s(e(le),{value:"retail",class:"mt-2 sm:mt-4"},{default:l(()=>[a.bonusRetails.length===0?(r(),f("div",mu," Belum ada bonus retail commission ")):(r(),f("div",cu,[(r(!0),f(G,null,se(a.bonusRetails,T=>(r(),f("div",{key:T.id,class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-1.5 sm:gap-3 p-2 sm:p-3 md:p-4 border rounded-lg hover:bg-muted/50 transition-colors"},[t("div",pu,[t("div",fu,[s(e(I),{variant:T.status===1?"secondary":"outline",class:"text-[8px] sm:text-xs px-1 sm:px-2 py-0"},{default:l(()=>[o(n(T.status===1?"R":"P"),1)]),_:2},1032,["variant"]),T.index_value?(r(),j(e(I),{key:0,variant:"outline",class:"text-[8px] sm:text-xs px-1 sm:px-2 py-0"},{default:l(()=>[o(" IDX: "+n(T.index_value),1)]),_:2},1024)):h("",!0),t("span",xu,n(T.description||"Retail Commission"),1)]),t("p",gu,[T.from_member?(r(),f("span",vu," Dari: "+n(T.from_member.name),1)):h("",!0),t("span",yu,n(m(T.created_at)),1)])]),t("div",bu,[t("div",_u,n(u(T.amount)),1),t("div",{class:H(["text-[8px] sm:text-xs",T.status===1?"text-green-600":"text-yellow-600"])},n(T.status===1?"Processed":"Pending"),3)])]))),128))]))]),_:1}),s(e(le),{value:"lifetime",class:"mt-2 sm:mt-4"},{default:l(()=>[a.bonusLifetimeCashRewards.length===0?(r(),f("div",hu," Belum ada lifetime cash rewards ")):(r(),f("div",ku,[(r(!0),f(G,null,se(a.bonusLifetimeCashRewards,T=>(r(),f("div",{key:T.id,class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-1.5 sm:gap-3 p-2 sm:p-3 md:p-4 border rounded-lg hover:bg-muted/50 transition-colors"},[t("div",wu,[t("div",$u,[s(e(I),{variant:T.status===1?"secondary":"outline",class:"text-[8px] sm:text-xs px-1 sm:px-2 py-0"},{default:l(()=>[o(n(T.status===1?"R":"P"),1)]),_:2},1032,["variant"]),s(e(I),{variant:"outline",class:"text-[8px] sm:text-xs px-1 sm:px-2 py-0"},{default:l(()=>[o(n(T.reward_name),1)]),_:2},1024),t("span",Pu,n(T.description||"Lifetime Cash Reward"),1)]),t("p",Cu,[t("span",Su," Reward: "+n(u(T.reward))+" | BV: "+n(T.bv),1),t("span",Tu,n(m(T.created_at)),1)])]),t("div",ju,[t("div",Mu,n(u(T.amount)),1),t("div",{class:H(["text-[8px] sm:text-xs",T.status===1?"text-green-600":"text-yellow-600"])},n(T.status===1?"Processed":"Pending"),3)])]))),128))]))]),_:1})]),_:1})]),_:1})]),_:1})]))}}),Du={class:"flex items-center justify-between"},Au={class:"font-semibold"},Lu={class:"flex items-center justify-between"},Bu={class:"font-semibold"},Vu={class:"flex items-center justify-between"},Iu={class:"flex items-center justify-between"},Eu={class:"font-semibold text-blue-600 dark:text-blue-400"},Uu={class:"flex items-center justify-between"},Ku={class:"font-semibold text-green-600 dark:text-green-400"},Fu={class:"flex items-center justify-between"},Nu={class:"font-semibold text-blue-600 dark:text-blue-400"},zu={class:"flex items-center justify-between"},Ou={class:"font-semibold text-green-600 dark:text-green-400"},qu=Y({__name:"NetworkStatsCard",props:{customer:{}},setup(a){const i=u=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(u);return(u,m)=>(r(),j(e(O),null,{default:l(()=>[s(e(Z),null,{default:l(()=>[s(e(X),{class:"flex items-center gap-2"},{default:l(()=>[s(e(St),{class:"w-5 h-5"}),m[0]||(m[0]=o(" Statistik Jaringan ",-1))]),_:1})]),_:1}),s(e(q),{class:"space-y-3"},{default:l(()=>[t("div",Du,[m[1]||(m[1]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Jaringan Kiri",-1)),t("span",Au,n(a.customer.network_stats.left_count),1)]),s(e(ne)),t("div",Lu,[m[2]||(m[2]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Jaringan Kanan",-1)),t("span",Bu,n(a.customer.network_stats.right_count),1)]),s(e(ne)),t("div",Vu,[m[3]||(m[3]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Total Downline",-1)),s(e(I),{variant:"secondary"},{default:l(()=>[o(n(a.customer.network_stats.total_downlines),1)]),_:1})]),s(e(ne)),t("div",Iu,[m[4]||(m[4]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Omset Network Builder Kiri",-1)),t("span",Eu,n(i(a.customer.network_stats.omzet_group_left_plana)),1)]),s(e(ne)),t("div",Uu,[m[5]||(m[5]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Omset Network Builder Kanan",-1)),t("span",Ku,n(i(a.customer.network_stats.omzet_group_right_plana)),1)]),s(e(ne)),t("div",Fu,[m[6]||(m[6]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Omset Retail Kiri",-1)),t("span",Nu,n(i(a.customer.network_stats.omzet_group_left_planb)),1)]),s(e(ne)),t("div",zu,[m[7]||(m[7]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Omset Retail Kanan",-1)),t("span",Ou,n(i(a.customer.network_stats.omzet_group_right_planb)),1)])]),_:1})]),_:1}))}}),Qu={class:"bg-gradient-to-br from-primary/10 via-primary/5 to-background border-b"},Gu={class:"container mx-auto px-3 py-6 sm:px-4 sm:py-12 max-w-7xl"},Wu={class:"flex items-center justify-between"},Hu={class:"hidden md:flex items-center gap-2 px-4 py-2 rounded-lg bg-background/80 backdrop-blur-sm border shadow-sm"},Ju={class:"font-semibold"},Zu={class:"container mx-auto px-3 py-4 sm:px-4 sm:py-8 max-w-7xl"},Xu={class:"grid gap-4 sm:gap-6 lg:grid-cols-3"},Yu={class:"lg:col-span-1 space-y-4 sm:space-y-6"},em={class:"lg:col-span-2"},tm={class:"rounded-xl border bg-card overflow-hidden"},sm={class:"border-b bg-muted/30"},am={class:"overflow-x-auto text-center overflow-y-hidden px-1.5 py-1.5 sm:px-2 sm:py-2 [&::-webkit-scrollbar]:hidden [-ms-overflow-style:none] [scrollbar-width:none]"},lm={class:"p-3 sm:p-4 md:p-6"},nm={key:1,class:"text-center py-12"},Mm=Y({__name:"Index",props:{customer:{},orders:{},walletTransactions:{},activeMembers:{},passiveMembers:{},prospectMembers:{},binaryTree:{},totalDownlines:{},totalLeft:{},totalRight:{},bonusSponsors:{},bonusMatchings:{},bonusPairings:{},bonusCashbacks:{},bonusRewards:{},bonusRetails:{},bonusLifetimeCashRewards:{},addresses:{}},setup(a){const i=a,u=ut(),m=F(()=>Number(i.customer.status)===3),_=F(()=>{if(typeof window>"u")return"profile";const c=u.url;try{return new URL(c,window.location.origin).searchParams.get("tab")||"profile"}catch{return"profile"}});return(c,p)=>(r(),j(qt,null,{default:l(()=>[s(e(vs),{title:"Profile Saya"}),t("div",Qu,[t("div",Gu,[t("div",Wu,[p[0]||(p[0]=t("div",null,[t("h1",{class:"text-2xl sm:text-3xl md:text-4xl font-bold text-foreground mb-1 sm:mb-2"},"Profile Saya"),t("p",{class:"text-sm sm:text-base md:text-lg text-muted-foreground"}," Kelola informasi profil dan keamanan akun Anda ")],-1)),t("div",Hu,[s(e(tt),{class:"w-5 h-5 text-primary"}),t("span",Ju,n(a.customer.name),1)])])])]),t("div",Zu,[t("div",Xu,[t("div",Yu,[s(Ns,{customer:a.customer},null,8,["customer"]),m.value?(r(),j(qu,{key:0,customer:a.customer},null,8,["customer"])):h("",!0),s(ka,{addresses:a.addresses},null,8,["addresses"]),m.value?(r(),j(Sa,{key:1,customer:a.customer},null,8,["customer"])):h("",!0),s(Ra,{"created-at":a.customer.created_at},null,8,["created-at"])]),t("div",em,[t("div",tm,[s(e(it),{"default-value":_.value,class:"w-full"},{default:l(()=>[t("div",sm,[t("div",am,[s(e(dt),{class:"inline-flex h-auto w-max bg-transparent gap-1 sm:gap-1.5 p-0"},{default:l(()=>[s(e(ae),{value:"profile",class:"flex-shrink-0 flex flex-col items-center justify-center gap-0.5 py-1 px-1.5 sm:py-1.5 sm:px-2 w-[38px] sm:w-[55px] md:w-[70px] data-[state=active]:bg-background data-[state=active]:shadow-sm rounded-md transition-all"},{default:l(()=>[s(e(tt),{class:"w-3 h-3 sm:w-3.5 sm:h-3.5 md:w-4 md:h-4"}),p[1]||(p[1]=t("span",{class:"text-[8px] sm:text-[9px] md:text-[10px] font-medium text-center leading-tight"},"Info",-1))]),_:1}),s(e(ae),{value:"orders",class:"flex-shrink-0 flex flex-col items-center justify-center gap-0.5 py-1 px-1.5 sm:py-1.5 sm:px-2 w-[38px] sm:w-[55px] md:w-[70px] data-[state=active]:bg-background data-[state=active]:shadow-sm rounded-md transition-all"},{default:l(()=>[s(e(Me),{class:"w-3 h-3 sm:w-3.5 sm:h-3.5 md:w-4 md:h-4"}),p[2]||(p[2]=t("span",{class:"text-[8px] sm:text-[9px] md:text-[10px] font-medium text-center leading-tight"},"Order",-1))]),_:1}),m.value?(r(),j(e(ae),{key:0,value:"network",class:"flex-shrink-0 flex flex-col items-center justify-center gap-0.5 py-1 px-1.5 sm:py-1.5 sm:px-2 w-[38px] sm:w-[55px] md:w-[70px] data-[state=active]:bg-background data-[state=active]:shadow-sm rounded-md transition-all"},{default:l(()=>[s(e(St),{class:"w-3 h-3 sm:w-3.5 sm:h-3.5 md:w-4 md:h-4"}),p[3]||(p[3]=t("span",{class:"text-[8px] sm:text-[9px] md:text-[10px] font-medium text-center leading-tight"},"Mitra",-1))]),_:1})):h("",!0),m.value?(r(),j(e(ae),{key:1,value:"binary",class:"flex-shrink-0 flex flex-col items-center justify-center gap-0.5 py-1 px-1.5 sm:py-1.5 sm:px-2 w-[38px] sm:w-[55px] md:w-[70px] data-[state=active]:bg-background data-[state=active]:shadow-sm rounded-md transition-all"},{default:l(()=>[s(e(je),{class:"w-3 h-3 sm:w-3.5 sm:h-3.5 md:w-4 md:h-4"}),p[4]||(p[4]=t("span",{class:"text-[8px] sm:text-[9px] md:text-[10px] font-medium text-center leading-tight"},"Network",-1))]),_:1})):h("",!0),m.value?(r(),j(e(ae),{key:2,value:"bonus",class:"flex-shrink-0 flex flex-col items-center justify-center gap-0.5 py-1 px-1.5 sm:py-1.5 sm:px-2 w-[38px] sm:w-[55px] md:w-[70px] data-[state=active]:bg-background data-[state=active]:shadow-sm rounded-md transition-all"},{default:l(()=>[s(e(Ct),{class:"w-3 h-3 sm:w-3.5 sm:h-3.5 md:w-4 md:h-4"}),p[5]||(p[5]=t("span",{class:"text-[8px] sm:text-[9px] md:text-[10px] font-medium text-center leading-tight"},"Bonus",-1))]),_:1})):h("",!0),s(e(ae),{value:"wallet",class:"flex-shrink-0 flex flex-col items-center justify-center gap-0.5 py-1 px-1.5 sm:py-1.5 sm:px-2 w-[38px] sm:w-[55px] md:w-[70px] data-[state=active]:bg-background data-[state=active]:shadow-sm rounded-md transition-all"},{default:l(()=>[s(e(Te),{class:"w-3 h-3 sm:w-3.5 sm:h-3.5 md:w-4 md:h-4"}),p[6]||(p[6]=t("span",{class:"text-[8px] sm:text-[9px] md:text-[10px] font-medium text-center leading-tight"},"Wallet",-1))]),_:1}),s(e(ae),{value:"security",class:"flex-shrink-0 flex flex-col items-center justify-center gap-0.5 py-1 px-1.5 sm:py-1.5 sm:px-2 w-[38px] sm:w-[55px] md:w-[70px] data-[state=active]:bg-background data-[state=active]:shadow-sm rounded-md transition-all"},{default:l(()=>[s(e(st),{class:"w-3 h-3 sm:w-3.5 sm:h-3.5 md:w-4 md:h-4"}),p[7]||(p[7]=t("span",{class:"text-[8px] sm:text-[9px] md:text-[10px] font-medium text-center leading-tight"},"Lock",-1))]),_:1}),s(e(ae),{value:"danger",class:"flex-shrink-0 flex flex-col items-center justify-center gap-0.5 py-1 px-1.5 sm:py-1.5 sm:px-2 w-[38px] sm:w-[55px] md:w-[70px] data-[state=active]:bg-background data-[state=active]:shadow-sm rounded-md transition-all"},{default:l(()=>[s(e($e),{class:"w-3 h-3 sm:w-3.5 sm:h-3.5 md:w-4 md:h-4"}),p[8]||(p[8]=t("span",{class:"text-[8px] sm:text-[9px] md:text-[10px] font-medium text-center leading-tight"},"Del",-1))]),_:1})]),_:1})])]),t("div",lm,[s(e(le),{value:"profile",class:"mt-0"},{default:l(()=>[s(sl,{customer:a.customer},null,8,["customer"])]),_:1}),s(e(le),{value:"orders",class:"mt-0"},{default:l(()=>[s(Nn,{orders:a.orders},null,8,["orders"])]),_:1}),m.value?(r(),j(e(le),{key:0,value:"network",class:"mt-0"},{default:l(()=>[s(oi,{"active-members":a.activeMembers,"passive-members":a.passiveMembers,"prospect-members":a.prospectMembers,"has-left":!!a.binaryTree?.left,"has-right":!!a.binaryTree?.right},null,8,["active-members","passive-members","prospect-members","has-left","has-right"])]),_:1})):h("",!0),m.value?(r(),j(e(le),{key:1,value:"binary",class:"mt-0"},{default:l(()=>[a.binaryTree?(r(),j(Gi,{key:0,"binary-tree":a.binaryTree,"total-downlines":a.totalDownlines,"total-left":a.totalLeft,"total-right":a.totalRight,"passive-members":a.passiveMembers},null,8,["binary-tree","total-downlines","total-left","total-right","passive-members"])):(r(),f("div",nm,[s(e(je),{class:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),p[9]||(p[9]=t("h3",{class:"text-lg font-semibold mb-2"},"Belum Ada Jaringan Binary",-1)),p[10]||(p[10]=t("p",{class:"text-muted-foreground"}," Anda belum memiliki posisi dalam jaringan binary tree MLM. ",-1))]))]),_:1})):h("",!0),m.value?(r(),j(e(le),{key:2,value:"bonus",class:"mt-0"},{default:l(()=>[s(Ru,{"bonus-sponsors":a.bonusSponsors,"bonus-matchings":a.bonusMatchings,"bonus-pairings":a.bonusPairings,"bonus-cashbacks":a.bonusCashbacks,"bonus-rewards":a.bonusRewards,"bonus-retails":a.bonusRetails,"bonus-lifetime-cash-rewards":a.bonusLifetimeCashRewards},null,8,["bonus-sponsors","bonus-matchings","bonus-pairings","bonus-cashbacks","bonus-rewards","bonus-retails","bonus-lifetime-cash-rewards"])]),_:1})):h("",!0),s(e(le),{value:"wallet",class:"mt-0"},{default:l(()=>[s(Wr,{customer:a.customer,transactions:a.walletTransactions},null,8,["customer","transactions"])]),_:1}),s(e(le),{value:"security",class:"mt-0"},{default:l(()=>[s(lo)]),_:1}),s(e(le),{value:"danger",class:"mt-0"},{default:l(()=>[s(io)]),_:1})])]),_:1},8,["default-value"])])])])])]),_:1}))}});export{Mm as default};
