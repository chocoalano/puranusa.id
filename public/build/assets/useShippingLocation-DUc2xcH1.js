import{d as re,ac as Z,ad as ne,p as A,r as q,v as d,g as i,ae as h,b as t,e as o,u as s,w as l,s as n,t as c,J as _,K as v,F as N,ab as oe,am as H,x as J,c as O,L as Q,W as ue,D as ie}from"./vendor-DfMbnFaR.js";import{_ as de,c as G}from"./index-BhPH699V.js";import{_ as D,a as W}from"./CardContent.vue_vue_type_script_setup_true_lang-NxxB_dAy.js";import{_ as z}from"./CardDescription.vue_vue_type_script_setup_true_lang-DW_PX5BW.js";import{_ as E}from"./CardHeader.vue_vue_type_script_setup_true_lang-Kdg7L6IL.js";import{_ as K}from"./CardTitle.vue_vue_type_script_setup_true_lang-Cj4ck2dV.js";import{_ as pe,a as me,b as ve,c as fe,d as ke,e as _e,f as ce,g as we,h as Y}from"./PopoverTrigger.vue_vue_type_script_setup_true_lang-Cqsoy_WK.js";import{_ as y}from"./Input.vue_vue_type_script_setup_true_lang-Bi8Aupzl.js";import{_ as w}from"./Label.vue_vue_type_script_setup_true_lang-C_XGMl1H.js";import{_ as C,a as U,b as S,c as $,d as x}from"./SelectValue.vue_vue_type_script_setup_true_lang-VBwlv4qP.js";import{_ as I}from"./Textarea.vue_vue_type_script_setup_true_lang-DZT34h2b.js";const ge={class:"grid gap-4 md:grid-cols-2"},xe={class:"space-y-2"},ye={key:0,class:"text-sm text-destructive"},be={class:"space-y-2"},Ve={key:0,class:"text-sm text-destructive"},Pe={class:"space-y-2"},je={key:0,class:"text-sm text-destructive"},Ne={class:"space-y-2"},Ce={key:0,class:"text-sm text-destructive"},Ue={class:"space-y-2"},Se={key:0,class:"text-sm text-destructive"},$e={class:"space-y-2"},Me={key:0,class:"text-sm text-destructive"},Le={class:"grid gap-4 md:grid-cols-2"},Ae={class:"space-y-2"},De={key:0,class:"text-sm text-destructive"},We={class:"space-y-2"},ze={class:"truncate text-left"},Ee={class:"flex flex-col"},Ke={class:"font-medium"},Re={class:"text-xs text-muted-foreground"},Be={key:0,class:"text-sm text-destructive"},qe={class:"space-y-2"},Fe={key:0,class:"text-sm text-destructive"},Ie={class:"space-y-2"},Te={key:0,class:"text-sm text-destructive"},he={class:"space-y-2"},Je={key:0,class:"text-sm text-destructive"},Oe={class:"grid gap-4 md:grid-cols-2"},Ge={class:"space-y-2"},Xe={key:0},Ze={key:1,class:"inline-flex items-center gap-2"},He={key:2},Qe={key:0,class:"text-sm text-destructive"},Ye={class:"space-y-2"},ea={key:0},aa={key:1,class:"inline-flex items-center gap-2"},sa={key:2},ta={key:3},la={key:0,class:"text-sm text-destructive"},ra={class:"space-y-2"},na={key:0,class:"text-sm text-destructive"},oa={class:"grid gap-4 md:grid-cols-2"},ua={class:"space-y-2"},ia={key:0,class:"text-sm text-destructive"},da={class:"space-y-2"},pa={key:0,class:"text-sm text-destructive"},ma={class:"space-y-2"},va={key:0,class:"text-sm text-destructive"},fa={class:"space-y-2"},ka={key:0,class:"text-sm text-destructive"},_a={class:"space-y-2"},ca={key:0,class:"text-sm text-destructive"},wa={class:"grid gap-4 md:grid-cols-2"},ga={class:"space-y-2"},xa={key:0,class:"text-sm text-destructive"},ya={class:"space-y-2"},ba={key:0,class:"text-sm text-destructive"},Va={class:"space-y-2"},Pa={key:0,class:"text-sm text-destructive"},ja={class:"space-y-2"},Na={key:0,class:"text-sm text-destructive"},Ca={class:"grid gap-4 md:grid-cols-2"},Ua={class:"space-y-2"},Sa={key:0,class:"text-sm text-destructive"},$a={class:"space-y-2"},Ma={key:0,class:"text-sm text-destructive"},La={class:"space-y-2"},Aa={key:0,class:"text-sm text-destructive"},Da={class:"grid gap-4 md:grid-cols-2"},Wa={class:"space-y-2"},za={key:0,class:"text-sm text-destructive"},Ea={class:"space-y-2"},Ka={class:"flex justify-end gap-4"},Ya=re({__name:"CustomerForm",props:Z({mode:{},provinces:{},cities:{},sponsors:{},loadingProvinces:{type:Boolean},loadingCities:{type:Boolean}},{form:{required:!0},formModifiers:{}}),emits:Z(["submit"],["update:form"]),setup(m,{emit:u}){const f=m,a=ne(m,"form"),b=u,R=A(()=>f.mode==="create"),F=A(()=>f.provinces.find(g=>g.id===a.value.province_id)?.name),k=A(()=>f.cities.find(g=>g.id===a.value.city_id)?.name),V=q(!1),P=A(()=>a.value.status==="1"?"Prospek":a.value.status==="2"?"Pasif":a.value.status==="3"?"Aktif":"-"),j=A(()=>a.value.sponsor_id===null?null:f.sponsors.find(g=>g.id===a.value.sponsor_id)??null),L=A(()=>j.value?`${j.value.username?`@${j.value.username}`:`ID ${j.value.id}`} - ${j.value.name}`:"Pilih sponsor berdasarkan username"),T=g=>[g.id.toString(),g.username??"",g.name,g.email??"",g.phone??"",g.ewallet_id??""].join(" ").trim(),B=g=>[g.email,g.phone,g.ewallet_id].filter(r=>!!r).join(" • "),X=g=>{a.value.sponsor_id=g,V.value=!1};return(g,e)=>(i(),d("form",{onSubmit:e[29]||(e[29]=h(r=>b("submit"),["prevent"])),class:"space-y-6"},[t(s(D),null,{default:l(()=>[t(s(E),null,{default:l(()=>[t(s(K),null,{default:l(()=>[...e[30]||(e[30]=[n("Data Utama Pelanggan",-1)])]),_:1}),t(s(z),null,{default:l(()=>[...e[31]||(e[31]=[n(" Lengkapi data identitas secara akurat. Field bertanda ",-1),o("span",{class:"font-medium"},"*",-1),n(" wajib diisi. ",-1)])]),_:1})]),_:1}),t(s(W),{class:"space-y-4"},{default:l(()=>[o("div",ge,[o("div",xe,[t(s(w),{for:"name"},{default:l(()=>[...e[32]||(e[32]=[n("Nama Lengkap *",-1)])]),_:1}),t(s(y),{id:"name",modelValue:a.value.name,"onUpdate:modelValue":e[0]||(e[0]=r=>a.value.name=r),placeholder:"Masukkan nama lengkap",class:_({"border-destructive":a.value.errors.name}),required:""},null,8,["modelValue","class"]),e[33]||(e[33]=o("p",{class:"text-xs text-muted-foreground"}," Gunakan nama sesuai identitas resmi pelanggan. ",-1)),a.value.errors.name?(i(),d("p",ye,v(a.value.errors.name),1)):c("",!0)]),o("div",be,[t(s(w),{for:"username"},{default:l(()=>[...e[34]||(e[34]=[n("Username *",-1)])]),_:1}),t(s(y),{id:"username",modelValue:a.value.username,"onUpdate:modelValue":e[1]||(e[1]=r=>a.value.username=r),placeholder:"contoh: budi_santoso",class:_({"border-destructive":a.value.errors.username}),required:""},null,8,["modelValue","class"]),e[35]||(e[35]=o("p",{class:"text-xs text-muted-foreground"}," Username dipakai untuk login dan harus unik. ",-1)),a.value.errors.username?(i(),d("p",Ve,v(a.value.errors.username),1)):c("",!0)]),o("div",Pe,[t(s(w),{for:"nik"},{default:l(()=>[...e[36]||(e[36]=[n("NIK *",-1)])]),_:1}),t(s(y),{id:"nik",modelValue:a.value.nik,"onUpdate:modelValue":e[2]||(e[2]=r=>a.value.nik=r),inputmode:"numeric",maxlength:"32",placeholder:"Contoh: 3174xxxxxxxxxxxx",class:_({"border-destructive":a.value.errors.nik}),required:""},null,8,["modelValue","class"]),e[37]||(e[37]=o("p",{class:"text-xs text-muted-foreground"}," NIK berisi angka 8 sampai 32 digit. ",-1)),a.value.errors.nik?(i(),d("p",je,v(a.value.errors.nik),1)):c("",!0)]),o("div",Ne,[t(s(w),{for:"gender"},{default:l(()=>[...e[38]||(e[38]=[n("Jenis Kelamin",-1)])]),_:1}),t(s(C),{modelValue:a.value.gender,"onUpdate:modelValue":e[3]||(e[3]=r=>a.value.gender=r)},{default:l(()=>[t(s(U),{id:"gender",class:_({"border-destructive":a.value.errors.gender})},{default:l(()=>[t(s(S),{placeholder:"Pilih jenis kelamin"})]),_:1},8,["class"]),t(s($),null,{default:l(()=>[t(s(x),{value:"laki-laki"},{default:l(()=>[...e[39]||(e[39]=[n("Laki-laki",-1)])]),_:1}),t(s(x),{value:"perempuan"},{default:l(()=>[...e[40]||(e[40]=[n("Perempuan",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e[41]||(e[41]=o("p",{class:"text-xs text-muted-foreground"}," Pilih jenis kelamin sesuai data legal. ",-1)),a.value.errors.gender?(i(),d("p",Ce,v(a.value.errors.gender),1)):c("",!0)]),o("div",Ue,[t(s(w),{for:"email"},{default:l(()=>[...e[42]||(e[42]=[n("Email *",-1)])]),_:1}),t(s(y),{id:"email",modelValue:a.value.email,"onUpdate:modelValue":e[4]||(e[4]=r=>a.value.email=r),type:"email",placeholder:"nama@email.com",class:_({"border-destructive":a.value.errors.email}),required:""},null,8,["modelValue","class"]),e[43]||(e[43]=o("p",{class:"text-xs text-muted-foreground"}," Email aktif untuk notifikasi akun pelanggan. ",-1)),a.value.errors.email?(i(),d("p",Se,v(a.value.errors.email),1)):c("",!0)]),o("div",$e,[t(s(w),{for:"phone"},{default:l(()=>[...e[44]||(e[44]=[n("No. Telepon *",-1)])]),_:1}),t(s(y),{id:"phone",modelValue:a.value.phone,"onUpdate:modelValue":e[5]||(e[5]=r=>a.value.phone=r),inputmode:"tel",placeholder:"08xxxxxxxxxx",class:_({"border-destructive":a.value.errors.phone}),required:""},null,8,["modelValue","class"]),e[45]||(e[45]=o("p",{class:"text-xs text-muted-foreground"}," Nomor aktif untuk komunikasi dan verifikasi. ",-1)),a.value.errors.phone?(i(),d("p",Me,v(a.value.errors.phone),1)):c("",!0)])])]),_:1})]),_:1}),t(s(D),null,{default:l(()=>[t(s(E),null,{default:l(()=>[t(s(K),null,{default:l(()=>[...e[46]||(e[46]=[n("Data Keanggotaan",-1)])]),_:1}),t(s(z),null,{default:l(()=>[...e[47]||(e[47]=[n(" Informasi ini mengacu pada atribut keanggotaan di model customer. ",-1)])]),_:1})]),_:1}),t(s(W),{class:"space-y-4"},{default:l(()=>[o("div",Le,[o("div",Ae,[t(s(w),{for:"status"},{default:l(()=>[...e[48]||(e[48]=[n("Status",-1)])]),_:1}),R.value?(i(),d(N,{key:0},[t(s(C),{modelValue:a.value.status,"onUpdate:modelValue":e[6]||(e[6]=r=>a.value.status=r)},{default:l(()=>[t(s(U),{id:"status",class:_({"border-destructive":a.value.errors.status})},{default:l(()=>[t(s(S),{placeholder:"Pilih status customer"})]),_:1},8,["class"]),t(s($),null,{default:l(()=>[t(s(x),{value:"1"},{default:l(()=>[...e[49]||(e[49]=[n("Prospek",-1)])]),_:1}),t(s(x),{value:"2"},{default:l(()=>[...e[50]||(e[50]=[n("Pasif",-1)])]),_:1}),t(s(x),{value:"3"},{default:l(()=>[...e[51]||(e[51]=[n("Aktif",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a.value.errors.status?(i(),d("p",De,v(a.value.errors.status),1)):c("",!0)],64)):(i(),d(N,{key:1},[t(s(y),{id:"status",value:P.value,disabled:""},null,8,["value"]),e[52]||(e[52]=o("p",{class:"text-xs text-muted-foreground"}," Status hanya dapat diubah lewat proses bisnis aktivasi customer. ",-1))],64))]),o("div",We,[t(s(w),{for:"sponsor_id"},{default:l(()=>[...e[53]||(e[53]=[n("Sponsor",-1)])]),_:1}),t(s(pe),{open:V.value,"onUpdate:open":e[8]||(e[8]=r=>V.value=r)},{default:l(()=>[t(s(me),{"as-child":""},{default:l(()=>[t(s(de),{id:"sponsor_id",variant:"outline",role:"combobox","aria-label":"Pilih sponsor",class:_(s(G)("w-full justify-between font-normal",a.value.errors.sponsor_id&&"border-destructive"))},{default:l(()=>[o("span",ze,v(L.value),1),t(s(oe),{class:"ml-2 h-4 w-4 shrink-0 opacity-50"})]),_:1},8,["class"])]),_:1}),t(s(ve),{align:"start",class:"w-[--reka-popover-trigger-width] p-0"},{default:l(()=>[t(s(fe),null,{default:l(()=>[t(s(ke),{placeholder:"Cari username sponsor..."}),t(s(_e),null,{default:l(()=>[t(s(ce),null,{default:l(()=>[...e[54]||(e[54]=[n("Sponsor tidak ditemukan.",-1)])]),_:1}),t(s(we),{heading:"Daftar Sponsor"},{default:l(()=>[t(s(Y),{value:"tanpa sponsor",onSelect:e[7]||(e[7]=h(r=>X(null),["prevent"]))},{default:l(()=>[t(s(H),{class:_(s(G)("mr-2 h-4 w-4",a.value.sponsor_id===null?"opacity-100":"opacity-0"))},null,8,["class"]),e[55]||(e[55]=n(" Tanpa sponsor ",-1))]),_:1}),(i(!0),d(N,null,J(f.sponsors,r=>(i(),O(s(Y),{key:r.id,value:T(r),onSelect:h(qa=>X(r.id),["prevent"])},{default:l(()=>[t(s(H),{class:_(s(G)("mr-2 h-4 w-4",a.value.sponsor_id===r.id?"opacity-100":"opacity-0"))},null,8,["class"]),o("div",Ee,[o("span",Ke,v(r.username?`@${r.username}`:`ID ${r.id}`),1),o("span",Re,[n(v(r.name)+" ",1),B(r)?(i(),d(N,{key:0},[n(" • "+v(B(r)),1)],64)):c("",!0)])])]),_:2},1032,["value","onSelect"]))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),e[56]||(e[56]=o("p",{class:"text-xs text-muted-foreground"}," Pilih sponsor dari data customer dan cari dengan username. ",-1)),a.value.errors.sponsor_id?(i(),d("p",Be,v(a.value.errors.sponsor_id),1)):c("",!0)]),o("div",qe,[t(s(w),{for:"package_id"},{default:l(()=>[...e[57]||(e[57]=[n("Paket Membership",-1)])]),_:1}),t(s(C),{modelValue:a.value.package_id,"onUpdate:modelValue":e[9]||(e[9]=r=>a.value.package_id=r)},{default:l(()=>[t(s(U),{id:"package_id",class:_({"border-destructive":a.value.errors.package_id})},{default:l(()=>[t(s(S),{placeholder:"Pilih paket membership"})]),_:1},8,["class"]),t(s($),null,{default:l(()=>[t(s(x),{value:"1"},{default:l(()=>[...e[58]||(e[58]=[n("ZENNER Plus",-1)])]),_:1}),t(s(x),{value:"2"},{default:l(()=>[...e[59]||(e[59]=[n("ZENNER Prime",-1)])]),_:1}),t(s(x),{value:"3"},{default:l(()=>[...e[60]||(e[60]=[n("ZENNER Ultra",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e[61]||(e[61]=o("p",{class:"text-xs text-muted-foreground"}," Anda dapat memilih paket sesuai kebutuhan customer. ",-1)),a.value.errors.package_id?(i(),d("p",Fe,v(a.value.errors.package_id),1)):c("",!0)]),o("div",Ie,[t(s(w),{for:"level"},{default:l(()=>[...e[62]||(e[62]=[n("Level Customer",-1)])]),_:1}),t(s(C),{modelValue:a.value.level,"onUpdate:modelValue":e[10]||(e[10]=r=>a.value.level=r)},{default:l(()=>[t(s(U),{id:"level",class:_({"border-destructive":a.value.errors.level})},{default:l(()=>[t(s(S),{placeholder:"Pilih level customer"})]),_:1},8,["class"]),t(s($),null,{default:l(()=>[t(s(x),{value:"Associate"},{default:l(()=>[...e[63]||(e[63]=[n("Associate",-1)])]),_:1}),t(s(x),{value:"Senior Associate"},{default:l(()=>[...e[64]||(e[64]=[n("Senior Associate",-1)])]),_:1}),t(s(x),{value:"Executive"},{default:l(()=>[...e[65]||(e[65]=[n("Executive",-1)])]),_:1}),t(s(x),{value:"Director"},{default:l(()=>[...e[66]||(e[66]=[n("Director",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e[67]||(e[67]=o("p",{class:"text-xs text-muted-foreground"}," Level customer dipakai untuk struktur jaringan. ",-1)),a.value.errors.level?(i(),d("p",Te,v(a.value.errors.level),1)):c("",!0)])])]),_:1})]),_:1}),t(s(D),null,{default:l(()=>[t(s(E),null,{default:l(()=>[t(s(K),null,{default:l(()=>[...e[68]||(e[68]=[n("Alamat Pelanggan",-1)])]),_:1}),t(s(z),null,{default:l(()=>[...e[69]||(e[69]=[n(" Masukkan alamat utama pengiriman dan domisili untuk kebutuhan operasional. ",-1)])]),_:1})]),_:1}),t(s(W),{class:"space-y-4"},{default:l(()=>[o("div",he,[t(s(w),{for:"address"},{default:l(()=>[...e[70]||(e[70]=[n("Address",-1)])]),_:1}),t(s(I),{id:"address",modelValue:a.value.address,"onUpdate:modelValue":e[11]||(e[11]=r=>a.value.address=r),placeholder:"Alamat utama pengiriman",rows:"3",class:_({"border-destructive":a.value.errors.address})},null,8,["modelValue","class"]),e[71]||(e[71]=o("p",{class:"text-xs text-muted-foreground"}," Contoh: nama jalan, nomor rumah, RT/RW, kelurahan, kecamatan. ",-1)),a.value.errors.address?(i(),d("p",Je,v(a.value.errors.address),1)):c("",!0)]),o("div",Oe,[o("div",Ge,[t(s(w),{for:"province_id"},{default:l(()=>[...e[72]||(e[72]=[n("Provinsi",-1)])]),_:1}),t(s(C),{modelValue:a.value.province_id,"onUpdate:modelValue":e[12]||(e[12]=r=>a.value.province_id=r),disabled:f.loadingProvinces},{default:l(()=>[t(s(U),{id:"province_id",class:_({"border-destructive":a.value.errors.province_id})},{default:l(()=>[t(s(S),null,{default:l(()=>[F.value?(i(),d("span",Xe,v(F.value),1)):f.loadingProvinces?(i(),d("span",Ze,[t(s(Q),{class:"h-4 w-4 animate-spin"}),e[73]||(e[73]=n(" Memuat provinsi... ",-1))])):(i(),d("span",He,"Pilih provinsi"))]),_:1})]),_:1},8,["class"]),t(s($),null,{default:l(()=>[(i(!0),d(N,null,J(f.provinces,r=>(i(),O(s(x),{key:r.id,value:r.id},{default:l(()=>[n(v(r.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue","disabled"]),e[74]||(e[74]=o("p",{class:"text-xs text-muted-foreground"}," Pilih provinsi untuk memuat daftar kota/kabupaten. ",-1)),a.value.errors.province_id?(i(),d("p",Qe,v(a.value.errors.province_id),1)):c("",!0)]),o("div",Ye,[t(s(w),{for:"city_id"},{default:l(()=>[...e[75]||(e[75]=[n("Kota/Kabupaten",-1)])]),_:1}),t(s(C),{modelValue:a.value.city_id,"onUpdate:modelValue":e[13]||(e[13]=r=>a.value.city_id=r),disabled:f.loadingCities||!a.value.province_id},{default:l(()=>[t(s(U),{id:"city_id",class:_({"border-destructive":a.value.errors.city_id})},{default:l(()=>[t(s(S),null,{default:l(()=>[k.value?(i(),d("span",ea,v(k.value),1)):f.loadingCities?(i(),d("span",aa,[t(s(Q),{class:"h-4 w-4 animate-spin"}),e[76]||(e[76]=n(" Memuat kota... ",-1))])):a.value.province_id?(i(),d("span",sa,"Pilih kota/kabupaten")):(i(),d("span",ta,"Pilih provinsi dulu"))]),_:1})]),_:1},8,["class"]),t(s($),null,{default:l(()=>[(i(!0),d(N,null,J(f.cities,r=>(i(),O(s(x),{key:r.id,value:r.id},{default:l(()=>[n(v(r.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue","disabled"]),e[77]||(e[77]=o("p",{class:"text-xs text-muted-foreground"}," Daftar kota akan menyesuaikan provinsi yang dipilih. ",-1)),a.value.errors.city_id?(i(),d("p",la,v(a.value.errors.city_id),1)):c("",!0)])]),o("div",ra,[t(s(w),{for:"alamat"},{default:l(()=>[...e[78]||(e[78]=[n("Alamat Domisili (alamat)",-1)])]),_:1}),t(s(I),{id:"alamat",modelValue:a.value.alamat,"onUpdate:modelValue":e[14]||(e[14]=r=>a.value.alamat=r),placeholder:"Alamat domisili/administratif pelanggan",rows:"3",class:_({"border-destructive":a.value.errors.alamat})},null,8,["modelValue","class"]),e[79]||(e[79]=o("p",{class:"text-xs text-muted-foreground"}," Pisahkan data domisili untuk kebutuhan dokumen internal. ",-1)),a.value.errors.alamat?(i(),d("p",na,v(a.value.errors.alamat),1)):c("",!0)])]),_:1})]),_:1}),t(s(D),null,{default:l(()=>[t(s(E),null,{default:l(()=>[t(s(K),null,{default:l(()=>[...e[80]||(e[80]=[n("Informasi NPWP",-1)])]),_:1}),t(s(z),null,{default:l(()=>[...e[81]||(e[81]=[n(" Data ini akan disimpan ke tabel NPWP customer untuk kebutuhan perpajakan. ",-1)])]),_:1})]),_:1}),t(s(W),{class:"space-y-4"},{default:l(()=>[o("div",oa,[o("div",ua,[t(s(w),{for:"npwp_nama"},{default:l(()=>[...e[82]||(e[82]=[n("Nama NPWP",-1)])]),_:1}),t(s(y),{id:"npwp_nama",modelValue:a.value.npwp.nama,"onUpdate:modelValue":e[15]||(e[15]=r=>a.value.npwp.nama=r),placeholder:"Nama sesuai kartu NPWP",class:_({"border-destructive":a.value.errors["npwp.nama"]})},null,8,["modelValue","class"]),a.value.errors["npwp.nama"]?(i(),d("p",ia,v(a.value.errors["npwp.nama"]),1)):c("",!0)]),o("div",da,[t(s(w),{for:"npwp_number"},{default:l(()=>[...e[83]||(e[83]=[n("Nomor NPWP",-1)])]),_:1}),t(s(y),{id:"npwp_number",modelValue:a.value.npwp.npwp,"onUpdate:modelValue":e[16]||(e[16]=r=>a.value.npwp.npwp=r),inputmode:"numeric",maxlength:"20",placeholder:"15 atau 16 digit NPWP",class:_({"border-destructive":a.value.errors["npwp.npwp"]})},null,8,["modelValue","class"]),a.value.errors["npwp.npwp"]?(i(),d("p",pa,v(a.value.errors["npwp.npwp"]),1)):c("",!0)]),o("div",ma,[t(s(w),{for:"npwp_jk"},{default:l(()=>[...e[84]||(e[84]=[n("Jenis Kelamin NPWP",-1)])]),_:1}),t(s(C),{modelValue:a.value.npwp.jk,"onUpdate:modelValue":e[17]||(e[17]=r=>a.value.npwp.jk=r)},{default:l(()=>[t(s(U),{id:"npwp_jk",class:_({"border-destructive":a.value.errors["npwp.jk"]})},{default:l(()=>[t(s(S),{placeholder:"Pilih jenis kelamin"})]),_:1},8,["class"]),t(s($),null,{default:l(()=>[t(s(x),{value:"laki-laki"},{default:l(()=>[...e[85]||(e[85]=[n("Laki-laki",-1)])]),_:1}),t(s(x),{value:"perempuan"},{default:l(()=>[...e[86]||(e[86]=[n("Perempuan",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a.value.errors["npwp.jk"]?(i(),d("p",va,v(a.value.errors["npwp.jk"]),1)):c("",!0)]),o("div",fa,[t(s(w),{for:"npwp_date"},{default:l(()=>[...e[87]||(e[87]=[n("Tanggal NPWP",-1)])]),_:1}),t(s(y),{id:"npwp_date",modelValue:a.value.npwp.npwp_date,"onUpdate:modelValue":e[18]||(e[18]=r=>a.value.npwp.npwp_date=r),type:"date",class:_({"border-destructive":a.value.errors["npwp.npwp_date"]})},null,8,["modelValue","class"]),a.value.errors["npwp.npwp_date"]?(i(),d("p",ka,v(a.value.errors["npwp.npwp_date"]),1)):c("",!0)])]),o("div",_a,[t(s(w),{for:"npwp_alamat"},{default:l(()=>[...e[88]||(e[88]=[n("Alamat NPWP",-1)])]),_:1}),t(s(I),{id:"npwp_alamat",modelValue:a.value.npwp.alamat,"onUpdate:modelValue":e[19]||(e[19]=r=>a.value.npwp.alamat=r),rows:"3",placeholder:"Alamat terdaftar di data NPWP",class:_({"border-destructive":a.value.errors["npwp.alamat"]})},null,8,["modelValue","class"]),a.value.errors["npwp.alamat"]?(i(),d("p",ca,v(a.value.errors["npwp.alamat"]),1)):c("",!0)]),o("div",wa,[o("div",ga,[t(s(w),{for:"npwp_menikah"},{default:l(()=>[...e[89]||(e[89]=[n("Status Menikah",-1)])]),_:1}),t(s(C),{modelValue:a.value.npwp.menikah,"onUpdate:modelValue":e[20]||(e[20]=r=>a.value.npwp.menikah=r)},{default:l(()=>[t(s(U),{id:"npwp_menikah",class:_({"border-destructive":a.value.errors["npwp.menikah"]})},{default:l(()=>[t(s(S),{placeholder:"Pilih status menikah"})]),_:1},8,["class"]),t(s($),null,{default:l(()=>[t(s(x),{value:"1"},{default:l(()=>[...e[90]||(e[90]=[n("Menikah",-1)])]),_:1}),t(s(x),{value:"0"},{default:l(()=>[...e[91]||(e[91]=[n("Belum Menikah",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a.value.errors["npwp.menikah"]?(i(),d("p",xa,v(a.value.errors["npwp.menikah"]),1)):c("",!0)]),o("div",ya,[t(s(w),{for:"npwp_anak"},{default:l(()=>[...e[92]||(e[92]=[n("Jumlah Anak",-1)])]),_:1}),t(s(y),{id:"npwp_anak",modelValue:a.value.npwp.anak,"onUpdate:modelValue":e[21]||(e[21]=r=>a.value.npwp.anak=r),modelModifiers:{number:!0},type:"number",min:"0",max:"3",placeholder:"0-3",class:_({"border-destructive":a.value.errors["npwp.anak"]})},null,8,["modelValue","class"]),e[93]||(e[93]=o("p",{class:"text-xs text-muted-foreground"}," Mengikuti batas data perpajakan: maksimal 3 anak. ",-1)),a.value.errors["npwp.anak"]?(i(),d("p",ba,v(a.value.errors["npwp.anak"]),1)):c("",!0)]),o("div",Va,[t(s(w),{for:"npwp_kerja"},{default:l(()=>[...e[94]||(e[94]=[n("Pekerjaan",-1)])]),_:1}),t(s(y),{id:"npwp_kerja",modelValue:a.value.npwp.kerja,"onUpdate:modelValue":e[22]||(e[22]=r=>a.value.npwp.kerja=r),placeholder:"Contoh: Karyawan",class:_({"border-destructive":a.value.errors["npwp.kerja"]})},null,8,["modelValue","class"]),a.value.errors["npwp.kerja"]?(i(),d("p",Pa,v(a.value.errors["npwp.kerja"]),1)):c("",!0)]),o("div",ja,[t(s(w),{for:"npwp_office"},{default:l(()=>[...e[95]||(e[95]=[n("Nama Perusahaan",-1)])]),_:1}),t(s(y),{id:"npwp_office",modelValue:a.value.npwp.office,"onUpdate:modelValue":e[23]||(e[23]=r=>a.value.npwp.office=r),placeholder:"Contoh: PT Contoh Sejahtera",class:_({"border-destructive":a.value.errors["npwp.office"]})},null,8,["modelValue","class"]),a.value.errors["npwp.office"]?(i(),d("p",Na,v(a.value.errors["npwp.office"]),1)):c("",!0)])])]),_:1})]),_:1}),t(s(D),null,{default:l(()=>[t(s(E),null,{default:l(()=>[t(s(K),null,{default:l(()=>[...e[96]||(e[96]=[n("Rekening dan Catatan",-1)])]),_:1}),t(s(z),null,{default:l(()=>[...e[97]||(e[97]=[n(" Informasi rekening dipakai untuk proses finansial pelanggan. ",-1)])]),_:1})]),_:1}),t(s(W),{class:"space-y-4"},{default:l(()=>[o("div",Ca,[o("div",Ua,[t(s(w),{for:"bank_name"},{default:l(()=>[...e[98]||(e[98]=[n("Nama Bank",-1)])]),_:1}),t(s(y),{id:"bank_name",modelValue:a.value.bank_name,"onUpdate:modelValue":e[24]||(e[24]=r=>a.value.bank_name=r),placeholder:"Contoh: BCA, BNI, Mandiri",class:_({"border-destructive":a.value.errors.bank_name})},null,8,["modelValue","class"]),a.value.errors.bank_name?(i(),d("p",Sa,v(a.value.errors.bank_name),1)):c("",!0)]),o("div",$a,[t(s(w),{for:"bank_account"},{default:l(()=>[...e[99]||(e[99]=[n("Nomor Rekening",-1)])]),_:1}),t(s(y),{id:"bank_account",modelValue:a.value.bank_account,"onUpdate:modelValue":e[25]||(e[25]=r=>a.value.bank_account=r),placeholder:"Masukkan nomor rekening",class:_({"border-destructive":a.value.errors.bank_account})},null,8,["modelValue","class"]),a.value.errors.bank_account?(i(),d("p",Ma,v(a.value.errors.bank_account),1)):c("",!0)])]),o("div",La,[t(s(w),{for:"description"},{default:l(()=>[...e[100]||(e[100]=[n("Deskripsi",-1)])]),_:1}),t(s(I),{id:"description",modelValue:a.value.description,"onUpdate:modelValue":e[26]||(e[26]=r=>a.value.description=r),placeholder:"Catatan tambahan yang informatif tentang pelanggan",rows:"4",class:_({"border-destructive":a.value.errors.description})},null,8,["modelValue","class"]),e[101]||(e[101]=o("p",{class:"text-xs text-muted-foreground"}," Contoh: sumber lead, kebutuhan khusus, atau informasi follow-up. ",-1)),a.value.errors.description?(i(),d("p",Aa,v(a.value.errors.description),1)):c("",!0)])]),_:1})]),_:1}),t(s(D),null,{default:l(()=>[t(s(E),null,{default:l(()=>[t(s(K),null,{default:l(()=>[n(v(R.value?"Password Akun":"Ubah Password (Opsional)"),1)]),_:1}),t(s(z),null,{default:l(()=>[R.value?(i(),d(N,{key:0},[n(" Password opsional. Jika dikosongkan, sistem akan membuat password otomatis. ")],64)):(i(),d(N,{key:1},[n(" Kosongkan bila tidak ingin mengubah password. ")],64))]),_:1})]),_:1}),t(s(W),null,{default:l(()=>[o("div",Da,[o("div",Wa,[t(s(w),{for:"password"},{default:l(()=>[...e[102]||(e[102]=[n("Password (Opsional)",-1)])]),_:1}),t(s(y),{id:"password",modelValue:a.value.password,"onUpdate:modelValue":e[27]||(e[27]=r=>a.value.password=r),type:"password",placeholder:"Minimal 8 karakter",class:_({"border-destructive":a.value.errors.password})},null,8,["modelValue","class"]),a.value.errors.password?(i(),d("p",za,v(a.value.errors.password),1)):c("",!0)]),o("div",Ea,[t(s(w),{for:"password_confirmation"},{default:l(()=>[...e[103]||(e[103]=[n(" Konfirmasi Password (Opsional) ",-1)])]),_:1}),t(s(y),{id:"password_confirmation",modelValue:a.value.password_confirmation,"onUpdate:modelValue":e[28]||(e[28]=r=>a.value.password_confirmation=r),type:"password",placeholder:"Ulangi password"},null,8,["modelValue"])])])]),_:1})]),_:1}),o("div",Ka,[ue(g.$slots,"actions",{processing:a.value.processing})])],32))}}),p=m=>typeof m!="string"?"":m.trim(),le=m=>typeof m=="number"&&Number.isFinite(m)?String(m):p(m),M=m=>{if(typeof m=="number"&&Number.isFinite(m))return m;if(typeof m=="string"&&m.trim()!==""){const u=Number.parseInt(m,10);return Number.isNaN(u)?null:u}return null},Ra=m=>{const u=le(m);return u==="1"||u==="2"||u==="3"?u:"1"},ee=m=>{if(!m)return"";const u=m.toLowerCase().trim();return["l","male","laki-laki"].includes(u)?"laki-laki":["p","female","perempuan"].includes(u)?"perempuan":""},ae=m=>{const u=String(m??"").toLowerCase().trim();return["1","y","yes","true","menikah"].includes(u)?"1":"0"},se=m=>{const u=M(m);return u===null||u<0?0:u>3?3:u},Ba=()=>({name:"",username:"",nik:"",gender:"",email:"",phone:"",description:"",address:"",alamat:"",province_id:null,city_id:null,bank_name:"",bank_account:"",npwp:{nama:"",npwp:"",jk:"",npwp_date:"",alamat:"",menikah:"0",anak:0,kerja:"Karyawan",office:""},password:"",password_confirmation:"",sponsor_id:null,status:"1",package_id:"",level:""});function es(m,u={}){const f=Ba(),a=f.npwp,b=u.npwp??{};return{form:ie({name:p(u.name)||f.name,username:p(u.username)||f.username,nik:p(u.nik)||f.nik,gender:ee(u.gender),email:p(u.email)||f.email,phone:p(u.phone)||f.phone,description:p(u.description)||f.description,address:p(u.address)||f.address,alamat:p(u.alamat)||f.alamat,province_id:M(u.province_id),city_id:M(u.city_id),bank_name:p(u.bank_name)||f.bank_name,bank_account:p(u.bank_account)||f.bank_account,npwp:{nama:p(b.nama)||a.nama,npwp:p(b.npwp)||a.npwp,jk:ee(b.jk),npwp_date:p(b.npwp_date)||a.npwp_date,alamat:p(b.alamat)||a.alamat,menikah:ae(b.menikah),anak:se(b.anak),kerja:p(b.kerja)||a.kerja,office:p(b.office)||a.office},password:p(u.password)||f.password,password_confirmation:p(u.password_confirmation)||f.password_confirmation,sponsor_id:M(u.sponsor_id),status:Ra(u.status),package_id:le(u.package_id)||f.package_id,level:p(u.level)}),toPayload:k=>{const V=p(k.password),P=p(k.password_confirmation),j=se(k.npwp.anak),L={name:p(k.name),username:p(k.username),nik:p(k.nik).replace(/\D+/g,""),gender:k.gender,email:p(k.email),phone:p(k.phone),description:p(k.description),address:p(k.address),alamat:p(k.alamat),province_id:M(k.province_id),city_id:M(k.city_id),bank_name:p(k.bank_name),bank_account:p(k.bank_account),npwp:{nama:p(k.npwp.nama),npwp:p(k.npwp.npwp).replace(/\D+/g,""),jk:k.npwp.jk,npwp_date:p(k.npwp.npwp_date),alamat:p(k.npwp.alamat),menikah:ae(k.npwp.menikah)==="1"?1:0,anak:j,kerja:p(k.npwp.kerja),office:p(k.npwp.office)},password:m==="edit"&&V===""?null:V,password_confirmation:m==="edit"&&P===""?null:P,sponsor_id:M(k.sponsor_id),package_id:M(k.package_id),level:p(k.level)||null};return m==="create"&&(L.status=Number.parseInt(k.status,10)||1),L}}}const te=m=>m?m.map(u=>{const f=typeof u.id=="string"?Number.parseInt(u.id,10):u.id;return!Number.isFinite(f)||typeof u.name!="string"?null:{id:f,name:u.name}}).filter(u=>u!==null):[];function as(){const m=q([]),u=q([]),f=q(!1),a=q(!1),b=new Map;return{provinces:m,cities:u,loadingProvinces:f,loadingCities:a,fetchProvinces:async()=>{f.value=!0;try{const V=await fetch("/api/shipping/provinces",{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"},credentials:"same-origin"});if(!V.ok)throw new Error("Gagal memuat data provinsi.");const P=await V.json();m.value=te(P.data)}finally{f.value=!1}},fetchCities:async V=>{if(!V){u.value=[];return}const P=b.get(V);if(P){u.value=P;return}a.value=!0;try{const j=new URLSearchParams({province_id:String(V)}),L=await fetch(`/api/shipping/cities?${j.toString()}`,{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"},credentials:"same-origin"});if(!L.ok)throw new Error("Gagal memuat data kota/kabupaten.");const T=await L.json(),B=te(T.data);b.set(V,B),u.value=B}finally{a.value=!1}},resetCities:()=>{u.value=[]}}}export{Ya as _,as as a,es as u};
