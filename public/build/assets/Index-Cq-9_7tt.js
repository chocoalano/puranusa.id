import{o as C,_ as ee,q as te,v as re}from"./AppLayout.vue_vue_type_script_setup_true_lang-B4Q7M_yc.js";import{_ as q}from"./ConfirmDialog.vue_vue_type_script_setup_true_lang-IDKWa8Pc.js";import{_ as ae}from"./Pagination.vue_vue_type_script_setup_true_lang-BvpV56IR.js";import{a as D,_ as A}from"./CardContent.vue_vue_type_script_setup_true_lang-DMEXwOYw.js";import{_ as M}from"./CardHeader.vue_vue_type_script_setup_true_lang-DAmVrl_s.js";import{_ as F}from"./CardTitle.vue_vue_type_script_setup_true_lang-BNxuRtlf.js";import{d as L,v as w,g as o,b as t,w as s,u as e,s as m,cv as se,e as i,J as j,cw as J,aK as O,r as y,q as le,D as P,j as R,c as p,$ as ne,t as z,Y as ue,a8 as oe,F as k,x as $,y as E,n as u,al as ie,aE as de,A as ce,B as me}from"./vendor-zBKKL15G.js";import{_ as fe}from"./index-Bgaf6fPq.js";import{_ as S,v as T}from"./index-D-ZDeNW7.js";import{_ as pe,a as _e,b as ge}from"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-CJL3Y8wp.js";import{_ as ve}from"./DropdownMenuCheckboxItem.vue_vue_type_script_setup_true_lang-E3LrliJt.js";import{_ as xe}from"./Input.vue_vue_type_script_setup_true_lang-B8h33Tay.js";import{_ as ye,a as be,b as we,c as ke,d as V}from"./SelectValue.vue_vue_type_script_setup_true_lang-DhBu_Vgs.js";import{_ as $e,a as he,b as U,c as Ce,d as Re,e as H}from"./TableHeader.vue_vue_type_script_setup_true_lang-B4pjwwGU.js";import"./index-DaR_mHDg.js";import"./AvatarFallback.vue_vue_type_script_setup_true_lang-kKofCkkG.js";import"./AvatarImage.vue_vue_type_script_setup_true_lang-CzoF4v2h.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-5qqdoF-N.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-DSZTc71l.js";import"./AlertDialogTitle.vue_vue_type_script_setup_true_lang-ZdsPM9bJ.js";const Se={class:"grid gap-4 md:grid-cols-3"},Ve={class:"text-2xl font-bold"},je={class:"text-2xl font-bold"},De={class:"text-2xl font-bold"},Ae=L({__name:"ReturnStatistics",props:{statistics:{}},setup(n){return(_,d)=>(o(),w("div",Se,[t(e(A),null,{default:s(()=>[t(e(M),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[t(e(F),{class:"text-sm font-medium"},{default:s(()=>[...d[0]||(d[0]=[m("Pending",-1)])]),_:1}),t(e(se),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(e(D),null,{default:s(()=>[i("div",Ve,j(n.statistics.total_pending),1),d[1]||(d[1]=i("p",{class:"text-xs text-muted-foreground"},"Menunggu persetujuan",-1))]),_:1})]),_:1}),t(e(A),null,{default:s(()=>[t(e(M),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[t(e(F),{class:"text-sm font-medium"},{default:s(()=>[...d[2]||(d[2]=[m("Disetujui",-1)])]),_:1}),t(e(J),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(e(D),null,{default:s(()=>[i("div",je,j(n.statistics.total_approved),1),d[3]||(d[3]=i("p",{class:"text-xs text-muted-foreground"},"Retur disetujui",-1))]),_:1})]),_:1}),t(e(A),null,{default:s(()=>[t(e(M),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[t(e(F),{class:"text-sm font-medium"},{default:s(()=>[...d[4]||(d[4]=[m("Ditolak",-1)])]),_:1}),t(e(O),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(e(D),null,{default:s(()=>[i("div",De,j(n.statistics.total_rejected),1),d[5]||(d[5]=i("p",{class:"text-xs text-muted-foreground"},"Retur ditolak",-1))]),_:1})]),_:1})]))}}),Me={class:"rounded-xl p-4 space-y-6 py-6"},Fe={class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},Te={class:"flex flex-1 gap-4"},Ue={class:"relative flex-1 max-w-sm"},Be={class:"rounded-md border"},at=L({__name:"Index",props:{returns:{},statistics:{},filters:{}},setup(n){const _=n,d=[{title:"Retur & Refund",href:C.url()}],b=y(_.filters.search||""),f=y(_.filters.status||"all"),g=y([{id:_.filters.sort_by,desc:_.filters.sort_order==="desc"}]),B=y([]),K=y({}),v=y({open:!1,return:null}),x=y({open:!1,return:null}),X=a=>a?new Date(a).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-",Y=a=>({pending:"secondary",approved:"default",rejected:"destructive"})[a]||"secondary",G=a=>{v.value={open:!0,return:a}},Q=()=>{v.value.return&&R.post(te.url(v.value.return.id),{},{preserveScroll:!0,onSuccess:()=>{v.value={open:!1,return:null}}})},W=a=>{x.value={open:!0,return:a}},Z=()=>{x.value.return&&R.post(re.url(x.value.return.id),{},{preserveScroll:!0,onSuccess:()=>{x.value={open:!1,return:null}}})},I=[{id:"index",header:()=>u("div",{class:"w-12"},"No"),cell:({row:a})=>{const r=a.index+1+(_.returns.current_page-1)*_.returns.per_page;return u("div",{class:"font-medium"},r)}},{accessorKey:"order.order_number",header:({column:a})=>u(S,{variant:"ghost",onClick:()=>a.toggleSorting(a.getIsSorted()==="asc"),class:"-ml-4"},()=>["Order",u(ie,{class:"ml-2 h-4 w-4"})]),cell:({row:a})=>{const r=a.original.order;return r?u("div",[u("div",{class:"font-medium"},r.order_number),u("div",{class:"text-xs text-muted-foreground"},r.customer?.name||"Unknown")]):u("div",{class:"text-muted-foreground"},"N/A")}},{accessorKey:"reason",header:()=>"Alasan",cell:({row:a})=>u("div",{class:"max-w-xs truncate"},a.getValue("reason"))},{accessorKey:"status",header:()=>"Status",cell:({row:a})=>{const r=a.getValue("status");return u(fe,{variant:Y(r)},()=>r)}},{accessorKey:"requested_at",header:()=>"Tanggal Permintaan",cell:({row:a})=>X(a.getValue("requested_at"))},{id:"actions",header:()=>u("div",{class:"text-right"},"Actions"),cell:({row:a})=>{const r=a.original;return r.status!=="pending"?null:u("div",{class:"flex justify-end gap-2"},[u(S,{variant:"default",size:"sm",onClick:()=>G(r)},()=>u(J,{class:"h-4 w-4"})),u(S,{variant:"destructive",size:"sm",onClick:()=>W(r)},()=>u(O,{class:"h-4 w-4"}))])}}],h=le({get data(){return _.returns.data},columns:I,getCoreRowModel:me(),getSortedRowModel:ce(),getFilteredRowModel:de(),onSortingChange:a=>T(a,g),onColumnFiltersChange:a=>T(a,B),onColumnVisibilityChange:a=>T(a,K),state:{get sorting(){return g.value},get columnFilters(){return B.value},get columnVisibility(){return K.value}},manualSorting:!0});P(g,a=>{a.length>0&&R.get(C.url(),{search:b.value||void 0,status:f.value!=="all"?f.value:void 0,sort_by:a[0].id,sort_order:a[0].desc?"desc":"asc"},{preserveState:!0,preserveScroll:!0})},{deep:!0});let N;return P([b,f],()=>{clearTimeout(N),N=setTimeout(()=>{R.get(C.url(),{search:b.value||void 0,status:f.value!=="all"?f.value:void 0,sort_by:g.value[0]?.id||"created_at",sort_order:g.value[0]?.desc?"desc":"asc"},{preserveState:!0,preserveScroll:!0})},300)}),(a,r)=>(o(),p(ee,{breadcrumbs:d},{default:s(()=>[t(e(ne),{title:"Retur & Refund"}),i("div",Me,[r[10]||(r[10]=i("div",{class:"flex items-center justify-between"},[i("div",null,[i("h1",{class:"text-3xl font-bold tracking-tight"},"Retur & Refund"),i("p",{class:"text-muted-foreground"},"Kelola permintaan retur produk")])],-1)),t(Ae,{statistics:n.statistics},null,8,["statistics"]),i("div",Fe,[i("div",Te,[i("div",Ue,[t(e(ue),{class:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),t(e(xe),{modelValue:b.value,"onUpdate:modelValue":r[0]||(r[0]=l=>b.value=l),placeholder:"Cari order atau customer...",class:"pl-9"},null,8,["modelValue"])]),t(e(ye),{modelValue:f.value,"onUpdate:modelValue":r[1]||(r[1]=l=>f.value=l)},{default:s(()=>[t(e(be),{class:"w-[180px]"},{default:s(()=>[t(e(we),{placeholder:"Semua Status"})]),_:1}),t(e(ke),null,{default:s(()=>[t(e(V),{value:"all"},{default:s(()=>[...r[4]||(r[4]=[m("Semua Status",-1)])]),_:1}),t(e(V),{value:"pending"},{default:s(()=>[...r[5]||(r[5]=[m("Pending",-1)])]),_:1}),t(e(V),{value:"approved"},{default:s(()=>[...r[6]||(r[6]=[m("Approved",-1)])]),_:1}),t(e(V),{value:"rejected"},{default:s(()=>[...r[7]||(r[7]=[m("Rejected",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),t(e(pe),null,{default:s(()=>[t(e(_e),{"as-child":""},{default:s(()=>[t(e(S),{variant:"outline",class:"ml-auto"},{default:s(()=>[r[8]||(r[8]=m(" Kolom ",-1)),t(e(oe),{class:"ml-2 h-4 w-4"})]),_:1})]),_:1}),t(e(ge),{align:"end"},{default:s(()=>[(o(!0),w(k,null,$(e(h).getAllColumns().filter(l=>l.getCanHide()),l=>(o(),p(e(ve),{key:l.id,class:"capitalize","model-value":l.getIsVisible(),"onUpdate:modelValue":c=>{l.toggleVisibility(!!c)}},{default:s(()=>[m(j(l.id),1)]),_:2},1032,["model-value","onUpdate:modelValue"]))),128))]),_:1})]),_:1})]),i("div",Be,[t(e($e),null,{default:s(()=>[t(e(he),null,{default:s(()=>[(o(!0),w(k,null,$(e(h).getHeaderGroups(),l=>(o(),p(e(U),{key:l.id},{default:s(()=>[(o(!0),w(k,null,$(l.headers,c=>(o(),p(e(Ce),{key:c.id},{default:s(()=>[c.isPlaceholder?z("",!0):(o(),p(e(E),{key:0,render:c.column.columnDef.header,props:c.getContext()},null,8,["render","props"]))]),_:2},1024))),128))]),_:2},1024))),128))]),_:1}),t(e(Re),null,{default:s(()=>[e(h).getRowModel().rows?.length?(o(!0),w(k,{key:0},$(e(h).getRowModel().rows,l=>(o(),p(e(U),{key:l.id},{default:s(()=>[(o(!0),w(k,null,$(l.getVisibleCells(),c=>(o(),p(e(H),{key:c.id},{default:s(()=>[t(e(E),{render:c.column.columnDef.cell,props:c.getContext()},null,8,["render","props"])]),_:2},1024))),128))]),_:2},1024))),128)):(o(),p(e(U),{key:1},{default:s(()=>[t(e(H),{colspan:I.length,class:"h-24 text-center"},{default:s(()=>[...r[9]||(r[9]=[m(" Tidak ada data retur. ",-1)])]),_:1},8,["colspan"])]),_:1}))]),_:1})]),_:1})]),n.returns.last_page>1?(o(),p(ae,{key:0,data:{current_page:n.returns.current_page,last_page:n.returns.last_page,per_page:n.returns.per_page,from:(n.returns.current_page-1)*n.returns.per_page+1,to:Math.min(n.returns.current_page*n.returns.per_page,n.returns.total),total:n.returns.total},url:e(C).url(),filters:{search:b.value||void 0,status:f.value!=="all"?f.value:void 0,sort_by:g.value[0]?.id||"created_at",sort_order:g.value[0]?.desc?"desc":"asc"}},null,8,["data","url","filters"])):z("",!0)]),t(q,{open:v.value.open,"onUpdate:open":r[2]||(r[2]=l=>v.value.open=l),title:"Setujui Retur?",description:`Apakah Anda yakin ingin menyetujui permintaan retur untuk order ${v.value.return?.order.order_number}?`,"confirm-text":"Setujui","cancel-text":"Batal",onConfirm:Q},null,8,["open","description"]),t(q,{open:x.value.open,"onUpdate:open":r[3]||(r[3]=l=>x.value.open=l),title:"Tolak Retur?",description:`Apakah Anda yakin ingin menolak permintaan retur untuk order ${x.value.return?.order.order_number}?`,"confirm-text":"Tolak","cancel-text":"Batal",variant:"destructive",onConfirm:Z},null,8,["open","description"])]),_:1}))}});export{at as default};
