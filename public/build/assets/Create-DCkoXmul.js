import{d as T,D as E,r as V,p as S,v as d,g as i,b as a,u as s,a0 as F,w as o,e as r,a3 as $,s as l,G as z,ad as R,t as f,J as g,K as u,ag as G,ak as H,Z as I,F as C,x as J,Q as k}from"./vendor-BgSYH69o.js";import{i as M,_ as A,s as O}from"./AppLayout.vue_vue_type_script_setup_true_lang-BLQAiOgB.js";import{_ as b}from"./index-C6h2rSEx.js";import{_ as x}from"./Input.vue_vue_type_script_setup_true_lang-CucwjuSa.js";import{_ as m}from"./Label.vue_vue_type_script_setup_true_lang-rNa1VbjU.js";import{_ as P,a as U}from"./CardContent.vue_vue_type_script_setup_true_lang-DMT_NDq0.js";import{_ as L}from"./CardDescription.vue_vue_type_script_setup_true_lang-BxkDfeDR.js";import{_ as h}from"./CardHeader.vue_vue_type_script_setup_true_lang-CGqIWGeD.js";import{_ as B}from"./CardTitle.vue_vue_type_script_setup_true_lang-DLaLEZPb.js";import{_ as Q,a as Z,b as W,c as X,d as N}from"./SelectValue.vue_vue_type_script_setup_true_lang-CM9Iafca.js";import"./index-CMWG4mbA.js";import"./AvatarFallback.vue_vue_type_script_setup_true_lang-DU4k6tzW.js";import"./AvatarImage.vue_vue_type_script_setup_true_lang-BasOtxZI.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-C9WGGbb6.js";import"./index-DqFeuJ-n.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CKeFYOA5.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-sGxRETQ-.js";const Y={class:"rounded-xl p-4 space-y-6 py-6"},ee={class:"flex items-center justify-between"},se={class:"grid gap-4 md:grid-cols-2"},te={class:"space-y-2"},ae={key:0,class:"text-sm text-destructive"},re={class:"space-y-2"},oe={key:0,class:"text-sm text-destructive"},ne={class:"space-y-2"},le={key:0,class:"text-sm text-destructive"},de={class:"space-y-2"},ie={key:0,class:"text-sm text-destructive"},ue={class:"space-y-2"},me={key:0,class:"text-sm text-destructive"},pe={class:"space-y-2"},fe={key:0,class:"text-sm text-destructive"},ge={class:"space-y-2"},xe={class:"space-y-2"},_e={class:"grid gap-4 md:grid-cols-2"},ve={class:"space-y-2"},ke={key:0,class:"flex items-center justify-between rounded-md border bg-muted p-3"},be={class:"text-sm font-medium"},ce={class:"text-xs text-muted-foreground"},ye={key:1,class:"relative"},we={class:"relative"},Ve={key:0,class:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md border bg-popover p-1 shadow-md"},Se=["onClick"],$e={class:"font-medium"},Ce={class:"text-xs text-muted-foreground"},Me={key:2,class:"text-sm text-destructive"},Pe={class:"space-y-2"},Ue={key:0,class:"text-sm text-destructive"},Le={class:"flex justify-end gap-4"},Qe=T({__name:"Create",props:{customers:{}},setup(j){const c=j,t=E({name:"",username:"",email:"",phone:"",password:"",password_confirmation:"",sponsor_id:null,status:3,registration_amount:1e5,description:""}),_=V(""),v=V(!1),y=S(()=>c.customers.find(p=>p.id===t.sponsor_id)),w=S(()=>{if(!_.value)return c.customers;const p=_.value.toLowerCase();return c.customers.filter(e=>(e.name?.toLowerCase().includes(p)??!1)||(e.ewallet_id?.toLowerCase().includes(p)??!1))}),q=p=>{t.sponsor_id=p.id,v.value=!1,_.value=""},D=()=>{typeof window<"u"&&window.setTimeout(()=>{v.value=!1},200)},K=()=>{t.post(O.url(),{preserveScroll:!0,onSuccess:()=>{k.success("Pelanggan berhasil didaftarkan")},onError:p=>{const e=Object.values(p);e.length>0?(k.error(e[0]),e.length>1&&k.warning(`Terdapat ${e.length} kesalahan pada form. Silakan periksa kembali.`)):k.error("Gagal mendaftarkan pelanggan. Silakan periksa data yang dimasukkan.")}})};return(p,e)=>(i(),d(C,null,[a(s(F),{title:"Tambah Pelanggan"}),a(A,null,{default:o(()=>[r("div",Y,[r("div",ee,[e[13]||(e[13]=r("div",null,[r("h1",{class:"text-3xl font-bold"},"Tambah Pelanggan"),r("p",{class:"mt-2 text-muted-foreground"}," Daftarkan pelanggan baru ke dalam sistem MLM ")],-1)),a(s($),{href:s(M).url()},{default:o(()=>[a(s(b),{variant:"outline"},{default:o(()=>[a(s(z),{class:"mr-2 h-4 w-4"}),e[12]||(e[12]=l(" Kembali ",-1))]),_:1})]),_:1},8,["href"])]),r("form",{onSubmit:R(K,["prevent"]),class:"space-y-6"},[a(s(P),null,{default:o(()=>[a(s(h),null,{default:o(()=>[a(s(B),null,{default:o(()=>[...e[14]||(e[14]=[l("Informasi Pribadi",-1)])]),_:1}),a(s(L),null,{default:o(()=>[...e[15]||(e[15]=[l(" Data pribadi pelanggan yang akan didaftarkan ",-1)])]),_:1})]),_:1}),a(s(U),{class:"space-y-4"},{default:o(()=>[r("div",se,[r("div",te,[a(s(m),{for:"name"},{default:o(()=>[...e[16]||(e[16]=[l("Nama Lengkap *",-1)])]),_:1}),a(s(x),{id:"name",modelValue:s(t).name,"onUpdate:modelValue":e[0]||(e[0]=n=>s(t).name=n),placeholder:"Masukkan nama lengkap",class:g({"border-destructive":s(t).errors.name}),required:""},null,8,["modelValue","class"]),e[17]||(e[17]=r("p",{class:"text-xs text-muted-foreground"}," Nama lengkap sesuai identitas, maksimal 255 karakter ",-1)),s(t).errors.name?(i(),d("p",ae,u(s(t).errors.name),1)):f("",!0)]),r("div",re,[a(s(m),{for:"username"},{default:o(()=>[...e[18]||(e[18]=[l("Username *",-1)])]),_:1}),a(s(x),{id:"username",modelValue:s(t).username,"onUpdate:modelValue":e[1]||(e[1]=n=>s(t).username=n),placeholder:"contoh: johndoe123",class:g({"border-destructive":s(t).errors.username}),required:""},null,8,["modelValue","class"]),e[19]||(e[19]=r("p",{class:"text-xs text-muted-foreground"}," Username untuk login. Hanya boleh huruf, angka, dash (-) dan underscore (_) ",-1)),s(t).errors.username?(i(),d("p",oe,u(s(t).errors.username),1)):f("",!0)]),r("div",ne,[a(s(m),{for:"email"},{default:o(()=>[...e[20]||(e[20]=[l("Email *",-1)])]),_:1}),a(s(x),{id:"email",modelValue:s(t).email,"onUpdate:modelValue":e[2]||(e[2]=n=>s(t).email=n),type:"email",placeholder:"nama@email.com",class:g({"border-destructive":s(t).errors.email}),required:""},null,8,["modelValue","class"]),e[21]||(e[21]=r("p",{class:"text-xs text-muted-foreground"}," Email aktif untuk menerima notifikasi dan verifikasi akun ",-1)),s(t).errors.email?(i(),d("p",le,u(s(t).errors.email),1)):f("",!0)]),r("div",de,[a(s(m),{for:"phone"},{default:o(()=>[...e[22]||(e[22]=[l("No. Telepon",-1)])]),_:1}),a(s(x),{id:"phone",modelValue:s(t).phone,"onUpdate:modelValue":e[3]||(e[3]=n=>s(t).phone=n),placeholder:"08xxxxxxxxxx",class:g({"border-destructive":s(t).errors.phone})},null,8,["modelValue","class"]),e[23]||(e[23]=r("p",{class:"text-xs text-muted-foreground"}," Nomor telepon aktif (opsional), maksimal 20 karakter ",-1)),s(t).errors.phone?(i(),d("p",ie,u(s(t).errors.phone),1)):f("",!0)]),r("div",ue,[a(s(m),{for:"registration_amount"},{default:o(()=>[...e[24]||(e[24]=[l("Biaya Registrasi *",-1)])]),_:1}),a(s(x),{id:"registration_amount",modelValue:s(t).registration_amount,"onUpdate:modelValue":e[4]||(e[4]=n=>s(t).registration_amount=n),modelModifiers:{number:!0},type:"number",min:"0",step:"1000",class:g({"border-destructive":s(t).errors.registration_amount}),required:""},null,8,["modelValue","class"]),e[25]||(e[25]=r("p",{class:"text-xs text-muted-foreground"}," Biaya pendaftaran dalam Rupiah (Rp), minimal 0 ",-1)),s(t).errors.registration_amount?(i(),d("p",me,u(s(t).errors.registration_amount),1)):f("",!0)]),r("div",pe,[a(s(m),{for:"password"},{default:o(()=>[...e[26]||(e[26]=[l("Password *",-1)])]),_:1}),a(s(x),{id:"password",modelValue:s(t).password,"onUpdate:modelValue":e[5]||(e[5]=n=>s(t).password=n),type:"password",placeholder:"Minimal 8 karakter",class:g({"border-destructive":s(t).errors.password}),required:""},null,8,["modelValue","class"]),e[27]||(e[27]=r("p",{class:"text-xs text-muted-foreground"}," Password minimal 8 karakter, gunakan kombinasi huruf dan angka ",-1)),s(t).errors.password?(i(),d("p",fe,u(s(t).errors.password),1)):f("",!0)]),r("div",ge,[a(s(m),{for:"password_confirmation"},{default:o(()=>[...e[28]||(e[28]=[l("Konfirmasi Password *",-1)])]),_:1}),a(s(x),{id:"password_confirmation",modelValue:s(t).password_confirmation,"onUpdate:modelValue":e[6]||(e[6]=n=>s(t).password_confirmation=n),type:"password",placeholder:"Ulangi password",required:""},null,8,["modelValue"]),e[29]||(e[29]=r("p",{class:"text-xs text-muted-foreground"}," Ketik ulang password yang sama untuk konfirmasi ",-1))])]),r("div",xe,[a(s(m),{for:"description"},{default:o(()=>[...e[30]||(e[30]=[l("Keterangan",-1)])]),_:1}),G(r("textarea",{id:"description","onUpdate:modelValue":e[7]||(e[7]=n=>s(t).description=n),placeholder:"Keterangan tambahan (opsional)",rows:"3",class:"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm"},null,512),[[H,s(t).description]]),e[31]||(e[31]=r("p",{class:"text-xs text-muted-foreground"}," Catatan tambahan tentang pelanggan, seperti sumber referral atau informasi penting lainnya ",-1))])]),_:1})]),_:1}),a(s(P),null,{default:o(()=>[a(s(h),null,{default:o(()=>[a(s(B),null,{default:o(()=>[...e[32]||(e[32]=[l("Struktur Jaringan MLM",-1)])]),_:1}),a(s(L),null,{default:o(()=>[...e[33]||(e[33]=[l(" Pilih sponsor dan status pelanggan ",-1)])]),_:1})]),_:1}),a(s(U),{class:"space-y-4"},{default:o(()=>[r("div",_e,[r("div",ve,[a(s(m),{for:"sponsor"},{default:o(()=>[...e[34]||(e[34]=[l("Sponsor",-1)])]),_:1}),y.value?(i(),d("div",ke,[r("div",null,[r("p",be,u(y.value.name),1),r("p",ce,u(y.value.ewallet_id),1)]),a(s(b),{type:"button",variant:"ghost",size:"sm",onClick:e[8]||(e[8]=n=>s(t).sponsor_id=null)},{default:o(()=>[...e[35]||(e[35]=[l(" Hapus ",-1)])]),_:1})])):(i(),d("div",ye,[r("div",we,[a(s(x),{modelValue:_.value,"onUpdate:modelValue":e[9]||(e[9]=n=>_.value=n),onFocus:e[10]||(e[10]=n=>v.value=!0),onBlur:D,placeholder:"Cari sponsor berdasarkan nama atau ID...",class:g({"border-destructive":s(t).errors.sponsor_id})},null,8,["modelValue","class"]),a(s(I),{class:"absolute right-3 top-3 h-4 w-4 text-muted-foreground"})]),v.value&&w.value.length>0?(i(),d("div",Ve,[(i(!0),d(C,null,J(w.value,n=>(i(),d("button",{key:n.id,type:"button",onClick:he=>q(n),class:"w-full rounded px-3 py-2 text-left text-sm hover:bg-accent"},[r("div",$e,u(n.name),1),r("div",Ce,u(n.ewallet_id),1)],8,Se))),128))])):f("",!0)])),e[36]||(e[36]=r("p",{class:"text-xs text-muted-foreground"}," Member yang merekomendasikan pelanggan ini (opsional). Kosongkan jika tidak ada sponsor ",-1)),s(t).errors.sponsor_id?(i(),d("p",Me,u(s(t).errors.sponsor_id),1)):f("",!0)]),r("div",Pe,[a(s(m),{for:"status"},{default:o(()=>[...e[37]||(e[37]=[l("Status *",-1)])]),_:1}),a(s(Q),{modelValue:s(t).status,"onUpdate:modelValue":e[11]||(e[11]=n=>s(t).status=n)},{default:o(()=>[a(s(Z),{class:g({"border-destructive":s(t).errors.status})},{default:o(()=>[a(s(W),{placeholder:"Pilih status"})]),_:1},8,["class"]),a(s(X),null,{default:o(()=>[a(s(N),{value:1},{default:o(()=>[...e[38]||(e[38]=[l("Prospek",-1)])]),_:1}),a(s(N),{value:2},{default:o(()=>[...e[39]||(e[39]=[l("Pasif",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e[40]||(e[40]=r("p",{class:"text-xs text-muted-foreground"},[r("strong",null,"Prospek:"),l(" Calon member, belum masuk jaringan MLM"),r("br"),r("strong",null,"Pasif:"),l(" Sudah terdaftar tapi belum aktif bertransaksi ")],-1)),s(t).errors.status?(i(),d("p",Ue,u(s(t).errors.status),1)):f("",!0)])])]),_:1})]),_:1}),r("div",Le,[a(s($),{href:s(M).url()},{default:o(()=>[a(s(b),{type:"button",variant:"outline"},{default:o(()=>[...e[41]||(e[41]=[l(" Batal ",-1)])]),_:1})]),_:1},8,["href"]),a(s(b),{type:"submit",disabled:s(t).processing},{default:o(()=>[l(u(s(t).processing?"Menyimpan...":"Simpan Pelanggan"),1)]),_:1},8,["disabled"])])],32)])]),_:1})],64))}});export{Qe as default};
