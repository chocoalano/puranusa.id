import{d as E,r as N,D as X,p as g,v as p,g as m,b as t,u as l,a1 as z,w as s,e as o,a4 as S,G as W,ae as j,s as u,t as v,J as _,K as f,F as h,x as A,c as I,S as J,Q as k}from"./vendor-4-BZYpFr.js";import{_ as O}from"./AppLayout.vue_vue_type_script_setup_true_lang-4ba7MJZZ.js";import{_ as V}from"./index-C_d1QX2L.js";import{_ as w}from"./Input.vue_vue_type_script_setup_true_lang-BCOvYMLd.js";import{_ as c}from"./Label.vue_vue_type_script_setup_true_lang-Cme2qRTp.js";import{_ as Q,a as Z}from"./CardContent.vue_vue_type_script_setup_true_lang-CqrB5hxD.js";import{_ as q}from"./CardDescription.vue_vue_type_script_setup_true_lang-DgP-o0Lu.js";import{_ as H}from"./CardHeader.vue_vue_type_script_setup_true_lang-CAU7O7lt.js";import{_ as R}from"./CardTitle.vue_vue_type_script_setup_true_lang-CXovuBmY.js";import{_ as C,a as D,b as M,c as U,d as x}from"./SelectValue.vue_vue_type_script_setup_true_lang-uung8Eko.js";import{_ as Y}from"./TiptapEditor.vue_vue_type_style_index_0_lang-ivWfIh0u.js";import"./index-CSEUMRIG.js";import"./AvatarFallback.vue_vue_type_script_setup_true_lang-CQ0bN-pz.js";import"./AvatarImage.vue_vue_type_script_setup_true_lang-DAlPCySi.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-B92NEDT-.js";import"./index-BUE9bFsX.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DLcPllPw.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-CdMXDPSC.js";const ee={class:"container mx-auto py-6 space-y-6"},te={class:"flex items-center gap-4"},le={class:"space-y-2"},ae={key:0,class:"text-sm text-destructive"},se={class:"space-y-2"},ie={key:0,class:"text-sm text-destructive"},ne={class:"grid gap-4 lg:grid-cols-2"},oe={class:"space-y-2"},re={key:0,class:"text-sm text-destructive"},ue={class:"space-y-2"},de={key:0,class:"text-sm text-destructive"},me={class:"space-y-2"},pe={key:0,class:"text-sm text-destructive"},fe={class:"grid gap-4 lg:grid-cols-2"},ve={class:"space-y-2"},ce={key:0,class:"text-sm text-muted-foreground"},ge=["href"],_e={key:1,class:"text-sm text-destructive"},xe={class:"space-y-2"},be={key:0,class:"text-sm text-destructive"},ye={class:"flex justify-end gap-2"},Ne=E({__name:"Edit",props:{item:{},categories:{}},setup(b){const d=b,a=N({category_id:d.item.category_id,title:d.item.title||"",slug:d.item.slug||"",content:d.item.content||"",file:null,vlink:d.item.vlink||"",status:d.item.status||"draft"}),L=["jpg","jpeg","png","webp","gif","svg","mp4","mov","avi","webm","mkv","pdf","doc","docx","xls","xlsx","ppt","pptx","txt"],G=["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","text/plain"],K=i=>{const e=i.name.split(".").pop()?.toLowerCase()??"";return e&&L.includes(e)||i.type.startsWith("image/")||i.type.startsWith("video/")?!0:G.includes(i.type)},y=X({}),r=g(()=>y.errors),F=g(()=>y.processing),$=g(()=>d.item.file?d.item.file.startsWith("http")?d.item.file:`/storage/${d.item.file}`:null),P=g({get(){return a.value.category_id?String(a.value.category_id):"none"},set(i){a.value.category_id=i==="none"?null:Number(i)}}),T=i=>{const e=i.target,n=e.files?e.files[0]:null;if(!n){a.value.file=null;return}if(!K(n)){k.error("Format file tidak didukung. Gunakan gambar, video, PDF, atau dokumen kantor."),a.value.file=null,e.value="";return}a.value.file=n},B=()=>{const i=new FormData;i.append("_method","PUT"),i.append("title",a.value.title),a.value.slug&&i.append("slug",a.value.slug),a.value.category_id&&i.append("category_id",String(a.value.category_id)),i.append("content",a.value.content||""),a.value.file instanceof File&&i.append("file",a.value.file),a.value.vlink&&i.append("vlink",a.value.vlink),a.value.status&&i.append("status",a.value.status),y.transform(()=>i).post(`/admin/zenner-club/contents/${d.item.id}`,{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{k.success("Konten berhasil diperbarui")},onError:()=>{k.error("Gagal memperbarui konten")}})};return(i,e)=>(m(),p(h,null,[t(l(z),{title:`Edit ${b.item.title}`},null,8,["title"]),t(O,null,{default:s(()=>[o("div",ee,[o("div",te,[t(l(S),{href:"/admin/zenner-club/contents"},{default:s(()=>[t(l(V),{variant:"outline",size:"icon"},{default:s(()=>[t(l(W),{class:"h-4 w-4"})]),_:1})]),_:1}),e[6]||(e[6]=o("div",null,[o("h1",{class:"text-3xl font-bold"},"Edit Konten"),o("p",{class:"text-muted-foreground"},"Perbarui konten Zenner Club")],-1))]),o("form",{onSubmit:j(B,["prevent"]),class:"space-y-6"},[t(l(Q),null,{default:s(()=>[t(l(H),null,{default:s(()=>[t(l(R),null,{default:s(()=>[...e[7]||(e[7]=[u("Informasi Utama",-1)])]),_:1}),t(l(q),null,{default:s(()=>[...e[8]||(e[8]=[u("Perbarui data konten",-1)])]),_:1})]),_:1}),t(l(Z),{class:"space-y-4"},{default:s(()=>[o("div",le,[t(l(c),{for:"title"},{default:s(()=>[...e[9]||(e[9]=[u("Judul",-1)])]),_:1}),t(l(w),{id:"title",modelValue:a.value.title,"onUpdate:modelValue":e[0]||(e[0]=n=>a.value.title=n),class:_({"border-destructive":r.value.title})},null,8,["modelValue","class"]),r.value.title?(m(),p("p",ae,f(r.value.title),1)):v("",!0)]),o("div",se,[t(l(c),{for:"slug"},{default:s(()=>[...e[10]||(e[10]=[u("Slug",-1)])]),_:1}),t(l(w),{id:"slug",modelValue:a.value.slug,"onUpdate:modelValue":e[1]||(e[1]=n=>a.value.slug=n),class:_({"border-destructive":r.value.slug})},null,8,["modelValue","class"]),r.value.slug?(m(),p("p",ie,f(r.value.slug),1)):v("",!0)]),o("div",ne,[o("div",oe,[t(l(c),null,{default:s(()=>[...e[11]||(e[11]=[u("Kategori",-1)])]),_:1}),t(l(C),{modelValue:P.value,"onUpdate:modelValue":e[2]||(e[2]=n=>P.value=n)},{default:s(()=>[t(l(D),null,{default:s(()=>[t(l(M),{placeholder:"Pilih kategori"})]),_:1}),t(l(U),null,{default:s(()=>[t(l(x),{value:"none"},{default:s(()=>[...e[12]||(e[12]=[u("Tanpa Kategori",-1)])]),_:1}),(m(!0),p(h,null,A(b.categories,n=>(m(),I(l(x),{key:n.id,value:String(n.id)},{default:s(()=>[u(f(n.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),r.value.category_id?(m(),p("p",re,f(r.value.category_id),1)):v("",!0)]),o("div",ue,[t(l(c),null,{default:s(()=>[...e[13]||(e[13]=[u("Status",-1)])]),_:1}),t(l(C),{modelValue:a.value.status,"onUpdate:modelValue":e[3]||(e[3]=n=>a.value.status=n)},{default:s(()=>[t(l(D),null,{default:s(()=>[t(l(M),{placeholder:"Pilih status"})]),_:1}),t(l(U),null,{default:s(()=>[t(l(x),{value:"draft"},{default:s(()=>[...e[14]||(e[14]=[u("Draft",-1)])]),_:1}),t(l(x),{value:"published"},{default:s(()=>[...e[15]||(e[15]=[u("Published",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"]),r.value.status?(m(),p("p",de,f(r.value.status),1)):v("",!0)])]),o("div",me,[t(l(c),null,{default:s(()=>[...e[16]||(e[16]=[u("Deskripsi Konten",-1)])]),_:1}),t(Y,{modelValue:a.value.content,"onUpdate:modelValue":e[4]||(e[4]=n=>a.value.content=n)},null,8,["modelValue"]),r.value.content?(m(),p("p",pe,f(r.value.content),1)):v("",!0)]),o("div",fe,[o("div",ve,[t(l(c),{for:"file"},{default:s(()=>[...e[17]||(e[17]=[u("File Lampiran",-1)])]),_:1}),o("input",{id:"file",type:"file",class:_(["file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",r.value.file?"border-destructive":""]),accept:"image/*,video/*,application/pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.txt",onChange:T},null,34),e[19]||(e[19]=o("p",{class:"text-xs text-muted-foreground"}," Format: gambar (JPG/PNG/WebP/GIF/SVG), video (MP4/MOV/AVI/WebM/MKV), PDF, atau dokumen (DOC/DOCX/XLS/XLSX/PPT/PPTX/TXT). Maks 10MB. ",-1)),$.value?(m(),p("p",ce,[e[18]||(e[18]=u(" File saat ini: ",-1)),o("a",{href:$.value,target:"_blank",class:"text-primary underline"}," Lihat file ",8,ge)])):v("",!0),r.value.file?(m(),p("p",_e,f(r.value.file),1)):v("",!0)]),o("div",xe,[t(l(c),{for:"vlink"},{default:s(()=>[...e[20]||(e[20]=[u("Video Link",-1)])]),_:1}),t(l(w),{id:"vlink",modelValue:a.value.vlink,"onUpdate:modelValue":e[5]||(e[5]=n=>a.value.vlink=n),placeholder:"https://...",class:_({"border-destructive":r.value.vlink})},null,8,["modelValue","class"]),r.value.vlink?(m(),p("p",be,f(r.value.vlink),1)):v("",!0)])])]),_:1})]),_:1}),o("div",ye,[t(l(S),{href:"/admin/zenner-club/contents"},{default:s(()=>[t(l(V),{type:"button",variant:"outline"},{default:s(()=>[...e[21]||(e[21]=[u("Batal",-1)])]),_:1})]),_:1}),t(l(V),{type:"submit",disabled:F.value},{default:s(()=>[t(l(J),{class:"mr-2 h-4 w-4"}),u(" "+f(F.value?"Menyimpan...":"Simpan Perubahan"),1)]),_:1},8,["disabled"])])],32)])]),_:1})],64))}});export{Ne as default};
