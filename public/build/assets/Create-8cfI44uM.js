import{d as N,r as $,D as X,p as x,E,v as m,g as d,b as t,u as l,a1 as I,w as s,e as i,a4 as S,G as J,ae as W,s as r,t as f,J as c,K as p,F as h,x as j,c as A,S as O,Q as b}from"./vendor-DYgHfk08.js";import{_ as Q}from"./AppLayout.vue_vue_type_script_setup_true_lang-DRH_ebPA.js";import{_ as k}from"./index-DBsPyq8S.js";import{_ as y}from"./Input.vue_vue_type_script_setup_true_lang-DkLAfZys.js";import{_ as v}from"./Label.vue_vue_type_script_setup_true_lang-B3Rl-oB1.js";import{_ as R,a as Z}from"./CardContent.vue_vue_type_script_setup_true_lang-CnmozILa.js";import{_ as q}from"./CardDescription.vue_vue_type_script_setup_true_lang-D5WdCzuR.js";import{_ as H}from"./CardHeader.vue_vue_type_script_setup_true_lang-9jnBdHpK.js";import{_ as Y}from"./CardTitle.vue_vue_type_script_setup_true_lang-CI_uH55v.js";import{_ as C,a as P,b as D,c as L,d as g}from"./SelectValue.vue_vue_type_script_setup_true_lang-DYYIQ-He.js";import{_ as ee}from"./TiptapEditor.vue_vue_type_style_index_0_lang-8f-lVD5g.js";import"./index-CSEUMRIG.js";import"./AvatarFallback.vue_vue_type_script_setup_true_lang-BuaobLrR.js";import"./AvatarImage.vue_vue_type_script_setup_true_lang-Bql-RK5d.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-Wm0IkLbg.js";import"./index-BUE9bFsX.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DRgKjkJL.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-D72m4PHj.js";const te={class:"container mx-auto py-6 space-y-6"},le={class:"flex items-center gap-4"},ae={class:"space-y-2"},se={key:0,class:"text-sm text-destructive"},ne={class:"space-y-2"},oe={class:"text-xs text-muted-foreground"},ie={key:0,class:"text-sm text-destructive"},ue={class:"grid gap-4 lg:grid-cols-2"},re={class:"space-y-2"},de={key:0,class:"text-sm text-destructive"},pe={class:"space-y-2"},me={key:0,class:"text-sm text-destructive"},fe={class:"space-y-2"},ve={key:0,class:"text-sm text-destructive"},ce={class:"grid gap-4 lg:grid-cols-2"},ge={class:"space-y-2"},_e={key:0,class:"text-sm text-destructive"},xe={class:"space-y-2"},be={key:0,class:"text-sm text-destructive"},ke={class:"flex justify-end gap-2"},Ne=N({__name:"Create",props:{categories:{}},setup(K){const a=$({category_id:null,title:"",slug:"",content:"",file:null,vlink:"",status:"draft"}),M=["jpg","jpeg","png","webp","gif","svg","mp4","mov","avi","webm","mkv","pdf","doc","docx","xls","xlsx","ppt","pptx","txt"],T=["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","text/plain"],U=n=>{const e=n.name.split(".").pop()?.toLowerCase()??"";return e&&M.includes(e)||n.type.startsWith("image/")||n.type.startsWith("video/")?!0:T.includes(n.type)},_=X({}),u=x(()=>_.errors),V=x(()=>_.processing),w=$(!1),z=n=>n.toString().toLowerCase().trim().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"").replace(/-+/g,"-").replace(/^-+|-+$/g,"");E(()=>a.value.title,n=>{w.value||(a.value.slug=z(n))});const F=x({get(){return a.value.category_id?String(a.value.category_id):"none"},set(n){a.value.category_id=n==="none"?null:Number(n)}}),B=n=>{const e=n.target,o=e.files?e.files[0]:null;if(!o){a.value.file=null;return}if(!U(o)){b.error("Format file tidak didukung. Gunakan gambar, video, PDF, atau dokumen kantor."),a.value.file=null,e.value="";return}a.value.file=o},G=()=>{const n=new FormData;n.append("title",a.value.title),a.value.slug&&n.append("slug",a.value.slug),a.value.category_id&&n.append("category_id",String(a.value.category_id)),a.value.content&&n.append("content",a.value.content),a.value.file instanceof File&&n.append("file",a.value.file),a.value.vlink&&n.append("vlink",a.value.vlink),a.value.status&&n.append("status",a.value.status),_.transform(()=>n).post("/admin/zenner-club/contents",{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{b.success("Konten berhasil ditambahkan")},onError:()=>{b.error("Gagal menambahkan konten")}})};return(n,e)=>(d(),m(h,null,[t(l(I),{title:"Tambah Konten"}),t(Q,null,{default:s(()=>[i("div",te,[i("div",le,[t(l(S),{href:"/admin/zenner-club/contents"},{default:s(()=>[t(l(k),{variant:"outline",size:"icon"},{default:s(()=>[t(l(J),{class:"h-4 w-4"})]),_:1})]),_:1}),e[7]||(e[7]=i("div",null,[i("h1",{class:"text-3xl font-bold"},"Tambah Konten"),i("p",{class:"text-muted-foreground"},"Buat konten Zenner Club baru")],-1))]),i("form",{onSubmit:W(G,["prevent"]),class:"space-y-6"},[t(l(R),null,{default:s(()=>[t(l(H),null,{default:s(()=>[t(l(Y),null,{default:s(()=>[...e[8]||(e[8]=[r("Informasi Utama",-1)])]),_:1}),t(l(q),null,{default:s(()=>[...e[9]||(e[9]=[r("Lengkapi data konten",-1)])]),_:1})]),_:1}),t(l(Z),{class:"space-y-4"},{default:s(()=>[i("div",ae,[t(l(v),{for:"title"},{default:s(()=>[...e[10]||(e[10]=[r("Judul",-1)])]),_:1}),t(l(y),{id:"title",modelValue:a.value.title,"onUpdate:modelValue":e[0]||(e[0]=o=>a.value.title=o),placeholder:"Judul konten",class:c({"border-destructive":u.value.title})},null,8,["modelValue","class"]),u.value.title?(d(),m("p",se,p(u.value.title),1)):f("",!0)]),i("div",ne,[t(l(v),{for:"slug"},{default:s(()=>[...e[11]||(e[11]=[r("Slug",-1)])]),_:1}),t(l(y),{id:"slug",modelValue:a.value.slug,"onUpdate:modelValue":e[1]||(e[1]=o=>a.value.slug=o),placeholder:"slug-konten",class:c({"border-destructive":u.value.slug}),onInput:e[2]||(e[2]=o=>w.value=!0)},null,8,["modelValue","class"]),i("p",oe," URL: /zenner-club/"+p(a.value.slug||"slug-konten"),1),u.value.slug?(d(),m("p",ie,p(u.value.slug),1)):f("",!0)]),i("div",ue,[i("div",re,[t(l(v),null,{default:s(()=>[...e[12]||(e[12]=[r("Kategori",-1)])]),_:1}),t(l(C),{modelValue:F.value,"onUpdate:modelValue":e[3]||(e[3]=o=>F.value=o)},{default:s(()=>[t(l(P),null,{default:s(()=>[t(l(D),{placeholder:"Pilih kategori"})]),_:1}),t(l(L),null,{default:s(()=>[t(l(g),{value:"none"},{default:s(()=>[...e[13]||(e[13]=[r("Tanpa Kategori",-1)])]),_:1}),(d(!0),m(h,null,j(K.categories,o=>(d(),A(l(g),{key:o.id,value:String(o.id)},{default:s(()=>[r(p(o.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),u.value.category_id?(d(),m("p",de,p(u.value.category_id),1)):f("",!0)]),i("div",pe,[t(l(v),null,{default:s(()=>[...e[14]||(e[14]=[r("Status",-1)])]),_:1}),t(l(C),{modelValue:a.value.status,"onUpdate:modelValue":e[4]||(e[4]=o=>a.value.status=o)},{default:s(()=>[t(l(P),null,{default:s(()=>[t(l(D),{placeholder:"Pilih status"})]),_:1}),t(l(L),null,{default:s(()=>[t(l(g),{value:"draft"},{default:s(()=>[...e[15]||(e[15]=[r("Draft",-1)])]),_:1}),t(l(g),{value:"published"},{default:s(()=>[...e[16]||(e[16]=[r("Published",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"]),u.value.status?(d(),m("p",me,p(u.value.status),1)):f("",!0)])]),i("div",fe,[t(l(v),null,{default:s(()=>[...e[17]||(e[17]=[r("Deskripsi Konten",-1)])]),_:1}),t(ee,{modelValue:a.value.content,"onUpdate:modelValue":e[5]||(e[5]=o=>a.value.content=o)},null,8,["modelValue"]),u.value.content?(d(),m("p",ve,p(u.value.content),1)):f("",!0)]),i("div",ce,[i("div",ge,[t(l(v),{for:"file"},{default:s(()=>[...e[18]||(e[18]=[r("File Lampiran",-1)])]),_:1}),i("input",{id:"file",type:"file",class:c(["file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",u.value.file?"border-destructive":""]),accept:"image/*,video/*,application/pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.txt",onChange:B},null,34),e[19]||(e[19]=i("p",{class:"text-xs text-muted-foreground"}," Format: gambar (JPG/PNG/WebP/GIF/SVG), video (MP4/MOV/AVI/WebM/MKV), PDF, atau dokumen (DOC/DOCX/XLS/XLSX/PPT/PPTX/TXT). Maks 10MB. ",-1)),u.value.file?(d(),m("p",_e,p(u.value.file),1)):f("",!0)]),i("div",xe,[t(l(v),{for:"vlink"},{default:s(()=>[...e[20]||(e[20]=[r("Video Link",-1)])]),_:1}),t(l(y),{id:"vlink",modelValue:a.value.vlink,"onUpdate:modelValue":e[6]||(e[6]=o=>a.value.vlink=o),placeholder:"https://...",class:c({"border-destructive":u.value.vlink})},null,8,["modelValue","class"]),u.value.vlink?(d(),m("p",be,p(u.value.vlink),1)):f("",!0)])])]),_:1})]),_:1}),i("div",ke,[t(l(S),{href:"/admin/zenner-club/contents"},{default:s(()=>[t(l(k),{type:"button",variant:"outline"},{default:s(()=>[...e[21]||(e[21]=[r("Batal",-1)])]),_:1})]),_:1}),t(l(k),{type:"submit",disabled:V.value},{default:s(()=>[t(l(O),{class:"mr-2 h-4 w-4"}),r(" "+p(V.value?"Menyimpan...":"Simpan Konten"),1)]),_:1},8,["disabled"])])],32)])]),_:1})],64))}});export{Ne as default};
