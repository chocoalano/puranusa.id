import{d as H,D as Q,E as T,r as V,p as W,c as k,g as m,w as l,b as s,e as a,u as e,a1 as Z,t as v,v as b,s as i,bd as ee,S as j,K as P,cL as te,cM as D,aL as se,ah as G,cN as O,ag as ae,X as le,cO as oe,cP as ne,cj as ie,I as de,F as ue,x as re,P as me,ae as pe,j as fe}from"./vendor-FclwbLvj.js";import{_ as ge}from"./AppLayout.vue_vue_type_script_setup_true_lang-DZrLECOS.js";import{u as ce}from"./usePermissions-DzkwVpfD.js";import{_ as _e}from"./index-CRPqrtU2.js";import{_ as w}from"./index-B4cH97KR.js";import{_ as M,a as I}from"./CardContent.vue_vue_type_script_setup_true_lang-LKEwQoWP.js";import{_ as $}from"./CardDescription.vue_vue_type_script_setup_true_lang-CC80hHWr.js";import{_ as C}from"./CardHeader.vue_vue_type_script_setup_true_lang-N3E9ALN1.js";import{_ as F}from"./CardTitle.vue_vue_type_script_setup_true_lang-Mk0zvokq.js";import{_}from"./Input.vue_vue_type_script_setup_true_lang-ZVESK4JK.js";import{_ as p}from"./Label.vue_vue_type_script_setup_true_lang-CTFNLsIT.js";import{_ as ye,a as ve,b as h,c as L}from"./TabsTrigger.vue_vue_type_script_setup_true_lang-BGTZyoFH.js";import{_ as x}from"./Separator.vue_vue_type_script_setup_true_lang-DiwEZyi3.js";import{_ as be}from"./TiptapEditor.vue_vue_type_style_index_0_lang-Cx1J9V7U.js";import"./index-CMWG4mbA.js";import"./AvatarFallback.vue_vue_type_script_setup_true_lang-ByVucR83.js";import"./AvatarImage.vue_vue_type_script_setup_true_lang-9OZOAxj9.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-D90ORJgI.js";import"./index-B_n2dl-_.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-ZLo4HemS.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-DuXcz617.js";const xe={class:"container mx-auto py-6 space-y-6"},ke={class:"flex items-center justify-between"},we={class:"text-3xl font-bold tracking-tight flex items-center gap-2"},Ve={class:"space-y-2"},Pe={class:"space-y-2"},Ue={class:"space-y-4"},Se={class:"flex gap-4"},Me={class:"flex items-center gap-2 cursor-pointer"},Ie={class:"flex items-center gap-2 cursor-pointer"},$e={key:0,class:"space-y-2"},Ce={key:1,class:"space-y-2"},Fe={class:"flex gap-2"},he={class:"flex-1"},Le=["disabled"],Ne={key:2,class:"mt-4"},Ee={class:"border rounded-lg p-4 bg-muted/50 flex items-center justify-center"},Be=["src"],Ae={class:"space-y-2"},Ke={class:"space-y-2"},Te={class:"space-y-2"},je={class:"space-y-2"},De={class:"rounded-lg bg-muted p-4 mt-6"},Ge={class:"text-sm text-muted-foreground flex items-start gap-2"},Oe={class:"space-y-2"},Re={class:"flex flex-wrap gap-2 min-h-[60px] p-4 border rounded-lg bg-muted/50"},Je=["onClick","disabled"],ze={key:0,class:"text-sm text-muted-foreground"},Ye={class:"space-y-2"},Xe={class:"flex gap-2"},qe={key:1,class:"flex justify-end"},yt=H({__name:"Index",props:{settings:{}},setup(R){const{isSuperAdmin:u,isAdmin:r}=ce(),N=R,E=()=>{Object.values(N.settings).flat().forEach(d=>{o.settings[d.key]=d.value})},o=Q({settings:{},site_logo:null});E(),T(()=>N.settings,()=>{E(),f.value=B()},{deep:!0});const B=()=>{const d=o.settings.payment_methods;if(!d)return[];try{return JSON.parse(d)}catch{return[]}},f=V(B()),g=V(""),c=V("url"),y=V(null),U=W(()=>y.value?y.value:o.settings.site_logo||null),J=d=>{const n=d.target.files?.[0];if(n){o.site_logo=n,o.settings.site_logo=null;const S=new FileReader;S.onload=q=>{y.value=q.target?.result},S.readAsDataURL(n)}},z=()=>{if(typeof window>"u")return;const d=window.document.getElementById("logo_upload");d&&d.click()},Y=()=>{if(o.site_logo=null,y.value=null,o.settings.site_logo=null,typeof document<"u"){const d=document.getElementById("logo_upload");d&&(d.value="")}};T(c,d=>{if(d==="url"&&(o.site_logo=null,y.value=null,typeof document<"u")){const t=document.getElementById("logo_upload");t&&(t.value="")}});const A=()=>{g.value.trim()&&!f.value.includes(g.value.trim())&&(f.value.push(g.value.trim()),o.settings.payment_methods=JSON.stringify(f.value),g.value="")},X=d=>{f.value=f.value.filter(t=>t!==d),o.settings.payment_methods=JSON.stringify(f.value)},K=()=>{o.post("/admin/settings",{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{if(y.value=null,o.site_logo=null,typeof document<"u"){const d=document.getElementById("logo_upload");d&&(d.value="")}fe.reload({only:[]})}})};return(d,t)=>(m(),k(ge,null,{default:l(()=>[s(e(Z),{title:"Pengaturan Ecommerce"}),a("div",xe,[a("div",ke,[a("div",null,[a("h1",we,[s(e(ee),{class:"h-8 w-8"}),t[11]||(t[11]=i(" Pengaturan Ecommerce ",-1))]),t[12]||(t[12]=a("p",{class:"text-muted-foreground mt-1"}," Kelola pengaturan situs, media sosial, dan metode pembayaran ",-1))]),e(u)||e(r)?(m(),k(e(w),{key:0,onClick:K,disabled:e(o).processing,size:"lg"},{default:l(()=>[s(e(j),{class:"h-4 w-4 mr-2"}),i(" "+P(e(o).processing?"Menyimpan...":"Simpan Perubahan"),1)]),_:1},8,["disabled"])):v("",!0)]),e(u)||e(r)?(m(),k(e(ye),{key:0,"default-value":"general",class:"space-y-6"},{default:l(()=>[s(e(ve),{class:"grid w-full grid-cols-3"},{default:l(()=>[s(e(h),{value:"general",class:"flex items-center gap-2"},{default:l(()=>[s(e(te),{class:"h-4 w-4"}),t[13]||(t[13]=a("span",null,"Umum",-1))]),_:1}),s(e(h),{value:"social",class:"flex items-center gap-2"},{default:l(()=>[s(e(D),{class:"h-4 w-4"}),t[14]||(t[14]=a("span",null,"Media Sosial",-1))]),_:1}),s(e(h),{value:"payment",class:"flex items-center gap-2"},{default:l(()=>[s(e(se),{class:"h-4 w-4"}),t[15]||(t[15]=a("span",null,"Pembayaran",-1))]),_:1})]),_:1}),s(e(L),{value:"general"},{default:l(()=>[s(e(M),null,{default:l(()=>[s(e(C),null,{default:l(()=>[s(e(F),null,{default:l(()=>[...t[16]||(t[16]=[i("Pengaturan Umum",-1)])]),_:1}),s(e($),null,{default:l(()=>[...t[17]||(t[17]=[i(" Atur informasi dasar situs seperti nama, deskripsi, dan logo ",-1)])]),_:1})]),_:1}),s(e(I),{class:"space-y-6"},{default:l(()=>[a("div",Ve,[s(e(p),{for:"site_name"},{default:l(()=>[...t[18]||(t[18]=[i("Nama Situs",-1)])]),_:1}),s(e(_),{id:"site_name",modelValue:e(o).settings.site_name,"onUpdate:modelValue":t[0]||(t[0]=n=>e(o).settings.site_name=n),placeholder:"PURANUSA",disabled:!(e(u)||e(r))},null,8,["modelValue","disabled"]),t[19]||(t[19]=a("p",{class:"text-xs text-muted-foreground"}," Nama situs yang akan ditampilkan di header dan footer ",-1))]),s(e(x)),a("div",Pe,[s(e(p),{for:"site_description"},{default:l(()=>[...t[20]||(t[20]=[i("Deskripsi Situs",-1)])]),_:1}),s(be,{modelValue:e(o).settings.site_description,"onUpdate:modelValue":t[1]||(t[1]=n=>e(o).settings.site_description=n),disabled:!(e(u)||e(r))},null,8,["modelValue","disabled"]),t[21]||(t[21]=a("p",{class:"text-xs text-muted-foreground"}," Deskripsi singkat tentang situs yang akan ditampilkan di footer ",-1))]),s(e(x)),a("div",Ue,[a("div",null,[s(e(p),null,{default:l(()=>[...t[22]||(t[22]=[i("Logo Situs",-1)])]),_:1}),t[23]||(t[23]=a("p",{class:"text-xs text-muted-foreground mt-1"}," Upload logo atau masukkan URL logo yang akan ditampilkan di situs ",-1))]),a("div",Se,[a("label",Me,[G(a("input",{type:"radio","onUpdate:modelValue":t[2]||(t[2]=n=>c.value=n),value:"url",class:"w-4 h-4"},null,512),[[O,c.value]]),t[24]||(t[24]=a("span",{class:"text-sm"},"Input URL",-1))]),a("label",Ie,[G(a("input",{type:"radio","onUpdate:modelValue":t[3]||(t[3]=n=>c.value=n),value:"upload",class:"w-4 h-4"},null,512),[[O,c.value]]),t[25]||(t[25]=a("span",{class:"text-sm"},"Upload File",-1))])]),c.value==="url"?(m(),b("div",$e,[s(e(_),{id:"site_logo_url",modelValue:e(o).settings.site_logo,"onUpdate:modelValue":t[4]||(t[4]=n=>e(o).settings.site_logo=n),placeholder:"https://example.com/logo.png",type:"url",disabled:!(e(u)||e(r))},null,8,["modelValue","disabled"])])):(m(),b("div",Ce,[a("div",Fe,[a("div",he,[a("input",{id:"logo_upload",type:"file",accept:"image/*",onChange:J,class:"hidden",disabled:!(e(u)||e(r))},null,40,Le),s(e(w),{type:"button",variant:"outline",class:"w-full",onClick:z,disabled:!(e(u)||e(r))},{default:l(()=>[s(e(ae),{class:"h-4 w-4 mr-2"}),i(" "+P(e(o).site_logo?"Ganti File":"Pilih File"),1)]),_:1},8,["disabled"])]),U.value?(m(),k(e(w),{key:0,type:"button",variant:"destructive",onClick:Y,disabled:!(e(u)||e(r))},{default:l(()=>[s(e(le),{class:"h-4 w-4"})]),_:1},8,["disabled"])):v("",!0)]),t[26]||(t[26]=a("p",{class:"text-xs text-muted-foreground"}," Format: JPG, PNG, GIF (Max: 2MB) ",-1))])),U.value?(m(),b("div",Ne,[s(e(p),{class:"mb-2 block"},{default:l(()=>[...t[27]||(t[27]=[i("Preview",-1)])]),_:1}),a("div",Ee,[a("img",{src:U.value,alt:"Logo Preview",class:"max-h-32 max-w-full object-contain",onError:t[5]||(t[5]=()=>{c.value==="url"&&(e(o).settings.site_logo=null)})},null,40,Be)])])):v("",!0)])]),_:1})]),_:1})]),_:1}),s(e(L),{value:"social"},{default:l(()=>[s(e(M),null,{default:l(()=>[s(e(C),null,{default:l(()=>[s(e(F),null,{default:l(()=>[...t[28]||(t[28]=[i("Media Sosial",-1)])]),_:1}),s(e($),null,{default:l(()=>[...t[29]||(t[29]=[i(" Kelola link media sosial yang akan ditampilkan di footer ",-1)])]),_:1})]),_:1}),s(e(I),{class:"space-y-6"},{default:l(()=>[a("div",Ae,[s(e(p),{for:"social_facebook",class:"flex items-center gap-2"},{default:l(()=>[s(e(D),{class:"h-4 w-4 text-blue-600"}),t[30]||(t[30]=i(" Facebook ",-1))]),_:1}),s(e(_),{id:"social_facebook",modelValue:e(o).settings.social_facebook,"onUpdate:modelValue":t[6]||(t[6]=n=>e(o).settings.social_facebook=n),placeholder:"https://facebook.com/puranusa",type:"url",disabled:!(e(u)||e(r))},null,8,["modelValue","disabled"])]),s(e(x)),a("div",Ke,[s(e(p),{for:"social_twitter",class:"flex items-center gap-2"},{default:l(()=>[s(e(oe),{class:"h-4 w-4 text-sky-500"}),t[31]||(t[31]=i(" Twitter ",-1))]),_:1}),s(e(_),{id:"social_twitter",modelValue:e(o).settings.social_twitter,"onUpdate:modelValue":t[7]||(t[7]=n=>e(o).settings.social_twitter=n),placeholder:"https://twitter.com/puranusa",type:"url",disabled:!(e(u)||e(r))},null,8,["modelValue","disabled"])]),s(e(x)),a("div",Te,[s(e(p),{for:"social_instagram",class:"flex items-center gap-2"},{default:l(()=>[s(e(ne),{class:"h-4 w-4 text-pink-600"}),t[32]||(t[32]=i(" Instagram ",-1))]),_:1}),s(e(_),{id:"social_instagram",modelValue:e(o).settings.social_instagram,"onUpdate:modelValue":t[8]||(t[8]=n=>e(o).settings.social_instagram=n),placeholder:"https://instagram.com/puranusa",type:"url",disabled:!(e(u)||e(r))},null,8,["modelValue","disabled"])]),s(e(x)),a("div",je,[s(e(p),{for:"social_youtube",class:"flex items-center gap-2"},{default:l(()=>[s(e(ie),{class:"h-4 w-4 text-red-600"}),t[33]||(t[33]=i(" YouTube ",-1))]),_:1}),s(e(_),{id:"social_youtube",modelValue:e(o).settings.social_youtube,"onUpdate:modelValue":t[9]||(t[9]=n=>e(o).settings.social_youtube=n),placeholder:"https://youtube.com/@puranusa",type:"url",disabled:!(e(u)||e(r))},null,8,["modelValue","disabled"])]),a("div",De,[a("p",Ge,[s(e(de),{class:"h-4 w-4 mt-0.5 flex-shrink-0"}),t[34]||(t[34]=a("span",null,"Kosongkan URL untuk menyembunyikan ikon media sosial dari footer",-1))])])]),_:1})]),_:1})]),_:1}),s(e(L),{value:"payment"},{default:l(()=>[s(e(M),null,{default:l(()=>[s(e(C),null,{default:l(()=>[s(e(F),null,{default:l(()=>[...t[35]||(t[35]=[i("Metode Pembayaran",-1)])]),_:1}),s(e($),null,{default:l(()=>[...t[36]||(t[36]=[i(" Kelola metode pembayaran yang akan ditampilkan di footer ",-1)])]),_:1})]),_:1}),s(e(I),{class:"space-y-6"},{default:l(()=>[a("div",Oe,[s(e(p),null,{default:l(()=>[...t[37]||(t[37]=[i("Metode Pembayaran Aktif",-1)])]),_:1}),a("div",Re,[(m(!0),b(ue,null,re(f.value,n=>(m(),k(e(_e),{key:n,variant:"secondary",class:"px-3 py-1.5 text-sm font-medium flex items-center gap-2"},{default:l(()=>[i(P(n)+" ",1),a("button",{onClick:S=>X(n),class:"hover:text-destructive transition-colors",type:"button",disabled:!(e(u)||e(r))}," × ",8,Je)]),_:2},1024))),128)),f.value.length===0?(m(),b("span",ze," Belum ada metode pembayaran ")):v("",!0)])]),s(e(x)),a("div",Ye,[s(e(p),{for:"new_payment_method"},{default:l(()=>[...t[38]||(t[38]=[i("Tambah Metode Pembayaran",-1)])]),_:1}),a("div",Xe,[s(e(_),{id:"new_payment_method",modelValue:g.value,"onUpdate:modelValue":t[10]||(t[10]=n=>g.value=n),placeholder:"Contoh: VISA, Mastercard, GoPay, OVO",onKeydown:me(pe(A,["prevent"]),["enter"]),disabled:!(e(u)||e(r))},null,8,["modelValue","onKeydown","disabled"]),s(e(w),{type:"button",onClick:A,disabled:!g.value.trim()||!(e(u)||e(r))},{default:l(()=>[...t[39]||(t[39]=[i(" Tambah ",-1)])]),_:1},8,["disabled"])]),t[40]||(t[40]=a("p",{class:"text-xs text-muted-foreground"}," Tekan Enter atau klik tombol Tambah untuk menambahkan metode pembayaran baru ",-1))]),t[41]||(t[41]=a("div",{class:"rounded-lg bg-muted p-4 mt-6"},[a("p",{class:"text-sm font-medium mb-2"},"Tips:"),a("ul",{class:"text-sm text-muted-foreground space-y-1 list-disc list-inside"},[a("li",null,"Gunakan nama singkat dan jelas (contoh: VISA, Mastercard)"),a("li",null,"Metode pembayaran akan ditampilkan di footer situs"),a("li",null,"Klik tanda × pada badge untuk menghapus metode")])],-1))]),_:1})]),_:1})]),_:1})]),_:1})):v("",!0),e(u)||e(r)?(m(),b("div",qe,[s(e(w),{onClick:K,disabled:e(o).processing,size:"lg"},{default:l(()=>[s(e(j),{class:"h-4 w-4 mr-2"}),i(" "+P(e(o).processing?"Menyimpan...":"Simpan Perubahan"),1)]),_:1},8,["disabled"])])):v("",!0)])]),_:1}))}});export{yt as default};
