import{_ as L,w as G,x as O,y as Q}from"./AppLayout.vue_vue_type_script_setup_true_lang-DRH_ebPA.js";import{d as j,ad as F,v as y,g as m,e as i,b as t,u as e,Z as W,w as a,s as n,t as k,F as z,x as K,aW as H,J as X,K as g,c as $,cJ as Z,bG as Y,X as ee,z as te,bu as ae,at as se,ax as le,r as R,p as re,E as ie,j as ne,a1 as oe,D as B}from"./vendor-DYgHfk08.js";import{_ as ue}from"./ConfirmDialog.vue_vue_type_script_setup_true_lang-c-fNq-Gn.js";import{_ as de}from"./Input.vue_vue_type_script_setup_true_lang-DkLAfZys.js";import{_ as N,a as U,b as M,c as P,d as w}from"./SelectValue.vue_vue_type_script_setup_true_lang-DYYIQ-He.js";import{_ as q}from"./index-C9h8PSdL.js";import{_ as T}from"./index-DBsPyq8S.js";import{a as b,_ as S}from"./CardContent.vue_vue_type_script_setup_true_lang-CnmozILa.js";import{_ as me}from"./CardDescription.vue_vue_type_script_setup_true_lang-D5WdCzuR.js";import{_ as h}from"./CardHeader.vue_vue_type_script_setup_true_lang-9jnBdHpK.js";import{u as fe}from"./usePermissions-QR2nm5rZ.js";import{_ as D}from"./CardTitle.vue_vue_type_script_setup_true_lang-CI_uH55v.js";import{_ as pe}from"./Pagination.vue_vue_type_script_setup_true_lang-CB_rUuml.js";import"./index-CSEUMRIG.js";import"./AvatarFallback.vue_vue_type_script_setup_true_lang-BuaobLrR.js";import"./AvatarImage.vue_vue_type_script_setup_true_lang-Bql-RK5d.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-Wm0IkLbg.js";import"./index-BUE9bFsX.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DRgKjkJL.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-D72m4PHj.js";import"./AlertDialogTitle.vue_vue_type_script_setup_true_lang-1hBkLUKH.js";const ve={class:"flex items-center gap-4"},ce={class:"relative flex-1"},ge=j({__name:"ReviewFilters",props:{search:{required:!0},searchModifiers:{},rating:{required:!0},ratingModifiers:{},approved:{required:!0},approvedModifiers:{}},emits:["update:search","update:rating","update:approved"],setup(r){const o=F(r,"search"),l=F(r,"rating"),p=F(r,"approved");return(f,s)=>(m(),y("div",ve,[i("div",ce,[t(e(W),{class:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),t(e(de),{modelValue:o.value,"onUpdate:modelValue":s[0]||(s[0]=_=>o.value=_),placeholder:"Cari produk atau pelanggan...",class:"pl-9"},null,8,["modelValue"])]),t(e(N),{modelValue:l.value,"onUpdate:modelValue":s[1]||(s[1]=_=>l.value=_)},{default:a(()=>[t(e(U),{class:"w-32"},{default:a(()=>[t(e(M),{placeholder:"Rating"})]),_:1}),t(e(P),null,{default:a(()=>[t(e(w),{value:"all"},{default:a(()=>[...s[3]||(s[3]=[n("Semua Rating",-1)])]),_:1}),t(e(w),{value:"5"},{default:a(()=>[...s[4]||(s[4]=[n("5 Bintang",-1)])]),_:1}),t(e(w),{value:"4"},{default:a(()=>[...s[5]||(s[5]=[n("4 Bintang",-1)])]),_:1}),t(e(w),{value:"3"},{default:a(()=>[...s[6]||(s[6]=[n("3 Bintang",-1)])]),_:1}),t(e(w),{value:"2"},{default:a(()=>[...s[7]||(s[7]=[n("2 Bintang",-1)])]),_:1}),t(e(w),{value:"1"},{default:a(()=>[...s[8]||(s[8]=[n("1 Bintang",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(e(N),{modelValue:p.value,"onUpdate:modelValue":s[2]||(s[2]=_=>p.value=_)},{default:a(()=>[t(e(U),{class:"w-40"},{default:a(()=>[t(e(M),{placeholder:"Status"})]),_:1}),t(e(P),null,{default:a(()=>[t(e(w),{value:"all"},{default:a(()=>[...s[9]||(s[9]=[n("Semua Status",-1)])]),_:1}),t(e(w),{value:"1"},{default:a(()=>[...s[10]||(s[10]=[n("Disetujui",-1)])]),_:1}),t(e(w),{value:"0"},{default:a(()=>[...s[11]||(s[11]=[n("Pending",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}}),_e={class:"flex items-center gap-1"},xe={key:0,class:"ml-1 text-sm text-muted-foreground"},we=j({__name:"StarRating",props:{rating:{},size:{default:"md"},showNumber:{type:Boolean,default:!1}},setup(r){const o={sm:"h-3 w-3",md:"h-4 w-4",lg:"h-5 w-5"};return(l,p)=>(m(),y("div",_e,[(m(),y(z,null,K(5,f=>t(e(H),{key:f,class:X([o[r.size],f<=r.rating?"fill-yellow-400 text-yellow-400":"fill-gray-200 text-gray-300"])},null,8,["class"])),64)),r.showNumber?(m(),y("span",xe,g(r.rating)+"/5 ",1)):k("",!0)]))}}),ye={class:"space-y-4"},$e={class:"flex items-start justify-between"},ke={class:"space-y-1"},be={class:"flex items-center gap-2"},Se={class:"font-semibold"},he={class:"space-y-2"},je={class:"font-medium"},Ce={class:"text-sm text-muted-foreground"},Re={class:"flex gap-2 pt-2 border-t"},De=j({__name:"ReviewCard",props:{reviews:{}},emits:["approve","reject","delete"],setup(r,{emit:o}){const{isSuperAdmin:l,isAdmin:p}=fe(),f=o,s=_=>new Date(_).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric"});return(_,v)=>(m(),y("div",ye,[r.reviews.length===0?(m(),$(e(S),{key:0},{default:a(()=>[t(e(b),{class:"py-12 text-center text-muted-foreground"},{default:a(()=>[...v[0]||(v[0]=[n(" Tidak ada review ditemukan ",-1)])]),_:1})]),_:1})):k("",!0),(m(!0),y(z,null,K(r.reviews,u=>(m(),$(e(S),{key:u.id},{default:a(()=>[t(e(h),null,{default:a(()=>[i("div",$e,[i("div",ke,[i("div",be,[i("h3",Se,g(u.product?.name||"N/A"),1),u.is_verified_purchase?(m(),$(e(q),{key:0,variant:"secondary",class:"gap-1"},{default:a(()=>[t(e(Z),{class:"h-3 w-3"}),v[1]||(v[1]=n(" Verified ",-1))]),_:1})):k("",!0)]),t(e(me),null,{default:a(()=>[n(" Oleh "+g(u.customer?.name||"N/A")+" Â· "+g(s(u.created_at)),1)]),_:2},1024)]),t(e(q),{variant:u.is_approved?"default":"secondary"},{default:a(()=>[n(g(u.is_approved?"Disetujui":"Pending"),1)]),_:2},1032,["variant"])])]),_:2},1024),t(e(b),{class:"space-y-4"},{default:a(()=>[i("div",he,[t(we,{rating:u.rating,"show-number":!0},null,8,["rating"]),i("h4",je,g(u.title),1),i("p",Ce,g(u.comment),1)]),i("div",Re,[!u.is_approved&&(e(l)||e(p))?(m(),$(e(T),{key:0,size:"sm",onClick:C=>f("approve",u.id)},{default:a(()=>[t(e(Y),{class:"mr-2 h-4 w-4"}),v[2]||(v[2]=n(" Setujui ",-1))]),_:1},8,["onClick"])):k("",!0),u.is_approved&&(e(l)||e(p))?(m(),$(e(T),{key:1,size:"sm",variant:"outline",onClick:C=>f("reject",u.id)},{default:a(()=>[t(e(ee),{class:"mr-2 h-4 w-4"}),v[3]||(v[3]=n(" Tolak ",-1))]),_:1},8,["onClick"])):k("",!0),t(e(T),{size:"sm",variant:"destructive",onClick:C=>f("delete",u.id)},{default:a(()=>[t(e(te),{class:"mr-2 h-4 w-4"}),v[4]||(v[4]=n(" Hapus ",-1))]),_:1},8,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]))}}),Ve={class:"grid gap-4 md:grid-cols-4"},Fe={class:"text-2xl font-bold"},Be={class:"text-2xl font-bold"},Te={class:"text-2xl font-bold"},ze={class:"text-2xl font-bold"},Ae=j({__name:"ReviewStatistics",props:{statistics:{}},setup(r){return(o,l)=>(m(),y("div",Ve,[t(e(S),null,{default:a(()=>[t(e(h),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:a(()=>[t(e(D),{class:"text-sm font-medium"},{default:a(()=>[...l[0]||(l[0]=[n("Total Review",-1)])]),_:1}),t(e(ae),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(e(b),null,{default:a(()=>[i("div",Fe,g(r.statistics.total),1),l[1]||(l[1]=i("p",{class:"text-xs text-muted-foreground"},"Semua review",-1))]),_:1})]),_:1}),t(e(S),null,{default:a(()=>[t(e(h),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:a(()=>[t(e(D),{class:"text-sm font-medium"},{default:a(()=>[...l[2]||(l[2]=[n("Disetujui",-1)])]),_:1}),t(e(se),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(e(b),null,{default:a(()=>[i("div",Be,g(r.statistics.approved),1),l[3]||(l[3]=i("p",{class:"text-xs text-muted-foreground"},"Review disetujui",-1))]),_:1})]),_:1}),t(e(S),null,{default:a(()=>[t(e(h),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:a(()=>[t(e(D),{class:"text-sm font-medium"},{default:a(()=>[...l[4]||(l[4]=[n("Pending",-1)])]),_:1}),t(e(le),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(e(b),null,{default:a(()=>[i("div",Te,g(r.statistics.pending),1),l[5]||(l[5]=i("p",{class:"text-xs text-muted-foreground"},"Menunggu moderasi",-1))]),_:1})]),_:1}),t(e(S),null,{default:a(()=>[t(e(h),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:a(()=>[t(e(D),{class:"text-sm font-medium"},{default:a(()=>[...l[6]||(l[6]=[n("Rating Rata-rata",-1)])]),_:1}),t(e(H),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(e(b),null,{default:a(()=>[i("div",ze,g(r.statistics.average_rating.toFixed(1)),1),l[7]||(l[7]=i("p",{class:"text-xs text-muted-foreground"},"Dari 5.0",-1))]),_:1})]),_:1})]))}}),Ne={class:"rounded-xl p-4 space-y-6 py-6"},lt=j({__name:"Index",props:{reviews:{},filters:{}},setup(r){const o=r,l=R(o.filters.search||""),p=R(o.filters.rating?.toString()||"all"),f=R(o.filters.approved===!0?"1":o.filters.approved===!1?"0":"all"),s=R({open:!1,review:null}),_=re(()=>{const x=o.reviews.data.filter(V=>V.is_approved).length,d=o.reviews.total,c=d-x,I=o.reviews.data.reduce((V,J)=>V+J.rating,0)/o.reviews.data.length||0;return{total:d,approved:x,pending:c,average_rating:I}}),v=x=>{B({}).post(G.url(x),{preserveScroll:!0})},u=x=>{B({}).post(O.url(x),{preserveScroll:!0})},C=x=>{const d=o.reviews.data.find(c=>c.id===x);s.value={open:!0,review:d||null}},E=()=>{if(!s.value.review)return;B({}).delete(Q.url(s.value.review.id),{preserveScroll:!0,onSuccess:()=>{s.value={open:!1,review:null}}})};let A;return ie([l,p,f],()=>{clearTimeout(A),A=setTimeout(()=>{ne.get("/admin/reviews",{search:l.value||void 0,rating:p.value!=="all"?p.value:void 0,approved:f.value!=="all"?f.value==="1":void 0},{preserveState:!0,preserveScroll:!0})},300)}),(x,d)=>(m(),y(z,null,[t(e(oe),{title:"Kelola Review"}),t(L,null,{default:a(()=>[i("div",Ne,[d[4]||(d[4]=i("div",null,[i("h2",{class:"text-3xl font-bold tracking-tight"},"Kelola Review Produk"),i("p",{class:"text-muted-foreground"},"Kelola dan moderasi review dari pelanggan")],-1)),t(Ae,{statistics:_.value},null,8,["statistics"]),t(ge,{search:l.value,"onUpdate:search":d[0]||(d[0]=c=>l.value=c),rating:p.value,"onUpdate:rating":d[1]||(d[1]=c=>p.value=c),approved:f.value,"onUpdate:approved":d[2]||(d[2]=c=>f.value=c)},null,8,["search","rating","approved"]),t(De,{reviews:r.reviews.data,onApprove:v,onReject:u,onDelete:C},null,8,["reviews"]),r.reviews.last_page>1?(m(),$(pe,{key:0,data:r.reviews,url:"/admin/reviews",filters:r.filters},null,8,["data","filters"])):k("",!0)]),t(ue,{open:s.value.open,"onUpdate:open":d[3]||(d[3]=c=>s.value.open=c),title:"Hapus Review?",description:`Apakah Anda yakin ingin menghapus review '${s.value.review?.title}'? Tindakan ini tidak dapat dibatalkan.`,"confirm-text":"Hapus","cancel-text":"Batal",variant:"destructive",onConfirm:E},null,8,["open","description"])]),_:1})],64))}});export{lt as default};
