import{d as F,r as _,al as U,p as z,q as G,c as p,g as o,w as r,b as l,e as u,u as a,a0 as q,a3 as D,s as L,Y as O,Z as Q,v as g,F as h,x,t as Y,y as B,n as e,ba as P,am as w,M as Z,$ as J,z as W,j as N,Q as M,B as X}from"./vendor-Bs9J5EGp.js";import{F as ee,C as A,_ as te,G as ae,H as se}from"./AppLayout.vue_vue_type_script_setup_true_lang-oneAxjQP.js";import{_ as m}from"./index-x8bH5uI1.js";import{_ as le}from"./Input.vue_vue_type_script_setup_true_lang-C0QWHcYM.js";import{_ as re}from"./index-D-h5IonM.js";import{_ as ne,a as oe,b as S,c as ie,d as ue,e as E}from"./TableHeader.vue_vue_type_script_setup_true_lang-DNf9F1mo.js";import{_ as ce}from"./ConfirmDialog.vue_vue_type_script_setup_true_lang-DGYHTd__.js";import{_ as de}from"./Pagination.vue_vue_type_script_setup_true_lang-CCJUtOTD.js";import"./index-DaR_mHDg.js";import"./AvatarFallback.vue_vue_type_script_setup_true_lang-rVF6Cf0K.js";import"./AvatarImage.vue_vue_type_script_setup_true_lang-CWDum3cA.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-CbrHoqZt.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-Ciactf0d.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-RkxObc6k.js";import"./AlertDialogTitle.vue_vue_type_script_setup_true_lang-Bhz_iUog.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-DdtG3tbZ.js";const pe={class:"rounded-xl p-4 space-y-6 py-6"},me={class:"mb-6 flex items-center justify-between"},fe={class:"mb-4 flex items-center gap-4"},_e={class:"relative flex-1"},ke={class:"rounded-md border"},ve={class:"flex flex-col items-center gap-2 text-muted-foreground"},Ae=F({__name:"Index",props:{stockists:{},filters:{},provinces:{}},setup(C){const c=C,k=_(c.filters.search||""),v=_(c.filters.sort_by||"created_at"),f=_(c.filters.sort_order||"desc"),V=_(c.filters.per_page||10),H=t=>{N.delete(se.url(t),{preserveScroll:!0,onSuccess:()=>{M.success("Status stokist berhasil dihapus")},onError:()=>{M.error("Gagal menghapus status stokist")}})},d=_({open:!1,data:null}),I=t=>{d.value={open:!0,data:t}},$=U(()=>{N.get(A.url(),{search:k.value,sort_by:v.value,sort_order:f.value,per_page:V.value},{preserveState:!0,preserveScroll:!0})},300),b=t=>{v.value===t?f.value=f.value==="asc"?"desc":"asc":(v.value=t,f.value="asc"),$()},R=()=>{d.value.data&&H(d.value.data.id)},T=t=>{switch(t){case 1:return{label:"Aktif",variant:"default"};case 2:return{label:"Pasif",variant:"secondary"};case 3:return{label:"Prospek",variant:"outline"};default:return{label:"Unknown",variant:"outline"}}},K=[{id:"index",header:()=>e("div",{class:"text-left"},"No"),cell:({row:t})=>{const s=t.index+1+(c.stockists.current_page-1)*c.stockists.per_page;return e("div",{class:"text-left"},s.toString())}},{accessorKey:"ewallet_id",header:()=>e(m,{variant:"ghost",onClick:()=>b("ewallet_id")},()=>["Ewallet ID",e(w,{class:"ml-2 h-4 w-4"})]),cell:({row:t})=>e("div",{class:"font-mono text-sm"},t.getValue("ewallet_id"))},{accessorKey:"name",header:()=>e(m,{variant:"ghost",onClick:()=>b("name")},()=>["Nama Stokist",e(w,{class:"ml-2 h-4 w-4"})]),cell:({row:t})=>e("div",{class:"flex items-center gap-2"},[e(P,{class:"h-4 w-4 text-primary"}),e("span",{},t.getValue("name"))])},{accessorKey:"email",header:"Email",cell:({row:t})=>e("div",{class:"text-sm"},t.getValue("email"))},{accessorKey:"phone",header:"Telepon",cell:({row:t})=>{const s=t.getValue("phone");return e("div",{class:"text-sm"},s||"-")}},{accessorKey:"stockist_kabupaten_name",header:()=>e(m,{variant:"ghost",onClick:()=>b("stockist_kabupaten_name")},()=>["Kabupaten/Kota",e(w,{class:"ml-2 h-4 w-4"})]),cell:({row:t})=>{const s=t.getValue("stockist_kabupaten_name");return s?e("div",{class:"flex items-center gap-2"},[e(Z,{class:"h-4 w-4 text-muted-foreground"}),e("span",{},s)]):e("div",{class:"text-muted-foreground"},"-")}},{accessorKey:"status",header:"Status",cell:({row:t})=>{const s=t.getValue("status"),{label:n,variant:i}=T(s);return e(re,{variant:i},()=>n)}},{id:"actions",header:()=>e("div",{class:"text-center"},"Aksi"),cell:({row:t})=>{const s=t.original;return e("div",{class:"flex items-center justify-center gap-2"},[e(D,{href:ae.url(s.id)},()=>e(m,{variant:"ghost",size:"icon",title:"Edit Kabupaten"},()=>e(J,{class:"h-4 w-4"}))),e(m,{variant:"ghost",size:"icon",onClick:()=>I(s),title:"Hapus Status Stokist"},()=>e(W,{class:"h-4 w-4 text-destructive"}))])}}],j=z(()=>c.stockists.data),y=G({get data(){return j.value},columns:K,getCoreRowModel:X(),manualSorting:!0,manualPagination:!0});return(t,s)=>(o(),p(te,null,{default:r(()=>[l(a(q),{title:"Kelola Stokist"}),u("div",pe,[u("div",me,[s[3]||(s[3]=u("div",null,[u("h1",{class:"text-3xl font-bold tracking-tight"},"Kelola Stokist"),u("p",{class:"text-muted-foreground"}," Kelola data stokist berdasarkan kabupaten/kota. Setiap kabupaten/kota hanya dapat memiliki 1 stokist. ")],-1)),l(a(D),{href:a(ee).url()},{default:r(()=>[l(a(m),null,{default:r(()=>[l(a(O),{class:"mr-2 h-4 w-4"}),s[2]||(s[2]=L(" Tambah Stokist ",-1))]),_:1})]),_:1},8,["href"])]),u("div",fe,[u("div",_e,[l(a(Q),{class:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),l(a(le),{modelValue:k.value,"onUpdate:modelValue":s[0]||(s[0]=n=>k.value=n),placeholder:"Cari nama, email, telepon, ewallet ID, atau kabupaten...",class:"pl-10",onInput:a($)},null,8,["modelValue","onInput"])])]),u("div",ke,[l(a(ne),null,{default:r(()=>[l(a(oe),null,{default:r(()=>[(o(!0),g(h,null,x(a(y).getHeaderGroups(),n=>(o(),p(a(S),{key:n.id},{default:r(()=>[(o(!0),g(h,null,x(n.headers,i=>(o(),p(a(ie),{key:i.id},{default:r(()=>[i.isPlaceholder?Y("",!0):(o(),p(a(B),{key:0,render:i.column.columnDef.header,props:i.getContext()},null,8,["render","props"]))]),_:2},1024))),128))]),_:2},1024))),128))]),_:1}),l(a(ue),null,{default:r(()=>[a(y).getRowModel().rows?.length?(o(!0),g(h,{key:0},x(a(y).getRowModel().rows,n=>(o(),p(a(S),{key:n.id},{default:r(()=>[(o(!0),g(h,null,x(n.getVisibleCells(),i=>(o(),p(a(E),{key:i.id},{default:r(()=>[l(a(B),{render:i.column.columnDef.cell,props:i.getContext()},null,8,["render","props"])]),_:2},1024))),128))]),_:2},1024))),128)):(o(),p(a(S),{key:1},{default:r(()=>[l(a(E),{colspan:K.length,class:"h-24 text-center"},{default:r(()=>[u("div",ve,[l(a(P),{class:"h-8 w-8"}),s[4]||(s[4]=u("span",null,"Belum ada stokist terdaftar.",-1))])]),_:1},8,["colspan"])]),_:1}))]),_:1})]),_:1})]),l(de,{data:C.stockists,url:a(A).url(),filters:{search:k.value,sort_by:v.value,sort_order:f.value,per_page:V.value}},null,8,["data","url","filters"])]),l(ce,{open:d.value.open,"onUpdate:open":s[1]||(s[1]=n=>d.value.open=n),title:"Hapus Status Stokist?",description:`Apakah Anda yakin ingin menghapus status stokist dari ${d.value.data?.name}? Pelanggan ini akan tetap ada namun tidak lagi menjadi stokist untuk ${d.value.data?.stockist_kabupaten_name}.`,"confirm-text":"Hapus","cancel-text":"Batal",variant:"destructive",onConfirm:R},null,8,["open","description"])]),_:1}))}});export{Ae as default};
