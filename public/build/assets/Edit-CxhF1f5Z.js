import{d as F,c as h,g as p,u as t,P as I,Q as K,R as M,w as s,U as G,r as b,D as J,e as r,b as l,E as Q,t as f,s as u,z as X,J as m,S as j,G as q,v as _,H as y,K as W,F as Y,x as Z,X as ee,j as z,N as w}from"./vendor-CraqpIJ-.js";import{_ as te}from"./AppLayout.vue_vue_type_script_setup_true_lang-BWDCecJb.js";import{_ as le}from"./PageBuilder.vue_vue_type_script_setup_true_lang-B2UacqOo.js";import{_ as T,a as A}from"./CardContent.vue_vue_type_script_setup_true_lang-DM70BYA8.js";import{_ as C}from"./CardDescription.vue_vue_type_script_setup_true_lang-D7Z_V3uH.js";import{_ as D}from"./CardHeader.vue_vue_type_script_setup_true_lang-D25MJpMC.js";import{_ as U}from"./CardTitle.vue_vue_type_script_setup_true_lang-l0wDcl-m.js";import{_ as v}from"./index-DPd1r_cX.js";import{_ as x}from"./Input.vue_vue_type_script_setup_true_lang-CqlAd_sW.js";import{_ as g}from"./Label.vue_vue_type_script_setup_true_lang-DvVX6MKG.js";import{_ as se}from"./Textarea.vue_vue_type_script_setup_true_lang-0xlPODzz.js";import{_ as ae}from"./Checkbox.vue_vue_type_script_setup_true_lang-ChiKY_-L.js";import{_ as ie}from"./index-COroZ9V9.js";import{_ as ue,a as oe,b as re,c as de,d as ne,e as pe,f as me,g as _e}from"./AlertDialogTitle.vue_vue_type_script_setup_true_lang-C2jUDPfA.js";import"./index-B7Ms5jW_.js";import"./AvatarFallback.vue_vue_type_script_setup_true_lang-BmdNsnpq.js";import"./AvatarImage.vue_vue_type_script_setup_true_lang-4BlfWucD.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-DA-zofsy.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BZHhRcHM.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-CQgGBfly.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-Bvtl-Sz4.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-C52OMNql.js";import"./DialogFooter.vue_vue_type_script_setup_true_lang-Bw5Af064.js";const fe=F({__name:"AlertDialogTrigger",props:{asChild:{type:Boolean},as:{}},setup(E){const n=E;return($,a)=>(p(),h(t(I),K(M(n)),{default:s(()=>[G($.$slots,"default")]),_:3},16))}}),ce={class:"container mx-auto py-6 space-y-6"},ve={class:"flex items-center justify-between"},ge={class:"flex items-center gap-4"},ke={href:"/admin/articles"},be={class:"flex gap-2"},ye={class:"grid gap-6 lg:grid-cols-3"},xe={class:"lg:col-span-2 space-y-6"},he={class:"space-y-2"},$e={key:0,class:"text-sm text-destructive"},Ve={class:"space-y-2"},Se={key:0,class:"text-sm text-destructive"},we={class:"text-sm text-muted-foreground"},Te={class:"space-y-2"},Ae={key:0,class:"text-sm text-destructive"},Ce={class:"text-sm text-muted-foreground"},De={class:"space-y-2"},Ue={key:0,class:"text-sm text-destructive"},Ee={class:"text-sm text-muted-foreground"},Be={class:"space-y-6"},Je={class:"flex items-center space-x-2"},Ne={key:0,class:"space-y-2"},Oe={key:0,class:"text-sm text-destructive"},Pe={class:"flex gap-2"},je={key:0,class:"flex flex-wrap gap-2"},ze={key:1,class:"text-sm text-muted-foreground"},dt=F({__name:"Edit",props:{article:{}},setup(E){const n=E,$=o=>{if(!o)return[];try{return JSON.parse(o).map(i=>({id:i.id||`block-${Date.now()}-${Math.random()}`,type:i.type,content:i.content||i.data||{}}))}catch{return[]}},a=b({title:n.article.title,slug:n.article.slug,seo_title:n.article.seo_title||"",seo_description:n.article.seo_description||"",content:n.article.content||"",blocks:$(n.article.content),tags:n.article.tags||[],is_published:n.article.is_published,published_at:n.article.published_at||""}),d=b({}),c=b(!1),k=b(!1),V=b(""),L=n.article.slug;J(()=>n.article.content,o=>{a.value.blocks=$(o)},{immediate:!1}),J(()=>a.value.title,o=>{(a.value.slug===N(a.value.title)||a.value.slug===L)&&(a.value.slug=N(o))}),J(()=>a.value.blocks,o=>{a.value.content=JSON.stringify(o)},{deep:!0});const N=o=>o.toString().toLowerCase().trim().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-"),O=()=>{const o=V.value.trim();o&&!a.value.tags.includes(o)&&(a.value.tags.push(o),V.value="")},H=o=>{a.value.tags.splice(o,1)},B=(o=null)=>{c.value=!0,d.value={};const e=o!==null?o:a.value.is_published,i=JSON.stringify(a.value.blocks),S={title:a.value.title,slug:a.value.slug,seo_title:a.value.seo_title,seo_description:a.value.seo_description,content:i,tags:a.value.tags,is_published:e,published_at:e&&!a.value.published_at?new Date().toISOString():a.value.published_at,_method:"PUT"};z.post(`/admin/articles/${n.article.id}`,S,{onSuccess:()=>{w.success("Artikel berhasil diperbarui")},onError:P=>{d.value=P,w.error("Terjadi kesalahan, periksa form Anda")},onFinish:()=>{c.value=!1}})},R=()=>{k.value=!0,z.delete(`/admin/articles/${n.article.id}`,{onSuccess:()=>{w.success("Artikel berhasil dihapus")},onError:()=>{w.error("Gagal menghapus artikel")},onFinish:()=>{k.value=!1}})};return(o,e)=>(p(),h(te,null,{default:s(()=>[r("div",ce,[r("div",ve,[r("div",ge,[l(t(v),{variant:"ghost",size:"icon","as-child":""},{default:s(()=>[r("a",ke,[l(t(Q),{class:"h-4 w-4"})])]),_:1}),e[11]||(e[11]=r("div",null,[r("h1",{class:"text-3xl font-bold tracking-tight"},"Edit Artikel"),r("p",{class:"text-muted-foreground"}," Perbarui konten artikel ")],-1))]),r("div",be,[l(t(ue),null,{default:s(()=>[l(t(fe),{"as-child":""},{default:s(()=>[l(t(v),{variant:"destructive",disabled:c.value||k.value},{default:s(()=>[l(t(X),{class:"mr-2 h-4 w-4"}),e[12]||(e[12]=u(" Hapus ",-1))]),_:1},8,["disabled"])]),_:1}),l(t(oe),null,{default:s(()=>[l(t(re),null,{default:s(()=>[l(t(de),null,{default:s(()=>[...e[13]||(e[13]=[u("Hapus Artikel?",-1)])]),_:1}),l(t(ne),null,{default:s(()=>[...e[14]||(e[14]=[u(" Artikel akan dipindahkan ke sampah dan dapat dipulihkan nanti. Apakah Anda yakin ingin melanjutkan? ",-1)])]),_:1})]),_:1}),l(t(pe),null,{default:s(()=>[l(t(me),null,{default:s(()=>[...e[15]||(e[15]=[u("Batal",-1)])]),_:1}),l(t(_e),{disabled:k.value,onClick:R},{default:s(()=>[u(m(k.value?"Menghapus...":"Hapus"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1}),a.value.is_published?(p(),h(t(v),{key:0,variant:"outline",disabled:c.value,onClick:e[0]||(e[0]=i=>B(!1))},{default:s(()=>[l(t(j),{class:"mr-2 h-4 w-4"}),e[16]||(e[16]=u(" Jadikan Draft ",-1))]),_:1},8,["disabled"])):f("",!0),l(t(v),{variant:"outline",disabled:c.value,onClick:e[1]||(e[1]=i=>B(null))},{default:s(()=>[l(t(j),{class:"mr-2 h-4 w-4"}),e[17]||(e[17]=u(" Simpan ",-1))]),_:1},8,["disabled"]),a.value.is_published?f("",!0):(p(),h(t(v),{key:1,disabled:c.value,onClick:e[2]||(e[2]=i=>B(!0))},{default:s(()=>[l(t(q),{class:"mr-2 h-4 w-4"}),e[18]||(e[18]=u(" Terbitkan ",-1))]),_:1},8,["disabled"]))])]),r("div",ye,[r("div",xe,[l(t(T),null,{default:s(()=>[l(t(D),null,{default:s(()=>[l(t(U),null,{default:s(()=>[...e[19]||(e[19]=[u("Informasi Dasar",-1)])]),_:1}),l(t(C),null,{default:s(()=>[...e[20]||(e[20]=[u("Detail utama artikel",-1)])]),_:1})]),_:1}),l(t(A),{class:"space-y-4"},{default:s(()=>[r("div",he,[l(t(g),{for:"title"},{default:s(()=>[...e[21]||(e[21]=[u("Judul Artikel",-1)])]),_:1}),l(t(x),{id:"title",modelValue:a.value.title,"onUpdate:modelValue":e[3]||(e[3]=i=>a.value.title=i),placeholder:"Masukkan judul artikel",class:y({"border-destructive":d.value.title})},null,8,["modelValue","class"]),d.value.title?(p(),_("p",$e,m(d.value.title),1)):f("",!0)]),r("div",Ve,[l(t(g),{for:"slug"},{default:s(()=>[...e[22]||(e[22]=[u("Slug (URL)",-1)])]),_:1}),l(t(x),{id:"slug",modelValue:a.value.slug,"onUpdate:modelValue":e[4]||(e[4]=i=>a.value.slug=i),placeholder:"slug-artikel",class:y({"border-destructive":d.value.slug})},null,8,["modelValue","class"]),d.value.slug?(p(),_("p",Se,m(d.value.slug),1)):f("",!0),r("p",we," URL: /articles/"+m(a.value.slug||"slug-artikel"),1)])]),_:1})]),_:1}),l(le,{modelValue:a.value.blocks,"onUpdate:modelValue":e[5]||(e[5]=i=>a.value.blocks=i)},null,8,["modelValue"]),l(t(T),null,{default:s(()=>[l(t(D),null,{default:s(()=>[l(t(U),null,{default:s(()=>[...e[23]||(e[23]=[u("SEO",-1)])]),_:1}),l(t(C),null,{default:s(()=>[...e[24]||(e[24]=[u("Optimasi mesin pencari",-1)])]),_:1})]),_:1}),l(t(A),{class:"space-y-4"},{default:s(()=>[r("div",Te,[l(t(g),{for:"seo_title"},{default:s(()=>[...e[25]||(e[25]=[u("Judul SEO",-1)])]),_:1}),l(t(x),{id:"seo_title",modelValue:a.value.seo_title,"onUpdate:modelValue":e[6]||(e[6]=i=>a.value.seo_title=i),placeholder:"Judul untuk mesin pencari",class:y({"border-destructive":d.value.seo_title})},null,8,["modelValue","class"]),d.value.seo_title?(p(),_("p",Ae,m(d.value.seo_title),1)):f("",!0),r("p",Ce,m(a.value.seo_title.length)+"/255 karakter ",1)]),r("div",De,[l(t(g),{for:"seo_description"},{default:s(()=>[...e[26]||(e[26]=[u("Deskripsi SEO",-1)])]),_:1}),l(t(se),{id:"seo_description",modelValue:a.value.seo_description,"onUpdate:modelValue":e[7]||(e[7]=i=>a.value.seo_description=i),placeholder:"Deskripsi singkat untuk mesin pencari",rows:"3",class:y({"border-destructive":d.value.seo_description})},null,8,["modelValue","class"]),d.value.seo_description?(p(),_("p",Ue,m(d.value.seo_description),1)):f("",!0),r("p",Ee,m(a.value.seo_description.length)+"/500 karakter ",1)])]),_:1})]),_:1})]),r("div",Be,[l(t(T),null,{default:s(()=>[l(t(D),null,{default:s(()=>[l(t(U),null,{default:s(()=>[...e[27]||(e[27]=[u("Publikasi",-1)])]),_:1}),l(t(C),null,{default:s(()=>[...e[28]||(e[28]=[u("Atur tanggal publikasi",-1)])]),_:1})]),_:1}),l(t(A),{class:"space-y-4"},{default:s(()=>[r("div",Je,[l(t(ae),{id:"is_published",checked:a.value.is_published,"onUpdate:checked":e[8]||(e[8]=i=>a.value.is_published=i)},null,8,["checked"]),l(t(g),{for:"is_published",class:"cursor-pointer"},{default:s(()=>[...e[29]||(e[29]=[u(" Terbitkan artikel ",-1)])]),_:1})]),a.value.is_published?(p(),_("div",Ne,[l(t(g),{for:"published_at"},{default:s(()=>[...e[30]||(e[30]=[u("Tanggal Terbit",-1)])]),_:1}),l(t(x),{id:"published_at",modelValue:a.value.published_at,"onUpdate:modelValue":e[9]||(e[9]=i=>a.value.published_at=i),type:"datetime-local",class:y({"border-destructive":d.value.published_at})},null,8,["modelValue","class"]),d.value.published_at?(p(),_("p",Oe,m(d.value.published_at),1)):f("",!0)])):f("",!0)]),_:1})]),_:1}),l(t(T),null,{default:s(()=>[l(t(D),null,{default:s(()=>[l(t(U),null,{default:s(()=>[...e[31]||(e[31]=[u("Tag",-1)])]),_:1}),l(t(C),null,{default:s(()=>[...e[32]||(e[32]=[u("Tambahkan tag untuk artikel",-1)])]),_:1})]),_:1}),l(t(A),{class:"space-y-4"},{default:s(()=>[r("div",Pe,[l(t(x),{modelValue:V.value,"onUpdate:modelValue":e[10]||(e[10]=i=>V.value=i),placeholder:"Tambah tag",onKeyup:W(O,["enter"])},null,8,["modelValue"]),l(t(v),{type:"button",size:"sm",onClick:O},{default:s(()=>[...e[33]||(e[33]=[u(" Tambah ",-1)])]),_:1})]),a.value.tags.length>0?(p(),_("div",je,[(p(!0),_(Y,null,Z(a.value.tags,(i,S)=>(p(),h(t(ie),{key:S,variant:"secondary",class:"cursor-pointer hover:bg-destructive hover:text-destructive-foreground",onClick:P=>H(S)},{default:s(()=>[u(m(i)+" ",1),l(t(ee),{class:"ml-1 h-3 w-3"})]),_:2},1032,["onClick"]))),128))])):(p(),_("p",ze," Belum ada tag "))]),_:1})]),_:1})])])])]),_:1}))}});export{dt as default};
