const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/PageBuilder-ujNAAitY.js","assets/PageBuilder.vue_vue_type_script_setup_true_lang-Df8hutHo.js","assets/CardContent.vue_vue_type_script_setup_true_lang-DMEXwOYw.js","assets/index-D-ZDeNW7.js","assets/vendor-zBKKL15G.js","assets/vendor-UvtswsZk.css","assets/CardDescription.vue_vue_type_script_setup_true_lang-D-xxhgKX.js","assets/CardHeader.vue_vue_type_script_setup_true_lang-DAmVrl_s.js","assets/CardTitle.vue_vue_type_script_setup_true_lang-BNxuRtlf.js","assets/Input.vue_vue_type_script_setup_true_lang-B8h33Tay.js","assets/Label.vue_vue_type_script_setup_true_lang-DvD9zvFD.js","assets/Textarea.vue_vue_type_script_setup_true_lang-CJXO7QmN.js","assets/SelectValue.vue_vue_type_script_setup_true_lang-DhBu_Vgs.js","assets/DialogTitle.vue_vue_type_script_setup_true_lang-BztoJuNo.js","assets/DialogFooter.vue_vue_type_script_setup_true_lang-DbfMc8As.js","assets/index-Bgaf6fPq.js","assets/PageBuilder-B_VyrZVp.css"])))=>i.map(i=>d[i]);
import{d as F,c as x,g as p,u as t,Q as K,R as M,U as G,w as s,V as Q,r as b,D as O,e as r,b as l,E as X,t as f,s as u,z as q,J as _,S as L,G as W,v as m,H as y,K as Y,N as Z,F as ee,x as te,X as le,j as z,P as S,_ as se}from"./vendor-zBKKL15G.js";import{_ as ae}from"./AppLayout.vue_vue_type_script_setup_true_lang-B4Q7M_yc.js";import{_ as w,a as T}from"./CardContent.vue_vue_type_script_setup_true_lang-DMEXwOYw.js";import{_ as A}from"./CardDescription.vue_vue_type_script_setup_true_lang-D-xxhgKX.js";import{_ as C}from"./CardHeader.vue_vue_type_script_setup_true_lang-DAmVrl_s.js";import{_ as D}from"./CardTitle.vue_vue_type_script_setup_true_lang-BNxuRtlf.js";import{_ as ie}from"./Skeleton.vue_vue_type_script_setup_true_lang-WEMsGz8i.js";import{_ as v}from"./index-D-ZDeNW7.js";import{_ as h}from"./Input.vue_vue_type_script_setup_true_lang-B8h33Tay.js";import{_ as g}from"./Label.vue_vue_type_script_setup_true_lang-DvD9zvFD.js";import{_ as ue}from"./Textarea.vue_vue_type_script_setup_true_lang-CJXO7QmN.js";import{_ as oe}from"./Checkbox.vue_vue_type_script_setup_true_lang-B0h4TtcN.js";import{_ as re}from"./index-Bgaf6fPq.js";import{_ as ne,a as de,b as pe,c as _e,d as me,e as fe,f as ce,g as ve}from"./AlertDialogTitle.vue_vue_type_script_setup_true_lang-ZdsPM9bJ.js";import"./index-DaR_mHDg.js";import"./AvatarFallback.vue_vue_type_script_setup_true_lang-kKofCkkG.js";import"./AvatarImage.vue_vue_type_script_setup_true_lang-CzoF4v2h.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-CJL3Y8wp.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-5qqdoF-N.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-DSZTc71l.js";const ge=F({__name:"AlertDialogTrigger",props:{asChild:{type:Boolean},as:{}},setup(U){const E=U;return(d,P)=>(p(),x(t(K),M(G(E)),{default:s(()=>[Q(d.$slots,"default")]),_:3},16))}}),ke={class:"container mx-auto py-6 space-y-6"},be={class:"flex items-center justify-between"},ye={class:"flex items-center gap-4"},he={href:"/admin/articles"},xe={class:"flex gap-2"},$e={class:"grid gap-6 lg:grid-cols-3"},Ve={class:"lg:col-span-2 space-y-6"},Se={class:"space-y-2"},we={key:0,class:"text-sm text-destructive"},Te={class:"space-y-2"},Ae={key:0,class:"text-sm text-destructive"},Ce={class:"text-sm text-muted-foreground"},De={class:"space-y-2"},Ue={key:0,class:"text-sm text-destructive"},Ee={class:"text-sm text-muted-foreground"},Pe={class:"space-y-2"},Be={key:0,class:"text-sm text-destructive"},Oe={class:"text-sm text-muted-foreground"},Je={class:"space-y-6"},Ne={class:"flex items-center space-x-2"},je={key:0,class:"space-y-2"},Le={key:0,class:"text-sm text-destructive"},ze={class:"flex gap-2"},Fe={key:0,class:"flex flex-wrap gap-2"},Re={key:1,class:"text-sm text-muted-foreground"},nt=F({__name:"Edit",props:{article:{}},setup(U){const E=Y({loader:()=>se(()=>import("./PageBuilder-ujNAAitY.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16])),loadingComponent:{template:'<div class="space-y-4"><Skeleton class="h-12 w-full" /><Skeleton class="h-64 w-full" /><Skeleton class="h-12 w-full" /></div>',components:{Skeleton:ie}}}),d=U,P=o=>{if(!o)return[];try{return JSON.parse(o).map(i=>({id:i.id||`block-${Date.now()}-${Math.random()}`,type:i.type,content:i.content||i.data||{}}))}catch{return[]}},a=b({title:d.article.title,slug:d.article.slug,seo_title:d.article.seo_title||"",seo_description:d.article.seo_description||"",content:d.article.content||"",blocks:P(d.article.content),tags:d.article.tags||[],is_published:d.article.is_published,published_at:d.article.published_at||""}),n=b({}),c=b(!1),k=b(!1),$=b(""),R=d.article.slug;O(()=>d.article.content,o=>{a.value.blocks=P(o)},{immediate:!1}),O(()=>a.value.title,o=>{(a.value.slug===J(a.value.title)||a.value.slug===R)&&(a.value.slug=J(o))}),O(()=>a.value.blocks,o=>{a.value.content=JSON.stringify(o)},{deep:!0});const J=o=>o.toString().toLowerCase().trim().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-"),N=()=>{const o=$.value.trim();o&&!a.value.tags.includes(o)&&(a.value.tags.push(o),$.value="")},H=o=>{a.value.tags.splice(o,1)},B=(o=null)=>{c.value=!0,n.value={};const e=o!==null?o:a.value.is_published,i=JSON.stringify(a.value.blocks),V={title:a.value.title,slug:a.value.slug,seo_title:a.value.seo_title,seo_description:a.value.seo_description,content:i,tags:a.value.tags,is_published:e,published_at:e&&!a.value.published_at?new Date().toISOString():a.value.published_at,_method:"PUT"};z.post(`/admin/articles/${d.article.id}`,V,{onSuccess:()=>{S.success("Artikel berhasil diperbarui")},onError:j=>{n.value=j,S.error("Terjadi kesalahan, periksa form Anda")},onFinish:()=>{c.value=!1}})},I=()=>{k.value=!0,z.delete(`/admin/articles/${d.article.id}`,{onSuccess:()=>{S.success("Artikel berhasil dihapus")},onError:()=>{S.error("Gagal menghapus artikel")},onFinish:()=>{k.value=!1}})};return(o,e)=>(p(),x(ae,null,{default:s(()=>[r("div",ke,[r("div",be,[r("div",ye,[l(t(v),{variant:"ghost",size:"icon","as-child":""},{default:s(()=>[r("a",he,[l(t(X),{class:"h-4 w-4"})])]),_:1}),e[11]||(e[11]=r("div",null,[r("h1",{class:"text-3xl font-bold tracking-tight"},"Edit Artikel"),r("p",{class:"text-muted-foreground"}," Perbarui konten artikel ")],-1))]),r("div",xe,[l(t(ne),null,{default:s(()=>[l(t(ge),{"as-child":""},{default:s(()=>[l(t(v),{variant:"destructive",disabled:c.value||k.value},{default:s(()=>[l(t(q),{class:"mr-2 h-4 w-4"}),e[12]||(e[12]=u(" Hapus ",-1))]),_:1},8,["disabled"])]),_:1}),l(t(de),null,{default:s(()=>[l(t(pe),null,{default:s(()=>[l(t(_e),null,{default:s(()=>[...e[13]||(e[13]=[u("Hapus Artikel?",-1)])]),_:1}),l(t(me),null,{default:s(()=>[...e[14]||(e[14]=[u(" Artikel akan dipindahkan ke sampah dan dapat dipulihkan nanti. Apakah Anda yakin ingin melanjutkan? ",-1)])]),_:1})]),_:1}),l(t(fe),null,{default:s(()=>[l(t(ce),null,{default:s(()=>[...e[15]||(e[15]=[u("Batal",-1)])]),_:1}),l(t(ve),{disabled:k.value,onClick:I},{default:s(()=>[u(_(k.value?"Menghapus...":"Hapus"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1}),a.value.is_published?(p(),x(t(v),{key:0,variant:"outline",disabled:c.value,onClick:e[0]||(e[0]=i=>B(!1))},{default:s(()=>[l(t(L),{class:"mr-2 h-4 w-4"}),e[16]||(e[16]=u(" Jadikan Draft ",-1))]),_:1},8,["disabled"])):f("",!0),l(t(v),{variant:"outline",disabled:c.value,onClick:e[1]||(e[1]=i=>B(null))},{default:s(()=>[l(t(L),{class:"mr-2 h-4 w-4"}),e[17]||(e[17]=u(" Simpan ",-1))]),_:1},8,["disabled"]),a.value.is_published?f("",!0):(p(),x(t(v),{key:1,disabled:c.value,onClick:e[2]||(e[2]=i=>B(!0))},{default:s(()=>[l(t(W),{class:"mr-2 h-4 w-4"}),e[18]||(e[18]=u(" Terbitkan ",-1))]),_:1},8,["disabled"]))])]),r("div",$e,[r("div",Ve,[l(t(w),null,{default:s(()=>[l(t(C),null,{default:s(()=>[l(t(D),null,{default:s(()=>[...e[19]||(e[19]=[u("Informasi Dasar",-1)])]),_:1}),l(t(A),null,{default:s(()=>[...e[20]||(e[20]=[u("Detail utama artikel",-1)])]),_:1})]),_:1}),l(t(T),{class:"space-y-4"},{default:s(()=>[r("div",Se,[l(t(g),{for:"title"},{default:s(()=>[...e[21]||(e[21]=[u("Judul Artikel",-1)])]),_:1}),l(t(h),{id:"title",modelValue:a.value.title,"onUpdate:modelValue":e[3]||(e[3]=i=>a.value.title=i),placeholder:"Masukkan judul artikel",class:y({"border-destructive":n.value.title})},null,8,["modelValue","class"]),n.value.title?(p(),m("p",we,_(n.value.title),1)):f("",!0)]),r("div",Te,[l(t(g),{for:"slug"},{default:s(()=>[...e[22]||(e[22]=[u("Slug (URL)",-1)])]),_:1}),l(t(h),{id:"slug",modelValue:a.value.slug,"onUpdate:modelValue":e[4]||(e[4]=i=>a.value.slug=i),placeholder:"slug-artikel",class:y({"border-destructive":n.value.slug})},null,8,["modelValue","class"]),n.value.slug?(p(),m("p",Ae,_(n.value.slug),1)):f("",!0),r("p",Ce," URL: /articles/"+_(a.value.slug||"slug-artikel"),1)])]),_:1})]),_:1}),l(t(E),{modelValue:a.value.blocks,"onUpdate:modelValue":e[5]||(e[5]=i=>a.value.blocks=i)},null,8,["modelValue"]),l(t(w),null,{default:s(()=>[l(t(C),null,{default:s(()=>[l(t(D),null,{default:s(()=>[...e[23]||(e[23]=[u("SEO",-1)])]),_:1}),l(t(A),null,{default:s(()=>[...e[24]||(e[24]=[u("Optimasi mesin pencari",-1)])]),_:1})]),_:1}),l(t(T),{class:"space-y-4"},{default:s(()=>[r("div",De,[l(t(g),{for:"seo_title"},{default:s(()=>[...e[25]||(e[25]=[u("Judul SEO",-1)])]),_:1}),l(t(h),{id:"seo_title",modelValue:a.value.seo_title,"onUpdate:modelValue":e[6]||(e[6]=i=>a.value.seo_title=i),placeholder:"Judul untuk mesin pencari",class:y({"border-destructive":n.value.seo_title})},null,8,["modelValue","class"]),n.value.seo_title?(p(),m("p",Ue,_(n.value.seo_title),1)):f("",!0),r("p",Ee,_(a.value.seo_title.length)+"/255 karakter ",1)]),r("div",Pe,[l(t(g),{for:"seo_description"},{default:s(()=>[...e[26]||(e[26]=[u("Deskripsi SEO",-1)])]),_:1}),l(t(ue),{id:"seo_description",modelValue:a.value.seo_description,"onUpdate:modelValue":e[7]||(e[7]=i=>a.value.seo_description=i),placeholder:"Deskripsi singkat untuk mesin pencari",rows:"3",class:y({"border-destructive":n.value.seo_description})},null,8,["modelValue","class"]),n.value.seo_description?(p(),m("p",Be,_(n.value.seo_description),1)):f("",!0),r("p",Oe,_(a.value.seo_description.length)+"/500 karakter ",1)])]),_:1})]),_:1})]),r("div",Je,[l(t(w),null,{default:s(()=>[l(t(C),null,{default:s(()=>[l(t(D),null,{default:s(()=>[...e[27]||(e[27]=[u("Publikasi",-1)])]),_:1}),l(t(A),null,{default:s(()=>[...e[28]||(e[28]=[u("Atur tanggal publikasi",-1)])]),_:1})]),_:1}),l(t(T),{class:"space-y-4"},{default:s(()=>[r("div",Ne,[l(t(oe),{id:"is_published",checked:a.value.is_published,"onUpdate:checked":e[8]||(e[8]=i=>a.value.is_published=i)},null,8,["checked"]),l(t(g),{for:"is_published",class:"cursor-pointer"},{default:s(()=>[...e[29]||(e[29]=[u(" Terbitkan artikel ",-1)])]),_:1})]),a.value.is_published?(p(),m("div",je,[l(t(g),{for:"published_at"},{default:s(()=>[...e[30]||(e[30]=[u("Tanggal Terbit",-1)])]),_:1}),l(t(h),{id:"published_at",modelValue:a.value.published_at,"onUpdate:modelValue":e[9]||(e[9]=i=>a.value.published_at=i),type:"datetime-local",class:y({"border-destructive":n.value.published_at})},null,8,["modelValue","class"]),n.value.published_at?(p(),m("p",Le,_(n.value.published_at),1)):f("",!0)])):f("",!0)]),_:1})]),_:1}),l(t(w),null,{default:s(()=>[l(t(C),null,{default:s(()=>[l(t(D),null,{default:s(()=>[...e[31]||(e[31]=[u("Tag",-1)])]),_:1}),l(t(A),null,{default:s(()=>[...e[32]||(e[32]=[u("Tambahkan tag untuk artikel",-1)])]),_:1})]),_:1}),l(t(T),{class:"space-y-4"},{default:s(()=>[r("div",ze,[l(t(h),{modelValue:$.value,"onUpdate:modelValue":e[10]||(e[10]=i=>$.value=i),placeholder:"Tambah tag",onKeyup:Z(N,["enter"])},null,8,["modelValue"]),l(t(v),{type:"button",size:"sm",onClick:N},{default:s(()=>[...e[33]||(e[33]=[u(" Tambah ",-1)])]),_:1})]),a.value.tags.length>0?(p(),m("div",Fe,[(p(!0),m(ee,null,te(a.value.tags,(i,V)=>(p(),x(t(re),{key:V,variant:"secondary",class:"cursor-pointer hover:bg-destructive hover:text-destructive-foreground",onClick:j=>H(V)},{default:s(()=>[u(_(i)+" ",1),l(t(le),{class:"ml-1 h-3 w-3"})]),_:2},1032,["onClick"]))),128))])):(p(),m("p",Re," Belum ada tag "))]),_:1})]),_:1})])])])]),_:1}))}});export{nt as default};
