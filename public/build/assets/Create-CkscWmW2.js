import{d as j,D as E,r as V,p as S,v as d,g as i,b as a,u as e,a0 as F,w as r,e as o,a3 as $,s as l,G as A,ad as R,t as m,J as f,K as u,ag as z,ak as G,Z as I,F as M,x as J,Q as P}from"./vendor-Bs9J5EGp.js";import{i as C,_ as H,s as Q}from"./AppLayout.vue_vue_type_script_setup_true_lang-oneAxjQP.js";import{_ as c}from"./index-x8bH5uI1.js";import{_ as g}from"./Input.vue_vue_type_script_setup_true_lang-C0QWHcYM.js";import{_ as p}from"./Label.vue_vue_type_script_setup_true_lang-B670ab_y.js";import{_ as U,a as L}from"./CardContent.vue_vue_type_script_setup_true_lang-BWHkBrZf.js";import{_ as B}from"./CardDescription.vue_vue_type_script_setup_true_lang-BVqqwHu4.js";import{_ as N}from"./CardHeader.vue_vue_type_script_setup_true_lang-CiO4by8s.js";import{_ as q}from"./CardTitle.vue_vue_type_script_setup_true_lang-DyZsrvsj.js";import{_ as Z,a as O,b as W,c as X,d as y}from"./SelectValue.vue_vue_type_script_setup_true_lang-DdtG3tbZ.js";import"./index-DaR_mHDg.js";import"./AvatarFallback.vue_vue_type_script_setup_true_lang-rVF6Cf0K.js";import"./AvatarImage.vue_vue_type_script_setup_true_lang-CWDum3cA.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-CbrHoqZt.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-Ciactf0d.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-RkxObc6k.js";const Y={class:"rounded-xl p-4 space-y-6 py-6"},ee={class:"flex items-center justify-between"},se={class:"grid gap-4 md:grid-cols-2"},te={class:"space-y-2"},ae={key:0,class:"text-sm text-destructive"},oe={class:"space-y-2"},re={key:0,class:"text-sm text-destructive"},ne={class:"space-y-2"},le={key:0,class:"text-sm text-destructive"},de={class:"space-y-2"},ie={key:0,class:"text-sm text-destructive"},ue={class:"space-y-2"},me={key:0,class:"text-sm text-destructive"},pe={class:"space-y-2"},fe={key:0,class:"text-sm text-destructive"},ge={class:"space-y-2"},xe={class:"space-y-2"},_e={class:"grid gap-4 md:grid-cols-2"},ve={class:"space-y-2"},ke={class:"relative"},be={class:"relative"},ce={key:0,class:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md border bg-popover p-1 shadow-md"},ye=["onClick"],we={class:"font-medium"},Ve={class:"text-xs text-muted-foreground"},Se={key:0,class:"mt-2 rounded-md border bg-muted p-3"},$e={class:"text-sm font-medium"},Me={class:"text-xs text-muted-foreground"},Pe={key:1,class:"text-sm text-destructive"},Ce={class:"space-y-2"},Ue={key:0,class:"text-sm text-destructive"},Le={class:"flex justify-end gap-4"},Qe=j({__name:"Create",props:{customers:{}},setup(D){const k=D,t=E({name:"",username:"",email:"",phone:"",password:"",password_confirmation:"",sponsor_id:null,status:3,registration_amount:1e5,description:""}),_=V(""),v=V(!1),b=S(()=>k.customers.find(x=>x.id===t.sponsor_id)),w=S(()=>{if(!_.value)return k.customers;const x=_.value.toLowerCase();return k.customers.filter(s=>s.name.toLowerCase().includes(x)||s.ewallet_id.toLowerCase().includes(x))}),K=x=>{t.sponsor_id=x.id,v.value=!1,_.value=""},h=()=>{typeof window<"u"&&window.setTimeout(()=>{v.value=!1},200)},T=()=>{t.post(Q.url(),{preserveScroll:!0,onSuccess:()=>{P.success("Pelanggan berhasil didaftarkan")},onError:()=>{P.error("Gagal mendaftarkan pelanggan")}})};return(x,s)=>(i(),d(M,null,[a(e(F),{title:"Tambah Pelanggan"}),a(H,null,{default:r(()=>[o("div",Y,[o("div",ee,[s[12]||(s[12]=o("div",null,[o("h1",{class:"text-3xl font-bold"},"Tambah Pelanggan"),o("p",{class:"mt-2 text-muted-foreground"}," Daftarkan pelanggan baru ke dalam sistem MLM ")],-1)),a(e($),{href:e(C).url()},{default:r(()=>[a(e(c),{variant:"outline"},{default:r(()=>[a(e(A),{class:"mr-2 h-4 w-4"}),s[11]||(s[11]=l(" Kembali ",-1))]),_:1})]),_:1},8,["href"])]),o("form",{onSubmit:R(T,["prevent"]),class:"space-y-6"},[a(e(U),null,{default:r(()=>[a(e(N),null,{default:r(()=>[a(e(q),null,{default:r(()=>[...s[13]||(s[13]=[l("Informasi Pribadi",-1)])]),_:1}),a(e(B),null,{default:r(()=>[...s[14]||(s[14]=[l(" Data pribadi pelanggan yang akan didaftarkan ",-1)])]),_:1})]),_:1}),a(e(L),{class:"space-y-4"},{default:r(()=>[o("div",se,[o("div",te,[a(e(p),{for:"name"},{default:r(()=>[...s[15]||(s[15]=[l("Nama Lengkap *",-1)])]),_:1}),a(e(g),{id:"name",modelValue:e(t).name,"onUpdate:modelValue":s[0]||(s[0]=n=>e(t).name=n),placeholder:"Masukkan nama lengkap",class:f({"border-destructive":e(t).errors.name}),required:""},null,8,["modelValue","class"]),s[16]||(s[16]=o("p",{class:"text-xs text-muted-foreground"}," Nama lengkap sesuai identitas, maksimal 255 karakter ",-1)),e(t).errors.name?(i(),d("p",ae,u(e(t).errors.name),1)):m("",!0)]),o("div",oe,[a(e(p),{for:"username"},{default:r(()=>[...s[17]||(s[17]=[l("Username *",-1)])]),_:1}),a(e(g),{id:"username",modelValue:e(t).username,"onUpdate:modelValue":s[1]||(s[1]=n=>e(t).username=n),placeholder:"contoh: johndoe123",class:f({"border-destructive":e(t).errors.username}),required:""},null,8,["modelValue","class"]),s[18]||(s[18]=o("p",{class:"text-xs text-muted-foreground"}," Username untuk login. Hanya boleh huruf, angka, dash (-) dan underscore (_) ",-1)),e(t).errors.username?(i(),d("p",re,u(e(t).errors.username),1)):m("",!0)]),o("div",ne,[a(e(p),{for:"email"},{default:r(()=>[...s[19]||(s[19]=[l("Email *",-1)])]),_:1}),a(e(g),{id:"email",modelValue:e(t).email,"onUpdate:modelValue":s[2]||(s[2]=n=>e(t).email=n),type:"email",placeholder:"nama@email.com",class:f({"border-destructive":e(t).errors.email}),required:""},null,8,["modelValue","class"]),s[20]||(s[20]=o("p",{class:"text-xs text-muted-foreground"}," Email aktif untuk menerima notifikasi dan verifikasi akun ",-1)),e(t).errors.email?(i(),d("p",le,u(e(t).errors.email),1)):m("",!0)]),o("div",de,[a(e(p),{for:"phone"},{default:r(()=>[...s[21]||(s[21]=[l("No. Telepon",-1)])]),_:1}),a(e(g),{id:"phone",modelValue:e(t).phone,"onUpdate:modelValue":s[3]||(s[3]=n=>e(t).phone=n),placeholder:"08xxxxxxxxxx",class:f({"border-destructive":e(t).errors.phone})},null,8,["modelValue","class"]),s[22]||(s[22]=o("p",{class:"text-xs text-muted-foreground"}," Nomor telepon aktif (opsional), maksimal 20 karakter ",-1)),e(t).errors.phone?(i(),d("p",ie,u(e(t).errors.phone),1)):m("",!0)]),o("div",ue,[a(e(p),{for:"registration_amount"},{default:r(()=>[...s[23]||(s[23]=[l("Biaya Registrasi *",-1)])]),_:1}),a(e(g),{id:"registration_amount",modelValue:e(t).registration_amount,"onUpdate:modelValue":s[4]||(s[4]=n=>e(t).registration_amount=n),modelModifiers:{number:!0},type:"number",min:"0",step:"1000",class:f({"border-destructive":e(t).errors.registration_amount}),required:""},null,8,["modelValue","class"]),s[24]||(s[24]=o("p",{class:"text-xs text-muted-foreground"}," Biaya pendaftaran dalam Rupiah (Rp), minimal 0 ",-1)),e(t).errors.registration_amount?(i(),d("p",me,u(e(t).errors.registration_amount),1)):m("",!0)]),o("div",pe,[a(e(p),{for:"password"},{default:r(()=>[...s[25]||(s[25]=[l("Password *",-1)])]),_:1}),a(e(g),{id:"password",modelValue:e(t).password,"onUpdate:modelValue":s[5]||(s[5]=n=>e(t).password=n),type:"password",placeholder:"Minimal 8 karakter",class:f({"border-destructive":e(t).errors.password}),required:""},null,8,["modelValue","class"]),s[26]||(s[26]=o("p",{class:"text-xs text-muted-foreground"}," Password minimal 8 karakter, gunakan kombinasi huruf dan angka ",-1)),e(t).errors.password?(i(),d("p",fe,u(e(t).errors.password),1)):m("",!0)]),o("div",ge,[a(e(p),{for:"password_confirmation"},{default:r(()=>[...s[27]||(s[27]=[l("Konfirmasi Password *",-1)])]),_:1}),a(e(g),{id:"password_confirmation",modelValue:e(t).password_confirmation,"onUpdate:modelValue":s[6]||(s[6]=n=>e(t).password_confirmation=n),type:"password",placeholder:"Ulangi password",required:""},null,8,["modelValue"]),s[28]||(s[28]=o("p",{class:"text-xs text-muted-foreground"}," Ketik ulang password yang sama untuk konfirmasi ",-1))])]),o("div",xe,[a(e(p),{for:"description"},{default:r(()=>[...s[29]||(s[29]=[l("Keterangan",-1)])]),_:1}),z(o("textarea",{id:"description","onUpdate:modelValue":s[7]||(s[7]=n=>e(t).description=n),placeholder:"Keterangan tambahan (opsional)",rows:"3",class:"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm"},null,512),[[G,e(t).description]]),s[30]||(s[30]=o("p",{class:"text-xs text-muted-foreground"}," Catatan tambahan tentang pelanggan, seperti sumber referral atau informasi penting lainnya ",-1))])]),_:1})]),_:1}),a(e(U),null,{default:r(()=>[a(e(N),null,{default:r(()=>[a(e(q),null,{default:r(()=>[...s[31]||(s[31]=[l("Struktur Jaringan MLM",-1)])]),_:1}),a(e(B),null,{default:r(()=>[...s[32]||(s[32]=[l(" Pilih sponsor dan status pelanggan ",-1)])]),_:1})]),_:1}),a(e(L),{class:"space-y-4"},{default:r(()=>[o("div",_e,[o("div",ve,[a(e(p),{for:"sponsor"},{default:r(()=>[...s[33]||(s[33]=[l("Sponsor",-1)])]),_:1}),o("div",ke,[o("div",be,[a(e(g),{modelValue:_.value,"onUpdate:modelValue":s[8]||(s[8]=n=>_.value=n),onFocus:s[9]||(s[9]=n=>v.value=!0),onBlur:h,placeholder:"Cari sponsor berdasarkan nama atau ID...",class:f({"border-destructive":e(t).errors.sponsor_id})},null,8,["modelValue","class"]),a(e(I),{class:"absolute right-3 top-3 h-4 w-4 text-muted-foreground"})]),v.value&&w.value.length>0?(i(),d("div",ce,[(i(!0),d(M,null,J(w.value,n=>(i(),d("button",{key:n.id,type:"button",onClick:Be=>K(n),class:"w-full rounded px-3 py-2 text-left text-sm hover:bg-accent"},[o("div",we,u(n.name),1),o("div",Ve,u(n.ewallet_id),1)],8,ye))),128))])):m("",!0)]),b.value?(i(),d("div",Se,[o("p",$e,u(b.value.name),1),o("p",Me,u(b.value.ewallet_id),1)])):m("",!0),s[34]||(s[34]=o("p",{class:"text-xs text-muted-foreground"}," Member yang merekomendasikan pelanggan ini (opsional). Kosongkan jika tidak ada sponsor ",-1)),e(t).errors.sponsor_id?(i(),d("p",Pe,u(e(t).errors.sponsor_id),1)):m("",!0)]),o("div",Ce,[a(e(p),{for:"status"},{default:r(()=>[...s[35]||(s[35]=[l("Status *",-1)])]),_:1}),a(e(Z),{modelValue:e(t).status,"onUpdate:modelValue":s[10]||(s[10]=n=>e(t).status=n)},{default:r(()=>[a(e(O),{class:f({"border-destructive":e(t).errors.status})},{default:r(()=>[a(e(W),{placeholder:"Pilih status"})]),_:1},8,["class"]),a(e(X),null,{default:r(()=>[a(e(y),{value:3},{default:r(()=>[...s[36]||(s[36]=[l("Prospek",-1)])]),_:1}),a(e(y),{value:2},{default:r(()=>[...s[37]||(s[37]=[l("Pasif",-1)])]),_:1}),a(e(y),{value:1},{default:r(()=>[...s[38]||(s[38]=[l("Aktif",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"]),s[39]||(s[39]=o("p",{class:"text-xs text-muted-foreground"},[o("strong",null,"Prospek:"),l(" Calon member, belum masuk jaringan MLM"),o("br"),o("strong",null,"Pasif:"),l(" Sudah terdaftar tapi belum aktif bertransaksi"),o("br"),o("strong",null,"Aktif:"),l(" Member aktif dengan akses penuh ke sistem ")],-1)),e(t).errors.status?(i(),d("p",Ue,u(e(t).errors.status),1)):m("",!0)])])]),_:1})]),_:1}),o("div",Le,[a(e($),{href:e(C).url()},{default:r(()=>[a(e(c),{type:"button",variant:"outline"},{default:r(()=>[...s[40]||(s[40]=[l(" Batal ",-1)])]),_:1})]),_:1},8,["href"]),a(e(c),{type:"submit",disabled:e(t).processing},{default:r(()=>[l(u(e(t).processing?"Menyimpan...":"Simpan Pelanggan"),1)]),_:1},8,["disabled"])])],32)])]),_:1})],64))}});export{Qe as default};
