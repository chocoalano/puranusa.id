import{_ as j}from"./index-CRPqrtU2.js";import{_ as V,v as P}from"./index-B4cH97KR.js";import{_ as $,a as D}from"./CardContent.vue_vue_type_script_setup_true_lang-LKEwQoWP.js";import{_ as k}from"./CardHeader.vue_vue_type_script_setup_true_lang-N3E9ALN1.js";import{_ as M}from"./CardTitle.vue_vue_type_script_setup_true_lang-Mk0zvokq.js";import{_ as Y,a as ee,b as te}from"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-D90ORJgI.js";import{_ as ae}from"./DropdownMenuCheckboxItem.vue_vue_type_script_setup_true_lang-BsPeayAj.js";import{_ as se}from"./Input.vue_vue_type_script_setup_true_lang-ZVESK4JK.js";import{_ as le}from"./Pagination.vue_vue_type_script_setup_true_lang-CQM_G0lK.js";import{_ as A,a as K,b as L,c as U,d as g}from"./SelectValue.vue_vue_type_script_setup_true_lang-BqISnkMA.js";import{_ as re,a as oe,b as E,c as de,d as ne,e as B}from"./TableHeader.vue_vue_type_script_setup_true_lang-BhZiDflO.js";import{_ as ue}from"./AppLayout.vue_vue_type_script_setup_true_lang-DZrLECOS.js";import{d as ie,r as y,q as me,E as O,j as z,c as f,g as u,w as s,b as a,e as d,u as e,a1 as fe,t as H,s as i,a2 as ce,K as b,aB as ge,a3 as pe,aL as _e,Z as ve,v as w,F as S,x as h,aa as xe,y as q,n as o,ao as G,aq as ye,a4 as be,aM as we,A as Se,B as he}from"./vendor-FclwbLvj.js";import{u as Ce}from"./usePermissions-DzkwVpfD.js";import"./index-CMWG4mbA.js";import"./AvatarFallback.vue_vue_type_script_setup_true_lang-ByVucR83.js";import"./AvatarImage.vue_vue_type_script_setup_true_lang-9OZOAxj9.js";import"./index-B_n2dl-_.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-ZLo4HemS.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-DuXcz617.js";const Ve={class:"rounded-xl p-4 space-y-6 py-6"},$e={class:"grid gap-4 md:grid-cols-4"},De={class:"text-2xl font-bold"},ke={class:"text-2xl font-bold"},Me={class:"text-2xl font-bold"},Pe={class:"text-2xl font-bold"},Ee={class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},Ie={class:"flex flex-1 gap-4"},Re={class:"relative flex-1 max-w-sm"},Fe={class:"rounded-md border"},tt=ie({__name:"Index",props:{orders:{},statistics:{},paymentMethods:{},filters:{}},setup(n){const{isSuperAdmin:Z,isAdmin:J}=Ce(),p=n,Q=[{title:"Semua Pesanan",href:"/admin/orders"}],x=y(p.filters.search||""),c=y(p.filters.status||"all"),_=y(p.filters.payment_method||"all"),v=y([{id:p.filters.sort_by,desc:p.filters.sort_order==="desc"}]),I=y([]),R=y({}),F=l=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(l),W=l=>new Date(l).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),X=l=>{const t=l.toUpperCase();return{PENDING:"secondary",PROCESSING:"outline",SHIPPED:"default",DELIVERED:"default",CANCELLED:"destructive",CANCELED:"destructive",COMPLETED:"default",PAID:"default"}[t]||"secondary"},N=[{id:"index",header:()=>o("div",{class:"w-12"},"No"),cell:({row:l})=>{const t=l.index+1+(p.orders.current_page-1)*p.orders.per_page;return o("div",{class:"font-medium"},t)}},{accessorKey:"order_no",header:({column:l})=>o(V,{variant:"ghost",onClick:()=>l.toggleSorting(l.getIsSorted()==="asc"),class:"-ml-4"},()=>["Order Number",o(G,{class:"ml-2 h-4 w-4"})]),cell:({row:l})=>o("div",[o("div",{class:"font-medium font-mono"},l.original.order_no),o("div",{class:"text-xs text-muted-foreground"},l.original.customer.name)])},{accessorKey:"grand_total",header:()=>o("div",{class:"text-right"},"Total"),cell:({row:l})=>o("div",{class:"text-right font-medium"},F(l.getValue("grand_total")))},{accessorKey:"payment_status",header:()=>"Payment",cell:({row:l})=>{const t=l.getValue("payment_status");return o(j,{variant:t==="paid"?"default":"secondary"},()=>t)}},{id:"payment_method",header:()=>"Metode",cell:({row:l})=>{const r=l.original.payments?.[0]?.method?.name;return o("div",{class:"text-sm"},{default:()=>r||"-"})}},{accessorKey:"status",header:()=>"Status",cell:({row:l})=>{const t=l.getValue("status");return o(j,{variant:X(t)},()=>t)}},{accessorKey:"created_at",header:({column:l})=>o(V,{variant:"ghost",onClick:()=>l.toggleSorting(l.getIsSorted()==="asc"),class:"-ml-4"},()=>["Tanggal",o(G,{class:"ml-2 h-4 w-4"})]),cell:({row:l})=>W(l.getValue("created_at"))},{id:"actions",header:()=>o("div",{class:"text-right"},"Actions"),cell:({row:l})=>{const t=l.original,r=[];return(Z||J)&&r.push(o(be,{href:`/admin/orders/${t.id}`},()=>o(V,{variant:"outline",size:"sm"},()=>o(ye,{class:"h-4 w-4"})))),o("div",{class:"flex justify-end gap-2"},r)}}],C=me({get data(){return p.orders.data},columns:N,getCoreRowModel:he(),getSortedRowModel:Se(),getFilteredRowModel:we(),onSortingChange:l=>P(l,v),onColumnFiltersChange:l=>P(l,I),onColumnVisibilityChange:l=>P(l,R),state:{get sorting(){return v.value},get columnFilters(){return I.value},get columnVisibility(){return R.value}},manualSorting:!0});O(v,l=>{l.length>0&&z.get("/admin/orders",{search:x.value||void 0,status:c.value!=="all"?c.value:void 0,sort_by:l[0].id,sort_order:l[0].desc?"desc":"asc"},{preserveState:!0,preserveScroll:!0})},{deep:!0});let T;return O([x,c,_],()=>{clearTimeout(T),T=setTimeout(()=>{z.get("/admin/orders",{search:x.value||void 0,status:c.value!=="all"?c.value:void 0,payment_method:_.value!=="all"?_.value:void 0,sort_by:v.value[0]?.id||"created_at",sort_order:v.value[0]?.desc?"desc":"asc"},{preserveState:!0,preserveScroll:!0})},300)}),(l,t)=>(u(),f(ue,{breadcrumbs:Q},{default:s(()=>[a(e(fe),{title:"Semua Pesanan"}),d("div",Ve,[t[21]||(t[21]=d("div",{class:"flex items-center justify-between"},[d("div",null,[d("h1",{class:"text-3xl font-bold tracking-tight"},"Semua Pesanan"),d("p",{class:"text-muted-foreground"},"Kelola semua pesanan pelanggan")])],-1)),d("div",$e,[a(e($),null,{default:s(()=>[a(e(k),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[a(e(M),{class:"text-sm font-medium"},{default:s(()=>[...t[3]||(t[3]=[i("Total Pesanan",-1)])]),_:1}),a(e(ce),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),a(e(D),null,{default:s(()=>[d("div",De,b(n.statistics.total_orders),1),t[4]||(t[4]=d("p",{class:"text-xs text-muted-foreground"},"Semua pesanan",-1))]),_:1})]),_:1}),a(e($),null,{default:s(()=>[a(e(k),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[a(e(M),{class:"text-sm font-medium"},{default:s(()=>[...t[5]||(t[5]=[i("Total Pendapatan",-1)])]),_:1}),a(e(ge),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),a(e(D),null,{default:s(()=>[d("div",ke,b(F(n.statistics.total_revenue)),1),t[6]||(t[6]=d("p",{class:"text-xs text-muted-foreground"},"Revenue keseluruhan",-1))]),_:1})]),_:1}),a(e($),null,{default:s(()=>[a(e(k),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[a(e(M),{class:"text-sm font-medium"},{default:s(()=>[...t[7]||(t[7]=[i("Pending",-1)])]),_:1}),a(e(pe),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),a(e(D),null,{default:s(()=>[d("div",Me,b(n.statistics.total_pending),1),t[8]||(t[8]=d("p",{class:"text-xs text-muted-foreground"},"Menunggu pembayaran",-1))]),_:1})]),_:1}),a(e($),null,{default:s(()=>[a(e(k),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[a(e(M),{class:"text-sm font-medium"},{default:s(()=>[...t[9]||(t[9]=[i("Selesai",-1)])]),_:1}),a(e(_e),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),a(e(D),null,{default:s(()=>[d("div",Pe,b(n.statistics.total_completed),1),t[10]||(t[10]=d("p",{class:"text-xs text-muted-foreground"},"Order selesai",-1))]),_:1})]),_:1})]),d("div",Ee,[d("div",Ie,[d("div",Re,[a(e(ve),{class:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),a(e(se),{modelValue:x.value,"onUpdate:modelValue":t[0]||(t[0]=r=>x.value=r),placeholder:"Cari nomor order atau nama pelanggan...",class:"pl-9"},null,8,["modelValue"])]),a(e(A),{modelValue:c.value,"onUpdate:modelValue":t[1]||(t[1]=r=>c.value=r)},{default:s(()=>[a(e(K),{class:"w-[180px]"},{default:s(()=>[a(e(L),{placeholder:"Semua Status"})]),_:1}),a(e(U),null,{default:s(()=>[a(e(g),{value:"all"},{default:s(()=>[...t[11]||(t[11]=[i("Semua Status",-1)])]),_:1}),a(e(g),{value:"pending"},{default:s(()=>[...t[12]||(t[12]=[i("Pending",-1)])]),_:1}),a(e(g),{value:"processing"},{default:s(()=>[...t[13]||(t[13]=[i("Processing",-1)])]),_:1}),a(e(g),{value:"shipped"},{default:s(()=>[...t[14]||(t[14]=[i("Shipped",-1)])]),_:1}),a(e(g),{value:"delivered"},{default:s(()=>[...t[15]||(t[15]=[i("Delivered",-1)])]),_:1}),a(e(g),{value:"completed"},{default:s(()=>[...t[16]||(t[16]=[i("Completed",-1)])]),_:1}),a(e(g),{value:"cancelled"},{default:s(()=>[...t[17]||(t[17]=[i("Cancelled",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(e(A),{modelValue:_.value,"onUpdate:modelValue":t[2]||(t[2]=r=>_.value=r)},{default:s(()=>[a(e(K),{class:"w-[200px]"},{default:s(()=>[a(e(L),{placeholder:"Metode Pembayaran"})]),_:1}),a(e(U),null,{default:s(()=>[a(e(g),{value:"all"},{default:s(()=>[...t[18]||(t[18]=[i("Semua Metode",-1)])]),_:1}),(u(!0),w(S,null,h(n.paymentMethods,r=>(u(),f(e(g),{key:r.id,value:r.id.toString()},{default:s(()=>[i(b(r.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),a(e(Y),null,{default:s(()=>[a(e(ee),{"as-child":""},{default:s(()=>[a(e(V),{variant:"outline",class:"ml-auto"},{default:s(()=>[t[19]||(t[19]=i(" Kolom ",-1)),a(e(xe),{class:"ml-2 h-4 w-4"})]),_:1})]),_:1}),a(e(te),{align:"end"},{default:s(()=>[(u(!0),w(S,null,h(e(C).getAllColumns().filter(r=>r.getCanHide()),r=>(u(),f(e(ae),{key:r.id,class:"capitalize","model-value":r.getIsVisible(),"onUpdate:modelValue":m=>{r.toggleVisibility(!!m)}},{default:s(()=>[i(b(r.id),1)]),_:2},1032,["model-value","onUpdate:modelValue"]))),128))]),_:1})]),_:1})]),d("div",Fe,[a(e(re),null,{default:s(()=>[a(e(oe),null,{default:s(()=>[(u(!0),w(S,null,h(e(C).getHeaderGroups(),r=>(u(),f(e(E),{key:r.id},{default:s(()=>[(u(!0),w(S,null,h(r.headers,m=>(u(),f(e(de),{key:m.id},{default:s(()=>[m.isPlaceholder?H("",!0):(u(),f(e(q),{key:0,render:m.column.columnDef.header,props:m.getContext()},null,8,["render","props"]))]),_:2},1024))),128))]),_:2},1024))),128))]),_:1}),a(e(ne),null,{default:s(()=>[e(C).getRowModel().rows?.length?(u(!0),w(S,{key:0},h(e(C).getRowModel().rows,r=>(u(),f(e(E),{key:r.id},{default:s(()=>[(u(!0),w(S,null,h(r.getVisibleCells(),m=>(u(),f(e(B),{key:m.id},{default:s(()=>[a(e(q),{render:m.column.columnDef.cell,props:m.getContext()},null,8,["render","props"])]),_:2},1024))),128))]),_:2},1024))),128)):(u(),f(e(E),{key:1},{default:s(()=>[a(e(B),{colspan:N.length,class:"h-24 text-center"},{default:s(()=>[...t[20]||(t[20]=[i(" Tidak ada data pesanan. ",-1)])]),_:1},8,["colspan"])]),_:1}))]),_:1})]),_:1})]),n.orders.last_page>1?(u(),f(le,{key:0,data:{current_page:n.orders.current_page,last_page:n.orders.last_page,per_page:n.orders.per_page,from:(n.orders.current_page-1)*n.orders.per_page+1,to:Math.min(n.orders.current_page*n.orders.per_page,n.orders.total),total:n.orders.total},url:"/admin/orders",filters:{search:x.value||void 0,status:c.value!=="all"?c.value:void 0,payment_method:_.value!=="all"?_.value:void 0,sort_by:v.value[0]?.id||"created_at",sort_order:v.value[0]?.desc?"desc":"asc"}},null,8,["data","filters"])):H("",!0)])]),_:1}))}});export{tt as default};
