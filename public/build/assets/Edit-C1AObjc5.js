import{d as Z,p as P,r as D,D as q,v as i,g as d,b as t,u as e,a0 as z,w as o,e as a,a3 as B,s as l,G as H,ad as G,K as u,c as h,t as v,J as c,ag as J,ak as O,F as p,Z as Q,x as K,Q as S}from"./vendor-BgSYH69o.js";import{i as L,_ as W,u as X}from"./AppLayout.vue_vue_type_script_setup_true_lang-BLQAiOgB.js";import{_ as $}from"./index-C6h2rSEx.js";import{_ as b}from"./Input.vue_vue_type_script_setup_true_lang-CucwjuSa.js";import{_ as k}from"./Label.vue_vue_type_script_setup_true_lang-rNa1VbjU.js";import{_ as U,a as C}from"./CardContent.vue_vue_type_script_setup_true_lang-DMT_NDq0.js";import{_ as E}from"./CardDescription.vue_vue_type_script_setup_true_lang-BxkDfeDR.js";import{_ as N}from"./CardHeader.vue_vue_type_script_setup_true_lang-CGqIWGeD.js";import{_ as M}from"./CardTitle.vue_vue_type_script_setup_true_lang-DLaLEZPb.js";import{_ as y}from"./index-N1u60vhI.js";import{_ as Y,a as ee,b as se,c as te,d as ae}from"./SelectValue.vue_vue_type_script_setup_true_lang-CM9Iafca.js";import"./index-CMWG4mbA.js";import"./AvatarFallback.vue_vue_type_script_setup_true_lang-DU4k6tzW.js";import"./AvatarImage.vue_vue_type_script_setup_true_lang-BasOtxZI.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-C9WGGbb6.js";import"./index-DqFeuJ-n.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CKeFYOA5.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-sGxRETQ-.js";const oe={class:"rounded-xl p-4 space-y-6 py-6"},re={class:"flex items-center justify-between"},le={class:"flex items-center justify-between"},de={class:"flex items-center gap-2"},ne={class:"grid gap-4 md:grid-cols-2"},ie={class:"space-y-2"},ue={key:0,class:"text-sm text-destructive"},me={class:"space-y-2"},pe={key:0,class:"text-sm text-destructive"},fe={class:"space-y-2"},ce={key:0,class:"text-sm text-destructive"},ke={class:"space-y-2"},ge={key:0,class:"text-sm text-destructive"},ve={class:"space-y-2"},_e={class:"grid gap-4 md:grid-cols-3"},xe={class:"space-y-2"},be={key:0,class:"flex items-center justify-between rounded-md border p-3"},ye={class:"font-medium"},we={class:"text-xs text-muted-foreground"},he={key:1,class:"relative"},Ve={class:"relative"},Pe={key:0,class:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md border bg-popover p-1 shadow-md"},Se=["onClick"],$e={class:"font-medium"},Ue={class:"text-xs text-muted-foreground"},Ce={key:2,class:"text-sm text-destructive"},Ee={key:1,class:"rounded-md border bg-muted p-3"},Ne={class:"text-sm font-medium"},Me={class:"space-y-2"},Ae={class:"rounded-md border bg-muted p-3"},je={class:"text-sm font-medium"},De={class:"space-y-2"},Be={class:"rounded-md border bg-muted p-3"},Ke={key:1,class:"text-sm"},Le={class:"flex items-center gap-2"},Ie={class:"text-sm text-muted-foreground"},Te={class:"space-y-4"},Fe={class:"space-y-2"},Re={key:0,class:"text-sm text-destructive"},Ze={class:"rounded-md border bg-muted p-3"},qe={key:1,class:"text-sm text-muted-foreground"},ze={class:"flex items-center gap-2"},He={class:"text-sm text-muted-foreground"},Ge={class:"grid gap-4 md:grid-cols-2"},Je={class:"space-y-2"},Oe={key:0,class:"text-sm text-destructive"},Qe={class:"space-y-2"},We={class:"flex justify-end gap-4"},vs=Z({__name:"Edit",props:{customer:{},customers:{},packages:{}},setup(m){const f=m,_=P(()=>f.customer.status===1),x=P(()=>f.customer.status===3),w=D(""),V=D(!1),j=P(()=>{if(!w.value)return f.customers;const g=w.value.toLowerCase();return f.customers.filter(s=>(s.name?.toLowerCase().includes(g)??!1)||(s.ewallet_id?.toLowerCase().includes(g)??!1)||(s.username?.toLowerCase().includes(g)??!1))}),A=P(()=>f.customers.find(g=>g.id===r.sponsor_id)),r=q({name:f.customer.name,username:f.customer.username,email:f.customer.email,phone:f.customer.phone||"",password:"",password_confirmation:"",description:f.customer.description||"",sponsor_id:f.customer.sponsor_id,package_id:f.customer.package_id}),I=g=>{r.sponsor_id=g.id,V.value=!1,w.value=""},T=()=>{r.sponsor_id=null},F=()=>{typeof window<"u"&&window.setTimeout(()=>{V.value=!1},200)},R=()=>{r.put(X.url(f.customer.id),{preserveScroll:!0,onSuccess:()=>{S.success("Data pelanggan berhasil diperbarui")},onError:g=>{const s=Object.values(g);s.length>0?(S.error(s[0]),s.length>1&&S.warning(`Terdapat ${s.length} kesalahan pada form. Silakan periksa kembali.`)):S.error("Gagal memperbarui data pelanggan. Silakan periksa data yang dimasukkan.")}})};return(g,s)=>(d(),i(p,null,[t(e(z),{title:`Edit ${m.customer.name}`},null,8,["title"]),t(W,null,{default:o(()=>[a("div",oe,[a("div",re,[s[11]||(s[11]=a("div",null,[a("h1",{class:"text-3xl font-bold"},"Edit Pelanggan"),a("p",{class:"mt-2 text-muted-foreground"}," Perbarui informasi pelanggan ")],-1)),t(e(B),{href:e(L).url()},{default:o(()=>[t(e($),{variant:"outline"},{default:o(()=>[t(e(H),{class:"mr-2 h-4 w-4"}),s[10]||(s[10]=l(" Kembali ",-1))]),_:1})]),_:1},8,["href"])]),a("form",{onSubmit:G(R,["prevent"]),class:"space-y-6"},[t(e(U),null,{default:o(()=>[t(e(N),null,{default:o(()=>[a("div",le,[a("div",null,[t(e(M),null,{default:o(()=>[...s[12]||(s[12]=[l("Informasi Akun",-1)])]),_:1}),t(e(E),null,{default:o(()=>[l("ID Ewallet: "+u(m.customer.ewallet_id),1)]),_:1})]),a("div",de,[t(e(y),{variant:"outline"},{default:o(()=>[l(" Saldo: Rp "+u(m.customer.ewallet_saldo.toLocaleString("id-ID")),1)]),_:1}),m.customer.email_verified_at?(d(),h(e(y),{key:0,variant:"default"},{default:o(()=>[...s[13]||(s[13]=[l(" Terverifikasi ",-1)])]),_:1})):(d(),h(e(y),{key:1,variant:"secondary"},{default:o(()=>[...s[14]||(s[14]=[l(" Belum Verifikasi ",-1)])]),_:1}))])])]),_:1}),t(e(C),{class:"space-y-4"},{default:o(()=>[a("div",ne,[a("div",ie,[t(e(k),{for:"name"},{default:o(()=>[...s[15]||(s[15]=[l("Nama Lengkap *",-1)])]),_:1}),t(e(b),{id:"name",modelValue:e(r).name,"onUpdate:modelValue":s[0]||(s[0]=n=>e(r).name=n),placeholder:"Masukkan nama lengkap",class:c({"border-destructive":e(r).errors.name}),required:""},null,8,["modelValue","class"]),s[16]||(s[16]=a("p",{class:"text-xs text-muted-foreground"}," Nama lengkap sesuai identitas, maksimal 255 karakter ",-1)),e(r).errors.name?(d(),i("p",ue,u(e(r).errors.name),1)):v("",!0)]),a("div",me,[t(e(k),{for:"username"},{default:o(()=>[...s[17]||(s[17]=[l("Username *",-1)])]),_:1}),t(e(b),{id:"username",modelValue:e(r).username,"onUpdate:modelValue":s[1]||(s[1]=n=>e(r).username=n),placeholder:"contoh: johndoe123",class:c({"border-destructive":e(r).errors.username}),required:""},null,8,["modelValue","class"]),s[18]||(s[18]=a("p",{class:"text-xs text-muted-foreground"}," Username untuk login. Hanya boleh huruf, angka, dash (-) dan underscore (_) ",-1)),e(r).errors.username?(d(),i("p",pe,u(e(r).errors.username),1)):v("",!0)]),a("div",fe,[t(e(k),{for:"email"},{default:o(()=>[...s[19]||(s[19]=[l("Email *",-1)])]),_:1}),t(e(b),{id:"email",modelValue:e(r).email,"onUpdate:modelValue":s[2]||(s[2]=n=>e(r).email=n),type:"email",placeholder:"nama@email.com",class:c({"border-destructive":e(r).errors.email}),required:""},null,8,["modelValue","class"]),s[20]||(s[20]=a("p",{class:"text-xs text-muted-foreground"}," Email aktif untuk menerima notifikasi dan verifikasi akun ",-1)),e(r).errors.email?(d(),i("p",ce,u(e(r).errors.email),1)):v("",!0)]),a("div",ke,[t(e(k),{for:"phone"},{default:o(()=>[...s[21]||(s[21]=[l("No. Telepon",-1)])]),_:1}),t(e(b),{id:"phone",modelValue:e(r).phone,"onUpdate:modelValue":s[3]||(s[3]=n=>e(r).phone=n),placeholder:"08xxxxxxxxxx",class:c({"border-destructive":e(r).errors.phone})},null,8,["modelValue","class"]),s[22]||(s[22]=a("p",{class:"text-xs text-muted-foreground"}," Nomor telepon aktif (opsional), maksimal 20 karakter ",-1)),e(r).errors.phone?(d(),i("p",ge,u(e(r).errors.phone),1)):v("",!0)])]),a("div",ve,[t(e(k),{for:"description"},{default:o(()=>[...s[23]||(s[23]=[l("Keterangan",-1)])]),_:1}),J(a("textarea",{id:"description","onUpdate:modelValue":s[4]||(s[4]=n=>e(r).description=n),placeholder:"Keterangan tambahan (opsional)",rows:"3",class:"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm"},null,512),[[O,e(r).description]]),s[24]||(s[24]=a("p",{class:"text-xs text-muted-foreground"}," Catatan tambahan tentang pelanggan, seperti sumber referral atau informasi penting lainnya ",-1))])]),_:1})]),_:1}),t(e(U),null,{default:o(()=>[t(e(N),null,{default:o(()=>[t(e(M),null,{default:o(()=>[...s[25]||(s[25]=[l("Informasi Jaringan MLM",-1)])]),_:1}),t(e(E),null,{default:o(()=>[_.value?(d(),i(p,{key:0},[l(" Sponsor dapat diubah untuk member Prospek ")],64)):(d(),i(p,{key:1},[l(" Data jaringan tidak dapat diubah untuk member aktif/pasif ")],64))]),_:1})]),_:1}),t(e(C),null,{default:o(()=>[a("div",_e,[a("div",xe,[t(e(k),{class:c({"text-muted-foreground":!_.value})},{default:o(()=>[...s[26]||(s[26]=[l("Sponsor",-1)])]),_:1},8,["class"]),_.value?(d(),i(p,{key:0},[A.value?(d(),i("div",be,[a("div",null,[a("p",ye,u(A.value.name),1),a("p",we,u(A.value.ewallet_id),1)]),t(e($),{type:"button",variant:"ghost",size:"sm",onClick:T},{default:o(()=>[...s[27]||(s[27]=[l(" Hapus ",-1)])]),_:1})])):(d(),i("div",he,[a("div",Ve,[t(e(b),{modelValue:w.value,"onUpdate:modelValue":s[5]||(s[5]=n=>w.value=n),onFocus:s[6]||(s[6]=n=>V.value=!0),onBlur:F,placeholder:"Cari sponsor berdasarkan nama atau ID...",class:c({"border-destructive":e(r).errors.sponsor_id})},null,8,["modelValue","class"]),t(e(Q),{class:"absolute right-3 top-3 h-4 w-4 text-muted-foreground"})]),V.value&&j.value.length>0?(d(),i("div",Pe,[(d(!0),i(p,null,K(j.value,n=>(d(),i("button",{key:n.id,type:"button",onClick:Xe=>I(n),class:"w-full rounded px-3 py-2 text-left text-sm hover:bg-accent"},[a("div",$e,u(n.name),1),a("div",Ue,u(n.ewallet_id)+" (@"+u(n.username)+")",1)],8,Se))),128))])):v("",!0)])),s[28]||(s[28]=a("p",{class:"text-xs text-muted-foreground"}," Pilih sponsor baru (opsional). Hanya member Pasif/Aktif yang dapat menjadi sponsor. ",-1)),e(r).errors.sponsor_id?(d(),i("p",Ce,u(e(r).errors.sponsor_id),1)):v("",!0)],64)):(d(),i("div",Ee,[a("p",Ne,u(m.customer.sponsor_name||"-"),1)]))]),a("div",Me,[t(e(k),{class:"text-muted-foreground"},{default:o(()=>[...s[29]||(s[29]=[l("Upline",-1)])]),_:1}),a("div",Ae,[a("p",je,u(m.customer.upline_name||"-"),1)])]),a("div",De,[t(e(k),{class:"text-muted-foreground"},{default:o(()=>[...s[30]||(s[30]=[l("Posisi",-1)])]),_:1}),a("div",Be,[m.customer.position?(d(),h(e(y),{key:0,variant:"outline"},{default:o(()=>[l(u(m.customer.position==="left"?"Kiri":"Kanan"),1)]),_:1})):(d(),i("span",Ke,"-"))])])]),a("div",{class:c(["mt-4 rounded-md border p-3",{"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-900":_.value,"bg-muted":!_.value}])},[a("div",Le,[t(e(y),{variant:_.value?"secondary":"default"},{default:o(()=>[l(u(m.customer.status===1?"Prospek":m.customer.status===2?"Pasif":"Aktif"),1)]),_:1},8,["variant"]),a("span",Ie,[_.value?(d(),i(p,{key:0},[l(" Member ini masih berstatus Prospek, sponsor dapat diubah. ")],64)):(d(),i(p,{key:1},[l(" Member ini sudah "+u(m.customer.status===2?"Pasif":"Aktif")+", jaringan tidak dapat diubah. ",1)],64))])])],2)]),_:1})]),_:1}),t(e(U),null,{default:o(()=>[t(e(N),null,{default:o(()=>[t(e(M),null,{default:o(()=>[...s[31]||(s[31]=[l("Paket Member",-1)])]),_:1}),t(e(E),null,{default:o(()=>[x.value?(d(),i(p,{key:0},[l(" Paket dapat diubah untuk member Aktif ")],64)):(d(),i(p,{key:1},[l(" Paket hanya dapat diubah untuk member dengan status Aktif ")],64))]),_:1})]),_:1}),t(e(C),null,{default:o(()=>[a("div",Te,[a("div",Fe,[t(e(k),{class:c({"text-muted-foreground":!x.value})},{default:o(()=>[...s[32]||(s[32]=[l("Paket Saat Ini",-1)])]),_:1},8,["class"]),x.value?(d(),i(p,{key:0},[t(e(Y),{modelValue:e(r).package_id,"onUpdate:modelValue":s[7]||(s[7]=n=>e(r).package_id=n)},{default:o(()=>[t(e(ee),{class:c({"border-destructive":e(r).errors.package_id})},{default:o(()=>[t(e(se),{placeholder:"Pilih paket"})]),_:1},8,["class"]),t(e(te),null,{default:o(()=>[(d(!0),i(p,null,K(m.packages,n=>(d(),h(e(ae),{key:n.id,value:n.id},{default:o(()=>[l(u(n.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),s[33]||(s[33]=a("p",{class:"text-xs text-muted-foreground"}," Pilih paket untuk member ini: ZENNER Plus, ZENNER Prime, atau ZENNER Ultra ",-1)),e(r).errors.package_id?(d(),i("p",Re,u(e(r).errors.package_id),1)):v("",!0)],64)):(d(),i(p,{key:1},[a("div",Ze,[m.customer.package_id?(d(),h(e(y),{key:0,variant:"outline"},{default:o(()=>[l(u(m.customer.package_name),1)]),_:1})):(d(),i("span",qe,"Belum ada paket"))]),s[34]||(s[34]=a("p",{class:"text-xs text-muted-foreground"}," Paket akan ditetapkan saat member melakukan pembelian pertama dan menjadi Aktif. ",-1))],64))]),a("div",{class:c(["rounded-md border p-3",{"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-900":x.value,"bg-muted":!x.value}])},[a("div",ze,[t(e(y),{variant:x.value?"default":"secondary"},{default:o(()=>[l(u(m.customer.status===1?"Prospek":m.customer.status===2?"Pasif":"Aktif"),1)]),_:1},8,["variant"]),a("span",He,[x.value?(d(),i(p,{key:0},[l(" Member Aktif - paket dapat diubah. ")],64)):(d(),i(p,{key:1},[l(" Member belum Aktif - paket tidak dapat diubah. ")],64))])])],2)])]),_:1})]),_:1}),t(e(U),null,{default:o(()=>[t(e(N),null,{default:o(()=>[t(e(M),null,{default:o(()=>[...s[35]||(s[35]=[l("Ubah Password",-1)])]),_:1}),t(e(E),null,{default:o(()=>[...s[36]||(s[36]=[l(" Kosongkan jika tidak ingin mengubah password ",-1)])]),_:1})]),_:1}),t(e(C),{class:"space-y-4"},{default:o(()=>[a("div",Ge,[a("div",Je,[t(e(k),{for:"password"},{default:o(()=>[...s[37]||(s[37]=[l("Password Baru",-1)])]),_:1}),t(e(b),{id:"password",modelValue:e(r).password,"onUpdate:modelValue":s[8]||(s[8]=n=>e(r).password=n),type:"password",placeholder:"Minimal 8 karakter",class:c({"border-destructive":e(r).errors.password})},null,8,["modelValue","class"]),s[38]||(s[38]=a("p",{class:"text-xs text-muted-foreground"}," Password minimal 8 karakter, gunakan kombinasi huruf dan angka ",-1)),e(r).errors.password?(d(),i("p",Oe,u(e(r).errors.password),1)):v("",!0)]),a("div",Qe,[t(e(k),{for:"password_confirmation"},{default:o(()=>[...s[39]||(s[39]=[l("Konfirmasi Password",-1)])]),_:1}),t(e(b),{id:"password_confirmation",modelValue:e(r).password_confirmation,"onUpdate:modelValue":s[9]||(s[9]=n=>e(r).password_confirmation=n),type:"password",placeholder:"Ulangi password"},null,8,["modelValue"]),s[40]||(s[40]=a("p",{class:"text-xs text-muted-foreground"}," Ketik ulang password baru yang sama untuk konfirmasi ",-1))])])]),_:1})]),_:1}),a("div",We,[t(e(B),{href:e(L).url()},{default:o(()=>[t(e($),{type:"button",variant:"outline"},{default:o(()=>[...s[41]||(s[41]=[l(" Batal ",-1)])]),_:1})]),_:1},8,["href"]),t(e($),{type:"submit",disabled:e(r).processing},{default:o(()=>[l(u(e(r).processing?"Menyimpan...":"Simpan Perubahan"),1)]),_:1},8,["disabled"])])],32)])]),_:1})],64))}});export{vs as default};
