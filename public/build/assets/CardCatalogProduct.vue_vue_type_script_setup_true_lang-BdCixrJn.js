import{d as A,r as w,p as y,v as f,g as u,b as r,w as o,u as s,e as a,c as _,t as C,s as x,K as i,ad as S,bh as R,J as b,a1 as z,I as H,aT as N,F as V,a3 as F,h as D,Q as n,j as m}from"./vendor-BcJu9AAH.js";import{_ as v}from"./index-DdPgXMF5.js";import{_ as $}from"./index-B-HLTJ14.js";import{_ as W,a as L}from"./CardContent.vue_vue_type_script_setup_true_lang-D_ByHwkr.js";const O={itemscope:"",itemtype:"https://schema.org/Product",class:"h-full"},q={class:"relative overflow-hidden rounded-xl bg-muted/20"},E={class:"relative h-44 w-full sm:h-56 lg:h-64"},J=["src","alt"],K={class:"absolute top-3 left-3 flex flex-col gap-1"},M={class:"absolute top-3 right-3 flex flex-wrap justify-end gap-1.5 sm:flex-col sm:items-end sm:gap-2"},Q={class:"flex flex-wrap justify-end gap-1.5 sm:flex-col sm:items-end sm:gap-2"},U={class:"flex flex-wrap items-center gap-2 text-[11px] font-medium text-muted-foreground sm:text-xs"},X={class:"flex items-center gap-1.5",itemprop:"aggregateRating",itemscope:"",itemtype:"https://schema.org/AggregateRating"},Y=["content"],Z=["content"],ee={class:"text-foreground"},te={key:1,class:"text-muted-foreground"},ae={class:"space-y-2"},se={class:"font-semibold leading-tight text-foreground line-clamp-2 text-sm sm:text-base md:text-lg lg:text-xl break-words",itemprop:"name"},re={class:"mt-auto space-y-1.5",itemprop:"offers",itemscope:"",itemtype:"https://schema.org/Offer"},oe=["content"],ie=["content"],le=["href"],ne={class:"flex flex-wrap items-baseline justify-between gap-x-2 gap-y-1 text-gray-900 dark:text-gray-100"},de={class:"font-bold text-base sm:text-lg md:text-xl lg:text-2xl"},ce={key:0,class:"line-through text-muted-foreground text-[10px] sm:text-xs md:text-sm"},he=A({__name:"CardCatalogProduct",props:{product:{}},setup(e){const g=e,p=w(!1),h=w(!1),d=w(!1),c=y(()=>g.product.stock>0),P=y(()=>c.value?"Ready Stock":"Stok Habis"),B=y(()=>c.value?"bg-emerald-100 text-emerald-700 hover:bg-emerald-100":"bg-destructive/10 text-destructive hover:bg-destructive/10"),j=l=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(l),I=async l=>{if(l.preventDefault(),l.stopPropagation(),!(p.value||!c.value)){p.value=!0;try{const t=await D.post("/cart/add",{product_id:g.product.id,quantity:1});t.data.success?(n.success("Berhasil",{description:t.data.message||"Produk berhasil ditambahkan ke keranjang."}),m.reload({only:["ecommerce"]})):n.error("Gagal",{description:t.data.message||"Gagal menambahkan ke keranjang."})}catch(t){if(console.error("Add to cart error:",t),t.response?.status===401){n.error("Autentikasi Diperlukan",{description:t.response.data.message||"Anda harus login terlebih dahulu."}),t.response.data.redirect?m.visit(t.response.data.redirect):m.visit("/client/login");return}n.error("Gagal",{description:"Gagal menambahkan ke keranjang. Silakan coba lagi."})}finally{p.value=!1}}},T=async l=>{if(l.preventDefault(),l.stopPropagation(),!h.value){h.value=!0;try{const t=d.value?"/wishlist/remove":"/wishlist/add",k=await D.post(t,{product_id:g.product.id});k.data.success?(d.value=!d.value,n.success("Berhasil",{description:k.data.message||`Produk berhasil ${d.value?"ditambahkan ke":"dihapus dari"} wishlist.`}),m.reload({only:["ecommerce"]})):n.error("Gagal",{description:k.data.message||"Gagal memperbarui wishlist."})}catch(t){if(console.error("Wishlist error:",t),t.response?.status===401){n.error("Autentikasi Diperlukan",{description:t.response.data.message||"Anda harus login terlebih dahulu."}),t.response.data.redirect?m.visit(t.response.data.redirect):m.visit("/client/login");return}n.error("Gagal",{description:"Gagal memperbarui wishlist. Silakan coba lagi."})}finally{h.value=!1}}},G=()=>{m.visit(`/produk/${g.product.slug}`)};return(l,t)=>(u(),f("article",O,[r(s(F),{href:`/produk/${e.product.slug}`,class:"group block h-full","aria-label":`Lihat detail produk ${e.product.name}`},{default:o(()=>[r(s(W),{class:"group flex h-full flex-col gap-0 rounded-2xl border border-border/90 bg-background/95 p-3 transition-all hover:-translate-y-0.5 hover:shadow-lg sm:p-5"},{default:o(()=>[a("div",q,[a("div",E,[a("img",{src:e.product.image,alt:`${e.product.name} - ${e.product.description||"Produk berkualitas"}`,class:"absolute inset-0 h-full w-full object-cover transition-transform duration-500 group-hover:scale-105",loading:"lazy",width:"500",height:"500",itemprop:"image"},null,8,J)]),a("div",K,[e.product.discount_percentage>0?(u(),_(s(v),{key:0,variant:"destructive",class:"text-xs px-2 py-0.5"},{default:o(()=>[x(" -"+i(e.product.discount_percentage)+"% ",1)]),_:1})):e.product.badge?(u(),_(s(v),{key:1,class:"text-xs px-2 py-0.5 border-0 bg-primary text-primary-foreground"},{default:o(()=>[x(i(e.product.badge),1)]),_:1})):C("",!0)]),a("div",M,[e.product.is_new?(u(),_(s(v),{key:0,variant:"secondary",class:"text-xs px-2 py-0.5 bg-green-500 text-white"},{default:o(()=>[...t[0]||(t[0]=[x(" BARU ",-1)])]),_:1})):C("",!0),a("div",Q,[r(s($),{size:"icon",variant:d.value?"default":"secondary",class:"rounded-lg bg-white/95 p-0 text-foreground shadow-sm backdrop-blur hover:bg-white h-8 w-8 /* HP kecil */ sm:h-9 sm:w-9 /* HP lebar */ md:h-10 md:w-10 /* Tablet */ lg:h-11 lg:w-11 /* Desktop */",onClick:S(T,["prevent","stop"]),disabled:h.value,"aria-label":d.value?"Hapus dari wishlist":"Tambah ke wishlist"},{default:o(()=>[r(s(R),{class:b(["transition-colors","h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5",d.value?"fill-red-500 text-red-500":"text-muted-foreground"])},null,8,["class"])]),_:1},8,["variant","disabled","aria-label"]),r(s($),{size:"icon",variant:"default",class:"rounded-lg bg-primary text-primary-foreground shadow-sm hover:bg-primary/90 h-8 w-8 sm:h-9 sm:w-9 md:h-10 md:w-10 lg:h-11 lg:w-11",onClick:S(I,["prevent","stop"]),disabled:p.value||!c.value,"aria-label":c.value?"Tambah ke keranjang":"Stok habis"},{default:o(()=>[r(s(z),{class:b(["transition-transform","h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5",p.value?"animate-bounce":""])},null,8,["class"])]),_:1},8,["disabled","aria-label"]),r(s($),{size:"icon",variant:"secondary",class:"rounded-lg p-0 text-foreground shadow-sm backdrop-blur h-8 w-8 sm:h-9 sm:w-9 md:h-10 md:w-10 lg:h-11 lg:w-11",onClick:S(G,["prevent","stop"]),"aria-label":"Lihat detail produk"},{default:o(()=>[r(s(H),{class:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5"})]),_:1})])])]),r(s(L),{class:"flex flex-1 flex-col gap-3 px-0 pt-4 sm:gap-4 sm:pt-5"},{default:o(()=>[a("div",U,[a("div",X,[r(s(N),{class:"h-4 w-4 text-yellow-400"}),e.product.rating?(u(),f(V,{key:0},[a("meta",{itemprop:"ratingValue",content:e.product.rating.toString()},null,8,Y),a("meta",{itemprop:"reviewCount",content:e.product.review_count?.toString()||"0"},null,8,Z),a("span",ee,i(e.product.rating),1),a("span",null,"("+i(e.product.review_count||0)+")",1)],64)):(u(),f("span",te,"Belum ada ulasan"))]),t[1]||(t[1]=a("span",{class:"hidden h-1 w-1 rounded-full bg-border sm:inline-flex","aria-hidden":"true"},null,-1)),r(s(v),{variant:"secondary",class:b(["border-0 text-[10px] font-semibold uppercase tracking-wide",B.value])},{default:o(()=>[x(i(P.value),1)]),_:1},8,["class"])]),a("div",ae,[a("span",se,i(e.product.name),1)]),a("div",re,[t[2]||(t[2]=a("meta",{itemprop:"priceCurrency",content:"IDR"},null,-1)),a("meta",{itemprop:"price",content:e.product.price.toString()},null,8,oe),a("meta",{itemprop:"availability",content:e.product.stock>0?"https://schema.org/InStock":"https://schema.org/OutOfStock"},null,8,ie),a("link",{itemprop:"url",href:`/produk/${e.product.slug}`},null,8,le),a("div",ne,[a("span",de,i(j(e.product.price)),1),e.product.original_price&&e.product.discount_percentage>0?(u(),f("span",ce,i(j(e.product.original_price)),1)):C("",!0)]),a("p",{class:b(["text-[11px] font-medium",c.value?"text-emerald-600":"text-destructive"])},i(c.value?"Siap dikirim 24 jam":"Sedang tidak tersedia"),3)])]),_:1})]),_:1})]),_:1},8,["href","aria-label"])]))}});export{he as _};
